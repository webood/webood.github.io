var ZC=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var HRe=ZC((YC,vy)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function yy(n,e){const t=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)t[i[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const Wt={},zc=[],sr=()=>{},JC=()=>!1,KC=/^on[^a-z]/,Wp=n=>KC.test(n),_y=n=>n.startsWith("onUpdate:"),nn=Object.assign,xy=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},QC=Object.prototype.hasOwnProperty,gt=(n,e)=>QC.call(n,e),Ze=Array.isArray,Uc=n=>$p(n)==="[object Map]",TE=n=>$p(n)==="[object Set]",it=n=>typeof n=="function",Yt=n=>typeof n=="string",by=n=>typeof n=="symbol",Ht=n=>n!==null&&typeof n=="object",AE=n=>Ht(n)&&it(n.then)&&it(n.catch),CE=Object.prototype.toString,$p=n=>CE.call(n),e3=n=>$p(n).slice(8,-1),LE=n=>$p(n)==="[object Object]",wy=n=>Yt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,qd=yy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qp=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},t3=/-(\w)/g,Gr=qp(n=>n.replace(t3,(e,t)=>t?t.toUpperCase():"")),n3=/\B([A-Z])/g,bl=qp(n=>n.replace(n3,"-$1").toLowerCase()),jp=qp(n=>n.charAt(0).toUpperCase()+n.slice(1)),Im=qp(n=>n?`on${jp(n)}`:""),ih=(n,e)=>!Object.is(n,e),Dm=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},np=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},i3=n=>{const e=parseFloat(n);return isNaN(e)?n:e},r3=n=>{const e=Yt(n)?Number(n):NaN;return isNaN(e)?n:e};let Mx;const Iv=()=>Mx||(Mx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function My(n){if(Ze(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=Yt(i)?c3(i):My(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(Yt(n))return n;if(Ht(n))return n}}const s3=/;(?![^(]*\))/g,o3=/:([^]+)/,a3=/\/\*[^]*?\*\//g;function c3(n){const e={};return n.replace(a3,"").split(s3).forEach(t=>{if(t){const i=t.split(o3);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function rh(n){let e="";if(Yt(n))e=n;else if(Ze(n))for(let t=0;t<n.length;t++){const i=rh(n[t]);i&&(e+=i+" ")}else if(Ht(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const l3="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",u3=yy(l3);function RE(n){return!!n||n===""}const Dv=n=>Yt(n)?n:n==null?"":Ze(n)||Ht(n)&&(n.toString===CE||!it(n.toString))?JSON.stringify(n,PE,2):String(n),PE=(n,e)=>e&&e.__v_isRef?PE(n,e.value):Uc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r])=>(t[`${i} =>`]=r,t),{})}:TE(e)?{[`Set(${e.size})`]:[...e.values()]}:Ht(e)&&!Ze(e)&&!LE(e)?String(e):e;let er;class h3{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=er,!e&&er&&(this.index=(er.scopes||(er.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=er;try{return er=this,e()}finally{er=t}}}on(){er=this}off(){er=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function f3(n,e=er){e&&e.active&&e.effects.push(n)}function d3(){return er}const Sy=n=>{const e=new Set(n);return e.w=0,e.n=0,e},IE=n=>(n.w&bo)>0,DE=n=>(n.n&bo)>0,p3=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=bo},m3=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const r=e[i];IE(r)&&!DE(r)?r.delete(n):e[t++]=r,r.w&=~bo,r.n&=~bo}e.length=t}},Fv=new WeakMap;let yu=0,bo=1;const Ov=30;let tr;const ua=Symbol(""),kv=Symbol("");class Ey{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,f3(this,i)}run(){if(!this.active)return this.fn();let e=tr,t=uo;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=tr,tr=this,uo=!0,bo=1<<++yu,yu<=Ov?p3(this):Sx(this),this.fn()}finally{yu<=Ov&&m3(this),bo=1<<--yu,tr=this.parent,uo=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){tr===this?this.deferStop=!0:this.active&&(Sx(this),this.onStop&&this.onStop(),this.active=!1)}}function Sx(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let uo=!0;const FE=[];function wl(){FE.push(uo),uo=!1}function Ml(){const n=FE.pop();uo=n===void 0?!0:n}function ci(n,e,t){if(uo&&tr){let i=Fv.get(n);i||Fv.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=Sy()),OE(r)}}function OE(n,e){let t=!1;yu<=Ov?DE(n)||(n.n|=bo,t=!IE(n)):t=!n.has(tr),t&&(n.add(tr),tr.deps.push(n))}function ws(n,e,t,i,r,s){const o=Fv.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Ze(n)){const c=Number(i);o.forEach((l,u)=>{(u==="length"||u>=c)&&a.push(l)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Ze(n)?wy(t)&&a.push(o.get("length")):(a.push(o.get(ua)),Uc(n)&&a.push(o.get(kv)));break;case"delete":Ze(n)||(a.push(o.get(ua)),Uc(n)&&a.push(o.get(kv)));break;case"set":Uc(n)&&a.push(o.get(ua));break}if(a.length===1)a[0]&&Nv(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Nv(Sy(c))}}function Nv(n,e){const t=Ze(n)?n:[...n];for(const i of t)i.computed&&Ex(i);for(const i of t)i.computed||Ex(i)}function Ex(n,e){(n!==tr||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const g3=yy("__proto__,__v_isRef,__isVue"),kE=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(by)),v3=Ty(),y3=Ty(!1,!0),_3=Ty(!0),Tx=x3();function x3(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=yt(this);for(let s=0,o=this.length;s<o;s++)ci(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(yt)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){wl();const i=yt(this)[e].apply(this,t);return Ml(),i}}),n}function b3(n){const e=yt(this);return ci(e,"has",n),e.hasOwnProperty(n)}function Ty(n=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(n?e?N3:HE:e?UE:zE).get(i))return i;const o=Ze(i);if(!n){if(o&&gt(Tx,r))return Reflect.get(Tx,r,s);if(r==="hasOwnProperty")return b3}const a=Reflect.get(i,r,s);return(by(r)?kE.has(r):g3(r))||(n||ci(i,"get",r),e)?a:Nn(a)?o&&wy(r)?a:a.value:Ht(a)?n?GE(a):$n(a):a}}const w3=NE(),M3=NE(!0);function NE(n=!1){return function(t,i,r,s){let o=t[i];if(Kc(o)&&Nn(o)&&!Nn(r))return!1;if(!n&&(!ip(r)&&!Kc(r)&&(o=yt(o),r=yt(r)),!Ze(t)&&Nn(o)&&!Nn(r)))return o.value=r,!0;const a=Ze(t)&&wy(i)?Number(i)<t.length:gt(t,i),c=Reflect.set(t,i,r,s);return t===yt(s)&&(a?ih(r,o)&&ws(t,"set",i,r):ws(t,"add",i,r)),c}}function S3(n,e){const t=gt(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&ws(n,"delete",e,void 0),i}function E3(n,e){const t=Reflect.has(n,e);return(!by(e)||!kE.has(e))&&ci(n,"has",e),t}function T3(n){return ci(n,"iterate",Ze(n)?"length":ua),Reflect.ownKeys(n)}const BE={get:v3,set:w3,deleteProperty:S3,has:E3,ownKeys:T3},A3={get:_3,set(n,e){return!0},deleteProperty(n,e){return!0}},C3=nn({},BE,{get:y3,set:M3}),Ay=n=>n,Xp=n=>Reflect.getPrototypeOf(n);function af(n,e,t=!1,i=!1){n=n.__v_raw;const r=yt(n),s=yt(e);t||(e!==s&&ci(r,"get",e),ci(r,"get",s));const{has:o}=Xp(r),a=i?Ay:t?Ry:sh;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function cf(n,e=!1){const t=this.__v_raw,i=yt(t),r=yt(n);return e||(n!==r&&ci(i,"has",n),ci(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function lf(n,e=!1){return n=n.__v_raw,!e&&ci(yt(n),"iterate",ua),Reflect.get(n,"size",n)}function Ax(n){n=yt(n);const e=yt(this);return Xp(e).has.call(e,n)||(e.add(n),ws(e,"add",n,n)),this}function Cx(n,e){e=yt(e);const t=yt(this),{has:i,get:r}=Xp(t);let s=i.call(t,n);s||(n=yt(n),s=i.call(t,n));const o=r.call(t,n);return t.set(n,e),s?ih(e,o)&&ws(t,"set",n,e):ws(t,"add",n,e),this}function Lx(n){const e=yt(this),{has:t,get:i}=Xp(e);let r=t.call(e,n);r||(n=yt(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&ws(e,"delete",n,void 0),s}function Rx(){const n=yt(this),e=n.size!==0,t=n.clear();return e&&ws(n,"clear",void 0,void 0),t}function uf(n,e){return function(i,r){const s=this,o=s.__v_raw,a=yt(o),c=e?Ay:n?Ry:sh;return!n&&ci(a,"iterate",ua),o.forEach((l,u)=>i.call(r,c(l),c(u),s))}}function hf(n,e,t){return function(...i){const r=this.__v_raw,s=yt(r),o=Uc(s),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,l=r[n](...i),u=t?Ay:e?Ry:sh;return!e&&ci(s,"iterate",c?kv:ua),{next(){const{value:h,done:f}=l.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Fs(n){return function(...e){return n==="delete"?!1:this}}function L3(){const n={get(s){return af(this,s)},get size(){return lf(this)},has:cf,add:Ax,set:Cx,delete:Lx,clear:Rx,forEach:uf(!1,!1)},e={get(s){return af(this,s,!1,!0)},get size(){return lf(this)},has:cf,add:Ax,set:Cx,delete:Lx,clear:Rx,forEach:uf(!1,!0)},t={get(s){return af(this,s,!0)},get size(){return lf(this,!0)},has(s){return cf.call(this,s,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:uf(!0,!1)},i={get(s){return af(this,s,!0,!0)},get size(){return lf(this,!0)},has(s){return cf.call(this,s,!0)},add:Fs("add"),set:Fs("set"),delete:Fs("delete"),clear:Fs("clear"),forEach:uf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=hf(s,!1,!1),t[s]=hf(s,!0,!1),e[s]=hf(s,!1,!0),i[s]=hf(s,!0,!0)}),[n,t,e,i]}const[R3,P3,I3,D3]=L3();function Cy(n,e){const t=e?n?D3:I3:n?P3:R3;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(gt(t,r)&&r in i?t:i,r,s)}const F3={get:Cy(!1,!1)},O3={get:Cy(!1,!0)},k3={get:Cy(!0,!1)},zE=new WeakMap,UE=new WeakMap,HE=new WeakMap,N3=new WeakMap;function B3(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function z3(n){return n.__v_skip||!Object.isExtensible(n)?0:B3(e3(n))}function $n(n){return Kc(n)?n:Ly(n,!1,BE,F3,zE)}function U3(n){return Ly(n,!1,C3,O3,UE)}function GE(n){return Ly(n,!0,A3,k3,HE)}function Ly(n,e,t,i,r){if(!Ht(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=z3(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function Hc(n){return Kc(n)?Hc(n.__v_raw):!!(n&&n.__v_isReactive)}function Kc(n){return!!(n&&n.__v_isReadonly)}function ip(n){return!!(n&&n.__v_isShallow)}function VE(n){return Hc(n)||Kc(n)}function yt(n){const e=n&&n.__v_raw;return e?yt(e):n}function WE(n){return np(n,"__v_skip",!0),n}const sh=n=>Ht(n)?$n(n):n,Ry=n=>Ht(n)?GE(n):n;function $E(n){uo&&tr&&(n=yt(n),OE(n.dep||(n.dep=Sy())))}function qE(n,e){n=yt(n);const t=n.dep;t&&Nv(t)}function Nn(n){return!!(n&&n.__v_isRef===!0)}function nr(n){return jE(n,!1)}function H3(n){return jE(n,!0)}function jE(n,e){return Nn(n)?n:new G3(n,e)}class G3{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:yt(e),this._value=t?e:sh(e)}get value(){return $E(this),this._value}set value(e){const t=this.__v_isShallow||ip(e)||Kc(e);e=t?e:yt(e),ih(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:sh(e),qE(this))}}function ea(n){return Nn(n)?n.value:n}const V3={get:(n,e,t)=>ea(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return Nn(r)&&!Nn(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function XE(n){return Hc(n)?n:new Proxy(n,V3)}class W3{constructor(e,t,i,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ey(e,()=>{this._dirty||(this._dirty=!0,qE(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=yt(this);return $E(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function $3(n,e,t=!1){let i,r;const s=it(n);return s?(i=n,r=sr):(i=n.get,r=n.set),new W3(i,r,s||!r,t)}function ho(n,e,t,i){let r;try{r=i?n(...i):n()}catch(s){Yp(s,e,t)}return r}function ki(n,e,t,i){if(it(n)){const s=ho(n,e,t,i);return s&&AE(s)&&s.catch(o=>{Yp(o,e,t)}),s}const r=[];for(let s=0;s<n.length;s++)r.push(ki(n[s],e,t,i));return r}function Yp(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const l=s.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](n,o,a)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){ho(c,null,10,[n,o,a]);return}}q3(n,t,r,i)}function q3(n,e,t,i=!0){console.error(n)}let oh=!1,Bv=!1;const Fn=[];let Rr=0;const Gc=[];let gs=null,ta=0;const YE=Promise.resolve();let Py=null;function Zp(n){const e=Py||YE;return n?e.then(this?n.bind(this):n):e}function j3(n){let e=Rr+1,t=Fn.length;for(;e<t;){const i=e+t>>>1;ah(Fn[i])<n?e=i+1:t=i}return e}function Iy(n){(!Fn.length||!Fn.includes(n,oh&&n.allowRecurse?Rr+1:Rr))&&(n.id==null?Fn.push(n):Fn.splice(j3(n.id),0,n),ZE())}function ZE(){!oh&&!Bv&&(Bv=!0,Py=YE.then(KE))}function X3(n){const e=Fn.indexOf(n);e>Rr&&Fn.splice(e,1)}function Y3(n){Ze(n)?Gc.push(...n):(!gs||!gs.includes(n,n.allowRecurse?ta+1:ta))&&Gc.push(n),ZE()}function Px(n,e=oh?Rr+1:0){for(;e<Fn.length;e++){const t=Fn[e];t&&t.pre&&(Fn.splice(e,1),e--,t())}}function JE(n){if(Gc.length){const e=[...new Set(Gc)];if(Gc.length=0,gs){gs.push(...e);return}for(gs=e,gs.sort((t,i)=>ah(t)-ah(i)),ta=0;ta<gs.length;ta++)gs[ta]();gs=null,ta=0}}const ah=n=>n.id==null?1/0:n.id,Z3=(n,e)=>{const t=ah(n)-ah(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function KE(n){Bv=!1,oh=!0,Fn.sort(Z3);const e=sr;try{for(Rr=0;Rr<Fn.length;Rr++){const t=Fn[Rr];t&&t.active!==!1&&ho(t,null,14)}}finally{Rr=0,Fn.length=0,JE(),oh=!1,Py=null,(Fn.length||Gc.length)&&KE()}}function J3(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Wt;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||Wt;f&&(r=t.map(d=>Yt(d)?d.trim():d)),h&&(r=t.map(i3))}let a,c=i[a=Im(e)]||i[a=Im(Gr(e))];!c&&s&&(c=i[a=Im(bl(e))]),c&&ki(c,n,6,r);const l=i[a+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,ki(l,n,6,r)}}function QE(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!it(n)){const c=l=>{const u=QE(l,e,!0);u&&(a=!0,nn(o,u))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!s&&!a?(Ht(n)&&i.set(n,null),null):(Ze(s)?s.forEach(c=>o[c]=null):nn(o,s),Ht(n)&&i.set(n,o),o)}function Jp(n,e){return!n||!Wp(e)?!1:(e=e.slice(2).replace(/Once$/,""),gt(n,e[0].toLowerCase()+e.slice(1))||gt(n,bl(e))||gt(n,e))}let Fi=null,Kp=null;function rp(n){const e=Fi;return Fi=n,Kp=n&&n.type.__scopeId||null,e}function Dy(n){Kp=n}function Fy(){Kp=null}function yc(n,e=Fi,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&Wx(-1);const s=rp(e);let o;try{o=n(...r)}finally{rp(s),i._d&&Wx(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Fm(n){const{type:e,vnode:t,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:f,setupState:d,ctx:p,inheritAttrs:v}=n;let y,g;const m=rp(n);try{if(t.shapeFlag&4){const b=r||i;y=Tr(u.call(b,b,h,s,d,f,p)),g=c}else{const b=e;y=Tr(b.length>1?b(s,{attrs:c,slots:a,emit:l}):b(s,null)),g=e.props?c:K3(c)}}catch(b){Fu.length=0,Yp(b,n,1),y=Ce(Ni)}let w=y;if(g&&v!==!1){const b=Object.keys(g),{shapeFlag:E}=w;b.length&&E&7&&(o&&b.some(_y)&&(g=Q3(g,o)),w=wo(w,g))}return t.dirs&&(w=wo(w),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&(w.transition=t.transition),y=w,rp(m),y}const K3=n=>{let e;for(const t in n)(t==="class"||t==="style"||Wp(t))&&((e||(e={}))[t]=n[t]);return e},Q3=(n,e)=>{const t={};for(const i in n)(!_y(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function eL(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:c}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return i?Ix(i,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!Jp(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Ix(i,o,l):!0:!!o;return!1}function Ix(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!Jp(t,s))return!0}return!1}function tL({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const nL=n=>n.__isSuspense;function iL(n,e){e&&e.pendingBranch?Ze(n)?e.effects.push(...n):e.effects.push(n):Y3(n)}function Qp(n,e){return Oy(n,null,e)}const ff={};function kr(n,e,t){return Oy(n,e,t)}function Oy(n,e,{immediate:t,deep:i,flush:r,onTrack:s,onTrigger:o}=Wt){var a;const c=d3()===((a=_n)==null?void 0:a.scope)?_n:null;let l,u=!1,h=!1;if(Nn(n)?(l=()=>n.value,u=ip(n)):Hc(n)?(l=()=>n,i=!0):Ze(n)?(h=!0,u=n.some(b=>Hc(b)||ip(b)),l=()=>n.map(b=>{if(Nn(b))return b.value;if(Hc(b))return Ac(b);if(it(b))return ho(b,c,2)})):it(n)?e?l=()=>ho(n,c,2):l=()=>{if(!(c&&c.isUnmounted))return f&&f(),ki(n,c,3,[d])}:l=sr,e&&i){const b=l;l=()=>Ac(b())}let f,d=b=>{f=m.onStop=()=>{ho(b,c,4)}},p;if(hh)if(d=sr,e?t&&ki(e,c,3,[l(),h?[]:void 0,d]):l(),r==="sync"){const b=JL();p=b.__watcherHandles||(b.__watcherHandles=[])}else return sr;let v=h?new Array(n.length).fill(ff):ff;const y=()=>{if(m.active)if(e){const b=m.run();(i||u||(h?b.some((E,S)=>ih(E,v[S])):ih(b,v)))&&(f&&f(),ki(e,c,3,[b,v===ff?void 0:h&&v[0]===ff?[]:v,d]),v=b)}else m.run()};y.allowRecurse=!!e;let g;r==="sync"?g=y:r==="post"?g=()=>ti(y,c&&c.suspense):(y.pre=!0,c&&(y.id=c.uid),g=()=>Iy(y));const m=new Ey(l,g);e?t?y():v=m.run():r==="post"?ti(m.run.bind(m),c&&c.suspense):m.run();const w=()=>{m.stop(),c&&c.scope&&xy(c.scope.effects,m)};return p&&p.push(w),w}function rL(n,e,t){const i=this.proxy,r=Yt(n)?n.includes(".")?eT(i,n):()=>i[n]:n.bind(i,i);let s;it(e)?s=e:(s=e.handler,t=e);const o=_n;Qc(this);const a=Oy(r,s.bind(i),t);return o?Qc(o):ha(),a}function eT(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function Ac(n,e){if(!Ht(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),Nn(n))Ac(n.value,e);else if(Ze(n))for(let t=0;t<n.length;t++)Ac(n[t],e);else if(TE(n)||Uc(n))n.forEach(t=>{Ac(t,e)});else if(LE(n))for(const t in n)Ac(n[t],e);return n}function Uo(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let c=a.dir[i];c&&(wl(),ki(c,t,8,[n.el,a,n,e]),Ml())}}function tT(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bt(()=>{n.isMounted=!0}),Yh(()=>{n.isUnmounting=!0}),n}const Pi=[Function,Array],nT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pi,onEnter:Pi,onAfterEnter:Pi,onEnterCancelled:Pi,onBeforeLeave:Pi,onLeave:Pi,onAfterLeave:Pi,onLeaveCancelled:Pi,onBeforeAppear:Pi,onAppear:Pi,onAfterAppear:Pi,onAppearCancelled:Pi},sL={name:"BaseTransition",props:nT,setup(n,{slots:e}){const t=Vy(),i=tT();let r;return()=>{const s=e.default&&ky(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const v of s)if(v.type!==Ni){o=v;break}}const a=yt(n),{mode:c}=a;if(i.isLeaving)return Om(o);const l=Dx(o);if(!l)return Om(o);const u=ch(l,a,i,t);lh(l,u);const h=t.subTree,f=h&&Dx(h);let d=!1;const{getTransitionKey:p}=l.type;if(p){const v=p();r===void 0?r=v:v!==r&&(r=v,d=!0)}if(f&&f.type!==Ni&&(!na(l,f)||d)){const v=ch(f,a,i,t);if(lh(f,v),c==="out-in")return i.isLeaving=!0,v.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},Om(o);c==="in-out"&&l.type!==Ni&&(v.delayLeave=(y,g,m)=>{const w=iT(i,f);w[String(f.key)]=f,y._leaveCb=()=>{g(),y._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=m})}return o}}},oL=sL;function iT(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function ch(n,e,t,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,w=String(n.key),b=iT(t,n),E=(N,z)=>{N&&ki(N,i,9,z)},S=(N,z)=>{const _=z[1];E(N,z),Ze(N)?N.every(x=>x.length<=1)&&_():N.length<=1&&_()},P={mode:s,persisted:o,beforeEnter(N){let z=a;if(!t.isMounted)if(r)z=v||a;else return;N._leaveCb&&N._leaveCb(!0);const _=b[w];_&&na(n,_)&&_.el._leaveCb&&_.el._leaveCb(),E(z,[N])},enter(N){let z=c,_=l,x=u;if(!t.isMounted)if(r)z=y||c,_=g||l,x=m||u;else return;let T=!1;const A=N._enterCb=M=>{T||(T=!0,M?E(x,[N]):E(_,[N]),P.delayedLeave&&P.delayedLeave(),N._enterCb=void 0)};z?S(z,[N,A]):A()},leave(N,z){const _=String(n.key);if(N._enterCb&&N._enterCb(!0),t.isUnmounting)return z();E(h,[N]);let x=!1;const T=N._leaveCb=A=>{x||(x=!0,z(),A?E(p,[N]):E(d,[N]),N._leaveCb=void 0,b[_]===n&&delete b[_])};b[_]=n,f?S(f,[N,T]):T()},clone(N){return ch(N,e,t,i)}};return P}function Om(n){if(em(n))return n=wo(n),n.children=null,n}function Dx(n){return em(n)?n.children?n.children[0]:void 0:n}function lh(n,e){n.shapeFlag&6&&n.component?lh(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function ky(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===on?(o.patchFlag&128&&r++,i=i.concat(ky(o.children,e,a))):(e||o.type!==Ni)&&i.push(a!=null?wo(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function hr(n,e){return it(n)?(()=>nn({name:n.name},e,{setup:n}))():n}const jd=n=>!!n.type.__asyncLoader,em=n=>n.type.__isKeepAlive;function aL(n,e){rT(n,"a",e)}function cL(n,e){rT(n,"da",e)}function rT(n,e,t=_n){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(tm(e,i,t),t){let r=t.parent;for(;r&&r.parent;)em(r.parent.vnode)&&lL(i,e,t,r),r=r.parent}}function lL(n,e,t,i){const r=tm(e,n,i,!0);By(()=>{xy(i[e],r)},t)}function tm(n,e,t=_n,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;wl(),Qc(t);const a=ki(e,t,n,o);return ha(),Ml(),a});return i?r.unshift(s):r.push(s),s}}const As=n=>(e,t=_n)=>(!hh||n==="sp")&&tm(n,(...i)=>e(...i),t),uL=As("bm"),Bt=As("m"),hL=As("bu"),Ny=As("u"),Yh=As("bum"),By=As("um"),fL=As("sp"),dL=As("rtg"),pL=As("rtc");function mL(n,e=_n){tm("ec",n,e)}const sT="components",oT=Symbol.for("v-ndc");function zv(n){return Yt(n)?gL(sT,n,!1)||n:n||oT}function gL(n,e,t=!0,i=!1){const r=Fi||_n;if(r){const s=r.type;if(n===sT){const a=XL(s,!1);if(a&&(a===e||a===Gr(e)||a===jp(Gr(e))))return s}const o=Fx(r[n]||s[n],e)||Fx(r.appContext[n],e);return!o&&i?s:o}}function Fx(n,e){return n&&(n[e]||n[Gr(e)]||n[jp(Gr(e))])}function Uv(n,e,t,i){let r;const s=t&&t[i];if(Ze(n)||Yt(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(Ht(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(n[l],l,a,s&&s[a])}}else r=[];return t&&(t[i]=r),r}const Hv=n=>n?vT(n)?$y(n)||n.proxy:Hv(n.parent):null,Iu=nn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Hv(n.parent),$root:n=>Hv(n.root),$emit:n=>n.emit,$options:n=>zy(n),$forceUpdate:n=>n.f||(n.f=()=>Iy(n.update)),$nextTick:n=>n.n||(n.n=Zp.bind(n.proxy)),$watch:n=>rL.bind(n)}),km=(n,e)=>n!==Wt&&!n.__isScriptSetup&&gt(n,e),vL={get({_:n},e){const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:c}=n;let l;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(km(i,e))return o[e]=1,i[e];if(r!==Wt&&gt(r,e))return o[e]=2,r[e];if((l=n.propsOptions[0])&&gt(l,e))return o[e]=3,s[e];if(t!==Wt&&gt(t,e))return o[e]=4,t[e];Gv&&(o[e]=0)}}const u=Iu[e];let h,f;if(u)return e==="$attrs"&&ci(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Wt&&gt(t,e))return o[e]=4,t[e];if(f=c.config.globalProperties,gt(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return km(r,e)?(r[e]=t,!0):i!==Wt&&gt(i,e)?(i[e]=t,!0):gt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==Wt&&gt(n,o)||km(e,o)||(a=s[0])&&gt(a,o)||gt(i,o)||gt(Iu,o)||gt(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:gt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Ox(n){return Ze(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Gv=!0;function yL(n){const e=zy(n),t=n.proxy,i=n.ctx;Gv=!1,e.beforeCreate&&kx(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:p,activated:v,deactivated:y,beforeDestroy:g,beforeUnmount:m,destroyed:w,unmounted:b,render:E,renderTracked:S,renderTriggered:P,errorCaptured:N,serverPrefetch:z,expose:_,inheritAttrs:x,components:T,directives:A,filters:M}=e;if(l&&_L(l,i,null),o)for(const k in o){const W=o[k];it(W)&&(i[k]=W.bind(t))}if(r){const k=r.call(t,t);Ht(k)&&(n.data=$n(k))}if(Gv=!0,s)for(const k in s){const W=s[k],j=it(W)?W.bind(t,t):it(W.get)?W.get.bind(t,t):sr,G=!it(W)&&it(W.set)?W.set.bind(t):sr,ee=Mt({get:j,set:G});Object.defineProperty(i,k,{enumerable:!0,configurable:!0,get:()=>ee.value,set:se=>ee.value=se})}if(a)for(const k in a)aT(a[k],i,t,k);if(c){const k=it(c)?c.call(t):c;Reflect.ownKeys(k).forEach(W=>{Zh(W,k[W])})}u&&kx(u,n,"c");function I(k,W){Ze(W)?W.forEach(j=>k(j.bind(t))):W&&k(W.bind(t))}if(I(uL,h),I(Bt,f),I(hL,d),I(Ny,p),I(aL,v),I(cL,y),I(mL,N),I(pL,S),I(dL,P),I(Yh,m),I(By,b),I(fL,z),Ze(_))if(_.length){const k=n.exposed||(n.exposed={});_.forEach(W=>{Object.defineProperty(k,W,{get:()=>t[W],set:j=>t[W]=j})})}else n.exposed||(n.exposed={});E&&n.render===sr&&(n.render=E),x!=null&&(n.inheritAttrs=x),T&&(n.components=T),A&&(n.directives=A)}function _L(n,e,t=sr){Ze(n)&&(n=Vv(n));for(const i in n){const r=n[i];let s;Ht(r)?"default"in r?s=Vc(r.from||i,r.default,!0):s=Vc(r.from||i):s=Vc(r),Nn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function kx(n,e,t){ki(Ze(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function aT(n,e,t,i){const r=i.includes(".")?eT(t,i):()=>t[i];if(Yt(n)){const s=e[n];it(s)&&kr(r,s)}else if(it(n))kr(r,n.bind(t));else if(Ht(n))if(Ze(n))n.forEach(s=>aT(s,e,t,i));else{const s=it(n.handler)?n.handler.bind(t):e[n.handler];it(s)&&kr(r,s,n)}}function zy(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let c;return a?c=a:!r.length&&!t&&!i?c=e:(c={},r.length&&r.forEach(l=>sp(c,l,o,!0)),sp(c,e,o)),Ht(e)&&s.set(e,c),c}function sp(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&sp(n,s,t,!0),r&&r.forEach(o=>sp(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=xL[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const xL={data:Nx,props:Bx,emits:Bx,methods:_u,computed:_u,beforeCreate:Hn,created:Hn,beforeMount:Hn,mounted:Hn,beforeUpdate:Hn,updated:Hn,beforeDestroy:Hn,beforeUnmount:Hn,destroyed:Hn,unmounted:Hn,activated:Hn,deactivated:Hn,errorCaptured:Hn,serverPrefetch:Hn,components:_u,directives:_u,watch:wL,provide:Nx,inject:bL};function Nx(n,e){return e?n?function(){return nn(it(n)?n.call(this,this):n,it(e)?e.call(this,this):e)}:e:n}function bL(n,e){return _u(Vv(n),Vv(e))}function Vv(n){if(Ze(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Hn(n,e){return n?[...new Set([].concat(n,e))]:e}function _u(n,e){return n?nn(Object.create(null),n,e):e}function Bx(n,e){return n?Ze(n)&&Ze(e)?[...new Set([...n,...e])]:nn(Object.create(null),Ox(n),Ox(e??{})):e}function wL(n,e){if(!n)return e;if(!e)return n;const t=nn(Object.create(null),n);for(const i in e)t[i]=Hn(n[i],e[i]);return t}function cT(){return{app:null,config:{isNativeTag:JC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ML=0;function SL(n,e){return function(i,r=null){it(i)||(i=nn({},i)),r!=null&&!Ht(r)&&(r=null);const s=cT(),o=new Set;let a=!1;const c=s.app={_uid:ML++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:KL,get config(){return s.config},set config(l){},use(l,...u){return o.has(l)||(l&&it(l.install)?(o.add(l),l.install(c,...u)):it(l)&&(o.add(l),l(c,...u))),c},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),c},component(l,u){return u?(s.components[l]=u,c):s.components[l]},directive(l,u){return u?(s.directives[l]=u,c):s.directives[l]},mount(l,u,h){if(!a){const f=Ce(i,r);return f.appContext=s,u&&e?e(f,l):n(f,l,h),a=!0,c._container=l,l.__vue_app__=c,$y(f.component)||f.component.proxy}},unmount(){a&&(n(null,c._container),delete c._container.__vue_app__)},provide(l,u){return s.provides[l]=u,c},runWithContext(l){op=c;try{return l()}finally{op=null}}};return c}}let op=null;function Zh(n,e){if(_n){let t=_n.provides;const i=_n.parent&&_n.parent.provides;i===t&&(t=_n.provides=Object.create(i)),t[n]=e}}function Vc(n,e,t=!1){const i=_n||Fi;if(i||op){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:op._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&it(e)?e.call(i&&i.proxy):e}}function EL(n,e,t,i=!1){const r={},s={};np(s,nm,1),n.propsDefaults=Object.create(null),lT(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:U3(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function TL(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=yt(r),[c]=n.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Jp(n.emitsOptions,f))continue;const d=e[f];if(c)if(gt(s,f))d!==s[f]&&(s[f]=d,l=!0);else{const p=Gr(f);r[p]=Wv(c,a,p,d,n,!1)}else d!==s[f]&&(s[f]=d,l=!0)}}}else{lT(n,e,r,s)&&(l=!0);let u;for(const h in a)(!e||!gt(e,h)&&((u=bl(h))===h||!gt(e,u)))&&(c?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Wv(c,a,h,void 0,n,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!gt(e,h))&&(delete s[h],l=!0)}l&&ws(n,"set","$attrs")}function lT(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(qd(c))continue;const l=e[c];let u;r&&gt(r,u=Gr(c))?!s||!s.includes(u)?t[u]=l:(a||(a={}))[u]=l:Jp(n.emitsOptions,c)||(!(c in i)||l!==i[c])&&(i[c]=l,o=!0)}if(s){const c=yt(t),l=a||Wt;for(let u=0;u<s.length;u++){const h=s[u];t[h]=Wv(r,c,h,l[h],n,!gt(l,h))}}return o}function Wv(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=gt(o,"default");if(a&&i===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&it(c)){const{propsDefaults:l}=r;t in l?i=l[t]:(Qc(r),i=l[t]=c.call(null,e),ha())}else i=c}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===bl(t))&&(i=!0))}return i}function uT(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let c=!1;if(!it(n)){const u=h=>{c=!0;const[f,d]=uT(h,e,!0);nn(o,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!c)return Ht(n)&&i.set(n,zc),zc;if(Ze(s))for(let u=0;u<s.length;u++){const h=Gr(s[u]);zx(h)&&(o[h]=Wt)}else if(s)for(const u in s){const h=Gr(u);if(zx(h)){const f=s[u],d=o[h]=Ze(f)||it(f)?{type:f}:nn({},f);if(d){const p=Gx(Boolean,d.type),v=Gx(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||gt(d,"default"))&&a.push(h)}}}const l=[o,a];return Ht(n)&&i.set(n,l),l}function zx(n){return n[0]!=="$"}function Ux(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Hx(n,e){return Ux(n)===Ux(e)}function Gx(n,e){return Ze(e)?e.findIndex(t=>Hx(t,n)):it(e)&&Hx(e,n)?0:-1}const hT=n=>n[0]==="_"||n==="$stable",Uy=n=>Ze(n)?n.map(Tr):[Tr(n)],AL=(n,e,t)=>{if(e._n)return e;const i=yc((...r)=>Uy(e(...r)),t);return i._c=!1,i},fT=(n,e,t)=>{const i=n._ctx;for(const r in n){if(hT(r))continue;const s=n[r];if(it(s))e[r]=AL(r,s,i);else if(s!=null){const o=Uy(s);e[r]=()=>o}}},dT=(n,e)=>{const t=Uy(e);n.slots.default=()=>t},CL=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=yt(e),np(e,"_",t)):fT(e,n.slots={})}else n.slots={},e&&dT(n,e);np(n.slots,nm,1)},LL=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=Wt;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(nn(r,e),!t&&a===1&&delete r._):(s=!e.$stable,fT(e,r)),o=e}else e&&(dT(n,e),o={default:1});if(s)for(const a in r)!hT(a)&&!(a in o)&&delete r[a]};function $v(n,e,t,i,r=!1){if(Ze(n)){n.forEach((f,d)=>$v(f,e&&(Ze(e)?e[d]:e),t,i,r));return}if(jd(i)&&!r)return;const s=i.shapeFlag&4?$y(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:c}=n,l=e&&e.r,u=a.refs===Wt?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(Yt(l)?(u[l]=null,gt(h,l)&&(h[l]=null)):Nn(l)&&(l.value=null)),it(c))ho(c,a,12,[o,u]);else{const f=Yt(c),d=Nn(c);if(f||d){const p=()=>{if(n.f){const v=f?gt(h,c)?h[c]:u[c]:c.value;r?Ze(v)&&xy(v,s):Ze(v)?v.includes(s)||v.push(s):f?(u[c]=[s],gt(h,c)&&(h[c]=u[c])):(c.value=[s],n.k&&(u[n.k]=c.value))}else f?(u[c]=o,gt(h,c)&&(h[c]=o)):d&&(c.value=o,n.k&&(u[n.k]=o))};o?(p.id=-1,ti(p,t)):p()}}}const ti=iL;function RL(n){return PL(n)}function PL(n,e){const t=Iv();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=sr,insertStaticContent:p}=n,v=(D,F,U,K=null,$=null,R=null,C=!1,q=null,X=!!F.dynamicChildren)=>{if(D===F)return;D&&!na(D,F)&&(K=B(D),se(D,$,R,!0),D=null),F.patchFlag===-2&&(X=!1,F.dynamicChildren=null);const{type:H,ref:le,shapeFlag:he}=F;switch(H){case Sl:y(D,F,U,K);break;case Ni:g(D,F,U,K);break;case Nm:D==null&&m(F,U,K,C);break;case on:T(D,F,U,K,$,R,C,q,X);break;default:he&1?E(D,F,U,K,$,R,C,q,X):he&6?A(D,F,U,K,$,R,C,q,X):(he&64||he&128)&&H.process(D,F,U,K,$,R,C,q,X,V)}le!=null&&$&&$v(le,D&&D.ref,R,F||D,!F)},y=(D,F,U,K)=>{if(D==null)i(F.el=a(F.children),U,K);else{const $=F.el=D.el;F.children!==D.children&&l($,F.children)}},g=(D,F,U,K)=>{D==null?i(F.el=c(F.children||""),U,K):F.el=D.el},m=(D,F,U,K)=>{[D.el,D.anchor]=p(D.children,F,U,K,D.el,D.anchor)},w=({el:D,anchor:F},U,K)=>{let $;for(;D&&D!==F;)$=f(D),i(D,U,K),D=$;i(F,U,K)},b=({el:D,anchor:F})=>{let U;for(;D&&D!==F;)U=f(D),r(D),D=U;r(F)},E=(D,F,U,K,$,R,C,q,X)=>{C=C||F.type==="svg",D==null?S(F,U,K,$,R,C,q,X):z(D,F,$,R,C,q,X)},S=(D,F,U,K,$,R,C,q)=>{let X,H;const{type:le,props:he,shapeFlag:fe,transition:pe,dirs:Y}=D;if(X=D.el=o(D.type,R,he&&he.is,he),fe&8?u(X,D.children):fe&16&&N(D.children,X,null,K,$,R&&le!=="foreignObject",C,q),Y&&Uo(D,null,K,"created"),P(X,D,D.scopeId,C,K),he){for(const ve in he)ve!=="value"&&!qd(ve)&&s(X,ve,null,he[ve],R,D.children,K,$,O);"value"in he&&s(X,"value",null,he.value),(H=he.onVnodeBeforeMount)&&yr(H,K,D)}Y&&Uo(D,null,K,"beforeMount");const ne=(!$||$&&!$.pendingBranch)&&pe&&!pe.persisted;ne&&pe.beforeEnter(X),i(X,F,U),((H=he&&he.onVnodeMounted)||ne||Y)&&ti(()=>{H&&yr(H,K,D),ne&&pe.enter(X),Y&&Uo(D,null,K,"mounted")},$)},P=(D,F,U,K,$)=>{if(U&&d(D,U),K)for(let R=0;R<K.length;R++)d(D,K[R]);if($){let R=$.subTree;if(F===R){const C=$.vnode;P(D,C,C.scopeId,C.slotScopeIds,$.parent)}}},N=(D,F,U,K,$,R,C,q,X=0)=>{for(let H=X;H<D.length;H++){const le=D[H]=q?to(D[H]):Tr(D[H]);v(null,le,F,U,K,$,R,C,q)}},z=(D,F,U,K,$,R,C)=>{const q=F.el=D.el;let{patchFlag:X,dynamicChildren:H,dirs:le}=F;X|=D.patchFlag&16;const he=D.props||Wt,fe=F.props||Wt;let pe;U&&Ho(U,!1),(pe=fe.onVnodeBeforeUpdate)&&yr(pe,U,F,D),le&&Uo(F,D,U,"beforeUpdate"),U&&Ho(U,!0);const Y=$&&F.type!=="foreignObject";if(H?_(D.dynamicChildren,H,q,U,K,Y,R):C||W(D,F,q,null,U,K,Y,R,!1),X>0){if(X&16)x(q,F,he,fe,U,K,$);else if(X&2&&he.class!==fe.class&&s(q,"class",null,fe.class,$),X&4&&s(q,"style",he.style,fe.style,$),X&8){const ne=F.dynamicProps;for(let ve=0;ve<ne.length;ve++){const ue=ne[ve],xe=he[ue],Ee=fe[ue];(Ee!==xe||ue==="value")&&s(q,ue,xe,Ee,$,D.children,U,K,O)}}X&1&&D.children!==F.children&&u(q,F.children)}else!C&&H==null&&x(q,F,he,fe,U,K,$);((pe=fe.onVnodeUpdated)||le)&&ti(()=>{pe&&yr(pe,U,F,D),le&&Uo(F,D,U,"updated")},K)},_=(D,F,U,K,$,R,C)=>{for(let q=0;q<F.length;q++){const X=D[q],H=F[q],le=X.el&&(X.type===on||!na(X,H)||X.shapeFlag&70)?h(X.el):U;v(X,H,le,null,K,$,R,C,!0)}},x=(D,F,U,K,$,R,C)=>{if(U!==K){if(U!==Wt)for(const q in U)!qd(q)&&!(q in K)&&s(D,q,U[q],null,C,F.children,$,R,O);for(const q in K){if(qd(q))continue;const X=K[q],H=U[q];X!==H&&q!=="value"&&s(D,q,H,X,C,F.children,$,R,O)}"value"in K&&s(D,"value",U.value,K.value)}},T=(D,F,U,K,$,R,C,q,X)=>{const H=F.el=D?D.el:a(""),le=F.anchor=D?D.anchor:a("");let{patchFlag:he,dynamicChildren:fe,slotScopeIds:pe}=F;pe&&(q=q?q.concat(pe):pe),D==null?(i(H,U,K),i(le,U,K),N(F.children,U,le,$,R,C,q,X)):he>0&&he&64&&fe&&D.dynamicChildren?(_(D.dynamicChildren,fe,U,$,R,C,q),(F.key!=null||$&&F===$.subTree)&&Hy(D,F,!0)):W(D,F,U,le,$,R,C,q,X)},A=(D,F,U,K,$,R,C,q,X)=>{F.slotScopeIds=q,D==null?F.shapeFlag&512?$.ctx.activate(F,U,K,C,X):M(F,U,K,$,R,C,X):L(D,F,X)},M=(D,F,U,K,$,R,C)=>{const q=D.component=VL(D,K,$);if(em(D)&&(q.ctx.renderer=V),WL(q),q.asyncDep){if($&&$.registerDep(q,I),!D.el){const X=q.subTree=Ce(Ni);g(null,X,F,U)}return}I(q,D,F,U,$,R,C)},L=(D,F,U)=>{const K=F.component=D.component;if(eL(D,F,U))if(K.asyncDep&&!K.asyncResolved){k(K,F,U);return}else K.next=F,X3(K.update),K.update();else F.el=D.el,K.vnode=F},I=(D,F,U,K,$,R,C)=>{const q=()=>{if(D.isMounted){let{next:le,bu:he,u:fe,parent:pe,vnode:Y}=D,ne=le,ve;Ho(D,!1),le?(le.el=Y.el,k(D,le,C)):le=Y,he&&Dm(he),(ve=le.props&&le.props.onVnodeBeforeUpdate)&&yr(ve,pe,le,Y),Ho(D,!0);const ue=Fm(D),xe=D.subTree;D.subTree=ue,v(xe,ue,h(xe.el),B(xe),D,$,R),le.el=ue.el,ne===null&&tL(D,ue.el),fe&&ti(fe,$),(ve=le.props&&le.props.onVnodeUpdated)&&ti(()=>yr(ve,pe,le,Y),$)}else{let le;const{el:he,props:fe}=F,{bm:pe,m:Y,parent:ne}=D,ve=jd(F);if(Ho(D,!1),pe&&Dm(pe),!ve&&(le=fe&&fe.onVnodeBeforeMount)&&yr(le,ne,F),Ho(D,!0),he&&re){const ue=()=>{D.subTree=Fm(D),re(he,D.subTree,D,$,null)};ve?F.type.__asyncLoader().then(()=>!D.isUnmounted&&ue()):ue()}else{const ue=D.subTree=Fm(D);v(null,ue,U,K,D,$,R),F.el=ue.el}if(Y&&ti(Y,$),!ve&&(le=fe&&fe.onVnodeMounted)){const ue=F;ti(()=>yr(le,ne,ue),$)}(F.shapeFlag&256||ne&&jd(ne.vnode)&&ne.vnode.shapeFlag&256)&&D.a&&ti(D.a,$),D.isMounted=!0,F=U=K=null}},X=D.effect=new Ey(q,()=>Iy(H),D.scope),H=D.update=()=>X.run();H.id=D.uid,Ho(D,!0),H()},k=(D,F,U)=>{F.component=D;const K=D.vnode.props;D.vnode=F,D.next=null,TL(D,F.props,K,U),LL(D,F.children,U),wl(),Px(),Ml()},W=(D,F,U,K,$,R,C,q,X=!1)=>{const H=D&&D.children,le=D?D.shapeFlag:0,he=F.children,{patchFlag:fe,shapeFlag:pe}=F;if(fe>0){if(fe&128){G(H,he,U,K,$,R,C,q,X);return}else if(fe&256){j(H,he,U,K,$,R,C,q,X);return}}pe&8?(le&16&&O(H,$,R),he!==H&&u(U,he)):le&16?pe&16?G(H,he,U,K,$,R,C,q,X):O(H,$,R,!0):(le&8&&u(U,""),pe&16&&N(he,U,K,$,R,C,q,X))},j=(D,F,U,K,$,R,C,q,X)=>{D=D||zc,F=F||zc;const H=D.length,le=F.length,he=Math.min(H,le);let fe;for(fe=0;fe<he;fe++){const pe=F[fe]=X?to(F[fe]):Tr(F[fe]);v(D[fe],pe,U,null,$,R,C,q,X)}H>le?O(D,$,R,!0,!1,he):N(F,U,K,$,R,C,q,X,he)},G=(D,F,U,K,$,R,C,q,X)=>{let H=0;const le=F.length;let he=D.length-1,fe=le-1;for(;H<=he&&H<=fe;){const pe=D[H],Y=F[H]=X?to(F[H]):Tr(F[H]);if(na(pe,Y))v(pe,Y,U,null,$,R,C,q,X);else break;H++}for(;H<=he&&H<=fe;){const pe=D[he],Y=F[fe]=X?to(F[fe]):Tr(F[fe]);if(na(pe,Y))v(pe,Y,U,null,$,R,C,q,X);else break;he--,fe--}if(H>he){if(H<=fe){const pe=fe+1,Y=pe<le?F[pe].el:K;for(;H<=fe;)v(null,F[H]=X?to(F[H]):Tr(F[H]),U,Y,$,R,C,q,X),H++}}else if(H>fe)for(;H<=he;)se(D[H],$,R,!0),H++;else{const pe=H,Y=H,ne=new Map;for(H=Y;H<=fe;H++){const rt=F[H]=X?to(F[H]):Tr(F[H]);rt.key!=null&&ne.set(rt.key,H)}let ve,ue=0;const xe=fe-Y+1;let Ee=!1,Be=0;const ft=new Array(xe);for(H=0;H<xe;H++)ft[H]=0;for(H=pe;H<=he;H++){const rt=D[H];if(ue>=xe){se(rt,$,R,!0);continue}let st;if(rt.key!=null)st=ne.get(rt.key);else for(ve=Y;ve<=fe;ve++)if(ft[ve-Y]===0&&na(rt,F[ve])){st=ve;break}st===void 0?se(rt,$,R,!0):(ft[st-Y]=H+1,st>=Be?Be=st:Ee=!0,v(rt,F[st],U,null,$,R,C,q,X),ue++)}const dt=Ee?IL(ft):zc;for(ve=dt.length-1,H=xe-1;H>=0;H--){const rt=Y+H,st=F[rt],dn=rt+1<le?F[rt+1].el:K;ft[H]===0?v(null,st,U,dn,$,R,C,q,X):Ee&&(ve<0||H!==dt[ve]?ee(st,U,dn,2):ve--)}}},ee=(D,F,U,K,$=null)=>{const{el:R,type:C,transition:q,children:X,shapeFlag:H}=D;if(H&6){ee(D.component.subTree,F,U,K);return}if(H&128){D.suspense.move(F,U,K);return}if(H&64){C.move(D,F,U,V);return}if(C===on){i(R,F,U);for(let he=0;he<X.length;he++)ee(X[he],F,U,K);i(D.anchor,F,U);return}if(C===Nm){w(D,F,U);return}if(K!==2&&H&1&&q)if(K===0)q.beforeEnter(R),i(R,F,U),ti(()=>q.enter(R),$);else{const{leave:he,delayLeave:fe,afterLeave:pe}=q,Y=()=>i(R,F,U),ne=()=>{he(R,()=>{Y(),pe&&pe()})};fe?fe(R,Y,ne):ne()}else i(R,F,U)},se=(D,F,U,K=!1,$=!1)=>{const{type:R,props:C,ref:q,children:X,dynamicChildren:H,shapeFlag:le,patchFlag:he,dirs:fe}=D;if(q!=null&&$v(q,null,U,D,!0),le&256){F.ctx.deactivate(D);return}const pe=le&1&&fe,Y=!jd(D);let ne;if(Y&&(ne=C&&C.onVnodeBeforeUnmount)&&yr(ne,F,D),le&6)ae(D.component,U,K);else{if(le&128){D.suspense.unmount(U,K);return}pe&&Uo(D,null,F,"beforeUnmount"),le&64?D.type.remove(D,F,U,$,V,K):H&&(R!==on||he>0&&he&64)?O(H,F,U,!1,!0):(R===on&&he&384||!$&&le&16)&&O(X,F,U),K&&oe(D)}(Y&&(ne=C&&C.onVnodeUnmounted)||pe)&&ti(()=>{ne&&yr(ne,F,D),pe&&Uo(D,null,F,"unmounted")},U)},oe=D=>{const{type:F,el:U,anchor:K,transition:$}=D;if(F===on){de(U,K);return}if(F===Nm){b(D);return}const R=()=>{r(U),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(D.shapeFlag&1&&$&&!$.persisted){const{leave:C,delayLeave:q}=$,X=()=>C(U,R);q?q(D.el,R,X):X()}else R()},de=(D,F)=>{let U;for(;D!==F;)U=f(D),r(D),D=U;r(F)},ae=(D,F,U)=>{const{bum:K,scope:$,update:R,subTree:C,um:q}=D;K&&Dm(K),$.stop(),R&&(R.active=!1,se(C,D,F,U)),q&&ti(q,F),ti(()=>{D.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},O=(D,F,U,K=!1,$=!1,R=0)=>{for(let C=R;C<D.length;C++)se(D[C],F,U,K,$)},B=D=>D.shapeFlag&6?B(D.component.subTree):D.shapeFlag&128?D.suspense.next():f(D.anchor||D.el),Z=(D,F,U)=>{D==null?F._vnode&&se(F._vnode,null,null,!0):v(F._vnode||null,D,F,null,null,null,U),Px(),JE(),F._vnode=D},V={p:v,um:se,m:ee,r:oe,mt:M,mc:N,pc:W,pbc:_,n:B,o:n};let J,re;return e&&([J,re]=e(V)),{render:Z,hydrate:J,createApp:SL(Z,J)}}function Ho({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Hy(n,e,t=!1){const i=n.children,r=e.children;if(Ze(i)&&Ze(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=to(r[s]),a.el=o.el),t||Hy(o,a)),a.type===Sl&&(a.el=o.el)}}function IL(n){const e=n.slice(),t=[0];let i,r,s,o,a;const c=n.length;for(i=0;i<c;i++){const l=n[i];if(l!==0){if(r=t[t.length-1],n[r]<l){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<l?s=a+1:o=a;l<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const DL=n=>n.__isTeleport,Du=n=>n&&(n.disabled||n.disabled===""),Vx=n=>typeof SVGElement<"u"&&n instanceof SVGElement,qv=(n,e)=>{const t=n&&n.to;return Yt(t)?e?e(t):null:t},FL={__isTeleport:!0,process(n,e,t,i,r,s,o,a,c,l){const{mc:u,pc:h,pbc:f,o:{insert:d,querySelector:p,createText:v,createComment:y}}=l,g=Du(e.props);let{shapeFlag:m,children:w,dynamicChildren:b}=e;if(n==null){const E=e.el=v(""),S=e.anchor=v("");d(E,t,i),d(S,t,i);const P=e.target=qv(e.props,p),N=e.targetAnchor=v("");P&&(d(N,P),o=o||Vx(P));const z=(_,x)=>{m&16&&u(w,_,x,r,s,o,a,c)};g?z(t,S):P&&z(P,N)}else{e.el=n.el;const E=e.anchor=n.anchor,S=e.target=n.target,P=e.targetAnchor=n.targetAnchor,N=Du(n.props),z=N?t:S,_=N?E:P;if(o=o||Vx(S),b?(f(n.dynamicChildren,b,z,r,s,o,a),Hy(n,e,!0)):c||h(n,e,z,_,r,s,o,a,!1),g)N||df(e,t,E,l,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const x=e.target=qv(e.props,p);x&&df(e,x,null,l,0)}else N&&df(e,S,P,l,1)}pT(e)},remove(n,e,t,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:c,anchor:l,targetAnchor:u,target:h,props:f}=n;if(h&&s(u),(o||!Du(f))&&(s(l),a&16))for(let d=0;d<c.length;d++){const p=c[d];r(p,e,t,!0,!!p.dynamicChildren)}},move:df,hydrate:OL};function df(n,e,t,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:c,children:l,props:u}=n,h=s===2;if(h&&i(o,e,t),(!h||Du(u))&&c&16)for(let f=0;f<l.length;f++)r(l[f],e,t,2);h&&i(a,e,t)}function OL(n,e,t,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:c}},l){const u=e.target=qv(e.props,c);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Du(e.props))e.anchor=l(o(n),e,a(n),t,i,r,s),e.targetAnchor=h;else{e.anchor=o(n);let f=h;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}l(h,e,u,t,i,r,s)}pT(e)}return e.anchor&&o(e.anchor)}const kL=FL;function pT(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const on=Symbol.for("v-fgt"),Sl=Symbol.for("v-txt"),Ni=Symbol.for("v-cmt"),Nm=Symbol.for("v-stc"),Fu=[];let ir=null;function tt(n=!1){Fu.push(ir=n?null:[])}function NL(){Fu.pop(),ir=Fu[Fu.length-1]||null}let uh=1;function Wx(n){uh+=n}function mT(n){return n.dynamicChildren=uh>0?ir||zc:null,NL(),uh>0&&ir&&ir.push(n),n}function _t(n,e,t,i,r,s){return mT(Tn(n,e,t,i,r,s,!0))}function vs(n,e,t,i,r){return mT(Ce(n,e,t,i,r,!0))}function ap(n){return n?n.__v_isVNode===!0:!1}function na(n,e){return n.type===e.type&&n.key===e.key}const nm="__vInternal",gT=({key:n})=>n??null,Xd=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Yt(n)||Nn(n)||it(n)?{i:Fi,r:n,k:e,f:!!t}:n:null);function Tn(n,e=null,t=null,i=0,r=null,s=n===on?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&gT(e),ref:e&&Xd(e),scopeId:Kp,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fi};return a?(Gy(c,t),s&128&&n.normalize(c)):t&&(c.shapeFlag|=Yt(t)?8:16),uh>0&&!o&&ir&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&ir.push(c),c}const Ce=BL;function BL(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===oT)&&(n=Ni),ap(n)){const a=wo(n,e,!0);return t&&Gy(a,t),uh>0&&!s&&ir&&(a.shapeFlag&6?ir[ir.indexOf(n)]=a:ir.push(a)),a.patchFlag|=-2,a}if(YL(n)&&(n=n.__vccOpts),e){e=zL(e);let{class:a,style:c}=e;a&&!Yt(a)&&(e.class=rh(a)),Ht(c)&&(VE(c)&&!Ze(c)&&(c=nn({},c)),e.style=My(c))}const o=Yt(n)?1:nL(n)?128:DL(n)?64:Ht(n)?4:it(n)?2:0;return Tn(n,e,t,i,r,o,s,!0)}function zL(n){return n?VE(n)||nm in n?nn({},n):n:null}function wo(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:o}=n,a=e?UL(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&gT(a),ref:e&&e.ref?t&&r?Ze(r)?r.concat(Xd(e)):[r,Xd(e)]:Xd(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==on?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&wo(n.ssContent),ssFallback:n.ssFallback&&wo(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function xu(n=" ",e=0){return Ce(Sl,null,n,e)}function pf(n="",e=!1){return e?(tt(),vs(Ni,null,n)):Ce(Ni,null,n)}function Tr(n){return n==null||typeof n=="boolean"?Ce(Ni):Ze(n)?Ce(on,null,n.slice()):typeof n=="object"?to(n):Ce(Sl,null,String(n))}function to(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:wo(n)}function Gy(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Ze(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),Gy(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(nm in e)?e._ctx=Fi:r===3&&Fi&&(Fi.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else it(e)?(e={default:e,_ctx:Fi},t=32):(e=String(e),i&64?(t=16,e=[xu(e)]):t=8);n.children=e,n.shapeFlag|=t}function UL(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=rh([e.class,i.class]));else if(r==="style")e.style=My([e.style,i.style]);else if(Wp(r)){const s=e[r],o=i[r];o&&s!==o&&!(Ze(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function yr(n,e,t,i=null){ki(n,e,7,[t,i])}const HL=cT();let GL=0;function VL(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||HL,s={uid:GL++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new h3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uT(i,r),emitsOptions:QE(i,r),emit:null,emitted:null,propsDefaults:Wt,inheritAttrs:i.inheritAttrs,ctx:Wt,data:Wt,props:Wt,attrs:Wt,slots:Wt,refs:Wt,setupState:Wt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=J3.bind(null,s),n.ce&&n.ce(s),s}let _n=null;const Vy=()=>_n||Fi;let Wy,Fa,$x="__VUE_INSTANCE_SETTERS__";(Fa=Iv()[$x])||(Fa=Iv()[$x]=[]),Fa.push(n=>_n=n),Wy=n=>{Fa.length>1?Fa.forEach(e=>e(n)):Fa[0](n)};const Qc=n=>{Wy(n),n.scope.on()},ha=()=>{_n&&_n.scope.off(),Wy(null)};function vT(n){return n.vnode.shapeFlag&4}let hh=!1;function WL(n,e=!1){hh=e;const{props:t,children:i}=n.vnode,r=vT(n);EL(n,t,r,e),CL(n,i);const s=r?$L(n,e):void 0;return hh=!1,s}function $L(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=WE(new Proxy(n.ctx,vL));const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?jL(n):null;Qc(n),wl();const s=ho(i,n,0,[n.props,r]);if(Ml(),ha(),AE(s)){if(s.then(ha,ha),e)return s.then(o=>{qx(n,o,e)}).catch(o=>{Yp(o,n,0)});n.asyncDep=s}else qx(n,s,e)}else yT(n,e)}function qx(n,e,t){it(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ht(e)&&(n.setupState=XE(e)),yT(n,t)}let jx;function yT(n,e,t){const i=n.type;if(!n.render){if(!e&&jx&&!i.render){const r=i.template||zy(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=i,l=nn(nn({isCustomElement:s,delimiters:a},o),c);i.render=jx(r,l)}}n.render=i.render||sr}Qc(n),wl(),yL(n),Ml(),ha()}function qL(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return ci(n,"get","$attrs"),e[t]}}))}function jL(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return qL(n)},slots:n.slots,emit:n.emit,expose:e}}function $y(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(XE(WE(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Iu)return Iu[t](n)},has(e,t){return t in e||t in Iu}}))}function XL(n,e=!0){return it(n)?n.displayName||n.name:n.name||e&&n.__name}function YL(n){return it(n)&&"__vccOpts"in n}const Mt=(n,e)=>$3(n,e,hh);function jv(n,e,t){const i=arguments.length;return i===2?Ht(e)&&!Ze(e)?ap(e)?Ce(n,null,[e]):Ce(n,e):Ce(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&ap(t)&&(t=[t]),Ce(n,e,t))}const ZL=Symbol.for("v-scx"),JL=()=>Vc(ZL),KL="3.3.4",QL="http://www.w3.org/2000/svg",ia=typeof document<"u"?document:null,Xx=ia&&ia.createElement("template"),eR={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e?ia.createElementNS(QL,n):ia.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>ia.createTextNode(n),createComment:n=>ia.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ia.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{Xx.innerHTML=i?`<svg>${n}</svg>`:n;const a=Xx.content;if(i){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function tR(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function nR(n,e,t){const i=n.style,r=Yt(t);if(t&&!r){if(e&&!Yt(e))for(const s in e)t[s]==null&&Xv(i,s,"");for(const s in t)Xv(i,s,t[s])}else{const s=i.display;r?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=s)}}const Yx=/\s*!important$/;function Xv(n,e,t){if(Ze(t))t.forEach(i=>Xv(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=iR(n,e);Yx.test(t)?n.setProperty(bl(i),t.replace(Yx,""),"important"):n[i]=t}}const Zx=["Webkit","Moz","ms"],Bm={};function iR(n,e){const t=Bm[e];if(t)return t;let i=Gr(e);if(i!=="filter"&&i in n)return Bm[e]=i;i=jp(i);for(let r=0;r<Zx.length;r++){const s=Zx[r]+i;if(s in n)return Bm[e]=s}return e}const Jx="http://www.w3.org/1999/xlink";function rR(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(Jx,e.slice(6,e.length)):n.setAttributeNS(Jx,e,t);else{const s=u3(e);t==null||s&&!RE(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function sR(n,e,t,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=t;const l=a==="OPTION"?n.getAttribute("value"):n.value,u=t??"";l!==u&&(n.value=u),t==null&&n.removeAttribute(e);return}let c=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=RE(t):t==null&&l==="string"?(t="",c=!0):l==="number"&&(t=0,c=!0)}try{n[e]=t}catch{}c&&n.removeAttribute(e)}function oR(n,e,t,i){n.addEventListener(e,t,i)}function aR(n,e,t,i){n.removeEventListener(e,t,i)}function cR(n,e,t,i,r=null){const s=n._vei||(n._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,c]=lR(e);if(i){const l=s[e]=fR(i,r);oR(n,a,l,c)}else o&&(aR(n,a,o,c),s[e]=void 0)}}const Kx=/(?:Once|Passive|Capture)$/;function lR(n){let e;if(Kx.test(n)){e={};let i;for(;i=n.match(Kx);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):bl(n.slice(2)),e]}let zm=0;const uR=Promise.resolve(),hR=()=>zm||(uR.then(()=>zm=0),zm=Date.now());function fR(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;ki(dR(i,t.value),e,5,[i])};return t.value=n,t.attached=hR(),t}function dR(n,e){if(Ze(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const Qx=/^on[a-z]/,pR=(n,e,t,i,r=!1,s,o,a,c)=>{e==="class"?tR(n,i,r):e==="style"?nR(n,t,i):Wp(e)?_y(e)||cR(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mR(n,e,i,r))?sR(n,e,i,s,o,a,c):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),rR(n,e,i,r))};function mR(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&Qx.test(e)&&it(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Qx.test(e)&&Yt(t)?!1:e in n}const Os="transition",Wl="animation",qy=(n,{slots:e})=>jv(oL,xT(n),e);qy.displayName="Transition";const _T={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gR=qy.props=nn({},nT,_T),Go=(n,e=[])=>{Ze(n)?n.forEach(t=>t(...e)):n&&n(...e)},eb=n=>n?Ze(n)?n.some(e=>e.length>1):n.length>1:!1;function xT(n){const e={};for(const T in n)T in _T||(e[T]=n[T]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=n,p=vR(r),v=p&&p[0],y=p&&p[1],{onBeforeEnter:g,onEnter:m,onEnterCancelled:w,onLeave:b,onLeaveCancelled:E,onBeforeAppear:S=g,onAppear:P=m,onAppearCancelled:N=w}=e,z=(T,A,M)=>{eo(T,A?u:a),eo(T,A?l:o),M&&M()},_=(T,A)=>{T._isLeaving=!1,eo(T,h),eo(T,d),eo(T,f),A&&A()},x=T=>(A,M)=>{const L=T?P:m,I=()=>z(A,T,M);Go(L,[A,I]),tb(()=>{eo(A,T?c:s),ms(A,T?u:a),eb(L)||nb(A,i,v,I)})};return nn(e,{onBeforeEnter(T){Go(g,[T]),ms(T,s),ms(T,o)},onBeforeAppear(T){Go(S,[T]),ms(T,c),ms(T,l)},onEnter:x(!1),onAppear:x(!0),onLeave(T,A){T._isLeaving=!0;const M=()=>_(T,A);ms(T,h),wT(),ms(T,f),tb(()=>{T._isLeaving&&(eo(T,h),ms(T,d),eb(b)||nb(T,i,y,M))}),Go(b,[T,M])},onEnterCancelled(T){z(T,!1),Go(w,[T])},onAppearCancelled(T){z(T,!0),Go(N,[T])},onLeaveCancelled(T){_(T),Go(E,[T])}})}function vR(n){if(n==null)return null;if(Ht(n))return[Um(n.enter),Um(n.leave)];{const e=Um(n);return[e,e]}}function Um(n){return r3(n)}function ms(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function eo(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function tb(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let yR=0;function nb(n,e,t,i){const r=n._endId=++yR,s=()=>{r===n._endId&&i()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:c}=bT(n,e);if(!o)return i();const l=o+"end";let u=0;const h=()=>{n.removeEventListener(l,f),s()},f=d=>{d.target===n&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),n.addEventListener(l,f)}function bT(n,e){const t=window.getComputedStyle(n),i=p=>(t[p]||"").split(", "),r=i(`${Os}Delay`),s=i(`${Os}Duration`),o=ib(r,s),a=i(`${Wl}Delay`),c=i(`${Wl}Duration`),l=ib(a,c);let u=null,h=0,f=0;e===Os?o>0&&(u=Os,h=o,f=s.length):e===Wl?l>0&&(u=Wl,h=l,f=c.length):(h=Math.max(o,l),u=h>0?o>l?Os:Wl:null,f=u?u===Os?s.length:c.length:0);const d=u===Os&&/\b(transform|all)(,|$)/.test(i(`${Os}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function ib(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>rb(t)+rb(n[i])))}function rb(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function wT(){return document.body.offsetHeight}const MT=new WeakMap,ST=new WeakMap,ET={name:"TransitionGroup",props:nn({},gR,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Vy(),i=tT();let r,s;return Ny(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!SR(r[0].el,t.vnode.el,o))return;r.forEach(bR),r.forEach(wR);const a=r.filter(MR);wT(),a.forEach(c=>{const l=c.el,u=l.style;ms(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=l._moveCb=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",h),l._moveCb=null,eo(l,o))};l.addEventListener("transitionend",h)})}),()=>{const o=yt(n),a=xT(o);let c=o.tag||on;r=s,s=e.default?ky(e.default()):[];for(let l=0;l<s.length;l++){const u=s[l];u.key!=null&&lh(u,ch(u,a,i,t))}if(r)for(let l=0;l<r.length;l++){const u=r[l];lh(u,ch(u,a,i,t)),MT.set(u,u.el.getBoundingClientRect())}return Ce(c,null,s)}}},_R=n=>delete n.mode;ET.props;const xR=ET;function bR(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function wR(n){ST.set(n,n.el.getBoundingClientRect())}function MR(n){const e=MT.get(n),t=ST.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function SR(n,e,t){const i=n.cloneNode();n._vtc&&n._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),t.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=bT(i);return r.removeChild(i),s}const ER=["ctrl","shift","alt","meta"],TR={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>ER.some(t=>n[`${t}Key`]&&!e.includes(t))},sb=(n,e)=>(t,...i)=>{for(let r=0;r<e.length;r++){const s=TR[e[r]];if(s&&s(t,e))return}return n(t,...i)},AR=nn({patchProp:pR},eR);let ob;function TT(){return ob||(ob=RL(AR))}const ab=(...n)=>{TT().render(...n)},CR=(...n)=>{const e=TT().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=LR(i);if(!r)return;const s=e._component;!it(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function LR(n){return Yt(n)?document.querySelector(n):n}function Ln(n,e){RR(n)&&(n="100%");var t=PR(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function mf(n){return Math.min(1,Math.max(0,n))}function RR(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function PR(n){return typeof n=="string"&&n.indexOf("%")!==-1}function AT(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function gf(n){return n<=1?"".concat(Number(n)*100,"%"):n}function ca(n){return n.length===1?"0"+n:String(n)}function IR(n,e,t){return{r:Ln(n,255)*255,g:Ln(e,255)*255,b:Ln(t,255)*255}}function cb(n,e,t){n=Ln(n,255),e=Ln(e,255),t=Ln(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=0,a=(i+r)/2;if(i===r)o=0,s=0;else{var c=i-r;switch(o=a>.5?c/(2-i-r):c/(i+r),i){case n:s=(e-t)/c+(e<t?6:0);break;case e:s=(t-n)/c+2;break;case t:s=(n-e)/c+4;break}s/=6}return{h:s,s:o,l:a}}function Hm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function DR(n,e,t){var i,r,s;if(n=Ln(n,360),e=Ln(e,100),t=Ln(t,100),e===0)r=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=Hm(a,o,n+1/3),r=Hm(a,o,n),s=Hm(a,o,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function Yv(n,e,t){n=Ln(n,255),e=Ln(e,255),t=Ln(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=i,a=i-r,c=i===0?0:a/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:c,v:o}}function FR(n,e,t){n=Ln(n,360)*6,e=Ln(e,100),t=Ln(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),c=i%6,l=[t,o,s,s,a,t][c],u=[a,t,t,o,s,s][c],h=[s,s,a,t,t,o][c];return{r:l*255,g:u*255,b:h*255}}function Zv(n,e,t,i){var r=[ca(Math.round(n).toString(16)),ca(Math.round(e).toString(16)),ca(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function OR(n,e,t,i,r){var s=[ca(Math.round(n).toString(16)),ca(Math.round(e).toString(16)),ca(Math.round(t).toString(16)),ca(kR(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function kR(n){return Math.round(parseFloat(n)*255).toString(16)}function lb(n){return gi(n)/255}function gi(n){return parseInt(n,16)}function NR(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var Jv={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _c(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=UR(n)),typeof n=="object"&&(ns(n.r)&&ns(n.g)&&ns(n.b)?(e=IR(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):ns(n.h)&&ns(n.s)&&ns(n.v)?(i=gf(n.s),r=gf(n.v),e=FR(n.h,i,r),o=!0,a="hsv"):ns(n.h)&&ns(n.s)&&ns(n.l)&&(i=gf(n.s),s=gf(n.l),e=DR(n.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=AT(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var BR="[-\\+]?\\d+%?",zR="[-\\+]?\\d*\\.\\d+%?",ao="(?:".concat(zR,")|(?:").concat(BR,")"),Gm="[\\s|\\(]+(".concat(ao,")[,|\\s]+(").concat(ao,")[,|\\s]+(").concat(ao,")\\s*\\)?"),Vm="[\\s|\\(]+(".concat(ao,")[,|\\s]+(").concat(ao,")[,|\\s]+(").concat(ao,")[,|\\s]+(").concat(ao,")\\s*\\)?"),Qi={CSS_UNIT:new RegExp(ao),rgb:new RegExp("rgb"+Gm),rgba:new RegExp("rgba"+Vm),hsl:new RegExp("hsl"+Gm),hsla:new RegExp("hsla"+Vm),hsv:new RegExp("hsv"+Gm),hsva:new RegExp("hsva"+Vm),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function UR(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(Jv[n])n=Jv[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Qi.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Qi.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Qi.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Qi.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Qi.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Qi.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Qi.hex8.exec(n),t?{r:gi(t[1]),g:gi(t[2]),b:gi(t[3]),a:lb(t[4]),format:e?"name":"hex8"}:(t=Qi.hex6.exec(n),t?{r:gi(t[1]),g:gi(t[2]),b:gi(t[3]),format:e?"name":"hex"}:(t=Qi.hex4.exec(n),t?{r:gi(t[1]+t[1]),g:gi(t[2]+t[2]),b:gi(t[3]+t[3]),a:lb(t[4]+t[4]),format:e?"name":"hex8"}:(t=Qi.hex3.exec(n),t?{r:gi(t[1]+t[1]),g:gi(t[2]+t[2]),b:gi(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function ns(n){return!!Qi.CSS_UNIT.exec(String(n))}var Wm=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=NR(e)),this.originalInput=e;var r=_c(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=AT(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=Yv(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=Yv(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=cb(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=cb(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),Zv(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),OR(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Ln(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Ln(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Zv(this.r,this.g,this.b,!1),t=0,i=Object.entries(Jv);t<i.length;t++){var r=i[t],s=r[0],o=r[1];if(e===o)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=mf(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=mf(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=mf(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=mf(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,o={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:i,s:r,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,o=1;o<e;o++)r.push(new n({h:(i+o*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}(),vf=2,ub=.16,HR=.05,GR=.05,VR=.15,CT=5,LT=4,WR=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function hb(n){var e=n.r,t=n.g,i=n.b,r=Yv(e,t,i);return{h:r.h*360,s:r.s,v:r.v}}function yf(n){var e=n.r,t=n.g,i=n.b;return"#".concat(Zv(e,t,i,!1))}function $R(n,e,t){var i=t/100,r={r:(e.r-n.r)*i+n.r,g:(e.g-n.g)*i+n.g,b:(e.b-n.b)*i+n.b};return r}function fb(n,e,t){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=t?Math.round(n.h)-vf*e:Math.round(n.h)+vf*e:i=t?Math.round(n.h)+vf*e:Math.round(n.h)-vf*e,i<0?i+=360:i>=360&&(i-=360),i}function db(n,e,t){if(n.h===0&&n.s===0)return n.s;var i;return t?i=n.s-ub*e:e===LT?i=n.s+ub:i=n.s+HR*e,i>1&&(i=1),t&&e===CT&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function pb(n,e,t){var i;return t?i=n.v+GR*e:i=n.v-VR*e,i>1&&(i=1),Number(i.toFixed(2))}function fh(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],i=_c(n),r=CT;r>0;r-=1){var s=hb(i),o=yf(_c({h:fb(s,r,!0),s:db(s,r,!0),v:pb(s,r,!0)}));t.push(o)}t.push(yf(i));for(var a=1;a<=LT;a+=1){var c=hb(i),l=yf(_c({h:fb(c,a),s:db(c,a),v:pb(c,a)}));t.push(l)}return e.theme==="dark"?WR.map(function(u){var h=u.index,f=u.opacity,d=yf($R(_c(e.backgroundColor||"#141414"),_c(t[h]),f*100));return d}):t}var $m={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},qm={},jm={};Object.keys($m).forEach(function(n){qm[n]=fh($m[n]),qm[n].primary=qm[n][5],jm[n]=fh($m[n],{theme:"dark",backgroundColor:"#141414"}),jm[n].primary=jm[n][5]});var mb=[],$l=[],qR="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function jR(){var n=document.createElement("style");return n.setAttribute("type","text/css"),n}function XR(n,e){if(e=e||{},n===void 0)throw new Error(qR);var t=e.prepend===!0?"prepend":"append",i=e.container!==void 0?e.container:document.querySelector("head"),r=mb.indexOf(i);r===-1&&(r=mb.push(i)-1,$l[r]={});var s;return $l[r]!==void 0&&$l[r][t]!==void 0?s=$l[r][t]:(s=$l[r][t]=jR(),t==="prepend"?i.insertBefore(s,i.childNodes[0]):i.appendChild(s)),n.charCodeAt(0)===65279&&(n=n.substr(1,n.length)),s.styleSheet?s.styleSheet.cssText+=n:s.textContent+=n,s}function gb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){YR(n,r,t[r])})}return n}function YR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vb(n){return typeof n=="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(typeof n.icon=="object"||typeof n.icon=="function")}function Kv(n,e,t){return t?jv(n.tag,gb({key:e},t,n.attrs),(n.children||[]).map(function(i,r){return Kv(i,"".concat(e,"-").concat(n.tag,"-").concat(r))})):jv(n.tag,gb({key:e},n.attrs),(n.children||[]).map(function(i,r){return Kv(i,"".concat(e,"-").concat(n.tag,"-").concat(r))}))}function RT(n){return fh(n)[0]}function PT(n){return n?Array.isArray(n)?n:[n]:[]}var ZR=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,yb=!1,JR=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ZR;Zp(function(){yb||(typeof window<"u"&&window.document&&window.document.documentElement&&XR(e,{prepend:!0}),yb=!0)})},KR=["icon","primaryColor","secondaryColor"];function QR(n,e){if(n==null)return{};var t=eP(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function eP(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function Yd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){tP(n,r,t[r])})}return n}function tP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Ou={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function nP(n){var e=n.primaryColor,t=n.secondaryColor;Ou.primaryColor=e,Ou.secondaryColor=t||RT(e),Ou.calculated=!!t}function iP(){return Yd({},Ou)}var El=function(e,t){var i=Yd({},e,t.attrs),r=i.icon,s=i.primaryColor,o=i.secondaryColor,a=QR(i,KR),c=Ou;if(s&&(c={primaryColor:s,secondaryColor:o||RT(s)}),JR(),vb(r),!vb(r))return null;var l=r;return l&&typeof l.icon=="function"&&(l=Yd({},l,{icon:l.icon(c.primaryColor,c.secondaryColor)})),Kv(l.icon,"svg-".concat(l.name),Yd({},a,{"data-icon":l.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};El.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};El.inheritAttrs=!1;El.displayName="IconBase";El.getTwoToneColors=iP;El.setTwoToneColors=nP;const jy=El;function rP(n,e){return cP(n)||aP(n,e)||oP(n,e)||sP()}function sP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oP(n,e){if(n){if(typeof n=="string")return _b(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _b(n,e)}}function _b(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function aP(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function cP(n){if(Array.isArray(n))return n}function IT(n){var e=PT(n),t=rP(e,2),i=t[0],r=t[1];return jy.setTwoToneColors({primaryColor:i,secondaryColor:r})}function lP(){var n=jy.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var uP=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function hP(n,e){return mP(n)||pP(n,e)||dP(n,e)||fP()}function fP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dP(n,e){if(n){if(typeof n=="string")return xb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xb(n,e)}}function xb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function pP(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,o,a;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw a}}return i}}function mP(n){if(Array.isArray(n))return n}function bb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){Qv(n,r,t[r])})}return n}function Qv(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gP(n,e){if(n==null)return{};var t=vP(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function vP(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}IT("#1890ff");var Tl=function(e,t){var i,r=bb({},e,t.attrs),s=r.class,o=r.icon,a=r.spin,c=r.rotate,l=r.tabindex,u=r.twoToneColor,h=r.onClick,f=gP(r,uP),d=(i={anticon:!0},Qv(i,"anticon-".concat(o.name),!!o.name),Qv(i,s,s),i),p=a===""||a||o.name==="loading"?"anticon-spin":"",v=l;v===void 0&&h&&(v=-1,f.tabindex=v);var y=c?{msTransform:"rotate(".concat(c,"deg)"),transform:"rotate(".concat(c,"deg)")}:void 0,g=PT(u),m=hP(g,2),w=m[0],b=m[1];return Ce("span",bb({role:"img","aria-label":o.name},f,{onClick:h,class:d}),[Ce(jy,{class:p,icon:o,primaryColor:w,secondaryColor:b,style:y},null)])};Tl.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String};Tl.displayName="AntdIcon";Tl.inheritAttrs=!1;Tl.getTwoToneColor=lP;Tl.setTwoToneColor=IT;const Zn=Tl;var yP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const _P=yP;function wb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){xP(n,r,t[r])})}return n}function xP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Xy=function(e,t){var i=wb({},e,t.attrs);return Ce(Zn,wb({},i,{icon:_P}),null)};Xy.displayName="CheckCircleFilled";Xy.inheritAttrs=!1;const bP=Xy;var wP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const MP=wP;function Mb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){SP(n,r,t[r])})}return n}function SP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Yy=function(e,t){var i=Mb({},e,t.attrs);return Ce(Zn,Mb({},i,{icon:MP}),null)};Yy.displayName="CheckCircleOutlined";Yy.inheritAttrs=!1;const EP=Yy;var TP={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const AP=TP;function Sb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){CP(n,r,t[r])})}return n}function CP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Zy=function(e,t){var i=Sb({},e,t.attrs);return Ce(Zn,Sb({},i,{icon:AP}),null)};Zy.displayName="CloseCircleFilled";Zy.inheritAttrs=!1;const LP=Zy;var RP={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};const PP=RP;function Eb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){IP(n,r,t[r])})}return n}function IP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Jy=function(e,t){var i=Eb({},e,t.attrs);return Ce(Zn,Eb({},i,{icon:PP}),null)};Jy.displayName="CloseCircleOutlined";Jy.inheritAttrs=!1;const DP=Jy;var FP={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const OP=FP;function Tb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){kP(n,r,t[r])})}return n}function kP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Ky=function(e,t){var i=Tb({},e,t.attrs);return Ce(Zn,Tb({},i,{icon:OP}),null)};Ky.displayName="CloseOutlined";Ky.inheritAttrs=!1;const NP=Ky;var BP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};const zP=BP;function Ab(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){UP(n,r,t[r])})}return n}function UP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Qy=function(e,t){var i=Ab({},e,t.attrs);return Ce(Zn,Ab({},i,{icon:zP}),null)};Qy.displayName="DeploymentUnitOutlined";Qy.inheritAttrs=!1;const HP=Qy;var GP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const VP=GP;function Cb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){WP(n,r,t[r])})}return n}function WP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var e_=function(e,t){var i=Cb({},e,t.attrs);return Ce(Zn,Cb({},i,{icon:VP}),null)};e_.displayName="DownOutlined";e_.inheritAttrs=!1;const $P=e_;var qP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const jP=qP;function Lb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){XP(n,r,t[r])})}return n}function XP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var t_=function(e,t){var i=Lb({},e,t.attrs);return Ce(Zn,Lb({},i,{icon:jP}),null)};t_.displayName="ExclamationCircleFilled";t_.inheritAttrs=!1;const YP=t_;var ZP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const JP=ZP;function Rb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){KP(n,r,t[r])})}return n}function KP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var n_=function(e,t){var i=Rb({},e,t.attrs);return Ce(Zn,Rb({},i,{icon:JP}),null)};n_.displayName="ExclamationCircleOutlined";n_.inheritAttrs=!1;const QP=n_;var eI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const tI=eI;function Pb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){nI(n,r,t[r])})}return n}function nI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var i_=function(e,t){var i=Pb({},e,t.attrs);return Ce(Zn,Pb({},i,{icon:tI}),null)};i_.displayName="InfoCircleFilled";i_.inheritAttrs=!1;const iI=i_;var rI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};const sI=rI;function Ib(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){oI(n,r,t[r])})}return n}function oI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var r_=function(e,t){var i=Ib({},e,t.attrs);return Ce(Zn,Ib({},i,{icon:sI}),null)};r_.displayName="InfoCircleOutlined";r_.inheritAttrs=!1;const aI=r_;var cI={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const lI=cI;function Db(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){uI(n,r,t[r])})}return n}function uI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var s_=function(e,t){var i=Db({},e,t.attrs);return Ce(Zn,Db({},i,{icon:lI}),null)};s_.displayName="LoadingOutlined";s_.inheritAttrs=!1;const e0=s_;var hI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482.2 508.4L331.3 389c-3-2.4-7.3-.2-7.3 3.6V478H184V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H144c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H184V546h140v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM880 116H596c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H700v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h140v294H636V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"merge-cells",theme:"outlined"};const fI=hI;function Fb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){dI(n,r,t[r])})}return n}function dI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var o_=function(e,t){var i=Fb({},e,t.attrs);return Ce(Zn,Fb({},i,{icon:fI}),null)};o_.displayName="MergeCellsOutlined";o_.inheritAttrs=!1;const pI=o_;var mI={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M938.2 508.4L787.3 389c-3-2.4-7.3-.2-7.3 3.6V478H636V184h204v128c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V144c0-15.5-12.5-28-28-28H596c-15.5 0-28 12.5-28 28v736c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v128H636V546h144v85.4c0 3.8 4.4 6 7.3 3.6l150.9-119.4a4.5 4.5 0 000-7.2zM428 116H144c-15.5 0-28 12.5-28 28v168c0 2.2 1.8 4 4 4h60c2.2 0 4-1.8 4-4V184h204v294H244v-85.4c0-3.8-4.3-6-7.3-3.6l-151 119.4a4.52 4.52 0 000 7.1l151 119.5c2.9 2.3 7.3.2 7.3-3.6V546h144v294H184V712c0-2.2-1.8-4-4-4h-60c-2.2 0-4 1.8-4 4v168c0 15.5 12.5 28 28 28h284c15.5 0 28-12.5 28-28V144c0-15.5-12.5-28-28-28z"}}]},name:"split-cells",theme:"outlined"};const gI=mI;function Ob(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){vI(n,r,t[r])})}return n}function vI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var a_=function(e,t){var i=Ob({},e,t.attrs);return Ce(Zn,Ob({},i,{icon:gI}),null)};a_.displayName="SplitCellsOutlined";a_.inheritAttrs=!1;const yI=a_;var _I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const xI=_I;function kb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),i.forEach(function(r){bI(n,r,t[r])})}return n}function bI(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var c_=function(e,t){var i=kb({},e,t.attrs);return Ce(Zn,kb({},i,{icon:xI}),null)};c_.displayName="UpOutlined";c_.inheritAttrs=!1;const wI=c_,MI="124",no={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},io={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},SI=0,Nb=1,EI=2,DT=1,Jh=2,bu=3,Kh=0,yn=1,Rn=2,FT=1,ku=0,Nu=1,pa=2,Bb=3,zb=4,TI=5,xc=100,AI=101,CI=102,Ub=103,Hb=104,LI=200,RI=201,PI=202,II=203,OT=204,kT=205,DI=206,FI=207,OI=208,kI=209,NI=210,BI=0,zI=1,UI=2,t0=3,HI=4,GI=5,VI=6,WI=7,im=0,$I=1,qI=2,Bu=0,jI=1,XI=2,YI=3,ZI=4,JI=5,NT=300,l_=301,u_=302,n0=303,Gb=304,h_=306,f_=307,Nr=1e3,On=1001,cp=1002,kn=1003,i0=1004,r0=1005,bn=1006,BT=1007,el=1008,d_=1009,KI=1010,QI=1011,lp=1012,eD=1013,Zd=1014,so=1015,up=1016,tD=1017,nD=1018,iD=1019,zu=1020,rD=1021,fo=1022,or=1023,sD=1024,oD=1025,Wc=1026,dh=1027,aD=1028,cD=1029,lD=1030,uD=1031,hD=1032,fD=1033,Vb=33776,Wb=33777,$b=33778,qb=33779,jb=35840,Xb=35841,Yb=35842,Zb=35843,dD=36196,Jb=37492,Kb=37496,pD=37808,mD=37809,gD=37810,vD=37811,yD=37812,_D=37813,xD=37814,bD=37815,wD=37816,MD=37817,SD=37818,ED=37819,TD=37820,AD=37821,CD=36492,LD=37840,RD=37841,PD=37842,ID=37843,DD=37844,FD=37845,OD=37846,kD=37847,ND=37848,BD=37849,zD=37850,UD=37851,HD=37852,GD=37853,VD=2200,WD=2201,$D=2202,ph=2300,$c=2301,Xm=2302,Cc=2400,Lc=2401,hp=2402,p_=2500,zT=2501,qD=0,jD=1,Qb=2,Qh=3e3,Ir=3001,XD=3007,YD=3002,ZD=3003,JD=3004,KD=3005,QD=3006,eF=3200,tF=3201,La=0,nF=1,Ym=7680,iF=519,rm=35044,mh=35048,ew="300 es";function fr(){}Object.assign(fr.prototype,{addEventListener:function(n,e){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)},hasEventListener:function(n,e){if(this._listeners===void 0)return!1;const t=this._listeners;return t[n]!==void 0&&t[n].indexOf(e)!==-1},removeEventListener:function(n,e){if(this._listeners===void 0)return;const i=this._listeners[n];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}},dispatchEvent:function(n){if(this._listeners===void 0)return;const t=this._listeners[n.type];if(t!==void 0){n.target=this;const i=t.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,n)}}});const Sn=[];for(let n=0;n<256;n++)Sn[n]=(n<16?"0":"")+n.toString(16);let _f=1234567;const Ue={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Sn[n&255]+Sn[n>>8&255]+Sn[n>>16&255]+Sn[n>>24&255]+"-"+Sn[e&255]+Sn[e>>8&255]+"-"+Sn[e>>16&15|64]+Sn[e>>24&255]+"-"+Sn[t&63|128]+Sn[t>>8&255]+"-"+Sn[t>>16&255]+Sn[t>>24&255]+Sn[i&255]+Sn[i>>8&255]+Sn[i>>16&255]+Sn[i>>24&255]).toUpperCase()},clamp:function(n,e,t){return Math.max(e,Math.min(t,n))},euclideanModulo:function(n,e){return(n%e+e)%e},mapLinear:function(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},lerp:function(n,e,t){return(1-t)*n+t*e},smoothstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},smootherstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))},randInt:function(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function(n,e){return n+Math.random()*(e-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){return n!==void 0&&(_f=n%2147483647),_f=_f*16807%2147483647,(_f-1)/2147483646},degToRad:function(n){return n*Ue.DEG2RAD},radToDeg:function(n){return n*Ue.RAD2DEG},isPowerOfTwo:function(n){return(n&n-1)===0&&n!==0},ceilPowerOfTwo:function(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:function(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},setQuaternionFromProperEuler:function(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),h=s((e-i)/2),f=o((e-i)/2),d=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*h,c*f,a*l);break;case"YZY":n.set(c*f,a*u,c*h,a*l);break;case"ZXZ":n.set(c*h,c*f,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*d,a*l);break;case"YXY":n.set(c*d,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*d,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};let Te=class{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}},Wn=class{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],h=i[7],f=i[2],d=i[5],p=i[8],v=r[0],y=r[3],g=r[6],m=r[1],w=r[4],b=r[7],E=r[2],S=r[5],P=r[8];return s[0]=o*v+a*m+c*E,s[3]=o*y+a*w+c*S,s[6]=o*g+a*b+c*P,s[1]=l*v+u*m+h*E,s[4]=l*y+u*w+h*S,s[7]=l*g+u*b+h*P,s[2]=f*v+d*m+p*E,s[5]=f*y+d*w+p*S,s[8]=f*g+d*b+p*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=a*c-u*s,d=l*s-o*c,p=t*h+i*f+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(r*l-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=f*v,e[4]=(u*t-r*c)*v,e[5]=(r*s-a*t)*v,e[6]=d*v,e[7]=(i*c-l*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}},Oa;const Al={getDataURL:function(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let e;if(n instanceof HTMLCanvasElement)e=n;else{Oa===void 0&&(Oa=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Oa.width=n.width,Oa.height=n.height;const t=Oa.getContext("2d");n instanceof ImageData?t.putImageData(n,0,0):t.drawImage(n,0,0,n.width,n.height),e=Oa}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let rF=0;function Ct(n=Ct.DEFAULT_IMAGE,e=Ct.DEFAULT_MAPPING,t=On,i=On,r=bn,s=el,o=or,a=d_,c=1,l=Qh){Object.defineProperty(this,"id",{value:rF++}),this.uuid=Ue.generateUUID(),this.name="",this.image=n,this.mipmaps=[],this.mapping=e,this.wrapS=t,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Te(0,0),this.repeat=new Te(1,1),this.center=new Te(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=l,this.version=0,this.onUpdate=null}Ct.DEFAULT_IMAGE=void 0;Ct.DEFAULT_MAPPING=NT;Ct.prototype=Object.assign(Object.create(fr.prototype),{constructor:Ct,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.name=n.name,this.image=n.image,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.encoding=n.encoding,this},toJSON:function(n){const e=n===void 0||typeof n=="string";if(!e&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Ue.generateUUID()),!e&&n.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?r.push(Zm(i[s].image)):r.push(Zm(i[s]))}else r=Zm(i);n.images[i.uuid]={uuid:i.uuid,url:r}}t.image=i.uuid}return e||(n.textures[this.uuid]=t),t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(n){if(this.mapping!==NT)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case Nr:n.x=n.x-Math.floor(n.x);break;case On:n.x=n.x<0?0:1;break;case cp:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case Nr:n.y=n.y-Math.floor(n.y);break;case On:n.y=n.y<0?0:1;break;case cp:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}});Object.defineProperty(Ct.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function Zm(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Al.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vt=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],h=c[8],f=c[1],d=c[5],p=c[9],v=c[2],y=c[6],g=c[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(p-y)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(p+y)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(l+1)/2,b=(d+1)/2,E=(g+1)/2,S=(u+f)/4,P=(h+v)/4,N=(p+y)/4;return w>b&&w>E?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=S/i,s=P/i):b>E?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=N/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=P/s,r=N/s),this.set(i,r,s,t),this}let m=Math.sqrt((y-p)*(y-p)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(m)<.001&&(m=1),this.x=(y-p)/m,this.y=(h-v)/m,this.z=(f-u)/m,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}};function ar(n,e,t){this.width=n,this.height=e,this.scissor=new vt(0,0,n,e),this.scissorTest=!1,this.viewport=new vt(0,0,n,e),t=t||{},this.texture=new Ct(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.image={},this.texture.image.width=n,this.texture.image.height=e,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:bn,this.depthBuffer=t.depthBuffer!==void 0?t.depthBuffer:!0,this.stencilBuffer=t.stencilBuffer!==void 0?t.stencilBuffer:!1,this.depthTexture=t.depthTexture!==void 0?t.depthTexture:null}ar.prototype=Object.assign(Object.create(fr.prototype),{constructor:ar,isWebGLRenderTarget:!0,setSize:function(n,e){(this.width!==n||this.height!==e)&&(this.width=n,this.height=e,this.texture.image.width=n,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,n,e),this.scissor.set(0,0,n,e)},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.width=n.width,this.height=n.height,this.viewport.copy(n.viewport),this.texture=n.texture.clone(),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function tw(n,e,t){ar.call(this,n,e,t),this.samples=4}tw.prototype=Object.assign(Object.create(ar.prototype),{constructor:tw,isWebGLMultisampleRenderTarget:!0,copy:function(n){return ar.prototype.copy.call(this,n),this.samples=n.samples,this}});let en=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return i.copy(e).slerp(t,r)}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],d=s[o+1],p=s[o+2],v=s[o+3];if(h!==v||c!==f||l!==d||u!==p){let y=1-a;const g=c*f+l*d+u*p+h*v,m=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const E=Math.sqrt(w),S=Math.atan2(E,g*m);y=Math.sin(y*S)/E,a=Math.sin(a*S)/E}const b=a*m;if(c=c*y+f*b,l=l*y+d*b,u=u*y+p*b,h=h*y+v*b,y===1-a){const E=1/Math.sqrt(c*c+l*l+u*u+h*h);c*=E,l*=E,u*=E,h*=E}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],h=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+u*h+c*d-l*f,e[t+1]=c*p+u*f+l*h-a*d,e[t+2]=l*p+u*d+a*f-c*h,e[t+3]=u*p-a*h-c*f-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),h=a(s/2),f=c(i/2),d=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=f*u*h+l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h-f*d*p;break;case"YXZ":this._x=f*u*h+l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h+f*d*p;break;case"ZXY":this._x=f*u*h-l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h-f*d*p;break;case"ZYX":this._x=f*u*h-l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h+f*d*p;break;case"YZX":this._x=f*u*h+l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h-f*d*p;break;case"XZY":this._x=f*u*h-l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],h=t[10],f=i+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-c)*d,this._y=(s-l)*d,this._z=(o-r)*d}else if(i>a&&i>h){const d=2*Math.sqrt(1+i-a-h);this._w=(u-c)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+l)/d}else if(a>h){const d=2*Math.sqrt(1+a-i-h);this._w=(s-l)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(c+u)/d}else{const d=2*Math.sqrt(1+h-i-a);this._w=(o-r)/d,this._x=(s+l)/d,this._y=(c+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ue.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}},te=class{constructor(e=0,t=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(nw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(nw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,h=c*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=l*c+f*-s+u*-a-h*-o,this.y=u*c+f*-o+h*-s-l*-a,this.z=h*c+f*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Jm.copy(this).projectOnVector(e),this.sub(Jm)}reflect(e){return this.sub(Jm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ue.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}};const Jm=new te,nw=new en;let Cs=class{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new te(1/0,1/0,1/0),this.max=t!==void 0?t:new te(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],h=e[c+1],f=e[c+2];u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),h=e.getY(c),f=e.getZ(c);u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ql.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new te),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new te),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Qm.copy(t.boundingBox),Qm.applyMatrix4(e.matrixWorld),this.union(Qm));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new te),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ql),ql.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(jl),xf.subVectors(this.max,jl),ka.subVectors(e.a,jl),Na.subVectors(e.b,jl),Ba.subVectors(e.c,jl),ks.subVectors(Na,ka),Ns.subVectors(Ba,Na),Vo.subVectors(ka,Ba);let t=[0,-ks.z,ks.y,0,-Ns.z,Ns.y,0,-Vo.z,Vo.y,ks.z,0,-ks.x,Ns.z,0,-Ns.x,Vo.z,0,-Vo.x,-ks.y,ks.x,0,-Ns.y,Ns.x,0,-Vo.y,Vo.x,0];return!Km(t,ka,Na,Ba,xf)||(t=[1,0,0,0,1,0,0,0,1],!Km(t,ka,Na,Ba,xf))?!1:(bf.crossVectors(ks,Ns),t=[bf.x,bf.y,bf.z],Km(t,ka,Na,Ba,xf))}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new te),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ql.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(ql).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(is[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),is[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),is[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),is[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),is[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),is[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),is[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),is[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(is),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};function Km(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Wo.fromArray(n,s);const a=r.x*Math.abs(Wo.x)+r.y*Math.abs(Wo.y)+r.z*Math.abs(Wo.z),c=e.dot(Wo),l=t.dot(Wo),u=i.dot(Wo);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const is=[new te,new te,new te,new te,new te,new te,new te,new te],ql=new te,Qm=new Cs,ka=new te,Na=new te,Ba=new te,ks=new te,Ns=new te,Vo=new te,jl=new te,xf=new te,bf=new te,Wo=new te,sF=new Cs;let Ls=class{constructor(e,t){this.center=e!==void 0?e:new te,this.radius=t!==void 0?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):sF.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new te),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Cs),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}};const rs=new te,eg=new te,wf=new te,Bs=new te,tg=new te,Mf=new te,ng=new te;let Ra=class{constructor(e,t){this.origin=e!==void 0?e:new te,this.direction=t!==void 0?t:new te(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new te),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,rs)),this}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new te),t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=rs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(rs.copy(this.direction).multiplyScalar(t).add(this.origin),rs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){eg.copy(e).add(t).multiplyScalar(.5),wf.copy(t).sub(e).normalize(),Bs.copy(this.origin).sub(eg);const s=e.distanceTo(t)*.5,o=-this.direction.dot(wf),a=Bs.dot(this.direction),c=-Bs.dot(wf),l=Bs.lengthSq(),u=Math.abs(1-o*o);let h,f,d,p;if(u>0)if(h=o*c-a,f=o*a-c,p=s*u,h>=0)if(f>=-p)if(f<=p){const v=1/u;h*=v,f*=v,d=h*(h+o*f+2*a)+f*(o*h+f+2*c)+l}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;else f<=-p?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-c),s),d=-h*h+f*(f+2*c)+l):f<=p?(h=0,f=Math.min(Math.max(-s,-c),s),d=f*(f+2*c)+l):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-c),s),d=-h*h+f*(f+2*c)+l);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(wf).multiplyScalar(f).add(eg),d}intersectSphere(e,t){rs.subVectors(e.center,this.origin);const i=rs.dot(this.direction),r=rs.dot(rs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return l>=0?(i=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(i=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),h>=0?(a=(e.min.z-f.z)*h,c=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,c=(e.min.z-f.z)*h),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,rs)!==null}intersectTriangle(e,t,i,r,s){tg.subVectors(t,e),Mf.subVectors(i,e),ng.crossVectors(tg,Mf);let o=this.direction.dot(ng),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Bs.subVectors(this.origin,e);const c=a*this.direction.dot(Mf.crossVectors(Bs,Mf));if(c<0)return null;const l=a*this.direction.dot(tg.cross(Bs));if(l<0||c+l>o)return null;const u=-a*Bs.dot(ng);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},Oe=class UT{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,l,u,h,f,d,p,v,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=h,g[14]=f,g[3]=d,g[7]=p,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new UT().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/za.setFromMatrixColumn(e,0).length(),s=1/za.setFromMatrixColumn(e,1).length(),o=1/za.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,d=o*h,p=a*u,v=a*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=d+p*l,t[5]=f-v*l,t[9]=-a*c,t[2]=v-f*l,t[6]=p+d*l,t[10]=o*c}else if(e.order==="YXZ"){const f=c*u,d=c*h,p=l*u,v=l*h;t[0]=f+v*a,t[4]=p*a-d,t[8]=o*l,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=d*a-p,t[6]=v+f*a,t[10]=o*c}else if(e.order==="ZXY"){const f=c*u,d=c*h,p=l*u,v=l*h;t[0]=f-v*a,t[4]=-o*h,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*u,t[9]=v-f*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const f=o*u,d=o*h,p=a*u,v=a*h;t[0]=c*u,t[4]=p*l-d,t[8]=f*l+v,t[1]=c*h,t[5]=v*l+f,t[9]=d*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const f=o*c,d=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=v-f*h,t[8]=p*h+d,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=d*h+p,t[10]=f-v*h}else if(e.order==="XZY"){const f=o*c,d=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=f*h+v,t[5]=o*u,t[9]=d*h-p,t[2]=p*h-d,t[6]=a*u,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oF,e,aF)}lookAt(e,t,i){const r=this.elements;return hi.subVectors(e,t),hi.lengthSq()===0&&(hi.z=1),hi.normalize(),zs.crossVectors(i,hi),zs.lengthSq()===0&&(Math.abs(i.z)===1?hi.x+=1e-4:hi.z+=1e-4,hi.normalize(),zs.crossVectors(i,hi)),zs.normalize(),Sf.crossVectors(hi,zs),r[0]=zs.x,r[4]=Sf.x,r[8]=hi.x,r[1]=zs.y,r[5]=Sf.y,r[9]=hi.y,r[2]=zs.z,r[6]=Sf.z,r[10]=hi.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],h=i[5],f=i[9],d=i[13],p=i[2],v=i[6],y=i[10],g=i[14],m=i[3],w=i[7],b=i[11],E=i[15],S=r[0],P=r[4],N=r[8],z=r[12],_=r[1],x=r[5],T=r[9],A=r[13],M=r[2],L=r[6],I=r[10],k=r[14],W=r[3],j=r[7],G=r[11],ee=r[15];return s[0]=o*S+a*_+c*M+l*W,s[4]=o*P+a*x+c*L+l*j,s[8]=o*N+a*T+c*I+l*G,s[12]=o*z+a*A+c*k+l*ee,s[1]=u*S+h*_+f*M+d*W,s[5]=u*P+h*x+f*L+d*j,s[9]=u*N+h*T+f*I+d*G,s[13]=u*z+h*A+f*k+d*ee,s[2]=p*S+v*_+y*M+g*W,s[6]=p*P+v*x+y*L+g*j,s[10]=p*N+v*T+y*I+g*G,s[14]=p*z+v*A+y*k+g*ee,s[3]=m*S+w*_+b*M+E*W,s[7]=m*P+w*x+b*L+E*j,s[11]=m*N+w*T+b*I+E*G,s[15]=m*z+w*A+b*k+E*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],h=e[6],f=e[10],d=e[14],p=e[3],v=e[7],y=e[11],g=e[15];return p*(+s*c*h-r*l*h-s*a*f+i*l*f+r*a*d-i*c*d)+v*(+t*c*d-t*l*f+s*o*f-r*o*d+r*l*u-s*c*u)+y*(+t*l*h-t*a*d-s*o*h+i*o*d+s*a*u-i*l*u)+g*(-r*a*u-t*c*h+t*a*f+r*o*h-i*o*f+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],y=e[14],g=e[15],m=h*y*l-v*f*l+v*c*d-a*y*d-h*c*g+a*f*g,w=p*f*l-u*y*l-p*c*d+o*y*d+u*c*g-o*f*g,b=u*v*l-p*h*l+p*a*d-o*v*d-u*a*g+o*h*g,E=p*h*c-u*v*c-p*a*f+o*v*f+u*a*y-o*h*y,S=t*m+i*w+r*b+s*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/S;return e[0]=m*P,e[1]=(v*f*s-h*y*s-v*r*d+i*y*d+h*r*g-i*f*g)*P,e[2]=(a*y*s-v*c*s+v*r*l-i*y*l-a*r*g+i*c*g)*P,e[3]=(h*c*s-a*f*s-h*r*l+i*f*l+a*r*d-i*c*d)*P,e[4]=w*P,e[5]=(u*y*s-p*f*s+p*r*d-t*y*d-u*r*g+t*f*g)*P,e[6]=(p*c*s-o*y*s-p*r*l+t*y*l+o*r*g-t*c*g)*P,e[7]=(o*f*s-u*c*s+u*r*l-t*f*l-o*r*d+t*c*d)*P,e[8]=b*P,e[9]=(p*h*s-u*v*s-p*i*d+t*v*d+u*i*g-t*h*g)*P,e[10]=(o*v*s-p*a*s+p*i*l-t*v*l-o*i*g+t*a*g)*P,e[11]=(u*a*s-o*h*s-u*i*l+t*h*l+o*i*d-t*a*d)*P,e[12]=E*P,e[13]=(u*v*r-p*h*r+p*i*f-t*v*f-u*i*y+t*h*y)*P,e[14]=(p*a*r-o*v*r-p*i*c+t*v*c+o*i*y-t*a*y)*P,e[15]=(o*h*r-u*a*r+u*i*c-t*h*c-o*i*f+t*a*f)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,h=a+a,f=s*l,d=s*u,p=s*h,v=o*u,y=o*h,g=a*h,m=c*l,w=c*u,b=c*h,E=i.x,S=i.y,P=i.z;return r[0]=(1-(v+g))*E,r[1]=(d+b)*E,r[2]=(p-w)*E,r[3]=0,r[4]=(d-b)*S,r[5]=(1-(f+g))*S,r[6]=(y+m)*S,r[7]=0,r[8]=(p+w)*P,r[9]=(y-m)*P,r[10]=(1-(f+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=za.set(r[0],r[1],r[2]).length();const o=za.set(r[4],r[5],r[6]).length(),a=za.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],$i.copy(this);const l=1/s,u=1/o,h=1/a;return $i.elements[0]*=l,$i.elements[1]*=l,$i.elements[2]*=l,$i.elements[4]*=u,$i.elements[5]*=u,$i.elements[6]*=u,$i.elements[8]*=h,$i.elements[9]*=h,$i.elements[10]*=h,t.setFromRotationMatrix($i),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(t-e),l=2*s/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=c,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),h=(t+e)*c,f=(i+r)*l,d=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const za=new te,$i=new Oe,oF=new te(0,0,0),aF=new te(1,1,1),zs=new te,Sf=new te,hi=new te;let oo=class HT{constructor(e=0,t=0,i=0,r=HT.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,i){const r=Ue.clamp,s=e.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],h=s[9],f=s[2],d=s[6],p=s[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return iw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iw,t,i)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return rw.setFromEuler(this),this.setFromQuaternion(rw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new te(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};oo.DefaultOrder="XYZ";oo.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const iw=new Oe,rw=new en;let GT=class{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}},cF=0;const sw=new te,Ua=new en,ss=new Oe,Ef=new te,Xl=new te,lF=new te,uF=new en,ow=new te(1,0,0),aw=new te(0,1,0),cw=new te(0,0,1),hF={type:"added"},lw={type:"removed"};function Ne(){Object.defineProperty(this,"id",{value:cF++}),this.uuid=Ue.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ne.DefaultUp.clone();const n=new te,e=new oo,t=new en,i=new te(1,1,1);function r(){t.setFromEuler(e,!1)}function s(){e.setFromQuaternion(t,void 0,!1)}e._onChange(r),t._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Oe},normalMatrix:{value:new Wn}}),this.matrix=new Oe,this.matrixWorld=new Oe,this.matrixAutoUpdate=Ne.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new GT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Ne.DefaultUp=new te(0,1,0);Ne.DefaultMatrixAutoUpdate=!0;Ne.prototype=Object.assign(Object.create(fr.prototype),{constructor:Ne,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(n){return this.quaternion.premultiply(n),this},setRotationFromAxisAngle:function(n,e){this.quaternion.setFromAxisAngle(n,e)},setRotationFromEuler:function(n){this.quaternion.setFromEuler(n,!0)},setRotationFromMatrix:function(n){this.quaternion.setFromRotationMatrix(n)},setRotationFromQuaternion:function(n){this.quaternion.copy(n)},rotateOnAxis:function(n,e){return Ua.setFromAxisAngle(n,e),this.quaternion.multiply(Ua),this},rotateOnWorldAxis:function(n,e){return Ua.setFromAxisAngle(n,e),this.quaternion.premultiply(Ua),this},rotateX:function(n){return this.rotateOnAxis(ow,n)},rotateY:function(n){return this.rotateOnAxis(aw,n)},rotateZ:function(n){return this.rotateOnAxis(cw,n)},translateOnAxis:function(n,e){return sw.copy(n).applyQuaternion(this.quaternion),this.position.add(sw.multiplyScalar(e)),this},translateX:function(n){return this.translateOnAxis(ow,n)},translateY:function(n){return this.translateOnAxis(aw,n)},translateZ:function(n){return this.translateOnAxis(cw,n)},localToWorld:function(n){return n.applyMatrix4(this.matrixWorld)},worldToLocal:function(n){return n.applyMatrix4(ss.copy(this.matrixWorld).invert())},lookAt:function(n,e,t){n.isVector3?Ef.copy(n):Ef.set(n,e,t);const i=this.parent;this.updateWorldMatrix(!0,!1),Xl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ss.lookAt(Xl,Ef,this.up):ss.lookAt(Ef,Xl,this.up),this.quaternion.setFromRotationMatrix(ss),i&&(ss.extractRotation(i.matrixWorld),Ua.setFromRotationMatrix(ss),this.quaternion.premultiply(Ua.invert()))},add:function(n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.parent!==null&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(hF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)},remove:function(n){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(n);return e!==-1&&(n.parent=null,this.children.splice(e,1),n.dispatchEvent(lw)),this},clear:function(){for(let n=0;n<this.children.length;n++){const e=this.children[n];e.parent=null,e.dispatchEvent(lw)}return this.children.length=0,this},attach:function(n){return this.updateWorldMatrix(!0,!1),ss.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),ss.multiply(n.parent.matrixWorld)),n.applyMatrix4(ss),n.updateWorldMatrix(!1,!1),this.add(n),this},getObjectById:function(n){return this.getObjectByProperty("id",n)},getObjectByName:function(n){return this.getObjectByProperty("name",n)},getObjectByProperty:function(n,e){if(this[n]===e)return this;for(let t=0,i=this.children.length;t<i;t++){const s=this.children[t].getObjectByProperty(n,e);if(s!==void 0)return s}},getWorldPosition:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),n=new te),this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new en),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xl,n,lF),n},getWorldScale:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new te),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Xl,uF,n),n},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),n=new te),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(n){n(this);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverse(n)},traverseVisible:function(n){if(this.visible===!1)return;n(this);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverseVisible(n)},traverseAncestors:function(n){const e=this.parent;e!==null&&(n(e),e.traverseAncestors(n))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateMatrixWorld(n)},updateWorldMatrix:function(n,e){const t=this.parent;if(n===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(n){const e=n===void 0||typeof n=="string",t={};e&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(n)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(n.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let c=0,l=a.length;c<l;c++){const u=a[c];r(n.shapes,u)}else r(n.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(n.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,c=this.material.length;a<c;a++)o.push(r(n.materials,this.material[a]));i.material=o}else i.material=r(n.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(n).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const a=this.animations[o];i.animations.push(r(n.animations,a))}}if(e){const o=s(n.geometries),a=s(n.materials),c=s(n.textures),l=s(n.images),u=s(n.shapes),h=s(n.skeletons),f=s(n.animations);o.length>0&&(t.geometries=o),a.length>0&&(t.materials=a),c.length>0&&(t.textures=c),l.length>0&&(t.images=l),u.length>0&&(t.shapes=u),h.length>0&&(t.skeletons=h),f.length>0&&(t.animations=f)}return t.object=i,t;function s(o){const a=[];for(const c in o){const l=o[c];delete l.metadata,a.push(l)}return a}},clone:function(n){return new this.constructor().copy(this,n)},copy:function(n,e=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),e===!0)for(let t=0;t<n.children.length;t++){const i=n.children[t];this.add(i.clone())}return this}});const ig=new te,fF=new te,dF=new Wn;let ys=class{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new te(1,0,0),this.constant=t!==void 0?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ig.subVectors(i,t).cross(fF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new te),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new te);const i=e.delta(ig),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;const s=-(e.start.dot(this.normal)+this.constant)/r;if(!(s<0||s>1))return t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new te),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||dF.getNormalMatrix(e),r=this.coplanarPoint(ig).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}};const qi=new te,os=new te,rg=new te,as=new te,Ha=new te,Ga=new te,uw=new te,sg=new te,og=new te,ag=new te;let Br=class bc{constructor(e,t,i){this.a=e!==void 0?e:new te,this.b=t!==void 0?t:new te,this.c=i!==void 0?i:new te}static getNormal(e,t,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new te),r.subVectors(i,t),qi.subVectors(e,t),r.cross(qi);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){qi.subVectors(r,t),os.subVectors(i,t),rg.subVectors(e,t);const o=qi.dot(qi),a=qi.dot(os),c=qi.dot(rg),l=os.dot(os),u=os.dot(rg),h=o*l-a*a;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new te),h===0)return s.set(-2,-1,-1);const f=1/h,d=(l*c-a*u)*f,p=(o*u-a*c)*f;return s.set(1-d-p,p,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,as),as.x>=0&&as.y>=0&&as.x+as.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,as),c.set(0,0),c.addScaledVector(s,as.x),c.addScaledVector(o,as.y),c.addScaledVector(a,as.z),c}static isFrontFacing(e,t,i,r){return qi.subVectors(i,t),os.subVectors(e,t),qi.cross(os).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qi.subVectors(this.c,this.b),os.subVectors(this.a,this.b),qi.cross(os).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new te),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return bc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ys),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return bc.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return bc.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return bc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return bc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new te);const i=this.a,r=this.b,s=this.c;let o,a;Ha.subVectors(r,i),Ga.subVectors(s,i),sg.subVectors(e,i);const c=Ha.dot(sg),l=Ga.dot(sg);if(c<=0&&l<=0)return t.copy(i);og.subVectors(e,r);const u=Ha.dot(og),h=Ga.dot(og);if(u>=0&&h<=u)return t.copy(r);const f=c*h-u*l;if(f<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Ha,o);ag.subVectors(e,s);const d=Ha.dot(ag),p=Ga.dot(ag);if(p>=0&&d<=p)return t.copy(s);const v=d*l-c*p;if(v<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(Ga,a);const y=u*p-d*h;if(y<=0&&h-u>=0&&d-p>=0)return uw.subVectors(s,r),a=(h-u)/(h-u+(d-p)),t.copy(r).addScaledVector(uw,a);const g=1/(y+v+f);return o=v*g,a=f*g,t.copy(i).addScaledVector(Ha,o).addScaledVector(Ga,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const VT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ji={h:0,s:0,l:0},Tf={h:0,s:0,l:0};function cg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function lg(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ug(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Fe=class{constructor(e,t,i){return Object.defineProperty(this,"isColor",{value:!0}),t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=Ue.euclideanModulo(e,1),t=Ue.clamp(t,0,1),i=Ue.clamp(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=cg(s,r,e+1/3),this.g=cg(s,r,e),this.b=cg(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,c,l)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=VT[e];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=lg(e.r),this.g=lg(e.g),this.b=lg(e.b),this}copyLinearToSRGB(e){return this.r=ug(e.r),this.g=ug(e.g),this.b=ug(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),o=Math.min(t,i,r);let a,c;const l=(o+s)/2;if(o===s)a=0,c=0;else{const u=s-o;switch(c=l<=.5?u/(s+o):u/(2-s-o),s){case t:a=(i-r)/u+(i<r?6:0);break;case i:a=(r-t)/u+2;break;case r:a=(t-i)/u+4;break}a/=6}return e.h=a,e.s=c,e.l=l,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(ji),ji.h+=e,ji.s+=t,ji.l+=i,this.setHSL(ji.h,ji.s,ji.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpHSL(e,t){this.getHSL(ji),e.getHSL(Tf);const i=Ue.lerp(ji.h,Tf.h,t),r=Ue.lerp(ji.s,Tf.s,t),s=Ue.lerp(ji.l,Tf.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};Fe.NAMES=VT;Fe.prototype.r=1;Fe.prototype.g=1;Fe.prototype.b=1;class s0{constructor(e,t,i,r,s,o=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new te,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new Fe,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let pF=0;function je(){Object.defineProperty(this,"id",{value:pF++}),this.uuid=Ue.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Nu,this.side=Kh,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=OT,this.blendDst=kT,this.blendEquation=xc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=t0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ym,this.stencilZFail=Ym,this.stencilZPass=Ym,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}je.prototype=Object.assign(Object.create(fr.prototype),{constructor:je,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(n){if(n!==void 0)for(const e in n){const t=n[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===FT;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(t):i&&i.isVector3&&t&&t.isVector3?i.copy(t):this[e]=t}},toJSON:function(n){const e=n===void 0||typeof n=="string";e&&(n={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(t.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(n).uuid),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(n).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(n).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(n).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(n).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(n).uuid,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,this.combine!==void 0&&(t.combine=this.combine),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(n).uuid),this.size!==void 0&&(t.size=this.size),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Nu&&(t.blending=this.blending),this.flatShading===!0&&(t.flatShading=this.flatShading),this.side!==Kh&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.morphNormals===!0&&(t.morphNormals=!0),this.skinning===!0&&(t.skinning=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function i(r){const s=[];for(const o in r){const a=r[o];delete a.metadata,s.push(a)}return s}if(e){const r=i(n.textures),s=i(n.images);r.length>0&&(t.textures=r),s.length>0&&(t.images=s)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(n){this.name=n.name,this.fog=n.fog,this.blending=n.blending,this.side=n.side,this.flatShading=n.flatShading,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const e=n.clippingPlanes;let t=null;if(e!==null){const i=e.length;t=new Array(i);for(let r=0;r!==i;++r)t[r]=e[r].clone()}return this.clippingPlanes=t,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(je.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function ct(n){je.call(this),this.type="MeshBasicMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=im,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(n)}ct.prototype=Object.create(je.prototype);ct.prototype.constructor=ct;ct.prototype.isMeshBasicMaterial=!0;ct.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this};const Ft=new te,Af=new Te;function Xe(n,e,t){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=e,this.count=n!==void 0?n.length/e:0,this.normalized=t===!0,this.usage=rm,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Xe.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(Xe.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.itemSize,t*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[n+i]=e.array[t+i];return this},copyArray:function(n){return this.array.set(n),this},copyColorsArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Fe),e[t++]=s.r,e[t++]=s.g,e[t++]=s.b}return this},copyVector2sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Te),e[t++]=s.x,e[t++]=s.y}return this},copyVector3sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new te),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z}return this},copyVector4sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new vt),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z,e[t++]=s.w}return this},applyMatrix3:function(n){if(this.itemSize===2)for(let e=0,t=this.count;e<t;e++)Af.fromBufferAttribute(this,e),Af.applyMatrix3(n),this.setXY(e,Af.x,Af.y);else if(this.itemSize===3)for(let e=0,t=this.count;e<t;e++)Ft.fromBufferAttribute(this,e),Ft.applyMatrix3(n),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this},applyMatrix4:function(n){for(let e=0,t=this.count;e<t;e++)Ft.x=this.getX(e),Ft.y=this.getY(e),Ft.z=this.getZ(e),Ft.applyMatrix4(n),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this},applyNormalMatrix:function(n){for(let e=0,t=this.count;e<t;e++)Ft.x=this.getX(e),Ft.y=this.getY(e),Ft.z=this.getZ(e),Ft.applyNormalMatrix(n),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this},transformDirection:function(n){for(let e=0,t=this.count;e<t;e++)Ft.x=this.getX(e),Ft.y=this.getY(e),Ft.z=this.getZ(e),Ft.transformDirection(n),this.setXYZ(e,Ft.x,Ft.y,Ft.z);return this},set:function(n,e=0){return this.array.set(n,e),this},getX:function(n){return this.array[n*this.itemSize]},setX:function(n,e){return this.array[n*this.itemSize]=e,this},getY:function(n){return this.array[n*this.itemSize+1]},setY:function(n,e){return this.array[n*this.itemSize+1]=e,this},getZ:function(n){return this.array[n*this.itemSize+2]},setZ:function(n,e){return this.array[n*this.itemSize+2]=e,this},getW:function(n){return this.array[n*this.itemSize+3]},setW:function(n,e){return this.array[n*this.itemSize+3]=e,this},setXY:function(n,e,t){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this.array[n+3]=r,this},onUpload:function(n){return this.onUploadCallback=n,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function o0(n,e,t){Xe.call(this,new Int8Array(n),e,t)}o0.prototype=Object.create(Xe.prototype);o0.prototype.constructor=o0;function a0(n,e,t){Xe.call(this,new Uint8Array(n),e,t)}a0.prototype=Object.create(Xe.prototype);a0.prototype.constructor=a0;function c0(n,e,t){Xe.call(this,new Uint8ClampedArray(n),e,t)}c0.prototype=Object.create(Xe.prototype);c0.prototype.constructor=c0;function l0(n,e,t){Xe.call(this,new Int16Array(n),e,t)}l0.prototype=Object.create(Xe.prototype);l0.prototype.constructor=l0;function tl(n,e,t){Xe.call(this,new Uint16Array(n),e,t)}tl.prototype=Object.create(Xe.prototype);tl.prototype.constructor=tl;function u0(n,e,t){Xe.call(this,new Int32Array(n),e,t)}u0.prototype=Object.create(Xe.prototype);u0.prototype.constructor=u0;function gh(n,e,t){Xe.call(this,new Uint32Array(n),e,t)}gh.prototype=Object.create(Xe.prototype);gh.prototype.constructor=gh;function fp(n,e,t){Xe.call(this,new Uint16Array(n),e,t)}fp.prototype=Object.create(Xe.prototype);fp.prototype.constructor=fp;fp.prototype.isFloat16BufferAttribute=!0;function We(n,e,t){Xe.call(this,new Float32Array(n),e,t)}We.prototype=Object.create(Xe.prototype);We.prototype.constructor=We;function h0(n,e,t){Xe.call(this,new Float64Array(n),e,t)}h0.prototype=Object.create(Xe.prototype);h0.prototype.constructor=h0;class mF{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const t=[];let i,r,s;const o=e.faces;for(r=0;r<o.length;r++){const a=o[r];a.materialIndex!==s&&(s=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:s})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){const t=e.faces,i=e.vertices,r=e.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,c=a.length;let l;if(c>0){l=[];for(let g=0;g<c;g++)l[g]={name:a[g].name,data:[]};this.morphTargets.position=l}const u=e.morphNormals,h=u.length;let f;if(h>0){f=[];for(let g=0;g<h;g++)f[g]={name:u[g].name,data:[]};this.morphTargets.normal=f}const d=e.skinIndices,p=e.skinWeights,v=d.length===i.length,y=p.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){const m=t[g];this.vertices.push(i[m.a],i[m.b],i[m.c]);const w=m.vertexNormals;if(w.length===3)this.normals.push(w[0],w[1],w[2]);else{const E=m.normal;this.normals.push(E,E,E)}const b=m.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{const E=m.color;this.colors.push(E,E,E)}if(s===!0){const E=r[0][g];E!==void 0?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new Te,new Te,new Te))}if(o===!0){const E=r[1][g];E!==void 0?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new Te,new Te,new Te))}for(let E=0;E<c;E++){const S=a[E].vertices;l[E].data.push(S[m.a],S[m.b],S[m.c])}for(let E=0;E<h;E++){const S=u[E].vertexNormals[g];f[E].data.push(S.a,S.b,S.c)}v&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),y&&this.skinWeights.push(p[m.a],p[m.b],p[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}function WT(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}const gF={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Cf(n,e){return new gF[n](e)}let vF=1;const _r=new Oe,hg=new Ne,Va=new te,fi=new Cs,Yl=new Cs,mn=new te;function Ke(){Object.defineProperty(this,"id",{value:vF+=2}),this.uuid=Ue.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ke.prototype=Object.assign(Object.create(fr.prototype),{constructor:Ke,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(n){return Array.isArray(n)?this.index=new(WT(n)>65535?gh:tl)(n,1):this.index=n,this},getAttribute:function(n){return this.attributes[n]},setAttribute:function(n,e){return this.attributes[n]=e,this},deleteAttribute:function(n){return delete this.attributes[n],this},hasAttribute:function(n){return this.attributes[n]!==void 0},addGroup:function(n,e,t=0){this.groups.push({start:n,count:e,materialIndex:t})},clearGroups:function(){this.groups=[]},setDrawRange:function(n,e){this.drawRange.start=n,this.drawRange.count=e},applyMatrix4:function(n){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(n),e.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const r=new Wn().getNormalMatrix(n);t.applyNormalMatrix(r),t.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(n),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(n){return _r.makeRotationX(n),this.applyMatrix4(_r),this},rotateY:function(n){return _r.makeRotationY(n),this.applyMatrix4(_r),this},rotateZ:function(n){return _r.makeRotationZ(n),this.applyMatrix4(_r),this},translate:function(n,e,t){return _r.makeTranslation(n,e,t),this.applyMatrix4(_r),this},scale:function(n,e,t){return _r.makeScale(n,e,t),this.applyMatrix4(_r),this},lookAt:function(n){return hg.lookAt(n),hg.updateMatrix(),this.applyMatrix4(hg.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Va).negate(),this.translate(Va.x,Va.y,Va.z),this},setFromObject:function(n){const e=n.geometry;if(n.isPoints||n.isLine){const t=new We(e.vertices.length*3,3),i=new We(e.colors.length*3,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const r=new We(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else n.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(n){const e=[];for(let t=0,i=n.length;t<i;t++){const r=n[t];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new We(e,3)),this},updateFromObject:function(n){let e=n.geometry;if(n.isMesh){let t=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(t=void 0,e.elementsNeedUpdate=!1),t===void 0)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(e.verticesNeedUpdate===!0){const t=this.attributes.position;t!==void 0&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){const t=this.attributes.normal;t!==void 0&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){const t=this.attributes.color;t!==void 0&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;t!==void 0&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;t!==void 0&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(n.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(n){return n.__directGeometry=new mF().fromGeometry(n),this.fromDirectGeometry(n.__directGeometry)},fromDirectGeometry:function(n){const e=new Float32Array(n.vertices.length*3);if(this.setAttribute("position",new Xe(e,3).copyVector3sArray(n.vertices)),n.normals.length>0){const t=new Float32Array(n.normals.length*3);this.setAttribute("normal",new Xe(t,3).copyVector3sArray(n.normals))}if(n.colors.length>0){const t=new Float32Array(n.colors.length*3);this.setAttribute("color",new Xe(t,3).copyColorsArray(n.colors))}if(n.uvs.length>0){const t=new Float32Array(n.uvs.length*2);this.setAttribute("uv",new Xe(t,2).copyVector2sArray(n.uvs))}if(n.uvs2.length>0){const t=new Float32Array(n.uvs2.length*2);this.setAttribute("uv2",new Xe(t,2).copyVector2sArray(n.uvs2))}this.groups=n.groups;for(const t in n.morphTargets){const i=[],r=n.morphTargets[t];for(let s=0,o=r.length;s<o;s++){const a=r[s],c=new We(a.data.length*3,3);c.name=a.name,i.push(c.copyVector3sArray(a.data))}this.morphAttributes[t]=i}if(n.skinIndices.length>0){const t=new We(n.skinIndices.length*4,4);this.setAttribute("skinIndex",t.copyVector4sArray(n.skinIndices))}if(n.skinWeights.length>0){const t=new We(n.skinWeights.length*4,4);this.setAttribute("skinWeight",t.copyVector4sArray(n.skinWeights))}return n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Cs);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),e)for(let t=0,i=e.length;t<i;t++){const r=e[t];fi.setFromBufferAttribute(r),this.morphTargetsRelative?(mn.addVectors(this.boundingBox.min,fi.min),this.boundingBox.expandByPoint(mn),mn.addVectors(this.boundingBox.max,fi.max),this.boundingBox.expandByPoint(mn)):(this.boundingBox.expandByPoint(fi.min),this.boundingBox.expandByPoint(fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new te,1/0);return}if(n){const t=this.boundingSphere.center;if(fi.setFromBufferAttribute(n),e)for(let r=0,s=e.length;r<s;r++){const o=e[r];Yl.setFromBufferAttribute(o),this.morphTargetsRelative?(mn.addVectors(fi.min,Yl.min),fi.expandByPoint(mn),mn.addVectors(fi.max,Yl.max),fi.expandByPoint(mn)):(fi.expandByPoint(Yl.min),fi.expandByPoint(Yl.max))}fi.getCenter(t);let i=0;for(let r=0,s=n.count;r<s;r++)mn.fromBufferAttribute(n,r),i=Math.max(i,t.distanceToSquared(mn));if(e)for(let r=0,s=e.length;r<s;r++){const o=e[r],a=this.morphTargetsRelative;for(let c=0,l=o.count;c<l;c++)mn.fromBufferAttribute(o,c),a&&(Va.fromBufferAttribute(n,c),mn.add(Va)),i=Math.max(i,t.distanceToSquared(mn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const n=this.index,e=this.getAttribute("position");if(e!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new Xe(new Float32Array(e.count*3),3),this.setAttribute("normal",t);else for(let h=0,f=t.count;h<f;h++)t.setXYZ(h,0,0,0);const i=new te,r=new te,s=new te,o=new te,a=new te,c=new te,l=new te,u=new te;if(n)for(let h=0,f=n.count;h<f;h+=3){const d=n.getX(h+0),p=n.getX(h+1),v=n.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,v),l.subVectors(s,r),u.subVectors(i,r),l.cross(u),o.fromBufferAttribute(t,d),a.fromBufferAttribute(t,p),c.fromBufferAttribute(t,v),o.add(l),a.add(l),c.add(l),t.setXYZ(d,o.x,o.y,o.z),t.setXYZ(p,a.x,a.y,a.z),t.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,f=e.count;h<f;h+=3)i.fromBufferAttribute(e,h+0),r.fromBufferAttribute(e,h+1),s.fromBufferAttribute(e,h+2),l.subVectors(s,r),u.subVectors(i,r),l.cross(u),t.setXYZ(h+0,l.x,l.y,l.z),t.setXYZ(h+1,l.x,l.y,l.z),t.setXYZ(h+2,l.x,l.y,l.z);this.normalizeNormals(),t.needsUpdate=!0}},merge:function(n,e){if(!(n&&n.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",n);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const t=this.attributes;for(const i in t){if(n.attributes[i]===void 0)continue;const s=t[i].array,o=n.attributes[i],a=o.array,c=o.itemSize*e,l=Math.min(a.length,s.length-c);for(let u=0,h=c;u<l;u++,h++)s[h]=a[u]}return this},normalizeNormals:function(){const n=this.attributes.normal;for(let e=0,t=n.count;e<t;e++)mn.fromBufferAttribute(n,e),mn.normalize(),n.setXYZ(e,mn.x,mn.y,mn.z)},toNonIndexed:function(){function n(o,a){const c=o.array,l=o.itemSize,u=o.normalized,h=new c.constructor(a.length*l);let f=0,d=0;for(let p=0,v=a.length;p<v;p++){f=a[p]*l;for(let y=0;y<l;y++)h[d++]=c[f++]}return new Xe(h,l,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new Ke,t=this.index.array,i=this.attributes;for(const o in i){const a=i[o],c=n(a,t);e.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const a=[],c=r[o];for(let l=0,u=c.length;l<u;l++){const h=c[l],f=n(h,t);a.push(f)}e.morphAttributes[o]=a}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const c=s[o];e.addGroup(c.start,c.count,c.materialIndex)}return e},toJSON:function(){const n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const c in a)a[c]!==void 0&&(n[c]=a[c]);return n}n.data={attributes:{}};const e=this.index;e!==null&&(n.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const t=this.attributes;for(const a in t){const c=t[a],l=c.toJSON(n.data);c.name!==""&&(l.name=c.name),n.data.attributes[a]=l}const i={};let r=!1;for(const a in this.morphAttributes){const c=this.morphAttributes[a],l=[];for(let u=0,h=c.length;u<h;u++){const f=c[u],d=f.toJSON(n.data);f.name!==""&&(d.name=f.name),l.push(d)}l.length>0&&(i[a]=l,r=!0)}r&&(n.data.morphAttributes=i,n.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(n.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(n.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),n},clone:function(){return new Ke().copy(this)},copy:function(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=n.name;const t=n.index;t!==null&&this.setIndex(t.clone(e));const i=n.attributes;for(const c in i){const l=i[c];this.setAttribute(c,l.clone(e))}const r=n.morphAttributes;for(const c in r){const l=[],u=r[c];for(let h=0,f=u.length;h<f;h++)l.push(u[h].clone(e));this.morphAttributes[c]=l}this.morphTargetsRelative=n.morphTargetsRelative;const s=n.groups;for(let c=0,l=s.length;c<l;c++){const u=s[c];this.addGroup(u.start,u.count,u.materialIndex)}const o=n.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=n.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const hw=new Oe,$o=new Ra,fg=new Ls,Us=new te,Hs=new te,Gs=new te,dg=new te,pg=new te,mg=new te,Lf=new te,Rf=new te,Pf=new te,Rc=new Te,Pc=new Te,Ic=new Te,Uu=new te,If=new te;function qe(n=new Ke,e=new ct){Ne.call(this),this.type="Mesh",this.geometry=n,this.material=e,this.updateMorphTargets()}qe.prototype=Object.assign(Object.create(Ne.prototype),{constructor:qe,isMesh:!0,copy:function(n){return Ne.prototype.copy.call(this,n),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(n,e){const t=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),fg.copy(t.boundingSphere),fg.applyMatrix4(r),n.ray.intersectsSphere(fg)===!1)||(hw.copy(r).invert(),$o.copy(n.ray).applyMatrix4(hw),t.boundingBox!==null&&$o.intersectsBox(t.boundingBox)===!1))return;let s;if(t.isBufferGeometry){const o=t.index,a=t.attributes.position,c=t.morphAttributes.position,l=t.morphTargetsRelative,u=t.attributes.uv,h=t.attributes.uv2,f=t.groups,d=t.drawRange;if(o!==null)if(Array.isArray(i))for(let p=0,v=f.length;p<v;p++){const y=f[p],g=i[y.materialIndex],m=Math.max(y.start,d.start),w=Math.min(y.start+y.count,d.start+d.count);for(let b=m,E=w;b<E;b+=3){const S=o.getX(b),P=o.getX(b+1),N=o.getX(b+2);s=Df(this,g,n,$o,a,c,l,u,h,S,P,N),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=y.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),v=Math.min(o.count,d.start+d.count);for(let y=p,g=v;y<g;y+=3){const m=o.getX(y),w=o.getX(y+1),b=o.getX(y+2);s=Df(this,i,n,$o,a,c,l,u,h,m,w,b),s&&(s.faceIndex=Math.floor(y/3),e.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let p=0,v=f.length;p<v;p++){const y=f[p],g=i[y.materialIndex],m=Math.max(y.start,d.start),w=Math.min(y.start+y.count,d.start+d.count);for(let b=m,E=w;b<E;b+=3){const S=b,P=b+1,N=b+2;s=Df(this,g,n,$o,a,c,l,u,h,S,P,N),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=y.materialIndex,e.push(s))}}else{const p=Math.max(0,d.start),v=Math.min(a.count,d.start+d.count);for(let y=p,g=v;y<g;y+=3){const m=y,w=y+1,b=y+2;s=Df(this,i,n,$o,a,c,l,u,h,m,w,b),s&&(s.faceIndex=Math.floor(y/3),e.push(s))}}}else if(t.isGeometry){const o=Array.isArray(i),a=t.vertices,c=t.faces;let l;const u=t.faceVertexUvs[0];u.length>0&&(l=u);for(let h=0,f=c.length;h<f;h++){const d=c[h],p=o?i[d.materialIndex]:i;if(p===void 0)continue;const v=a[d.a],y=a[d.b],g=a[d.c];if(s=$T(this,p,n,$o,v,y,g,Uu),s){if(l&&l[h]){const m=l[h];Rc.copy(m[0]),Pc.copy(m[1]),Ic.copy(m[2]),s.uv=Br.getUV(Uu,v,y,g,Rc,Pc,Ic,new Te)}s.face=d,s.faceIndex=h,e.push(s)}}}}});function $T(n,e,t,i,r,s,o,a){let c;if(e.side===yn?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side!==Rn,a),c===null)return null;If.copy(a),If.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(If);return l<t.near||l>t.far?null:{distance:l,point:If.clone(),object:n}}function Df(n,e,t,i,r,s,o,a,c,l,u,h){Us.fromBufferAttribute(r,l),Hs.fromBufferAttribute(r,u),Gs.fromBufferAttribute(r,h);const f=n.morphTargetInfluences;if(e.morphTargets&&s&&f){Lf.set(0,0,0),Rf.set(0,0,0),Pf.set(0,0,0);for(let p=0,v=s.length;p<v;p++){const y=f[p],g=s[p];y!==0&&(dg.fromBufferAttribute(g,l),pg.fromBufferAttribute(g,u),mg.fromBufferAttribute(g,h),o?(Lf.addScaledVector(dg,y),Rf.addScaledVector(pg,y),Pf.addScaledVector(mg,y)):(Lf.addScaledVector(dg.sub(Us),y),Rf.addScaledVector(pg.sub(Hs),y),Pf.addScaledVector(mg.sub(Gs),y)))}Us.add(Lf),Hs.add(Rf),Gs.add(Pf)}n.isSkinnedMesh&&(n.boneTransform(l,Us),n.boneTransform(u,Hs),n.boneTransform(h,Gs));const d=$T(n,e,t,i,Us,Hs,Gs,Uu);if(d){a&&(Rc.fromBufferAttribute(a,l),Pc.fromBufferAttribute(a,u),Ic.fromBufferAttribute(a,h),d.uv=Br.getUV(Uu,Us,Hs,Gs,Rc,Pc,Ic,new Te)),c&&(Rc.fromBufferAttribute(c,l),Pc.fromBufferAttribute(c,u),Ic.fromBufferAttribute(c,h),d.uv2=Br.getUV(Uu,Us,Hs,Gs,Rc,Pc,Ic,new Te));const p=new s0(l,u,h);Br.getNormal(Us,Hs,Gs,p.normal),d.face=p}return d}class m_ extends Ke{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new We(l,3)),this.setAttribute("normal",new We(u,3)),this.setAttribute("uv",new We(h,2));function p(v,y,g,m,w,b,E,S,P,N,z){const _=b/P,x=E/N,T=b/2,A=E/2,M=S/2,L=P+1,I=N+1;let k=0,W=0;const j=new te;for(let G=0;G<I;G++){const ee=G*x-A;for(let se=0;se<L;se++){const oe=se*_-T;j[v]=oe*m,j[y]=ee*w,j[g]=M,l.push(j.x,j.y,j.z),j[v]=0,j[y]=0,j[g]=S>0?1:-1,u.push(j.x,j.y,j.z),h.push(se/P),h.push(1-G/N),k+=1}}for(let G=0;G<N;G++)for(let ee=0;ee<P;ee++){const se=f+ee+L*G,oe=f+ee+L*(G+1),de=f+(ee+1)+L*(G+1),ae=f+(ee+1)+L*G;c.push(se,oe,ae),c.push(oe,de,ae),W+=6}a.addGroup(d,W,z),d+=W,f+=k}}}function nl(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function In(n){const e={};for(let t=0;t<n.length;t++){const i=nl(n[t]);for(const r in i)e[r]=i[r]}return e}const yF={clone:nl,merge:In};var _F=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,xF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function qn(n){je.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=_F,this.fragmentShader=xF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&(n.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}qn.prototype=Object.create(je.prototype);qn.prototype.constructor=qn;qn.prototype.isShaderMaterial=!0;qn.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=nl(n.uniforms),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this};qn.prototype.toJSON=function(n){const e=je.prototype.toJSON.call(this,n);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?e.uniforms[i]={type:"t",value:s.toJSON(n).uuid}:s&&s.isColor?e.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[i]={type:"m4",value:s.toArray()}:e.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const t={};for(const i in this.extensions)this.extensions[i]===!0&&(t[i]=!0);return Object.keys(t).length>0&&(e.extensions=t),e};function Mo(){Ne.call(this),this.type="Camera",this.matrixWorldInverse=new Oe,this.projectionMatrix=new Oe,this.projectionMatrixInverse=new Oe}Mo.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Mo,isCamera:!0,copy:function(n,e){return Ne.prototype.copy.call(this,n,e),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),n=new te),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(n){Ne.prototype.updateMatrixWorld.call(this,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(n,e){Ne.prototype.updateWorldMatrix.call(this,n,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function lt(n=50,e=1,t=.1,i=2e3){Mo.call(this),this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=t,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}lt.prototype=Object.assign(Object.create(Mo.prototype),{constructor:lt,isPerspectiveCamera:!0,copy:function(n,e){return Mo.prototype.copy.call(this,n,e),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this},setFocalLength:function(n){const e=.5*this.getFilmHeight()/n;this.fov=Ue.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const n=Math.tan(Ue.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n},getEffectiveFOV:function(){return Ue.RAD2DEG*2*Math.atan(Math.tan(Ue.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(n,e,t,i,r,s){this.aspect=n/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const n=this.near;let e=n*Math.tan(Ue.DEG2RAD*.5*this.fov)/this.zoom,t=2*e,i=this.aspect*t,r=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const a=s.fullWidth,c=s.fullHeight;r+=s.offsetX*i/a,e-=s.offsetY*t/c,i*=s.width/a,t*=s.height/c}const o=this.filmOffset;o!==0&&(r+=n*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-t,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){const e=Ne.prototype.toJSON.call(this,n);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const Wa=90,$a=1;function il(n,e,t){if(Ne.call(this),this.type="CubeCamera",t.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=t;const i=new lt(Wa,$a,n,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new te(1,0,0)),this.add(i);const r=new lt(Wa,$a,n,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new te(-1,0,0)),this.add(r);const s=new lt(Wa,$a,n,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new te(0,1,0)),this.add(s);const o=new lt(Wa,$a,n,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new te(0,-1,0)),this.add(o);const a=new lt(Wa,$a,n,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new te(0,0,1)),this.add(a);const c=new lt(Wa,$a,n,e);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new te(0,0,-1)),this.add(c),this.update=function(l,u){this.parent===null&&this.updateMatrixWorld();const h=l.xr.enabled,f=l.getRenderTarget();l.xr.enabled=!1;const d=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,l.setRenderTarget(t,0),l.render(u,i),l.setRenderTarget(t,1),l.render(u,r),l.setRenderTarget(t,2),l.render(u,s),l.setRenderTarget(t,3),l.render(u,o),l.setRenderTarget(t,4),l.render(u,a),t.texture.generateMipmaps=d,l.setRenderTarget(t,5),l.render(u,c),l.setRenderTarget(f),l.xr.enabled=h}}il.prototype=Object.create(Ne.prototype);il.prototype.constructor=il;function So(n,e,t,i,r,s,o,a,c,l){n=n!==void 0?n:[],e=e!==void 0?e:l_,o=o!==void 0?o:fo,Ct.call(this,n,e,t,i,r,s,o,a,c,l),this.flipY=!1,this._needsFlipEnvMap=!0}So.prototype=Object.create(Ct.prototype);So.prototype.constructor=So;So.prototype.isCubeTexture=!0;Object.defineProperty(So.prototype,"images",{get:function(){return this.image},set:function(n){this.image=n}});function ma(n,e,t){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=t),ar.call(this,n,n,e),e=e||{},this.texture=new So(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}ma.prototype=Object.create(ar.prototype);ma.prototype.constructor=ma;ma.prototype.isWebGLCubeRenderTarget=!0;ma.prototype.fromEquirectangularTexture=function(n,e){this.texture.type=e.type,this.texture.format=or,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const t={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new m_(5,5,5),r=new qn({name:"CubemapFromEquirect",uniforms:nl(t.uniforms),vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,side:yn,blending:ku});r.uniforms.tEquirect.value=e;const s=new qe(i,r),o=e.minFilter;return e.minFilter===el&&(e.minFilter=bn),new il(1,10,this).update(n,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this};ma.prototype.clear=function(n,e,t,i){const r=n.getRenderTarget();for(let s=0;s<6;s++)n.setRenderTarget(this,s),n.clear(e,t,i);n.setRenderTarget(r)};function rl(n,e,t,i,r,s,o,a,c,l,u,h){Ct.call(this,null,s,o,a,c,l,i,r,u,h),this.image={data:n||null,width:e||1,height:t||1},this.magFilter=c!==void 0?c:kn,this.minFilter=l!==void 0?l:kn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}rl.prototype=Object.create(Ct.prototype);rl.prototype.constructor=rl;rl.prototype.isDataTexture=!0;const qa=new Ls,Ff=new te;let sm=class{constructor(e,t,i,r,s,o){this.planes=[e!==void 0?e:new ys,t!==void 0?t:new ys,i!==void 0?i:new ys,r!==void 0?r:new ys,s!==void 0?s:new ys,o!==void 0?o:new ys]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}clone(){return new this.constructor().copy(this)}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],v=i[11],y=i[12],g=i[13],m=i[14],w=i[15];return t[0].setComponents(a-r,h-c,v-f,w-y).normalize(),t[1].setComponents(a+r,h+c,v+f,w+y).normalize(),t[2].setComponents(a+s,h+l,v+d,w+g).normalize(),t[3].setComponents(a-s,h-l,v-d,w-g).normalize(),t[4].setComponents(a-o,h-u,v-p,w-m).normalize(),t[5].setComponents(a+o,h+u,v+p,w+m).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),qa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(qa)}intersectsSprite(e){return qa.center.set(0,0,0),qa.radius=.7071067811865476,qa.applyMatrix4(e.matrixWorld),this.intersectsSphere(qa)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Ff.x=r.normal.x>0?e.max.x:e.min.x,Ff.y=r.normal.y>0?e.max.y:e.min.y,Ff.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ff)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}};function qT(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function bF(n,e){const t=e.isWebGL2,i=new WeakMap;function r(l,u){const h=l.array,f=l.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,h,f),l.onUploadCallback();let p=5126;return h instanceof Float32Array?p=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?l.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:h instanceof Int16Array?p=5122:h instanceof Uint32Array?p=5125:h instanceof Int32Array?p=5124:h instanceof Int8Array?p=5120:h instanceof Uint8Array&&(p=5121),{buffer:d,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version}}function s(l,u,h){const f=u.array,d=u.updateRange;n.bindBuffer(h,l),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))}function c(l,u){if(l.isGLBufferAttribute){const f=i.get(l);(!f||f.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const h=i.get(l);h===void 0?i.set(l,r(l,u)):h.version<l.version&&(s(h.buffer,l,u),h.version=l.version)}return{get:o,remove:a,update:c}}class om extends Ke{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,h=e/a,f=t/c,d=[],p=[],v=[],y=[];for(let g=0;g<u;g++){const m=g*f-o;for(let w=0;w<l;w++){const b=w*h-s;p.push(b,-m,0),v.push(0,0,1),y.push(w/a),y.push(1-g/c)}}for(let g=0;g<c;g++)for(let m=0;m<a;m++){const w=m+l*g,b=m+l*(g+1),E=m+1+l*(g+1),S=m+1+l*g;d.push(w,b,S),d.push(b,E,S)}this.setIndex(d),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(v,3)),this.setAttribute("uv",new We(y,2))}}var wF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,MF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,SF=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,EF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,TF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,AF="vec3 transformed = vec3( position );",CF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,LF=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,RF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,PF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,IF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,DF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,OF=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,kF=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,NF=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,BF=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,zF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,UF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,HF=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,GF=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,VF=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,WF=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$F=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qF="gl_FragColor = linearToOutputTexel( gl_FragColor );",jF=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,XF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,YF=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ZF=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,JF=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,KF=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,QF=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,eO=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,tO=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nO=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iO=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,rO=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,sO=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oO=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,aO=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,cO=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,lO=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,uO=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,hO=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,fO=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,dO=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,pO=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,mO=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,gO=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,vO=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,yO=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_O=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,bO=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,wO=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,MO=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,SO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,EO=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TO=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,AO=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,CO=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,LO=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,RO=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,PO=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,IO=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,DO=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,FO=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,OO=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,kO=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,NO=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,BO=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zO=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,UO=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HO=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GO=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,VO=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,WO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$O=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qO=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,jO=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,XO=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,YO=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ZO=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JO=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KO=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QO=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ek=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tk=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nk=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,ik=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,rk=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,sk=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,ok=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,ak=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,ck=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,lk=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,uk=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,hk=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fk=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dk=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mk=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gk=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vk=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yk=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_k=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xk=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bk=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wk=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mk=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sk=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ek=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tk=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ak=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ck=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Lk=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rk=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pk=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ik=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dk=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fk=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ok=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,kk=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Nk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Bk=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zk=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Uk=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hk=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Gk=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const ut={alphamap_fragment:wF,alphamap_pars_fragment:MF,alphatest_fragment:SF,aomap_fragment:EF,aomap_pars_fragment:TF,begin_vertex:AF,beginnormal_vertex:CF,bsdfs:LF,bumpmap_pars_fragment:RF,clipping_planes_fragment:PF,clipping_planes_pars_fragment:IF,clipping_planes_pars_vertex:DF,clipping_planes_vertex:FF,color_fragment:OF,color_pars_fragment:kF,color_pars_vertex:NF,color_vertex:BF,common:zF,cube_uv_reflection_fragment:UF,defaultnormal_vertex:HF,displacementmap_pars_vertex:GF,displacementmap_vertex:VF,emissivemap_fragment:WF,emissivemap_pars_fragment:$F,encodings_fragment:qF,encodings_pars_fragment:jF,envmap_fragment:XF,envmap_common_pars_fragment:YF,envmap_pars_fragment:ZF,envmap_pars_vertex:JF,envmap_physical_pars_fragment:cO,envmap_vertex:KF,fog_vertex:QF,fog_pars_vertex:eO,fog_fragment:tO,fog_pars_fragment:nO,gradientmap_pars_fragment:iO,lightmap_fragment:rO,lightmap_pars_fragment:sO,lights_lambert_vertex:oO,lights_pars_begin:aO,lights_toon_fragment:lO,lights_toon_pars_fragment:uO,lights_phong_fragment:hO,lights_phong_pars_fragment:fO,lights_physical_fragment:dO,lights_physical_pars_fragment:pO,lights_fragment_begin:mO,lights_fragment_maps:gO,lights_fragment_end:vO,logdepthbuf_fragment:yO,logdepthbuf_pars_fragment:_O,logdepthbuf_pars_vertex:xO,logdepthbuf_vertex:bO,map_fragment:wO,map_pars_fragment:MO,map_particle_fragment:SO,map_particle_pars_fragment:EO,metalnessmap_fragment:TO,metalnessmap_pars_fragment:AO,morphnormal_vertex:CO,morphtarget_pars_vertex:LO,morphtarget_vertex:RO,normal_fragment_begin:PO,normal_fragment_maps:IO,normalmap_pars_fragment:DO,clearcoat_normal_fragment_begin:FO,clearcoat_normal_fragment_maps:OO,clearcoat_pars_fragment:kO,packing:NO,premultiplied_alpha_fragment:BO,project_vertex:zO,dithering_fragment:UO,dithering_pars_fragment:HO,roughnessmap_fragment:GO,roughnessmap_pars_fragment:VO,shadowmap_pars_fragment:WO,shadowmap_pars_vertex:$O,shadowmap_vertex:qO,shadowmask_pars_fragment:jO,skinbase_vertex:XO,skinning_pars_vertex:YO,skinning_vertex:ZO,skinnormal_vertex:JO,specularmap_fragment:KO,specularmap_pars_fragment:QO,tonemapping_fragment:ek,tonemapping_pars_fragment:tk,transmissionmap_fragment:nk,transmissionmap_pars_fragment:ik,uv_pars_fragment:rk,uv_pars_vertex:sk,uv_vertex:ok,uv2_pars_fragment:ak,uv2_pars_vertex:ck,uv2_vertex:lk,worldpos_vertex:uk,background_frag:hk,background_vert:fk,cube_frag:dk,cube_vert:pk,depth_frag:mk,depth_vert:gk,distanceRGBA_frag:vk,distanceRGBA_vert:yk,equirect_frag:_k,equirect_vert:xk,linedashed_frag:bk,linedashed_vert:wk,meshbasic_frag:Mk,meshbasic_vert:Sk,meshlambert_frag:Ek,meshlambert_vert:Tk,meshmatcap_frag:Ak,meshmatcap_vert:Ck,meshtoon_frag:Lk,meshtoon_vert:Rk,meshphong_frag:Pk,meshphong_vert:Ik,meshphysical_frag:Dk,meshphysical_vert:Fk,normal_frag:Ok,normal_vert:kk,points_frag:Nk,points_vert:Bk,shadow_frag:zk,shadow_vert:Uk,sprite_frag:Hk,sprite_vert:Gk},Ie={common:{diffuse:{value:new Fe(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wn},uv2Transform:{value:new Wn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Te(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Wn}},sprite:{diffuse:{value:new Fe(15658734)},opacity:{value:1},center:{value:new Te(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Wn}}},Ar={basic:{uniforms:In([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:In([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.fog,Ie.lights,{emissive:{value:new Fe(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:In([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new Fe(0)},specular:{value:new Fe(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:In([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new Fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:In([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new Fe(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:In([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:In([Ie.points,Ie.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:In([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:In([Ie.common,Ie.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:In([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:ut.normal_vert,fragmentShader:ut.normal_frag},sprite:{uniforms:In([Ie.sprite,Ie.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Wn},t2D:{value:null}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},cube:{uniforms:In([Ie.envmap,{opacity:{value:1}}]),vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:In([Ie.common,Ie.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:In([Ie.lights,Ie.fog,{color:{value:new Fe(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};Ar.physical={uniforms:In([Ar.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Te(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Fe(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};function Vk(n,e,t,i,r){const s=new Fe(0);let o=0,a,c,l=null,u=0,h=null;function f(p,v,y,g){let m=v.isScene===!0?v.background:null;m&&m.isTexture&&(m=e.get(m));const w=n.xr,b=w.getSession&&w.getSession();b&&b.environmentBlendMode==="additive"&&(m=null),m===null?d(s,o):m&&m.isColor&&(d(m,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===h_)?(c===void 0&&(c=new qe(new m_(1,1,1),new qn({name:"BackgroundCubeMaterial",uniforms:nl(Ar.cube.uniforms),vertexShader:Ar.cube.vertexShader,fragmentShader:Ar.cube.fragmentShader,side:yn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,S,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),m.isWebGLCubeRenderTarget&&(m=m.texture),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,(l!==m||u!==m.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,l=m,u=m.version,h=n.toneMapping),p.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(a===void 0&&(a=new qe(new om(2,2),new qn({name:"BackgroundMaterial",uniforms:nl(Ar.background.uniforms),vertexShader:Ar.background.vertexShader,fragmentShader:Ar.background.fragmentShader,side:Kh,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=m,m.matrixAutoUpdate===!0&&m.updateMatrix(),a.material.uniforms.uvTransform.value.copy(m.matrix),(l!==m||u!==m.version||h!==n.toneMapping)&&(a.material.needsUpdate=!0,l=m,u=m.version,h=n.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,v){t.buffers.color.setClear(p.r,p.g,p.b,v,r)}return{getClearColor:function(){return s},setClearColor:function(p,v=1){s.set(p),o=v,d(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(s,o)},render:f}}function Wk(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},c=v(null);let l=c;function u(A,M,L,I,k){let W=!1;if(o){const j=p(I,L,M);l!==j&&(l=j,f(l.object)),W=y(I,k),W&&g(I,k)}else{const j=M.wireframe===!0;(l.geometry!==I.id||l.program!==L.id||l.wireframe!==j)&&(l.geometry=I.id,l.program=L.id,l.wireframe=j,W=!0)}A.isInstancedMesh===!0&&(W=!0),k!==null&&t.update(k,34963),W&&(P(A,M,L,I),k!==null&&n.bindBuffer(34963,t.get(k).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(A){return i.isWebGL2?n.bindVertexArray(A):s.bindVertexArrayOES(A)}function d(A){return i.isWebGL2?n.deleteVertexArray(A):s.deleteVertexArrayOES(A)}function p(A,M,L){const I=L.wireframe===!0;let k=a[A.id];k===void 0&&(k={},a[A.id]=k);let W=k[M.id];W===void 0&&(W={},k[M.id]=W);let j=W[I];return j===void 0&&(j=v(h()),W[I]=j),j}function v(A){const M=[],L=[],I=[];for(let k=0;k<r;k++)M[k]=0,L[k]=0,I[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:M,enabledAttributes:L,attributeDivisors:I,object:A,attributes:{},index:null}}function y(A,M){const L=l.attributes,I=A.attributes;let k=0;for(const W in I){const j=L[W],G=I[W];if(j===void 0||j.attribute!==G||j.data!==G.data)return!0;k++}return l.attributesNum!==k||l.index!==M}function g(A,M){const L={},I=A.attributes;let k=0;for(const W in I){const j=I[W],G={};G.attribute=j,j.data&&(G.data=j.data),L[W]=G,k++}l.attributes=L,l.attributesNum=k,l.index=M}function m(){const A=l.newAttributes;for(let M=0,L=A.length;M<L;M++)A[M]=0}function w(A){b(A,0)}function b(A,M){const L=l.newAttributes,I=l.enabledAttributes,k=l.attributeDivisors;L[A]=1,I[A]===0&&(n.enableVertexAttribArray(A),I[A]=1),k[A]!==M&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](A,M),k[A]=M)}function E(){const A=l.newAttributes,M=l.enabledAttributes;for(let L=0,I=M.length;L<I;L++)M[L]!==A[L]&&(n.disableVertexAttribArray(L),M[L]=0)}function S(A,M,L,I,k,W){i.isWebGL2===!0&&(L===5124||L===5125)?n.vertexAttribIPointer(A,M,L,k,W):n.vertexAttribPointer(A,M,L,I,k,W)}function P(A,M,L,I){if(i.isWebGL2===!1&&(A.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;m();const k=I.attributes,W=L.getAttributes(),j=M.defaultAttributeValues;for(const G in W){const ee=W[G];if(ee>=0){const se=k[G];if(se!==void 0){const oe=se.normalized,de=se.itemSize,ae=t.get(se);if(ae===void 0)continue;const O=ae.buffer,B=ae.type,Z=ae.bytesPerElement;if(se.isInterleavedBufferAttribute){const V=se.data,J=V.stride,re=se.offset;V&&V.isInstancedInterleavedBuffer?(b(ee,V.meshPerAttribute),I._maxInstanceCount===void 0&&(I._maxInstanceCount=V.meshPerAttribute*V.count)):w(ee),n.bindBuffer(34962,O),S(ee,de,B,oe,J*Z,re*Z)}else se.isInstancedBufferAttribute?(b(ee,se.meshPerAttribute),I._maxInstanceCount===void 0&&(I._maxInstanceCount=se.meshPerAttribute*se.count)):w(ee),n.bindBuffer(34962,O),S(ee,de,B,oe,0,0)}else if(G==="instanceMatrix"){const oe=t.get(A.instanceMatrix);if(oe===void 0)continue;const de=oe.buffer,ae=oe.type;b(ee+0,1),b(ee+1,1),b(ee+2,1),b(ee+3,1),n.bindBuffer(34962,de),n.vertexAttribPointer(ee+0,4,ae,!1,64,0),n.vertexAttribPointer(ee+1,4,ae,!1,64,16),n.vertexAttribPointer(ee+2,4,ae,!1,64,32),n.vertexAttribPointer(ee+3,4,ae,!1,64,48)}else if(G==="instanceColor"){const oe=t.get(A.instanceColor);if(oe===void 0)continue;const de=oe.buffer,ae=oe.type;b(ee,1),n.bindBuffer(34962,de),n.vertexAttribPointer(ee,3,ae,!1,12,0)}else if(j!==void 0){const oe=j[G];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(ee,oe);break;case 3:n.vertexAttrib3fv(ee,oe);break;case 4:n.vertexAttrib4fv(ee,oe);break;default:n.vertexAttrib1fv(ee,oe)}}}}E()}function N(){x();for(const A in a){const M=a[A];for(const L in M){const I=M[L];for(const k in I)d(I[k].object),delete I[k];delete M[L]}delete a[A]}}function z(A){if(a[A.id]===void 0)return;const M=a[A.id];for(const L in M){const I=M[L];for(const k in I)d(I[k].object),delete I[k];delete M[L]}delete a[A.id]}function _(A){for(const M in a){const L=a[M];if(L[A.id]===void 0)continue;const I=L[A.id];for(const k in I)d(I[k].object),delete I[k];delete L[A.id]}}function x(){T(),l!==c&&(l=c,f(l.object))}function T(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:u,reset:x,resetDefaultState:T,dispose:N,releaseStatesOfGeometry:z,releaseStatesOfProgram:_,initAttributes:m,enableAttribute:w,disableUnusedAttributes:E}}function $k(n,e,t,i){const r=i.isWebGL2;let s;function o(l){s=l}function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)}function c(l,u,h){if(h===0)return;let f,d;if(r)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,l,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=c}function qk(n,e,t){let i;function r(){if(i!==void 0)return i;const S=e.get("EXT_texture_filter_anisotropic");return S!==null?i=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function s(S){if(S==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=t.logarithmicDepthBuffer===!0,u=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),d=n.getParameter(34076),p=n.getParameter(34921),v=n.getParameter(36347),y=n.getParameter(36348),g=n.getParameter(36349),m=h>0,w=o||!!e.get("OES_texture_float"),b=m&&w,E=o?n.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:g,vertexTextures:m,floatFragmentTextures:w,floatVertexTextures:b,maxSamples:E}}function jk(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new ys,a=new Wn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,d){const p=h.length!==0||f||i!==0||r;return r=f,t=u(h,d,0),i=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(h,f,d){const p=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,g=n.get(h);if(!r||p===null||p.length===0||s&&!y)s?u(null):l();else{const m=s?0:i,w=m*4;let b=g.clippingState||null;c.value=b,b=u(p,f,w,d);for(let E=0;E!==w;++E)b[E]=t[E];g.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=m}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,d,p){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=c.value,p!==!0||y===null){const g=d+v*4,m=f.matrixWorldInverse;a.getNormalMatrix(m),(y===null||y.length<g)&&(y=new Float32Array(g));for(let w=0,b=d;w!==v;++w,b+=4)o.copy(h[w]).applyMatrix4(m,a),o.normal.toArray(y,b),y[b+3]=o.constant}c.value=y,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function Xk(n){let e=new WeakMap;function t(o,a){return a===n0?o.mapping=l_:a===Gb&&(o.mapping=u_),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===n0||a===Gb)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const l=n.getRenderList(),u=n.getRenderTarget(),h=new ma(c.height/2);return h.fromEquirectangularTexture(n,o),e.set(o,h),n.setRenderTarget(u),n.setRenderList(l),o.addEventListener("dispose",r),t(h.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}function Yk(n){const e={};return{has:function(t){if(e[t]!==void 0)return e[t]!==null;let i;switch(t){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(t)}return e[t]=i,i!==null},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function Zk(n,e,t,i){const r=new WeakMap,s=new WeakMap;function o(h){const f=h.target,d=r.get(f);d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);f.removeEventListener("dispose",o),r.delete(f);const p=s.get(d);p&&(e.remove(p),s.delete(d)),i.releaseStatesOfGeometry(d),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){let d=r.get(f);return d||(f.addEventListener("dispose",o),f.isBufferGeometry?d=f:f.isGeometry&&(f._bufferGeometry===void 0&&(f._bufferGeometry=new Ke().setFromObject(h)),d=f._bufferGeometry),r.set(f,d),t.memory.geometries++,d)}function c(h){const f=h.attributes;for(const p in f)e.update(f[p],34962);const d=h.morphAttributes;for(const p in d){const v=d[p];for(let y=0,g=v.length;y<g;y++)e.update(v[y],34962)}}function l(h){const f=[],d=h.index,p=h.attributes.position;let v=0;if(d!==null){const m=d.array;v=d.version;for(let w=0,b=m.length;w<b;w+=3){const E=m[w+0],S=m[w+1],P=m[w+2];f.push(E,S,S,P,P,E)}}else{const m=p.array;v=p.version;for(let w=0,b=m.length/3-1;w<b;w+=3){const E=w+0,S=w+1,P=w+2;f.push(E,S,S,P,P,E)}}const y=new(WT(f)>65535?gh:tl)(f,1);y.version=v;const g=s.get(h);g&&e.remove(g),s.set(h,y)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&l(h)}else l(h);return s.get(h)}return{get:a,update:c,getWireframeAttribute:u}}function Jk(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,c;function l(f){a=f.type,c=f.bytesPerElement}function u(f,d){n.drawElements(s,d,a,f*c),t.update(d,s,1)}function h(f,d,p){if(p===0)return;let v,y;if(r)v=n,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,d,a,f*c,p),t.update(d,s,p)}this.setMode=o,this.setIndex=l,this.render=u,this.renderInstances=h}function Kk(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Qk(n,e){return n[0]-e[0]}function eN(n,e){return Math.abs(e[1])-Math.abs(n[1])}function tN(n){const e={},t=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,c){const l=s.morphTargetInfluences,u=l===void 0?0:l.length;let h=e[o.id];if(h===void 0){h=[];for(let y=0;y<u;y++)h[y]=[y,0];e[o.id]=h}for(let y=0;y<u;y++){const g=h[y];g[0]=y,g[1]=l[y]}h.sort(eN);for(let y=0;y<8;y++)y<u&&h[y][1]?(i[y][0]=h[y][0],i[y][1]=h[y][1]):(i[y][0]=Number.MAX_SAFE_INTEGER,i[y][1]=0);i.sort(Qk);const f=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let y=0;y<8;y++){const g=i[y],m=g[0],w=g[1];m!==Number.MAX_SAFE_INTEGER&&w?(f&&o.getAttribute("morphTarget"+y)!==f[m]&&o.setAttribute("morphTarget"+y,f[m]),d&&o.getAttribute("morphNormal"+y)!==d[m]&&o.setAttribute("morphNormal"+y,d[m]),t[y]=w,p+=w):(f&&o.hasAttribute("morphTarget"+y)===!0&&o.deleteAttribute("morphTarget"+y),d&&o.hasAttribute("morphNormal"+y)===!0&&o.deleteAttribute("morphNormal"+y),t[y]=0)}const v=o.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",v),c.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function nN(n,e,t,i){let r=new WeakMap;function s(c){const l=i.render.frame,u=c.geometry,h=e.get(c,u);return r.get(h)!==l&&(u.isGeometry&&h.updateFromObject(c),e.update(h),r.set(h,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),h}function o(){r=new WeakMap}function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}function vh(n=null,e=1,t=1,i=1){Ct.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=kn,this.minFilter=kn,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}vh.prototype=Object.create(Ct.prototype);vh.prototype.constructor=vh;vh.prototype.isDataTexture2DArray=!0;function yh(n=null,e=1,t=1,i=1){Ct.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=kn,this.minFilter=kn,this.wrapR=On,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}yh.prototype=Object.create(Ct.prototype);yh.prototype.constructor=yh;yh.prototype.isDataTexture3D=!0;const jT=new Ct,iN=new vh,rN=new yh,XT=new So,fw=[],dw=[],pw=new Float32Array(16),mw=new Float32Array(9),gw=new Float32Array(4);function Cl(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=fw[r];if(s===void 0&&(s=new Float32Array(r),fw[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Bi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ei(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function YT(n,e){let t=dw[e];t===void 0&&(t=new Int32Array(e),dw[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function sN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function oN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Bi(t,e))return;n.uniform2fv(this.addr,e),Ei(t,e)}}function aN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Bi(t,e))return;n.uniform3fv(this.addr,e),Ei(t,e)}}function cN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Bi(t,e))return;n.uniform4fv(this.addr,e),Ei(t,e)}}function lN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ei(t,e)}else{if(Bi(t,i))return;gw.set(i),n.uniformMatrix2fv(this.addr,!1,gw),Ei(t,i)}}function uN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ei(t,e)}else{if(Bi(t,i))return;mw.set(i),n.uniformMatrix3fv(this.addr,!1,mw),Ei(t,i)}}function hN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Bi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ei(t,e)}else{if(Bi(t,i))return;pw.set(i),n.uniformMatrix4fv(this.addr,!1,pw),Ei(t,i)}}function fN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||jT,r)}function dN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||iN,r)}function pN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||rN,r)}function mN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||XT,r)}function gN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function vN(n,e){const t=this.cache;Bi(t,e)||(n.uniform2iv(this.addr,e),Ei(t,e))}function yN(n,e){const t=this.cache;Bi(t,e)||(n.uniform3iv(this.addr,e),Ei(t,e))}function _N(n,e){const t=this.cache;Bi(t,e)||(n.uniform4iv(this.addr,e),Ei(t,e))}function xN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function bN(n){switch(n){case 5126:return sN;case 35664:return oN;case 35665:return aN;case 35666:return cN;case 35674:return lN;case 35675:return uN;case 35676:return hN;case 5124:case 35670:return gN;case 35667:case 35671:return vN;case 35668:case 35672:return yN;case 35669:case 35673:return _N;case 5125:return xN;case 35678:case 36198:case 36298:case 36306:case 35682:return fN;case 35679:case 36299:case 36307:return pN;case 35680:case 36300:case 36308:case 36293:return mN;case 36289:case 36303:case 36311:case 36292:return dN}}function wN(n,e){n.uniform1fv(this.addr,e)}function MN(n,e){n.uniform1iv(this.addr,e)}function SN(n,e){n.uniform2iv(this.addr,e)}function EN(n,e){n.uniform3iv(this.addr,e)}function TN(n,e){n.uniform4iv(this.addr,e)}function AN(n,e){const t=Cl(e,this.size,2);n.uniform2fv(this.addr,t)}function CN(n,e){const t=Cl(e,this.size,3);n.uniform3fv(this.addr,t)}function LN(n,e){const t=Cl(e,this.size,4);n.uniform4fv(this.addr,t)}function RN(n,e){const t=Cl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function PN(n,e){const t=Cl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function IN(n,e){const t=Cl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function DN(n,e,t){const i=e.length,r=YT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||jT,r[s])}function FN(n,e,t){const i=e.length,r=YT(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||XT,r[s])}function ON(n){switch(n){case 5126:return wN;case 35664:return AN;case 35665:return CN;case 35666:return LN;case 35674:return RN;case 35675:return PN;case 35676:return IN;case 5124:case 35670:return MN;case 35667:case 35671:return SN;case 35668:case 35672:return EN;case 35669:case 35673:return TN;case 35678:case 36198:case 36298:case 36306:case 35682:return DN;case 35680:case 36300:case 36308:case 36293:return FN}}function kN(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=bN(e.type)}function ZT(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=ON(e.type)}ZT.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Ei(e,n)};function JT(n){this.id=n,this.seq=[],this.map={}}JT.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const gg=/(\w+)(\])?(\[|\.)?/g;function vw(n,e){n.seq.push(e),n.map[e.id]=e}function NN(n,e,t){const i=n.name,r=i.length;for(gg.lastIndex=0;;){const s=gg.exec(i),o=gg.lastIndex;let a=s[1];const c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){vw(t,l===void 0?new kN(a,n,e):new ZT(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new JT(a),vw(t,h)),t=h}}}function po(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);NN(r,s,this)}}po.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};po.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};po.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};po.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function yw(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let BN=0;function zN(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function KT(n){switch(n){case Qh:return["Linear","( value )"];case Ir:return["sRGB","( value )"];case YD:return["RGBE","( value )"];case JD:return["RGBM","( value, 7.0 )"];case KD:return["RGBM","( value, 16.0 )"];case QD:return["RGBD","( value, 256.0 )"];case XD:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ZD:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function _w(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=n.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+r+zN(s)}function Zl(n,e){const t=KT(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function UN(n,e){const t=KT(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function HN(n,e){let t;switch(e){case jI:t="Linear";break;case XI:t="Reinhard";break;case YI:t="OptimizedCineon";break;case ZI:t="ACESFilmic";break;case JI:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function GN(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wu).join(`
`)}function VN(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function WN(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r).name;t[o]=n.getAttribLocation(e,o)}return t}function wu(n){return n!==""}function xw(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bw(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $N=/^[ \t]*#include +<([\w\d./]+)>/gm;function f0(n){return n.replace($N,qN)}function qN(n,e){const t=ut[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return f0(t)}const jN=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,XN=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ww(n){return n.replace(XN,QT).replace(jN,YN)}function YN(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),QT(n,e,t,i)}function QT(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Mw(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ZN(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===DT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Jh?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bu&&(e="SHADOWMAP_TYPE_VSM"),e}function JN(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case l_:case u_:e="ENVMAP_TYPE_CUBE";break;case h_:case f_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function KN(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case u_:case f_:e="ENVMAP_MODE_REFRACTION";break}return e}function QN(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case im:e="ENVMAP_BLENDING_MULTIPLY";break;case $I:e="ENVMAP_BLENDING_MIX";break;case qI:e="ENVMAP_BLENDING_ADD";break}return e}function e4(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=ZN(t),l=JN(t),u=KN(t),h=QN(t),f=n.gammaFactor>0?n.gammaFactor:1,d=t.isWebGL2?"":GN(t),p=VN(s),v=r.createProgram();let y,g,m=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[p].filter(wu).join(`
`),y.length>0&&(y+=`
`),g=[d,p].filter(wu).join(`
`),g.length>0&&(g+=`
`)):(y=[Mw(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wu).join(`
`),g=[d,Mw(t),"#define SHADER_NAME "+t.shaderName,p,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Bu?"#define TONE_MAPPING":"",t.toneMapping!==Bu?ut.tonemapping_pars_fragment:"",t.toneMapping!==Bu?HN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",ut.encodings_pars_fragment,t.map?Zl("mapTexelToLinear",t.mapEncoding):"",t.matcap?Zl("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Zl("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Zl("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?Zl("lightMapTexelToLinear",t.lightMapEncoding):"",UN("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(wu).join(`
`)),o=f0(o),o=xw(o,t),o=bw(o,t),a=f0(a),a=xw(a,t),a=bw(a,t),o=ww(o),a=ww(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(m=`#version 300 es
`,y=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===ew?"":"out highp vec4 pc_fragColor;",t.glslVersion===ew?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=m+y+o,b=m+g+a,E=yw(r,35633,w),S=yw(r,35632,b);if(r.attachShader(v,E),r.attachShader(v,S),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const z=r.getProgramInfoLog(v).trim(),_=r.getShaderInfoLog(E).trim(),x=r.getShaderInfoLog(S).trim();let T=!0,A=!0;if(r.getProgramParameter(v,35714)===!1){T=!1;const M=_w(r,E,"vertex"),L=_w(r,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(v,35715),"gl.getProgramInfoLog",z,M,L)}else z!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",z):(_===""||x==="")&&(A=!1);A&&(this.diagnostics={runnable:T,programLog:z,vertexShader:{log:_,prefix:y},fragmentShader:{log:x,prefix:g}})}r.deleteShader(E),r.deleteShader(S);let P;this.getUniforms=function(){return P===void 0&&(P=new po(r,v)),P};let N;return this.getAttributes=function(){return N===void 0&&(N=WN(r,v)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=BN++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=S,this}function t4(n,e,t,i,r,s){const o=[],a=i.isWebGL2,c=i.logarithmicDepthBuffer,l=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let f=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(S){const N=S.skeleton.bones;if(l)return 1024;{const _=Math.floor((u-20)/4),x=Math.min(_,N.length);return x<N.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+N.length+" bones. This GPU supports "+x+"."),0):x}}function y(S){let P;return S&&S.isTexture?P=S.encoding:S&&S.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),P=S.texture.encoding):P=Qh,P}function g(S,P,N,z,_){const x=z.fog,T=S.isMeshStandardMaterial?z.environment:null,A=e.get(S.envMap||T),M=d[S.type],L=_.isSkinnedMesh?v(_):0;S.precision!==null&&(f=i.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let I,k;if(M){const G=Ar[M];I=G.vertexShader,k=G.fragmentShader}else I=S.vertexShader,k=S.fragmentShader;const W=n.getRenderTarget();return{isWebGL2:a,shaderID:M,shaderName:S.type,vertexShader:I,fragmentShader:k,defines:S.defines,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,instancing:_.isInstancedMesh===!0,instancingColor:_.isInstancedMesh===!0&&_.instanceColor!==null,supportsVertexTextures:h,outputEncoding:W!==null?y(W.texture):n.outputEncoding,map:!!S.map,mapEncoding:y(S.map),matcap:!!S.matcap,matcapEncoding:y(S.matcap),envMap:!!A,envMapMode:A&&A.mapping,envMapEncoding:y(A),envMapCubeUV:!!A&&(A.mapping===h_||A.mapping===f_),lightMap:!!S.lightMap,lightMapEncoding:y(S.lightMap),aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,emissiveMapEncoding:y(S.emissiveMap),bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===nF,tangentSpaceNormalMap:S.normalMapType===La,clearcoatMap:!!S.clearcoatMap,clearcoatRoughnessMap:!!S.clearcoatRoughnessMap,clearcoatNormalMap:!!S.clearcoatNormalMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,alphaMap:!!S.alphaMap,gradientMap:!!S.gradientMap,sheen:!!S.sheen,transmissionMap:!!S.transmissionMap,combine:S.combine,vertexTangents:S.normalMap&&S.vertexTangents,vertexColors:S.vertexColors,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.displacementMap||!!S.transmissionMap,uvsVertexOnly:!(S.map||S.bumpMap||S.normalMap||S.specularMap||S.alphaMap||S.emissiveMap||S.roughnessMap||S.metalnessMap||S.clearcoatNormalMap||S.transmissionMap)&&!!S.displacementMap,fog:!!x,useFog:S.fog,fogExp2:x&&x.isFogExp2,flatShading:S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:c,skinning:S.skinning&&L>0,maxBones:L,useVertexTexture:l,morphTargets:S.morphTargets,morphNormals:S.morphNormals,maxMorphTargets:n.maxMorphTargets,maxMorphNormals:n.maxMorphNormals,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:S.toneMapped?n.toneMapping:Bu,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,alphaTest:S.alphaTest,doubleSided:S.side===Rn,flipSided:S.side===yn,depthPacking:S.depthPacking!==void 0?S.depthPacking:!1,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||t.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function m(S){const P=[];if(S.shaderID?P.push(S.shaderID):(P.push(S.fragmentShader),P.push(S.vertexShader)),S.defines!==void 0)for(const N in S.defines)P.push(N),P.push(S.defines[N]);if(S.isRawShaderMaterial===!1){for(let N=0;N<p.length;N++)P.push(S[p[N]]);P.push(n.outputEncoding),P.push(n.gammaFactor)}return P.push(S.customProgramCacheKey),P.join()}function w(S){const P=d[S.type];let N;if(P){const z=Ar[P];N=yF.clone(z.uniforms)}else N=S.uniforms;return N}function b(S,P){let N;for(let z=0,_=o.length;z<_;z++){const x=o[z];if(x.cacheKey===P){N=x,++N.usedTimes;break}}return N===void 0&&(N=new e4(n,P,S,r),o.push(N)),N}function E(S){if(--S.usedTimes===0){const P=o.indexOf(S);o[P]=o[o.length-1],o.pop(),S.destroy()}}return{getParameters:g,getProgramCacheKey:m,getUniforms:w,acquireProgram:b,releaseProgram:E,programs:o}}function n4(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function i4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function r4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Sw(n){const e=[];let t=0;const i=[],r=[],s={id:-1};function o(){t=0,i.length=0,r.length=0}function a(f,d,p,v,y,g){let m=e[t];const w=n.get(p);return m===void 0?(m={id:f.id,object:f,geometry:d,material:p,program:w.program||s,groupOrder:v,renderOrder:f.renderOrder,z:y,group:g},e[t]=m):(m.id=f.id,m.object=f,m.geometry=d,m.material=p,m.program=w.program||s,m.groupOrder=v,m.renderOrder=f.renderOrder,m.z=y,m.group=g),t++,m}function c(f,d,p,v,y,g){const m=a(f,d,p,v,y,g);(p.transparent===!0?r:i).push(m)}function l(f,d,p,v,y,g){const m=a(f,d,p,v,y,g);(p.transparent===!0?r:i).unshift(m)}function u(f,d){i.length>1&&i.sort(f||i4),r.length>1&&r.sort(d||r4)}function h(){for(let f=t,d=e.length;f<d;f++){const p=e[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:r,init:o,push:c,unshift:l,finish:h,sort:u}}function s4(n){let e=new WeakMap;function t(r,s){const o=e.get(r);let a;return o===void 0?(a=new Sw(n),e.set(r,new WeakMap),e.get(r).set(s,a)):(a=o.get(s),a===void 0&&(a=new Sw(n),o.set(s,a))),a}function i(){e=new WeakMap}return{get:t,dispose:i}}function o4(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new Fe};break;case"SpotLight":t={position:new te,direction:new te,color:new Fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new Fe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new Fe,groundColor:new Fe};break;case"RectAreaLight":t={color:new Fe,position:new te,halfWidth:new te,halfHeight:new te};break}return n[e.id]=t,t}}}function a4(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Te,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let c4=0;function l4(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function u4(n,e){const t=new o4,i=a4(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new te);const s=new te,o=new Oe,a=new Oe;function c(u){let h=0,f=0,d=0;for(let P=0;P<9;P++)r.probe[P].set(0,0,0);let p=0,v=0,y=0,g=0,m=0,w=0,b=0,E=0;u.sort(l4);for(let P=0,N=u.length;P<N;P++){const z=u[P],_=z.color,x=z.intensity,T=z.distance,A=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)h+=_.r*x,f+=_.g*x,d+=_.b*x;else if(z.isLightProbe)for(let M=0;M<9;M++)r.probe[M].addScaledVector(z.sh.coefficients[M],x);else if(z.isDirectionalLight){const M=t.get(z);if(M.color.copy(z.color).multiplyScalar(z.intensity),z.castShadow){const L=z.shadow,I=i.get(z);I.shadowBias=L.bias,I.shadowNormalBias=L.normalBias,I.shadowRadius=L.radius,I.shadowMapSize=L.mapSize,r.directionalShadow[p]=I,r.directionalShadowMap[p]=A,r.directionalShadowMatrix[p]=z.shadow.matrix,w++}r.directional[p]=M,p++}else if(z.isSpotLight){const M=t.get(z);if(M.position.setFromMatrixPosition(z.matrixWorld),M.color.copy(_).multiplyScalar(x),M.distance=T,M.coneCos=Math.cos(z.angle),M.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),M.decay=z.decay,z.castShadow){const L=z.shadow,I=i.get(z);I.shadowBias=L.bias,I.shadowNormalBias=L.normalBias,I.shadowRadius=L.radius,I.shadowMapSize=L.mapSize,r.spotShadow[y]=I,r.spotShadowMap[y]=A,r.spotShadowMatrix[y]=z.shadow.matrix,E++}r.spot[y]=M,y++}else if(z.isRectAreaLight){const M=t.get(z);M.color.copy(_).multiplyScalar(x),M.halfWidth.set(z.width*.5,0,0),M.halfHeight.set(0,z.height*.5,0),r.rectArea[g]=M,g++}else if(z.isPointLight){const M=t.get(z);if(M.color.copy(z.color).multiplyScalar(z.intensity),M.distance=z.distance,M.decay=z.decay,z.castShadow){const L=z.shadow,I=i.get(z);I.shadowBias=L.bias,I.shadowNormalBias=L.normalBias,I.shadowRadius=L.radius,I.shadowMapSize=L.mapSize,I.shadowCameraNear=L.camera.near,I.shadowCameraFar=L.camera.far,r.pointShadow[v]=I,r.pointShadowMap[v]=A,r.pointShadowMatrix[v]=z.shadow.matrix,b++}r.point[v]=M,v++}else if(z.isHemisphereLight){const M=t.get(z);M.skyColor.copy(z.color).multiplyScalar(x),M.groundColor.copy(z.groundColor).multiplyScalar(x),r.hemi[m]=M,m++}}g>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_FLOAT_1,r.rectAreaLTC2=Ie.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ie.LTC_HALF_1,r.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=d;const S=r.hash;(S.directionalLength!==p||S.pointLength!==v||S.spotLength!==y||S.rectAreaLength!==g||S.hemiLength!==m||S.numDirectionalShadows!==w||S.numPointShadows!==b||S.numSpotShadows!==E)&&(r.directional.length=p,r.spot.length=y,r.rectArea.length=g,r.point.length=v,r.hemi.length=m,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=E,S.directionalLength=p,S.pointLength=v,S.spotLength=y,S.rectAreaLength=g,S.hemiLength=m,S.numDirectionalShadows=w,S.numPointShadows=b,S.numSpotShadows=E,r.version=c4++)}function l(u,h){let f=0,d=0,p=0,v=0,y=0;const g=h.matrixWorldInverse;for(let m=0,w=u.length;m<w;m++){const b=u[m];if(b.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),f++}else if(b.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),p++}else if(b.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),E.halfWidth.set(b.width*.5,0,0),E.halfHeight.set(0,b.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(b.isPointLight){const E=r.point[d];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),d++}else if(b.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(g),E.direction.normalize(),y++}}}return{setup:c,setupView:l,state:r}}function Ew(n,e){const t=new u4(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function c(){t.setup(i)}function l(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:l,pushLight:o,pushShadow:a}}function h4(n,e){let t=new WeakMap;function i(s,o=0){let a;return t.has(s)===!1?(a=new Ew(n,e),t.set(s,[]),t.get(s).push(a)):o>=t.get(s).length?(a=new Ew(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:i,dispose:r}}function ga(n){je.call(this),this.type="MeshDepthMaterial",this.depthPacking=eF,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(n)}ga.prototype=Object.create(je.prototype);ga.prototype.constructor=ga;ga.prototype.isMeshDepthMaterial=!0;ga.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.depthPacking=n.depthPacking,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this};function va(n){je.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(n)}va.prototype=Object.create(je.prototype);va.prototype.constructor=va;va.prototype.isMeshDistanceMaterial=!0;va.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this};var f4=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,d4=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function eA(n,e,t){let i=new sm;const r=new Te,s=new Te,o=new vt,a=[],c=[],l={},u={0:yn,1:Kh,2:Rn},h=new qn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Te},radius:{value:4}},vertexShader:d4,fragmentShader:f4}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const d=new Ke;d.setAttribute("position",new Xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new qe(d,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=DT,this.render=function(E,S,P){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||E.length===0)return;const N=n.getRenderTarget(),z=n.getActiveCubeFace(),_=n.getActiveMipmapLevel(),x=n.state;x.setBlending(ku),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);for(let T=0,A=E.length;T<A;T++){const M=E[T],L=M.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",M,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);const I=L.getFrameExtents();if(r.multiply(I),s.copy(L.mapSize),(r.x>t||r.y>t)&&(r.x>t&&(s.x=Math.floor(t/I.x),r.x=s.x*I.x,L.mapSize.x=s.x),r.y>t&&(s.y=Math.floor(t/I.y),r.y=s.y*I.y,L.mapSize.y=s.y)),L.map===null&&!L.isPointLightShadow&&this.type===bu){const W={minFilter:bn,magFilter:bn,format:or};L.map=new ar(r.x,r.y,W),L.map.texture.name=M.name+".shadowMap",L.mapPass=new ar(r.x,r.y,W),L.camera.updateProjectionMatrix()}if(L.map===null){const W={minFilter:kn,magFilter:kn,format:or};L.map=new ar(r.x,r.y,W),L.map.texture.name=M.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const k=L.getViewportCount();for(let W=0;W<k;W++){const j=L.getViewport(W);o.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),x.viewport(o),L.updateMatrices(M,W),i=L.getFrustum(),b(S,P,L.camera,M,this.type)}!L.isPointLightShadow&&this.type===bu&&y(L,P),L.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(N,z,_)};function y(E,S){const P=e.update(p);h.uniforms.shadow_pass.value=E.map.texture,h.uniforms.resolution.value=E.mapSize,h.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(S,null,P,h,p,null),f.uniforms.shadow_pass.value=E.mapPass.texture,f.uniforms.resolution.value=E.mapSize,f.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(S,null,P,f,p,null)}function g(E,S,P){const N=E<<0|S<<1|P<<2;let z=a[N];return z===void 0&&(z=new ga({depthPacking:tF,morphTargets:E,skinning:S}),a[N]=z),z}function m(E,S,P){const N=E<<0|S<<1|P<<2;let z=c[N];return z===void 0&&(z=new va({morphTargets:E,skinning:S}),c[N]=z),z}function w(E,S,P,N,z,_,x){let T=null,A=g,M=E.customDepthMaterial;if(N.isPointLight===!0&&(A=m,M=E.customDistanceMaterial),M===void 0){let L=!1;P.morphTargets===!0&&(L=S.morphAttributes&&S.morphAttributes.position&&S.morphAttributes.position.length>0);let I=!1;E.isSkinnedMesh===!0&&(P.skinning===!0?I=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",E));const k=E.isInstancedMesh===!0;T=A(L,I,k)}else T=M;if(n.localClippingEnabled&&P.clipShadows===!0&&P.clippingPlanes.length!==0){const L=T.uuid,I=P.uuid;let k=l[L];k===void 0&&(k={},l[L]=k);let W=k[I];W===void 0&&(W=T.clone(),k[I]=W),T=W}return T.visible=P.visible,T.wireframe=P.wireframe,x===bu?T.side=P.shadowSide!==null?P.shadowSide:P.side:T.side=P.shadowSide!==null?P.shadowSide:u[P.side],T.clipShadows=P.clipShadows,T.clippingPlanes=P.clippingPlanes,T.clipIntersection=P.clipIntersection,T.wireframeLinewidth=P.wireframeLinewidth,T.linewidth=P.linewidth,N.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(N.matrixWorld),T.nearDistance=z,T.farDistance=_),T}function b(E,S,P,N,z){if(E.visible===!1)return;if(E.layers.test(S.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&z===bu)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,E.matrixWorld);const T=e.update(E),A=E.material;if(Array.isArray(A)){const M=T.groups;for(let L=0,I=M.length;L<I;L++){const k=M[L],W=A[k.materialIndex];if(W&&W.visible){const j=w(E,T,W,N,P.near,P.far,z);n.renderBufferDirect(P,null,T,j,E,k)}}}else if(A.visible){const M=w(E,T,A,N,P.near,P.far,z);n.renderBufferDirect(P,null,T,M,E,null)}}const x=E.children;for(let T=0,A=x.length;T<A;T++)b(x[T],S,P,N,z)}}function p4(n,e,t){const i=t.isWebGL2;function r(){let H=!1;const le=new vt;let he=null;const fe=new vt(0,0,0,0);return{setMask:function(pe){he!==pe&&!H&&(n.colorMask(pe,pe,pe,pe),he=pe)},setLocked:function(pe){H=pe},setClear:function(pe,Y,ne,ve,ue){ue===!0&&(pe*=ve,Y*=ve,ne*=ve),le.set(pe,Y,ne,ve),fe.equals(le)===!1&&(n.clearColor(pe,Y,ne,ve),fe.copy(le))},reset:function(){H=!1,he=null,fe.set(-1,0,0,0)}}}function s(){let H=!1,le=null,he=null,fe=null;return{setTest:function(pe){pe?G(2929):ee(2929)},setMask:function(pe){le!==pe&&!H&&(n.depthMask(pe),le=pe)},setFunc:function(pe){if(he!==pe){if(pe)switch(pe){case BI:n.depthFunc(512);break;case zI:n.depthFunc(519);break;case UI:n.depthFunc(513);break;case t0:n.depthFunc(515);break;case HI:n.depthFunc(514);break;case GI:n.depthFunc(518);break;case VI:n.depthFunc(516);break;case WI:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);he=pe}},setLocked:function(pe){H=pe},setClear:function(pe){fe!==pe&&(n.clearDepth(pe),fe=pe)},reset:function(){H=!1,le=null,he=null,fe=null}}}function o(){let H=!1,le=null,he=null,fe=null,pe=null,Y=null,ne=null,ve=null,ue=null;return{setTest:function(xe){H||(xe?G(2960):ee(2960))},setMask:function(xe){le!==xe&&!H&&(n.stencilMask(xe),le=xe)},setFunc:function(xe,Ee,Be){(he!==xe||fe!==Ee||pe!==Be)&&(n.stencilFunc(xe,Ee,Be),he=xe,fe=Ee,pe=Be)},setOp:function(xe,Ee,Be){(Y!==xe||ne!==Ee||ve!==Be)&&(n.stencilOp(xe,Ee,Be),Y=xe,ne=Ee,ve=Be)},setLocked:function(xe){H=xe},setClear:function(xe){ue!==xe&&(n.clearStencil(xe),ue=xe)},reset:function(){H=!1,le=null,he=null,fe=null,pe=null,Y=null,ne=null,ve=null,ue=null}}}const a=new r,c=new s,l=new o;let u={},h=null,f=null,d=null,p=null,v=null,y=null,g=null,m=null,w=null,b=!1,E=null,S=null,P=null,N=null,z=null;const _=n.getParameter(35661);let x=!1,T=0;const A=n.getParameter(7938);A.indexOf("WebGL")!==-1?(T=parseFloat(/^WebGL (\d)/.exec(A)[1]),x=T>=1):A.indexOf("OpenGL ES")!==-1&&(T=parseFloat(/^OpenGL ES (\d)/.exec(A)[1]),x=T>=2);let M=null,L={};const I=new vt,k=new vt;function W(H,le,he){const fe=new Uint8Array(4),pe=n.createTexture();n.bindTexture(H,pe),n.texParameteri(H,10241,9728),n.texParameteri(H,10240,9728);for(let Y=0;Y<he;Y++)n.texImage2D(le+Y,0,6408,1,1,0,6408,5121,fe);return pe}const j={};j[3553]=W(3553,3553,1),j[34067]=W(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),G(2929),c.setFunc(t0),B(!1),Z(Nb),G(2884),ae(ku);function G(H){u[H]!==!0&&(n.enable(H),u[H]=!0)}function ee(H){u[H]!==!1&&(n.disable(H),u[H]=!1)}function se(H){return h!==H?(n.useProgram(H),h=H,!0):!1}const oe={[xc]:32774,[AI]:32778,[CI]:32779};if(i)oe[Ub]=32775,oe[Hb]=32776;else{const H=e.get("EXT_blend_minmax");H!==null&&(oe[Ub]=H.MIN_EXT,oe[Hb]=H.MAX_EXT)}const de={[LI]:0,[RI]:1,[PI]:768,[OT]:770,[NI]:776,[OI]:774,[DI]:772,[II]:769,[kT]:771,[kI]:775,[FI]:773};function ae(H,le,he,fe,pe,Y,ne,ve){if(H===ku){f&&(ee(3042),f=!1);return}if(f||(G(3042),f=!0),H!==TI){if(H!==d||ve!==b){if((p!==xc||g!==xc)&&(n.blendEquation(32774),p=xc,g=xc),ve)switch(H){case Nu:n.blendFuncSeparate(1,771,1,771);break;case pa:n.blendFunc(1,1);break;case Bb:n.blendFuncSeparate(0,0,769,771);break;case zb:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Nu:n.blendFuncSeparate(770,771,1,771);break;case pa:n.blendFunc(770,1);break;case Bb:n.blendFunc(0,769);break;case zb:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}v=null,y=null,m=null,w=null,d=H,b=ve}return}pe=pe||le,Y=Y||he,ne=ne||fe,(le!==p||pe!==g)&&(n.blendEquationSeparate(oe[le],oe[pe]),p=le,g=pe),(he!==v||fe!==y||Y!==m||ne!==w)&&(n.blendFuncSeparate(de[he],de[fe],de[Y],de[ne]),v=he,y=fe,m=Y,w=ne),d=H,b=null}function O(H,le){H.side===Rn?ee(2884):G(2884);let he=H.side===yn;le&&(he=!he),B(he),H.blending===Nu&&H.transparent===!1?ae(ku):ae(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),c.setFunc(H.depthFunc),c.setTest(H.depthTest),c.setMask(H.depthWrite),a.setMask(H.colorWrite);const fe=H.stencilWrite;l.setTest(fe),fe&&(l.setMask(H.stencilWriteMask),l.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),l.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),J(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits)}function B(H){E!==H&&(H?n.frontFace(2304):n.frontFace(2305),E=H)}function Z(H){H!==SI?(G(2884),H!==S&&(H===Nb?n.cullFace(1029):H===EI?n.cullFace(1028):n.cullFace(1032))):ee(2884),S=H}function V(H){H!==P&&(x&&n.lineWidth(H),P=H)}function J(H,le,he){H?(G(32823),(N!==le||z!==he)&&(n.polygonOffset(le,he),N=le,z=he)):ee(32823)}function re(H){H?G(3089):ee(3089)}function D(H){H===void 0&&(H=33984+_-1),M!==H&&(n.activeTexture(H),M=H)}function F(H,le){M===null&&D();let he=L[M];he===void 0&&(he={type:void 0,texture:void 0},L[M]=he),(he.type!==H||he.texture!==le)&&(n.bindTexture(H,le||j[H]),he.type=H,he.texture=le)}function U(){const H=L[M];H!==void 0&&H.type!==void 0&&(n.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function K(){try{n.compressedTexImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function $(){try{n.texImage2D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function R(){try{n.texImage3D.apply(n,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function C(H){I.equals(H)===!1&&(n.scissor(H.x,H.y,H.z,H.w),I.copy(H))}function q(H){k.equals(H)===!1&&(n.viewport(H.x,H.y,H.z,H.w),k.copy(H))}function X(){u={},M=null,L={},h=null,f=null,d=null,p=null,v=null,y=null,g=null,m=null,w=null,b=!1,E=null,S=null,P=null,N=null,z=null,a.reset(),c.reset(),l.reset()}return{buffers:{color:a,depth:c,stencil:l},enable:G,disable:ee,useProgram:se,setBlending:ae,setMaterial:O,setFlipSided:B,setCullFace:Z,setLineWidth:V,setPolygonOffset:J,setScissorTest:re,activeTexture:D,bindTexture:F,unbindTexture:U,compressedTexImage2D:K,texImage2D:$,texImage3D:R,scissor:C,viewport:q,reset:X}}function m4(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=new WeakMap;let d,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(R,C){return p?new OffscreenCanvas(R,C):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(R,C,q,X){let H=1;if((R.width>X||R.height>X)&&(H=X/Math.max(R.width,R.height)),H<1||C===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const le=C?Ue.floorPowerOfTwo:Math.floor,he=le(H*R.width),fe=le(H*R.height);d===void 0&&(d=v(he,fe));const pe=q?v(he,fe):d;return pe.width=he,pe.height=fe,pe.getContext("2d").drawImage(R,0,0,he,fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+he+"x"+fe+")."),pe}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function g(R){return Ue.isPowerOfTwo(R.width)&&Ue.isPowerOfTwo(R.height)}function m(R){return a?!1:R.wrapS!==On||R.wrapT!==On||R.minFilter!==kn&&R.minFilter!==bn}function w(R,C){return R.generateMipmaps&&C&&R.minFilter!==kn&&R.minFilter!==bn}function b(R,C,q,X){n.generateMipmap(R);const H=i.get(C);H.__maxMipLevel=Math.log(Math.max(q,X))*Math.LOG2E}function E(R,C,q){if(a===!1)return C;if(R!==null){if(n[R]!==void 0)return n[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let X=C;return C===6403&&(q===5126&&(X=33326),q===5131&&(X=33325),q===5121&&(X=33321)),C===6407&&(q===5126&&(X=34837),q===5131&&(X=34843),q===5121&&(X=32849)),C===6408&&(q===5126&&(X=34836),q===5131&&(X=34842),q===5121&&(X=32856)),(X===33325||X===33326||X===34842||X===34836)&&e.get("EXT_color_buffer_float"),X}function S(R){return R===kn||R===i0||R===r0?9728:9729}function P(R){const C=R.target;C.removeEventListener("dispose",P),z(C),C.isVideoTexture&&f.delete(C),o.memory.textures--}function N(R){const C=R.target;C.removeEventListener("dispose",N),_(C),o.memory.textures--}function z(R){const C=i.get(R);C.__webglInit!==void 0&&(n.deleteTexture(C.__webglTexture),i.remove(R))}function _(R){const C=i.get(R),q=i.get(R.texture);if(R){if(q.__webglTexture!==void 0&&n.deleteTexture(q.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let X=0;X<6;X++)n.deleteFramebuffer(C.__webglFramebuffer[X]),C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer[X]);else n.deleteFramebuffer(C.__webglFramebuffer),C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&n.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer&&n.deleteRenderbuffer(C.__webglColorRenderbuffer),C.__webglDepthRenderbuffer&&n.deleteRenderbuffer(C.__webglDepthRenderbuffer);i.remove(R.texture),i.remove(R)}}let x=0;function T(){x=0}function A(){const R=x;return R>=c&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+c),x+=1,R}function M(R,C){const q=i.get(R);if(R.isVideoTexture&&D(R),R.version>0&&q.__version!==R.version){const X=R.image;if(X===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(X.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(q,R,C);return}}t.activeTexture(33984+C),t.bindTexture(3553,q.__webglTexture)}function L(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){se(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(35866,q.__webglTexture)}function I(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){se(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(32879,q.__webglTexture)}function k(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){oe(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(34067,q.__webglTexture)}const W={[Nr]:10497,[On]:33071,[cp]:33648},j={[kn]:9728,[i0]:9984,[r0]:9986,[bn]:9729,[BT]:9985,[el]:9987};function G(R,C,q){q?(n.texParameteri(R,10242,W[C.wrapS]),n.texParameteri(R,10243,W[C.wrapT]),(R===32879||R===35866)&&n.texParameteri(R,32882,W[C.wrapR]),n.texParameteri(R,10240,j[C.magFilter]),n.texParameteri(R,10241,j[C.minFilter])):(n.texParameteri(R,10242,33071),n.texParameteri(R,10243,33071),(R===32879||R===35866)&&n.texParameteri(R,32882,33071),(C.wrapS!==On||C.wrapT!==On)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(R,10240,S(C.magFilter)),n.texParameteri(R,10241,S(C.minFilter)),C.minFilter!==kn&&C.minFilter!==bn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const X=e.get("EXT_texture_filter_anisotropic");if(X){if(C.type===so&&e.get("OES_texture_float_linear")===null||C.type===up&&(a||e.get("OES_texture_half_float_linear"))===null)return;(C.anisotropy>1||i.get(C).__currentAnisotropy)&&(n.texParameterf(R,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy)}}function ee(R,C){R.__webglInit===void 0&&(R.__webglInit=!0,C.addEventListener("dispose",P),R.__webglTexture=n.createTexture(),o.memory.textures++)}function se(R,C,q){let X=3553;C.isDataTexture2DArray&&(X=35866),C.isDataTexture3D&&(X=32879),ee(R,C),t.activeTexture(33984+q),t.bindTexture(X,R.__webglTexture),n.pixelStorei(37440,C.flipY),n.pixelStorei(37441,C.premultiplyAlpha),n.pixelStorei(3317,C.unpackAlignment);const H=m(C)&&g(C.image)===!1,le=y(C.image,H,!1,u),he=g(le)||a,fe=s.convert(C.format);let pe=s.convert(C.type),Y=E(C.internalFormat,fe,pe);G(X,C,he);let ne;const ve=C.mipmaps;if(C.isDepthTexture)Y=6402,a?C.type===so?Y=36012:C.type===Zd?Y=33190:C.type===zu?Y=35056:Y=33189:C.type===so&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),C.format===Wc&&Y===6402&&C.type!==lp&&C.type!==Zd&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),C.type=lp,pe=s.convert(C.type)),C.format===dh&&Y===6402&&(Y=34041,C.type!==zu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),C.type=zu,pe=s.convert(C.type))),t.texImage2D(3553,0,Y,le.width,le.height,0,fe,pe,null);else if(C.isDataTexture)if(ve.length>0&&he){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],t.texImage2D(3553,ue,Y,ne.width,ne.height,0,fe,pe,ne.data);C.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,Y,le.width,le.height,0,fe,pe,le.data),R.__maxMipLevel=0;else if(C.isCompressedTexture){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],C.format!==or&&C.format!==fo?fe!==null?t.compressedTexImage2D(3553,ue,Y,ne.width,ne.height,0,ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ue,Y,ne.width,ne.height,0,fe,pe,ne.data);R.__maxMipLevel=ve.length-1}else if(C.isDataTexture2DArray)t.texImage3D(35866,0,Y,le.width,le.height,le.depth,0,fe,pe,le.data),R.__maxMipLevel=0;else if(C.isDataTexture3D)t.texImage3D(32879,0,Y,le.width,le.height,le.depth,0,fe,pe,le.data),R.__maxMipLevel=0;else if(ve.length>0&&he){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],t.texImage2D(3553,ue,Y,fe,pe,ne);C.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,Y,fe,pe,le),R.__maxMipLevel=0;w(C,he)&&b(X,C,le.width,le.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function oe(R,C,q){if(C.image.length!==6)return;ee(R,C),t.activeTexture(33984+q),t.bindTexture(34067,R.__webglTexture),n.pixelStorei(37440,C.flipY);const X=C&&(C.isCompressedTexture||C.image[0].isCompressedTexture),H=C.image[0]&&C.image[0].isDataTexture,le=[];for(let ue=0;ue<6;ue++)!X&&!H?le[ue]=y(C.image[ue],!1,!0,l):le[ue]=H?C.image[ue].image:C.image[ue];const he=le[0],fe=g(he)||a,pe=s.convert(C.format),Y=s.convert(C.type),ne=E(C.internalFormat,pe,Y);G(34067,C,fe);let ve;if(X){for(let ue=0;ue<6;ue++){ve=le[ue].mipmaps;for(let xe=0;xe<ve.length;xe++){const Ee=ve[xe];C.format!==or&&C.format!==fo?pe!==null?t.compressedTexImage2D(34069+ue,xe,ne,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ue,xe,ne,Ee.width,Ee.height,0,pe,Y,Ee.data)}}R.__maxMipLevel=ve.length-1}else{ve=C.mipmaps;for(let ue=0;ue<6;ue++)if(H){t.texImage2D(34069+ue,0,ne,le[ue].width,le[ue].height,0,pe,Y,le[ue].data);for(let xe=0;xe<ve.length;xe++){const Be=ve[xe].image[ue].image;t.texImage2D(34069+ue,xe+1,ne,Be.width,Be.height,0,pe,Y,Be.data)}}else{t.texImage2D(34069+ue,0,ne,pe,Y,le[ue]);for(let xe=0;xe<ve.length;xe++){const Ee=ve[xe];t.texImage2D(34069+ue,xe+1,ne,pe,Y,Ee.image[ue])}}R.__maxMipLevel=ve.length}w(C,fe)&&b(34067,C,he.width,he.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function de(R,C,q,X){const H=s.convert(C.texture.format),le=s.convert(C.texture.type),he=E(C.texture.internalFormat,H,le);t.texImage2D(X,0,he,C.width,C.height,0,H,le,null),n.bindFramebuffer(36160,R),n.framebufferTexture2D(36160,q,X,i.get(C.texture).__webglTexture,0),n.bindFramebuffer(36160,null)}function ae(R,C,q){if(n.bindRenderbuffer(36161,R),C.depthBuffer&&!C.stencilBuffer){let X=33189;if(q){const H=C.depthTexture;H&&H.isDepthTexture&&(H.type===so?X=36012:H.type===Zd&&(X=33190));const le=re(C);n.renderbufferStorageMultisample(36161,le,X,C.width,C.height)}else n.renderbufferStorage(36161,X,C.width,C.height);n.framebufferRenderbuffer(36160,36096,36161,R)}else if(C.depthBuffer&&C.stencilBuffer){if(q){const X=re(C);n.renderbufferStorageMultisample(36161,X,35056,C.width,C.height)}else n.renderbufferStorage(36161,34041,C.width,C.height);n.framebufferRenderbuffer(36160,33306,36161,R)}else{const X=s.convert(C.texture.format),H=s.convert(C.texture.type),le=E(C.texture.internalFormat,X,H);if(q){const he=re(C);n.renderbufferStorageMultisample(36161,he,le,C.width,C.height)}else n.renderbufferStorage(36161,le,C.width,C.height)}n.bindRenderbuffer(36161,null)}function O(R,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,R),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),M(C.depthTexture,0);const X=i.get(C.depthTexture).__webglTexture;if(C.depthTexture.format===Wc)n.framebufferTexture2D(36160,36096,3553,X,0);else if(C.depthTexture.format===dh)n.framebufferTexture2D(36160,33306,3553,X,0);else throw new Error("Unknown depthTexture format")}function B(R){const C=i.get(R),q=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(q)throw new Error("target.depthTexture not supported in Cube render targets");O(C.__webglFramebuffer,R)}else if(q){C.__webglDepthbuffer=[];for(let X=0;X<6;X++)n.bindFramebuffer(36160,C.__webglFramebuffer[X]),C.__webglDepthbuffer[X]=n.createRenderbuffer(),ae(C.__webglDepthbuffer[X],R,!1)}else n.bindFramebuffer(36160,C.__webglFramebuffer),C.__webglDepthbuffer=n.createRenderbuffer(),ae(C.__webglDepthbuffer,R,!1);n.bindFramebuffer(36160,null)}function Z(R){const C=i.get(R),q=i.get(R.texture);R.addEventListener("dispose",N),q.__webglTexture=n.createTexture(),o.memory.textures++;const X=R.isWebGLCubeRenderTarget===!0,H=R.isWebGLMultisampleRenderTarget===!0,le=g(R)||a;if(a&&R.texture.format===fo&&(R.texture.type===so||R.texture.type===up)&&(R.texture.format=or,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),X){C.__webglFramebuffer=[];for(let he=0;he<6;he++)C.__webglFramebuffer[he]=n.createFramebuffer()}else if(C.__webglFramebuffer=n.createFramebuffer(),H)if(a){C.__webglMultisampledFramebuffer=n.createFramebuffer(),C.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,C.__webglColorRenderbuffer);const he=s.convert(R.texture.format),fe=s.convert(R.texture.type),pe=E(R.texture.internalFormat,he,fe),Y=re(R);n.renderbufferStorageMultisample(36161,Y,pe,R.width,R.height),n.bindFramebuffer(36160,C.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,C.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),R.depthBuffer&&(C.__webglDepthRenderbuffer=n.createRenderbuffer(),ae(C.__webglDepthRenderbuffer,R,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(X){t.bindTexture(34067,q.__webglTexture),G(34067,R.texture,le);for(let he=0;he<6;he++)de(C.__webglFramebuffer[he],R,36064,34069+he);w(R.texture,le)&&b(34067,R.texture,R.width,R.height),t.bindTexture(34067,null)}else t.bindTexture(3553,q.__webglTexture),G(3553,R.texture,le),de(C.__webglFramebuffer,R,36064,3553),w(R.texture,le)&&b(3553,R.texture,R.width,R.height),t.bindTexture(3553,null);R.depthBuffer&&B(R)}function V(R){const C=R.texture,q=g(R)||a;if(w(C,q)){const X=R.isWebGLCubeRenderTarget?34067:3553,H=i.get(C).__webglTexture;t.bindTexture(X,H),b(X,C,R.width,R.height),t.bindTexture(X,null)}}function J(R){if(R.isWebGLMultisampleRenderTarget)if(a){const C=i.get(R);n.bindFramebuffer(36008,C.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,C.__webglFramebuffer);const q=R.width,X=R.height;let H=16384;R.depthBuffer&&(H|=256),R.stencilBuffer&&(H|=1024),n.blitFramebuffer(0,0,q,X,0,0,q,X,H,9728),n.bindFramebuffer(36160,C.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function re(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(h,R.samples):0}function D(R){const C=o.render.frame;f.get(R)!==C&&(f.set(R,C),R.update())}let F=!1,U=!1;function K(R,C){R&&R.isWebGLRenderTarget&&(F===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),R=R.texture),M(R,C)}function $(R,C){R&&R.isWebGLCubeRenderTarget&&(U===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),R=R.texture),k(R,C)}this.allocateTextureUnit=A,this.resetTextureUnits=T,this.setTexture2D=M,this.setTexture2DArray=L,this.setTexture3D=I,this.setTextureCube=k,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=J,this.safeSetTexture2D=K,this.safeSetTextureCube=$}function g4(n,e,t){const i=t.isWebGL2;function r(s){let o;if(s===d_)return 5121;if(s===tD)return 32819;if(s===nD)return 32820;if(s===iD)return 33635;if(s===KI)return 5120;if(s===QI)return 5122;if(s===lp)return 5123;if(s===eD)return 5124;if(s===Zd)return 5125;if(s===so)return 5126;if(s===up)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===rD)return 6406;if(s===fo)return 6407;if(s===or)return 6408;if(s===sD)return 6409;if(s===oD)return 6410;if(s===Wc)return 6402;if(s===dh)return 34041;if(s===aD)return 6403;if(s===cD)return 36244;if(s===lD)return 33319;if(s===uD)return 33320;if(s===hD)return 36248;if(s===fD)return 36249;if(s===Vb||s===Wb||s===$b||s===qb)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Vb)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Wb)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===$b)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===qb)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===jb||s===Xb||s===Yb||s===Zb)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===jb)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Xb)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Yb)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Zb)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===dD)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===Jb||s===Kb)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===Jb)return o.COMPRESSED_RGB8_ETC2;if(s===Kb)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===pD||s===mD||s===gD||s===vD||s===yD||s===_D||s===xD||s===bD||s===wD||s===MD||s===SD||s===ED||s===TD||s===AD||s===LD||s===RD||s===PD||s===ID||s===DD||s===FD||s===OD||s===kD||s===ND||s===BD||s===zD||s===UD||s===HD||s===GD)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===CD)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===zu)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function d0(n=[]){lt.call(this),this.cameras=n}d0.prototype=Object.assign(Object.create(lt.prototype),{constructor:d0,isArrayCamera:!0});function tn(){Ne.call(this),this.type="Group"}tn.prototype=Object.assign(Object.create(Ne.prototype),{constructor:tn,isGroup:!0});function Hu(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Hu.prototype,{constructor:Hu,getHandSpace:function(){if(this._hand===null&&(this._hand=new tn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let n=0;n<=window.XRHand.LITTLE_PHALANX_TIP;n++){const e=new tn;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new tn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new tn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this},disconnect:function(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(n,e,t){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,c=this._hand;if(n&&e.session.visibilityState!=="visible-blurred")if(c&&n.hand){s=!0;for(let l=0;l<=window.XRHand.LITTLE_PHALANX_TIP;l++)if(n.hand[l]){const u=e.getJointPose(n.hand[l],t),h=c.joints[l];u!==null&&(h.matrix.fromArray(u.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=u.radius),h.visible=u!==null;const f=c.joints[window.XRHand.INDEX_PHALANX_TIP],d=c.joints[window.XRHand.THUMB_PHALANX_TIP],p=f.position.distanceTo(d.position),v=.02,y=.005;c.inputState.pinching&&p>v+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!c.inputState.pinching&&p<=v-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}}else o!==null&&(i=e.getPose(n.targetRaySpace,t),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&n.gripSpace&&(r=e.getPose(n.gripSpace,t),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),this}});function tA(n,e){const t=this;let i=null,r=1,s=null,o="local-floor",a=null;const c=[],l=new Map,u=new lt;u.layers.enable(1),u.viewport=new vt;const h=new lt;h.layers.enable(2),h.viewport=new vt;const f=[u,h],d=new d0;d.layers.enable(1),d.layers.enable(2);let p=null,v=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(x){let T=c[x];return T===void 0&&(T=new Hu,c[x]=T),T.getTargetRaySpace()},this.getControllerGrip=function(x){let T=c[x];return T===void 0&&(T=new Hu,c[x]=T),T.getGripSpace()},this.getHand=function(x){let T=c[x];return T===void 0&&(T=new Hu,c[x]=T),T.getHandSpace()};function y(x){const T=l.get(x.inputSource);T&&T.dispatchEvent({type:x.type,data:x.inputSource})}function g(){l.forEach(function(x,T){x.disconnect(T)}),l.clear(),n.setFramebuffer(null),n.setRenderTarget(n.getRenderTarget()),_.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}function m(x){s=x,_.setContext(i),_.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(x){r=x,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(x){o=x,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return i},this.setSession=function(x){if(i=x,i!==null){i.addEventListener("select",y),i.addEventListener("selectstart",y),i.addEventListener("selectend",y),i.addEventListener("squeeze",y),i.addEventListener("squeezestart",y),i.addEventListener("squeezeend",y),i.addEventListener("end",g);const T=e.getContextAttributes();T.xrCompatible!==!0&&e.makeXRCompatible();const A={antialias:T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:r},M=new XRWebGLLayer(i,e,A);i.updateRenderState({baseLayer:M}),i.requestReferenceSpace(o).then(m),i.addEventListener("inputsourceschange",w)}};function w(x){const T=i.inputSources;for(let A=0;A<c.length;A++)l.set(T[A],c[A]);for(let A=0;A<x.removed.length;A++){const M=x.removed[A],L=l.get(M);L&&(L.dispatchEvent({type:"disconnected",data:M}),l.delete(M))}for(let A=0;A<x.added.length;A++){const M=x.added[A],L=l.get(M);L&&L.dispatchEvent({type:"connected",data:M})}}const b=new te,E=new te;function S(x,T,A){b.setFromMatrixPosition(T.matrixWorld),E.setFromMatrixPosition(A.matrixWorld);const M=b.distanceTo(E),L=T.projectionMatrix.elements,I=A.projectionMatrix.elements,k=L[14]/(L[10]-1),W=L[14]/(L[10]+1),j=(L[9]+1)/L[5],G=(L[9]-1)/L[5],ee=(L[8]-1)/L[0],se=(I[8]+1)/I[0],oe=k*ee,de=k*se,ae=M/(-ee+se),O=ae*-ee;T.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(O),x.translateZ(ae),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();const B=k+ae,Z=W+ae,V=oe-O,J=de+(M-O),re=j*W/Z*B,D=G*W/Z*B;x.projectionMatrix.makePerspective(V,J,re,D,B,Z)}function P(x,T){T===null?x.matrixWorld.copy(x.matrix):x.matrixWorld.multiplyMatrices(T.matrixWorld,x.matrix),x.matrixWorldInverse.copy(x.matrixWorld).invert()}this.getCamera=function(x){d.near=h.near=u.near=x.near,d.far=h.far=u.far=x.far,(p!==d.near||v!==d.far)&&(i.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,v=d.far);const T=x.parent,A=d.cameras;P(d,T);for(let L=0;L<A.length;L++)P(A[L],T);x.matrixWorld.copy(d.matrixWorld);const M=x.children;for(let L=0,I=M.length;L<I;L++)M[L].updateMatrixWorld(!0);return A.length===2?S(d,u,h):d.projectionMatrix.copy(u.projectionMatrix),d};let N=null;function z(x,T){if(a=T.getViewerPose(s),a!==null){const M=a.views,L=i.renderState.baseLayer;n.setFramebuffer(L.framebuffer);let I=!1;M.length!==d.cameras.length&&(d.cameras.length=0,I=!0);for(let k=0;k<M.length;k++){const W=M[k],j=L.getViewport(W),G=f[k];G.matrix.fromArray(W.transform.matrix),G.projectionMatrix.fromArray(W.projectionMatrix),G.viewport.set(j.x,j.y,j.width,j.height),k===0&&d.matrix.copy(G.matrix),I===!0&&d.cameras.push(G)}}const A=i.inputSources;for(let M=0;M<c.length;M++){const L=c[M],I=A[M];L.update(I,T,s)}N&&N(x,T)}const _=new qT;_.setAnimationLoop(z),this.setAnimationLoop=function(x){N=x},this.dispose=function(){}}Object.assign(tA.prototype,fr.prototype);function v4(n){function e(g,m){g.fogColor.value.copy(m.color),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function t(g,m,w,b){m.isMeshBasicMaterial?i(g,m):m.isMeshLambertMaterial?(i(g,m),c(g,m)):m.isMeshToonMaterial?(i(g,m),u(g,m)):m.isMeshPhongMaterial?(i(g,m),l(g,m)):m.isMeshStandardMaterial?(i(g,m),m.isMeshPhysicalMaterial?f(g,m):h(g,m)):m.isMeshMatcapMaterial?(i(g,m),d(g,m)):m.isMeshDepthMaterial?(i(g,m),p(g,m)):m.isMeshDistanceMaterial?(i(g,m),v(g,m)):m.isMeshNormalMaterial?(i(g,m),y(g,m)):m.isLineBasicMaterial?(r(g,m),m.isLineDashedMaterial&&s(g,m)):m.isPointsMaterial?o(g,m,w,b):m.isSpriteMaterial?a(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.specularMap&&(g.specularMap.value=m.specularMap);const w=n.get(m).envMap;if(w){g.envMap.value=w,g.flipEnvMap.value=w.isCubeTexture&&w._needsFlipEnvMap?-1:1,g.reflectivity.value=m.reflectivity,g.refractionRatio.value=m.refractionRatio;const S=n.get(w).__maxMipLevel;S!==void 0&&(g.maxMipLevel.value=S)}m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity);let b;m.map?b=m.map:m.specularMap?b=m.specularMap:m.displacementMap?b=m.displacementMap:m.normalMap?b=m.normalMap:m.bumpMap?b=m.bumpMap:m.roughnessMap?b=m.roughnessMap:m.metalnessMap?b=m.metalnessMap:m.alphaMap?b=m.alphaMap:m.emissiveMap?b=m.emissiveMap:m.clearcoatMap?b=m.clearcoatMap:m.clearcoatNormalMap?b=m.clearcoatNormalMap:m.clearcoatRoughnessMap&&(b=m.clearcoatRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),g.uvTransform.value.copy(b.matrix));let E;m.aoMap?E=m.aoMap:m.lightMap&&(E=m.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),g.uv2Transform.value.copy(E.matrix))}function r(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function o(g,m,w,b){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*w,g.scale.value=b*.5,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap);let E;m.map?E=m.map:m.alphaMap&&(E=m.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),g.uvTransform.value.copy(E.matrix))}function a(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap);let w;m.map?w=m.map:m.alphaMap&&(w=m.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix))}function c(g,m){m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap)}function l(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===yn&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===yn&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===yn&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===yn&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function h(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===yn&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===yn&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),n.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m){h(g,m),g.reflectivity.value=m.reflectivity,g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.sheen&&g.sheen.value.copy(m.sheen),m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===yn&&g.clearcoatNormalScale.value.negate()),g.transmission.value=m.transmission,m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap)}function d(g,m){m.matcap&&(g.matcap.value=m.matcap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===yn&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===yn&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function p(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function v(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}function y(g,m){m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===yn&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===yn&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function y4(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function jt(n){n=n||{};const e=n.canvas!==void 0?n.canvas:y4(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,c=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h=null,f=null;const d=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Qh,this.physicallyCorrectLights=!1,this.toneMapping=Bu,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let v=!1,y=null,g=0,m=0,w=null,b=null,E=-1,S=null;const P=new vt,N=new vt;let z=null,_=e.width,x=e.height,T=1,A=null,M=null;const L=new vt(0,0,_,x),I=new vt(0,0,_,x);let k=!1;const W=new sm;let j=!1,G=!1;const ee=new Oe,se=new te,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function de(){return w===null?T:1}let ae=t;function O(ie,Me){for(let be=0;be<ie.length;be++){const Se=ie[be],Pe=e.getContext(Se,Me);if(Pe!==null)return Pe}return null}try{const ie={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",Ee,!1),e.addEventListener("webglcontextrestored",Be,!1),ae===null){const Me=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Me.shift(),ae=O(Me,ie),ae===null)throw O(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ae.getShaderPrecisionFormat===void 0&&(ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ie){throw console.error("THREE.WebGLRenderer: "+ie.message),ie}let B,Z,V,J,re,D,F,U,K,$,R,C,q,X,H,le,he,fe,pe,Y,ne;function ve(){B=new Yk(ae),Z=new qk(ae,B,n),Z.isWebGL2===!1&&(B.get("WEBGL_depth_texture"),B.get("OES_texture_float"),B.get("OES_texture_half_float"),B.get("OES_texture_half_float_linear"),B.get("OES_standard_derivatives"),B.get("OES_element_index_uint"),B.get("OES_vertex_array_object"),B.get("ANGLE_instanced_arrays")),B.get("OES_texture_float_linear"),Y=new g4(ae,B,Z),V=new p4(ae,B,Z),V.scissor(N.copy(I).multiplyScalar(T).floor()),V.viewport(P.copy(L).multiplyScalar(T).floor()),J=new Kk,re=new n4,D=new m4(ae,B,V,re,Z,Y,J),F=new Xk(p),U=new bF(ae,Z),ne=new Wk(ae,B,U,Z),K=new Zk(ae,U,J,ne),$=new nN(ae,K,U,J),he=new tN(ae),H=new jk(re),R=new t4(p,F,B,Z,ne,H),C=new v4(re),q=new s4(re),X=new h4(B,Z),le=new Vk(p,F,V,$,a),fe=new $k(ae,B,J,Z),pe=new Jk(ae,B,J,Z),J.programs=R.programs,p.capabilities=Z,p.extensions=B,p.properties=re,p.renderLists=q,p.state=V,p.info=J}ve();const ue=new tA(p,ae);this.xr=ue;const xe=new eA(p,$,Z.maxTextureSize);this.shadowMap=xe,this.getContext=function(){return ae},this.getContextAttributes=function(){return ae.getContextAttributes()},this.forceContextLoss=function(){const ie=B.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=B.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(ie){ie!==void 0&&(T=ie,this.setSize(_,x,!1))},this.getSize=function(ie){return ie===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),ie=new Te),ie.set(_,x)},this.setSize=function(ie,Me,be){if(ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}_=ie,x=Me,e.width=Math.floor(ie*T),e.height=Math.floor(Me*T),be!==!1&&(e.style.width=ie+"px",e.style.height=Me+"px"),this.setViewport(0,0,ie,Me)},this.getDrawingBufferSize=function(ie){return ie===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),ie=new Te),ie.set(_*T,x*T).floor()},this.setDrawingBufferSize=function(ie,Me,be){_=ie,x=Me,T=be,e.width=Math.floor(ie*be),e.height=Math.floor(Me*be),this.setViewport(0,0,ie,Me)},this.getCurrentViewport=function(ie){return ie===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),ie=new vt),ie.copy(P)},this.getViewport=function(ie){return ie.copy(L)},this.setViewport=function(ie,Me,be,Se){ie.isVector4?L.set(ie.x,ie.y,ie.z,ie.w):L.set(ie,Me,be,Se),V.viewport(P.copy(L).multiplyScalar(T).floor())},this.getScissor=function(ie){return ie.copy(I)},this.setScissor=function(ie,Me,be,Se){ie.isVector4?I.set(ie.x,ie.y,ie.z,ie.w):I.set(ie,Me,be,Se),V.scissor(N.copy(I).multiplyScalar(T).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(ie){V.setScissorTest(k=ie)},this.setOpaqueSort=function(ie){A=ie},this.setTransparentSort=function(ie){M=ie},this.getClearColor=function(ie){return ie===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),ie=new Fe),ie.copy(le.getClearColor())},this.setClearColor=function(){le.setClearColor.apply(le,arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha.apply(le,arguments)},this.clear=function(ie,Me,be){let Se=0;(ie===void 0||ie)&&(Se|=16384),(Me===void 0||Me)&&(Se|=256),(be===void 0||be)&&(Se|=1024),ae.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ee,!1),e.removeEventListener("webglcontextrestored",Be,!1),q.dispose(),X.dispose(),re.dispose(),F.dispose(),$.dispose(),ne.dispose(),ue.dispose(),Jn.stop()};function Ee(ie){ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,ve()}function ft(ie){const Me=ie.target;Me.removeEventListener("dispose",ft),dt(Me)}function dt(ie){rt(ie),re.remove(ie)}function rt(ie){const Me=re.get(ie).program;Me!==void 0&&R.releaseProgram(Me)}function st(ie,Me){ie.render(function(be){p.renderBufferImmediate(be,Me)})}this.renderBufferImmediate=function(ie,Me){ne.initAttributes();const be=re.get(ie);ie.hasPositions&&!be.position&&(be.position=ae.createBuffer()),ie.hasNormals&&!be.normal&&(be.normal=ae.createBuffer()),ie.hasUvs&&!be.uv&&(be.uv=ae.createBuffer()),ie.hasColors&&!be.color&&(be.color=ae.createBuffer());const Se=Me.getAttributes();ie.hasPositions&&(ae.bindBuffer(34962,be.position),ae.bufferData(34962,ie.positionArray,35048),ne.enableAttribute(Se.position),ae.vertexAttribPointer(Se.position,3,5126,!1,0,0)),ie.hasNormals&&(ae.bindBuffer(34962,be.normal),ae.bufferData(34962,ie.normalArray,35048),ne.enableAttribute(Se.normal),ae.vertexAttribPointer(Se.normal,3,5126,!1,0,0)),ie.hasUvs&&(ae.bindBuffer(34962,be.uv),ae.bufferData(34962,ie.uvArray,35048),ne.enableAttribute(Se.uv),ae.vertexAttribPointer(Se.uv,2,5126,!1,0,0)),ie.hasColors&&(ae.bindBuffer(34962,be.color),ae.bufferData(34962,ie.colorArray,35048),ne.enableAttribute(Se.color),ae.vertexAttribPointer(Se.color,3,5126,!1,0,0)),ne.disableUnusedAttributes(),ae.drawArrays(4,0,ie.count),ie.count=0},this.renderBufferDirect=function(ie,Me,be,Se,Pe,at){Me===null&&(Me=oe);const et=Pe.isMesh&&Pe.matrixWorld.determinant()<0,Q=ts(ie,Me,Se,Pe);V.setMaterial(Se,et);let me=be.index;const ge=be.attributes.position;if(me===null){if(ge===void 0||ge.count===0)return}else if(me.count===0)return;let ye=1;Se.wireframe===!0&&(me=K.getWireframeAttribute(be),ye=2),(Se.morphTargets||Se.morphNormals)&&he.update(Pe,be,Se,Q),ne.setup(Pe,Se,Q,be,me);let we,ke=fe;me!==null&&(we=U.get(me),ke=pe,ke.setIndex(we));const ze=me!==null?me.count:ge.count,Re=be.drawRange.start*ye,Qe=be.drawRange.count*ye,Ye=at!==null?at.start*ye:0,ot=at!==null?at.count*ye:1/0,Je=Math.max(Re,Ye),Ve=Math.min(ze,Re+Qe,Ye+ot)-1,Qn=Math.max(0,Ve-Je+1);if(Qn!==0){if(Pe.isMesh)Se.wireframe===!0?(V.setLineWidth(Se.wireframeLinewidth*de()),ke.setMode(1)):ke.setMode(4);else if(Pe.isLine){let Dt=Se.linewidth;Dt===void 0&&(Dt=1),V.setLineWidth(Dt*de()),Pe.isLineSegments?ke.setMode(1):Pe.isLineLoop?ke.setMode(2):ke.setMode(3)}else Pe.isPoints?ke.setMode(0):Pe.isSprite&&ke.setMode(4);if(Pe.isInstancedMesh)ke.renderInstances(Je,Qn,Pe.count);else if(be.isInstancedBufferGeometry){const Dt=Math.min(be.instanceCount,be._maxInstanceCount);ke.renderInstances(Je,Qn,Dt)}else ke.render(Je,Qn)}},this.compile=function(ie,Me){f=X.get(ie),f.init(),ie.traverseVisible(function(Se){Se.isLight&&Se.layers.test(Me.layers)&&(f.pushLight(Se),Se.castShadow&&f.pushShadow(Se))}),f.setupLights();const be=new WeakMap;ie.traverse(function(Se){const Pe=Se.material;if(Pe)if(Array.isArray(Pe))for(let at=0;at<Pe.length;at++){const et=Pe[at];be.has(et)===!1&&(It(et,ie,Se),be.set(et))}else be.has(Pe)===!1&&(It(Pe,ie,Se),be.set(Pe))})};let dn=null;function ui(ie){ue.isPresenting||dn&&dn(ie)}const Jn=new qT;Jn.setAnimationLoop(ui),typeof window<"u"&&Jn.setContext(window),this.setAnimationLoop=function(ie){dn=ie,ue.setAnimationLoop(ie),ie===null?Jn.stop():Jn.start()},this.render=function(ie,Me){let be,Se;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),be=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Se=arguments[3]),Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ne.resetDefaultState(),E=-1,S=null,ie.autoUpdate===!0&&ie.updateMatrixWorld(),Me.parent===null&&Me.updateMatrixWorld(),ue.enabled===!0&&ue.isPresenting===!0&&(Me=ue.getCamera(Me)),ie.isScene===!0&&ie.onBeforeRender(p,ie,Me,be||w),f=X.get(ie,d.length),f.init(),d.push(f),ee.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),W.setFromProjectionMatrix(ee),G=this.localClippingEnabled,j=H.init(this.clippingPlanes,G,Me),h=q.get(ie,Me),h.init(),Kn(ie,Me,0,p.sortObjects),h.finish(),p.sortObjects===!0&&h.sort(A,M),j===!0&&H.beginShadows();const Pe=f.state.shadowsArray;xe.render(Pe,ie,Me),f.setupLights(),f.setupLightsView(Me),j===!0&&H.endShadows(),this.info.autoReset===!0&&this.info.reset(),be!==void 0&&this.setRenderTarget(be),le.render(h,ie,Me,Se);const at=h.opaque,et=h.transparent;at.length>0&&Vi(at,ie,Me),et.length>0&&Vi(et,ie,Me),ie.isScene===!0&&ie.onAfterRender(p,ie,Me),w!==null&&(D.updateRenderTargetMipmap(w),D.updateMultisampleRenderTarget(w)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),d.pop(),d.length>0?f=d[d.length-1]:f=null,h=null};function Kn(ie,Me,be,Se){if(ie.visible===!1)return;if(ie.layers.test(Me.layers)){if(ie.isGroup)be=ie.renderOrder;else if(ie.isLOD)ie.autoUpdate===!0&&ie.update(Me);else if(ie.isLight)f.pushLight(ie),ie.castShadow&&f.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||W.intersectsSprite(ie)){Se&&se.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(ee);const et=$.update(ie),Q=ie.material;Q.visible&&h.push(ie,et,Q,be,se.z,null)}}else if(ie.isImmediateRenderObject)Se&&se.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(ee),h.push(ie,null,ie.material,be,se.z,null);else if((ie.isMesh||ie.isLine||ie.isPoints)&&(ie.isSkinnedMesh&&ie.skeleton.frame!==J.render.frame&&(ie.skeleton.update(),ie.skeleton.frame=J.render.frame),!ie.frustumCulled||W.intersectsObject(ie))){Se&&se.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(ee);const et=$.update(ie),Q=ie.material;if(Array.isArray(Q)){const me=et.groups;for(let ge=0,ye=me.length;ge<ye;ge++){const we=me[ge],ke=Q[we.materialIndex];ke&&ke.visible&&h.push(ie,et,ke,be,se.z,we)}}else Q.visible&&h.push(ie,et,Q,be,se.z,null)}}const at=ie.children;for(let et=0,Q=at.length;et<Q;et++)Kn(at[et],Me,be,Se)}function Vi(ie,Me,be){const Se=Me.isScene===!0?Me.overrideMaterial:null;for(let Pe=0,at=ie.length;Pe<at;Pe++){const et=ie[Pe],Q=et.object,me=et.geometry,ge=Se===null?et.material:Se,ye=et.group;if(be.isArrayCamera){const we=be.cameras;for(let ke=0,ze=we.length;ke<ze;ke++){const Re=we[ke];Q.layers.test(Re.layers)&&(V.viewport(P.copy(Re.viewport)),f.setupLightsView(Re),Rs(Q,Me,Re,me,ge,ye))}}else Rs(Q,Me,be,me,ge,ye)}}function Rs(ie,Me,be,Se,Pe,at){if(ie.onBeforeRender(p,Me,be,Se,Pe,at),ie.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),ie.isImmediateRenderObject){const et=ts(be,Me,Pe,ie);V.setMaterial(Pe),ne.reset(),st(ie,et)}else p.renderBufferDirect(be,Me,Se,Pe,ie,at);ie.onAfterRender(p,Me,be,Se,Pe,at)}function It(ie,Me,be){Me.isScene!==!0&&(Me=oe);const Se=re.get(ie),Pe=f.state.lights,at=f.state.shadowsArray,et=Pe.state.version,Q=R.getParameters(ie,Pe.state,at,Me,be),me=R.getProgramCacheKey(Q);let ge=Se.program,ye=!0;if(ge===void 0)ie.addEventListener("dispose",ft);else if(ge.cacheKey!==me)rt(ie);else if(Se.lightsStateVersion!==et)ye=!1;else if(Q.shaderID!==void 0){const Re=ie.isMeshStandardMaterial?Me.environment:null;Se.envMap=F.get(ie.envMap||Re);return}else ye=!1;ye&&(Q.uniforms=R.getUniforms(ie),ie.onBeforeCompile(Q,p),ge=R.acquireProgram(Q,me),Se.program=ge,Se.uniforms=Q.uniforms,Se.outputEncoding=Q.outputEncoding);const we=Se.uniforms;(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||ie.clipping===!0)&&(Se.numClippingPlanes=H.numPlanes,Se.numIntersection=H.numIntersection,we.clippingPlanes=H.uniform),Se.environment=ie.isMeshStandardMaterial?Me.environment:null,Se.fog=Me.fog,Se.envMap=F.get(ie.envMap||Se.environment),Se.needsLights=Vl(ie),Se.lightsStateVersion=et,Se.needsLights&&(we.ambientLightColor.value=Pe.state.ambient,we.lightProbe.value=Pe.state.probe,we.directionalLights.value=Pe.state.directional,we.directionalLightShadows.value=Pe.state.directionalShadow,we.spotLights.value=Pe.state.spot,we.spotLightShadows.value=Pe.state.spotShadow,we.rectAreaLights.value=Pe.state.rectArea,we.ltc_1.value=Pe.state.rectAreaLTC1,we.ltc_2.value=Pe.state.rectAreaLTC2,we.pointLights.value=Pe.state.point,we.pointLightShadows.value=Pe.state.pointShadow,we.hemisphereLights.value=Pe.state.hemi,we.directionalShadowMap.value=Pe.state.directionalShadowMap,we.directionalShadowMatrix.value=Pe.state.directionalShadowMatrix,we.spotShadowMap.value=Pe.state.spotShadowMap,we.spotShadowMatrix.value=Pe.state.spotShadowMatrix,we.pointShadowMap.value=Pe.state.pointShadowMap,we.pointShadowMatrix.value=Pe.state.pointShadowMatrix);const ke=Se.program.getUniforms(),ze=po.seqWithValue(ke.seq,we);Se.uniformsList=ze}function ts(ie,Me,be,Se){Me.isScene!==!0&&(Me=oe),D.resetTextureUnits();const Pe=Me.fog,at=be.isMeshStandardMaterial?Me.environment:null,et=w===null?p.outputEncoding:w.texture.encoding,Q=F.get(be.envMap||at),me=re.get(be),ge=f.state.lights;if(j===!0&&(G===!0||ie!==S)){const Ye=ie===S&&be.id===E;H.setState(be,ie,Ye)}be.version===me.__version?(be.fog&&me.fog!==Pe||me.environment!==at||me.needsLights&&me.lightsStateVersion!==ge.state.version||me.numClippingPlanes!==void 0&&(me.numClippingPlanes!==H.numPlanes||me.numIntersection!==H.numIntersection)||me.outputEncoding!==et||me.envMap!==Q)&&It(be,Me,Se):(It(be,Me,Se),me.__version=be.version);let ye=!1,we=!1,ke=!1;const ze=me.program,Re=ze.getUniforms(),Qe=me.uniforms;if(V.useProgram(ze.program)&&(ye=!0,we=!0,ke=!0),be.id!==E&&(E=be.id,we=!0),ye||S!==ie){if(Re.setValue(ae,"projectionMatrix",ie.projectionMatrix),Z.logarithmicDepthBuffer&&Re.setValue(ae,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),S!==ie&&(S=ie,we=!0,ke=!0),be.isShaderMaterial||be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshStandardMaterial||be.envMap){const Ye=Re.map.cameraPosition;Ye!==void 0&&Ye.setValue(ae,se.setFromMatrixPosition(ie.matrixWorld))}(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&Re.setValue(ae,"isOrthographic",ie.isOrthographicCamera===!0),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial||be.isShadowMaterial||be.skinning)&&Re.setValue(ae,"viewMatrix",ie.matrixWorldInverse)}if(be.skinning){Re.setOptional(ae,Se,"bindMatrix"),Re.setOptional(ae,Se,"bindMatrixInverse");const Ye=Se.skeleton;if(Ye){const ot=Ye.bones;if(Z.floatVertexTextures){if(Ye.boneTexture===null){let Je=Math.sqrt(ot.length*4);Je=Ue.ceilPowerOfTwo(Je),Je=Math.max(Je,4);const Ve=new Float32Array(Je*Je*4);Ve.set(Ye.boneMatrices);const Qn=new rl(Ve,Je,Je,or,so);Ye.boneMatrices=Ve,Ye.boneTexture=Qn,Ye.boneTextureSize=Je}Re.setValue(ae,"boneTexture",Ye.boneTexture,D),Re.setValue(ae,"boneTextureSize",Ye.boneTextureSize)}else Re.setOptional(ae,Ye,"boneMatrices")}}return(we||me.receiveShadow!==Se.receiveShadow)&&(me.receiveShadow=Se.receiveShadow,Re.setValue(ae,"receiveShadow",Se.receiveShadow)),we&&(Re.setValue(ae,"toneMappingExposure",p.toneMappingExposure),me.needsLights&&Ps(Qe,ke),Pe&&be.fog&&C.refreshFogUniforms(Qe,Pe),C.refreshMaterialUniforms(Qe,be,T,x),po.upload(ae,me.uniformsList,Qe,D)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&(po.upload(ae,me.uniformsList,Qe,D),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&Re.setValue(ae,"center",Se.center),Re.setValue(ae,"modelViewMatrix",Se.modelViewMatrix),Re.setValue(ae,"normalMatrix",Se.normalMatrix),Re.setValue(ae,"modelMatrix",Se.matrixWorld),ze}function Ps(ie,Me){ie.ambientLightColor.needsUpdate=Me,ie.lightProbe.needsUpdate=Me,ie.directionalLights.needsUpdate=Me,ie.directionalLightShadows.needsUpdate=Me,ie.pointLights.needsUpdate=Me,ie.pointLightShadows.needsUpdate=Me,ie.spotLights.needsUpdate=Me,ie.spotLightShadows.needsUpdate=Me,ie.rectAreaLights.needsUpdate=Me,ie.hemisphereLights.needsUpdate=Me}function Vl(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&ie.lights===!0}this.setFramebuffer=function(ie){y!==ie&&w===null&&ae.bindFramebuffer(36160,ie),y=ie},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return m},this.getRenderList=function(){return h},this.setRenderList=function(ie){h=ie},this.getRenderTarget=function(){return w},this.setRenderTarget=function(ie,Me=0,be=0){w=ie,g=Me,m=be,ie&&re.get(ie).__webglFramebuffer===void 0&&D.setupRenderTarget(ie);let Se=y,Pe=!1;if(ie){const at=re.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(Se=at[Me],Pe=!0):ie.isWebGLMultisampleRenderTarget?Se=re.get(ie).__webglMultisampledFramebuffer:Se=at,P.copy(ie.viewport),N.copy(ie.scissor),z=ie.scissorTest}else P.copy(L).multiplyScalar(T).floor(),N.copy(I).multiplyScalar(T).floor(),z=k;if(b!==Se&&(ae.bindFramebuffer(36160,Se),b=Se),V.viewport(P),V.scissor(N),V.setScissorTest(z),Pe){const at=re.get(ie.texture);ae.framebufferTexture2D(36160,36064,34069+Me,at.__webglTexture,be)}},this.readRenderTargetPixels=function(ie,Me,be,Se,Pe,at,et){if(!(ie&&ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Q=re.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&et!==void 0&&(Q=Q[et]),Q){let me=!1;Q!==b&&(ae.bindFramebuffer(36160,Q),me=!0);try{const ge=ie.texture,ye=ge.format,we=ge.type;if(ye!==or&&Y.convert(ye)!==ae.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(we!==d_&&Y.convert(we)!==ae.getParameter(35738)&&!(we===so&&(Z.isWebGL2||B.get("OES_texture_float")||B.get("WEBGL_color_buffer_float")))&&!(we===up&&(Z.isWebGL2?B.get("EXT_color_buffer_float"):B.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae.checkFramebufferStatus(36160)===36053?Me>=0&&Me<=ie.width-Se&&be>=0&&be<=ie.height-Pe&&ae.readPixels(Me,be,Se,Pe,Y.convert(ye),Y.convert(we),at):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{me&&ae.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(ie,Me,be=0){const Se=Math.pow(2,-be),Pe=Math.floor(Me.image.width*Se),at=Math.floor(Me.image.height*Se),et=Y.convert(Me.format);D.setTexture2D(Me,0),ae.copyTexImage2D(3553,be,et,ie.x,ie.y,Pe,at,0),V.unbindTexture()},this.copyTextureToTexture=function(ie,Me,be,Se=0){const Pe=Me.image.width,at=Me.image.height,et=Y.convert(be.format),Q=Y.convert(be.type);D.setTexture2D(be,0),ae.pixelStorei(37440,be.flipY),ae.pixelStorei(37441,be.premultiplyAlpha),ae.pixelStorei(3317,be.unpackAlignment),Me.isDataTexture?ae.texSubImage2D(3553,Se,ie.x,ie.y,Pe,at,et,Q,Me.image.data):Me.isCompressedTexture?ae.compressedTexSubImage2D(3553,Se,ie.x,ie.y,Me.mipmaps[0].width,Me.mipmaps[0].height,et,Me.mipmaps[0].data):ae.texSubImage2D(3553,Se,ie.x,ie.y,et,Q,Me.image),Se===0&&be.generateMipmaps&&ae.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(ie){D.setTexture2D(ie,0),V.unbindTexture()},this.resetState=function(){V.reset(),ne.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Tw(n){jt.call(this,n)}Tw.prototype=Object.assign(Object.create(jt.prototype),{constructor:Tw,isWebGL1Renderer:!0});let cn=class extends Ne{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};function Mi(n,e){this.array=n,this.stride=e,this.count=n!==void 0?n.length/e:0,this.usage=rm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ue.generateUUID()}Object.defineProperty(Mi.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(Mi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.stride,t*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[n+i]=e.array[t+i];return this},set:function(n,e=0){return this.array.set(n,e),this},clone:function(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ue.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),t=new Mi(e,this.stride);return t.setUsage(this.usage),t},onUpload:function(n){return this.onUploadCallback=n,this},toJSON:function(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ue.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const qo=new te;function Eo(n,e,t,i){this.name="",this.data=n,this.itemSize=e,this.offset=t,this.normalized=i===!0}Object.defineProperties(Eo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(n){this.data.needsUpdate=n}}});Object.assign(Eo.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(n){for(let e=0,t=this.data.count;e<t;e++)qo.x=this.getX(e),qo.y=this.getY(e),qo.z=this.getZ(e),qo.applyMatrix4(n),this.setXYZ(e,qo.x,qo.y,qo.z);return this},setX:function(n,e){return this.data.array[n*this.data.stride+this.offset]=e,this},setY:function(n,e){return this.data.array[n*this.data.stride+this.offset+1]=e,this},setZ:function(n,e){return this.data.array[n*this.data.stride+this.offset+2]=e,this},setW:function(n,e){return this.data.array[n*this.data.stride+this.offset+3]=e,this},getX:function(n){return this.data.array[n*this.data.stride+this.offset]},getY:function(n){return this.data.array[n*this.data.stride+this.offset+1]},getZ:function(n){return this.data.array[n*this.data.stride+this.offset+2]},getW:function(n){return this.data.array[n*this.data.stride+this.offset+3]},setXY:function(n,e,t){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this.data.array[n+3]=r,this},clone:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Xe(new this.array.constructor(e),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new Eo(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Vr(n){je.call(this),this.type="SpriteMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(n)}Vr.prototype=Object.create(je.prototype);Vr.prototype.constructor=Vr;Vr.prototype.isSpriteMaterial=!0;Vr.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this};let ja;const Jl=new te,Xa=new te,Ya=new te,Za=new Te,Kl=new Te,nA=new Oe,Of=new te,Ql=new te,kf=new te,Aw=new Te,vg=new Te,Cw=new Te;function _h(n){if(Ne.call(this),this.type="Sprite",ja===void 0){ja=new Ke;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Mi(e,5);ja.setIndex([0,1,2,0,2,3]),ja.setAttribute("position",new Eo(t,3,0,!1)),ja.setAttribute("uv",new Eo(t,2,3,!1))}this.geometry=ja,this.material=n!==void 0?n:new Vr,this.center=new Te(.5,.5)}_h.prototype=Object.assign(Object.create(Ne.prototype),{constructor:_h,isSprite:!0,raycast:function(n,e){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xa.setFromMatrixScale(this.matrixWorld),nA.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),Ya.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Xa.multiplyScalar(-Ya.z);const t=this.material.rotation;let i,r;t!==0&&(r=Math.cos(t),i=Math.sin(t));const s=this.center;Nf(Of.set(-.5,-.5,0),Ya,s,Xa,i,r),Nf(Ql.set(.5,-.5,0),Ya,s,Xa,i,r),Nf(kf.set(.5,.5,0),Ya,s,Xa,i,r),Aw.set(0,0),vg.set(1,0),Cw.set(1,1);let o=n.ray.intersectTriangle(Of,Ql,kf,!1,Jl);if(o===null&&(Nf(Ql.set(-.5,.5,0),Ya,s,Xa,i,r),vg.set(0,1),o=n.ray.intersectTriangle(Of,kf,Ql,!1,Jl),o===null))return;const a=n.ray.origin.distanceTo(Jl);a<n.near||a>n.far||e.push({distance:a,point:Jl.clone(),uv:Br.getUV(Jl,Of,Ql,kf,Aw,vg,Cw,new Te),face:null,object:this})},copy:function(n){return Ne.prototype.copy.call(this,n),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}});function Nf(n,e,t,i,r,s){Za.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Kl.x=s*Za.x-r*Za.y,Kl.y=r*Za.x+s*Za.y):Kl.copy(Za),n.copy(e),n.x+=Kl.x,n.y+=Kl.y,n.applyMatrix4(nA)}const Bf=new te,Lw=new te;function p0(){Ne.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}p0.prototype=Object.assign(Object.create(Ne.prototype),{constructor:p0,isLOD:!0,copy:function(n){Ne.prototype.copy.call(this,n,!1);const e=n.levels;for(let t=0,i=e.length;t<i;t++){const r=e[t];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=n.autoUpdate,this},addLevel:function(n,e=0){e=Math.abs(e);const t=this.levels;let i;for(i=0;i<t.length&&!(e<t[i].distance);i++);return t.splice(i,0,{distance:e,object:n}),this.add(n),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(n){const e=this.levels;if(e.length>0){let t,i;for(t=1,i=e.length;t<i&&!(n<e[t].distance);t++);return e[t-1].object}return null},raycast:function(n,e){if(this.levels.length>0){Bf.setFromMatrixPosition(this.matrixWorld);const i=n.ray.origin.distanceTo(Bf);this.getObjectForDistance(i).raycast(n,e)}},update:function(n){const e=this.levels;if(e.length>1){Bf.setFromMatrixPosition(n.matrixWorld),Lw.setFromMatrixPosition(this.matrixWorld);const t=Bf.distanceTo(Lw)/n.zoom;e[0].object.visible=!0;let i,r;for(i=1,r=e.length;i<r&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(n){const e=Ne.prototype.toJSON.call(this,n);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const t=this.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}});const Rw=new te,Pw=new vt,Iw=new vt,_4=new te,Dw=new Oe;function xh(n,e){n&&n.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),qe.call(this,n,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Oe,this.bindMatrixInverse=new Oe}xh.prototype=Object.assign(Object.create(qe.prototype),{constructor:xh,isSkinnedMesh:!0,copy:function(n){return qe.prototype.copy.call(this,n),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this},bind:function(n,e){this.skeleton=n,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const n=new vt,e=this.geometry.attributes.skinWeight;for(let t=0,i=e.count;t<i;t++){n.x=e.getX(t),n.y=e.getY(t),n.z=e.getZ(t),n.w=e.getW(t);const r=1/n.manhattanLength();r!==1/0?n.multiplyScalar(r):n.set(1,0,0,0),e.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(n){qe.prototype.updateMatrixWorld.call(this,n),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(n,e){const t=this.skeleton,i=this.geometry;Pw.fromBufferAttribute(i.attributes.skinIndex,n),Iw.fromBufferAttribute(i.attributes.skinWeight,n),Rw.fromBufferAttribute(i.attributes.position,n).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const s=Iw.getComponent(r);if(s!==0){const o=Pw.getComponent(r);Dw.multiplyMatrices(t.bones[o].matrixWorld,t.boneInverses[o]),e.addScaledVector(_4.copy(Rw).applyMatrix4(Dw),s)}}return e.applyMatrix4(this.bindMatrixInverse)}});function sl(){Ne.call(this),this.type="Bone"}sl.prototype=Object.assign(Object.create(Ne.prototype),{constructor:sl,isBone:!0});const Fw=new Oe,x4=new Oe;function bh(n=[],e=[]){this.uuid=Ue.generateUUID(),this.bones=n.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(bh.prototype,{init:function(){const n=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),e.length===0)this.calculateInverses();else if(n.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,i=this.bones.length;t<i;t++)this.boneInverses.push(new Oe)}},calculateInverses:function(){this.boneInverses.length=0;for(let n=0,e=this.bones.length;n<e;n++){const t=new Oe;this.bones[n]&&t.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let n=0,e=this.bones.length;n<e;n++){const t=this.bones[n];t&&t.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,e=this.bones.length;n<e;n++){const t=this.bones[n];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const n=this.bones,e=this.boneInverses,t=this.boneMatrices,i=this.boneTexture;for(let r=0,s=n.length;r<s;r++){const o=n[r]?n[r].matrixWorld:x4;Fw.multiplyMatrices(o,e[r]),Fw.toArray(t,r*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new bh(this.bones,this.boneInverses)},getBoneByName:function(n){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];if(i.name===n)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(n,e){this.uuid=n.uuid;for(let t=0,i=n.bones.length;t<i;t++){const r=n.bones[t];let s=e[r];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new sl),this.bones.push(s),this.boneInverses.push(new Oe().fromArray(n.boneInverses[t]))}return this.init(),this},toJSON:function(){const n={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const e=this.bones,t=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const s=e[i];n.bones.push(s.uuid);const o=t[i];n.boneInverses.push(o.toArray())}return n}});const Ow=new Oe,kw=new Oe,zf=[],eu=new qe;function Nw(n,e,t){qe.call(this,n,e),this.instanceMatrix=new Xe(new Float32Array(t*16),16),this.instanceColor=null,this.count=t,this.frustumCulled=!1}Nw.prototype=Object.assign(Object.create(qe.prototype),{constructor:Nw,isInstancedMesh:!0,copy:function(n){return qe.prototype.copy.call(this,n),this.instanceMatrix.copy(n.instanceMatrix),this.count=n.count,this},getColorAt:function(n,e){e.fromArray(this.instanceColor.array,n*3)},getMatrixAt:function(n,e){e.fromArray(this.instanceMatrix.array,n*16)},raycast:function(n,e){const t=this.matrixWorld,i=this.count;if(eu.geometry=this.geometry,eu.material=this.material,eu.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,Ow),kw.multiplyMatrices(t,Ow),eu.matrixWorld=kw,eu.raycast(n,zf);for(let s=0,o=zf.length;s<o;s++){const a=zf[s];a.instanceId=r,a.object=this,e.push(a)}zf.length=0}},setColorAt:function(n,e){this.instanceColor===null&&(this.instanceColor=new Xe(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,n*3)},setMatrixAt:function(n,e){e.toArray(this.instanceMatrix.array,n*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Zt(n){je.call(this),this.type="LineBasicMaterial",this.color=new Fe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(n)}Zt.prototype=Object.create(je.prototype);Zt.prototype.constructor=Zt;Zt.prototype.isLineBasicMaterial=!0;Zt.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.morphTargets=n.morphTargets,this};const Bw=new te,zw=new te,Uw=new Oe,Uf=new Ra,Hf=new Ls;function Ti(n=new Ke,e=new Zt){Ne.call(this),this.type="Line",this.geometry=n,this.material=e,this.updateMorphTargets()}Ti.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Ti,isLine:!0,copy:function(n){return Ne.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[0];for(let i=1,r=e.count;i<r;i++)Bw.fromBufferAttribute(e,i-1),zw.fromBufferAttribute(e,i),t[i]=t[i-1],t[i]+=Bw.distanceTo(zw);n.setAttribute("lineDistance",new We(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){const e=n.vertices,t=n.lineDistances;t[0]=0;for(let i=1,r=e.length;i<r;i++)t[i]=t[i-1],t[i]+=e[i-1].distanceTo(e[i])}return this},raycast:function(n,e){const t=this.geometry,i=this.matrixWorld,r=n.params.Line.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),Hf.copy(t.boundingSphere),Hf.applyMatrix4(i),Hf.radius+=r,n.ray.intersectsSphere(Hf)===!1)return;Uw.copy(i).invert(),Uf.copy(n.ray).applyMatrix4(Uw);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new te,c=new te,l=new te,u=new te,h=this.isLineSegments?2:1;if(t.isBufferGeometry){const f=t.index,p=t.attributes.position;if(f!==null){const v=f.array;for(let y=0,g=v.length-1;y<g;y+=h){const m=v[y],w=v[y+1];if(a.fromBufferAttribute(p,m),c.fromBufferAttribute(p,w),Uf.distanceSqToSegment(a,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const E=n.ray.origin.distanceTo(u);E<n.near||E>n.far||e.push({distance:E,point:l.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(let v=0,y=p.count-1;v<y;v+=h){if(a.fromBufferAttribute(p,v),c.fromBufferAttribute(p,v+1),Uf.distanceSqToSegment(a,c,u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const m=n.ray.origin.distanceTo(u);m<n.near||m>n.far||e.push({distance:m,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(t.isGeometry){const f=t.vertices,d=f.length;for(let p=0;p<d-1;p+=h){if(Uf.distanceSqToSegment(f[p],f[p+1],u,l)>o)continue;u.applyMatrix4(this.matrixWorld);const y=n.ray.origin.distanceTo(u);y<n.near||y>n.far||e.push({distance:y,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Gf=new te,Vf=new te;function ya(n,e){Ti.call(this,n,e),this.type="LineSegments"}ya.prototype=Object.assign(Object.create(Ti.prototype),{constructor:ya,isLineSegments:!0,computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[];for(let i=0,r=e.count;i<r;i+=2)Gf.fromBufferAttribute(e,i),Vf.fromBufferAttribute(e,i+1),t[i]=i===0?0:t[i-1],t[i+1]=t[i]+Gf.distanceTo(Vf);n.setAttribute("lineDistance",new We(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){const e=n.vertices,t=n.lineDistances;for(let i=0,r=e.length;i<r;i+=2)Gf.copy(e[i]),Vf.copy(e[i+1]),t[i]=i===0?0:t[i-1],t[i+1]=t[i]+Gf.distanceTo(Vf)}return this}});function dp(n,e){Ti.call(this,n,e),this.type="LineLoop"}dp.prototype=Object.assign(Object.create(Ti.prototype),{constructor:dp,isLineLoop:!0});function cr(n){je.call(this),this.type="PointsMaterial",this.color=new Fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(n)}cr.prototype=Object.create(je.prototype);cr.prototype.constructor=cr;cr.prototype.isPointsMaterial=!0;cr.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.morphTargets=n.morphTargets,this};const Hw=new Oe,m0=new Ra,Wf=new Ls,$f=new te;function _a(n=new Ke,e=new cr){Ne.call(this),this.type="Points",this.geometry=n,this.material=e,this.updateMorphTargets()}_a.prototype=Object.assign(Object.create(Ne.prototype),{constructor:_a,isPoints:!0,copy:function(n){return Ne.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},raycast:function(n,e){const t=this.geometry,i=this.matrixWorld,r=n.params.Points.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),Wf.copy(t.boundingSphere),Wf.applyMatrix4(i),Wf.radius+=r,n.ray.intersectsSphere(Wf)===!1)return;Hw.copy(i).invert(),m0.copy(n.ray).applyMatrix4(Hw);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(t.isBufferGeometry){const a=t.index,l=t.attributes.position;if(a!==null){const u=a.array;for(let h=0,f=u.length;h<f;h++){const d=u[h];$f.fromBufferAttribute(l,d),yg($f,d,o,i,n,e,this)}}else for(let u=0,h=l.count;u<h;u++)$f.fromBufferAttribute(l,u),yg($f,u,o,i,n,e,this)}else{const a=t.vertices;for(let c=0,l=a.length;c<l;c++)yg(a[c],c,o,i,n,e,this)}},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function yg(n,e,t,i,r,s,o){const a=m0.distanceSqToPoint(n);if(a<t){const c=new te;m0.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}function Gw(n,e,t,i,r,s,o,a,c){Ct.call(this,n,e,t,i,r,s,o,a,c),this.format=o!==void 0?o:fo,this.minFilter=s!==void 0?s:bn,this.magFilter=r!==void 0?r:bn,this.generateMipmaps=!1;const l=this;function u(){l.needsUpdate=!0,n.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(u)}Gw.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Gw,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function wh(n,e,t,i,r,s,o,a,c,l,u,h){Ct.call(this,null,s,o,a,c,l,i,r,u,h),this.image={width:e,height:t},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}wh.prototype=Object.create(Ct.prototype);wh.prototype.constructor=wh;wh.prototype.isCompressedTexture=!0;function Mh(n,e,t,i,r,s,o,a,c){Ct.call(this,n,e,t,i,r,s,o,a,c),this.needsUpdate=!0}Mh.prototype=Object.create(Ct.prototype);Mh.prototype.constructor=Mh;Mh.prototype.isCanvasTexture=!0;function pp(n,e,t,i,r,s,o,a,c,l){if(l=l!==void 0?l:Wc,l!==Wc&&l!==dh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&l===Wc&&(t=lp),t===void 0&&l===dh&&(t=zu),Ct.call(this,null,i,r,s,o,a,l,t,c),this.image={width:n,height:e},this.magFilter=o!==void 0?o:kn,this.minFilter=a!==void 0?a:kn,this.flipY=!1,this.generateMipmaps=!1}pp.prototype=Object.create(Ct.prototype);pp.prototype.constructor=pp;pp.prototype.isDepthTexture=!0;let b4=0;const xr=new Oe,_g=new Ne,qf=new te;function An(){Object.defineProperty(this,"id",{value:b4+=2}),this.uuid=Ue.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}An.prototype=Object.assign(Object.create(fr.prototype),{constructor:An,isGeometry:!0,applyMatrix4:function(n){const e=new Wn().getNormalMatrix(n);for(let t=0,i=this.vertices.length;t<i;t++)this.vertices[t].applyMatrix4(n);for(let t=0,i=this.faces.length;t<i;t++){const r=this.faces[t];r.normal.applyMatrix3(e).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(n){return xr.makeRotationX(n),this.applyMatrix4(xr),this},rotateY:function(n){return xr.makeRotationY(n),this.applyMatrix4(xr),this},rotateZ:function(n){return xr.makeRotationZ(n),this.applyMatrix4(xr),this},translate:function(n,e,t){return xr.makeTranslation(n,e,t),this.applyMatrix4(xr),this},scale:function(n,e,t){return xr.makeScale(n,e,t),this.applyMatrix4(xr),this},lookAt:function(n){return _g.lookAt(n),_g.updateMatrix(),this.applyMatrix4(_g.matrix),this},fromBufferGeometry:function(n){const e=this,t=n.index!==null?n.index:void 0,i=n.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,s=i.normal,o=i.color,a=i.uv,c=i.uv2;c!==void 0&&(this.faceVertexUvs[1]=[]);for(let h=0;h<r.count;h++)e.vertices.push(new te().fromBufferAttribute(r,h)),o!==void 0&&e.colors.push(new Fe().fromBufferAttribute(o,h));function l(h,f,d,p){const v=o===void 0?[]:[e.colors[h].clone(),e.colors[f].clone(),e.colors[d].clone()],y=s===void 0?[]:[new te().fromBufferAttribute(s,h),new te().fromBufferAttribute(s,f),new te().fromBufferAttribute(s,d)],g=new s0(h,f,d,y,v,p);e.faces.push(g),a!==void 0&&e.faceVertexUvs[0].push([new Te().fromBufferAttribute(a,h),new Te().fromBufferAttribute(a,f),new Te().fromBufferAttribute(a,d)]),c!==void 0&&e.faceVertexUvs[1].push([new Te().fromBufferAttribute(c,h),new Te().fromBufferAttribute(c,f),new Te().fromBufferAttribute(c,d)])}const u=n.groups;if(u.length>0)for(let h=0;h<u.length;h++){const f=u[h],d=f.start,p=f.count;for(let v=d,y=d+p;v<y;v+=3)t!==void 0?l(t.getX(v),t.getX(v+1),t.getX(v+2),f.materialIndex):l(v,v+1,v+2,f.materialIndex)}else if(t!==void 0)for(let h=0;h<t.count;h+=3)l(t.getX(h),t.getX(h+1),t.getX(h+2));else for(let h=0;h<r.count;h+=3)l(h,h+1,h+2);return this.computeFaceNormals(),n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(qf).negate(),this.translate(qf.x,qf.y,qf.z),this},normalize:function(){this.computeBoundingSphere();const n=this.boundingSphere.center,e=this.boundingSphere.radius,t=e===0?1:1/e,i=new Oe;return i.set(t,0,0,-t*n.x,0,t,0,-t*n.y,0,0,t,-t*n.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const n=new te,e=new te;for(let t=0,i=this.faces.length;t<i;t++){const r=this.faces[t],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];n.subVectors(a,o),e.subVectors(s,o),n.cross(e),n.normalize(),r.normal.copy(n)}},computeVertexNormals:function(n=!0){const e=new Array(this.vertices.length);for(let t=0,i=this.vertices.length;t<i;t++)e[t]=new te;if(n){const t=new te,i=new te;for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c];t.subVectors(l,c),i.subVectors(a,c),t.cross(i),e[o.a].add(t),e[o.b].add(t),e[o.c].add(t)}}else{this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){const r=this.faces[t];e[r.a].add(r.normal),e[r.b].add(r.normal),e[r.c].add(r.normal)}}for(let t=0,i=this.vertices.length;t<i;t++)e[t].normalize();for(let t=0,i=this.faces.length;t<i;t++){const r=this.faces[t],s=r.vertexNormals;s.length===3?(s[0].copy(e[r.a]),s[1].copy(e[r.b]),s[2].copy(e[r.c])):(s[0]=e[r.a].clone(),s[1]=e[r.b].clone(),s[2]=e[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let n=0,e=this.faces.length;n<e;n++){const t=this.faces[n],i=t.vertexNormals;i.length===3?(i[0].copy(t.normal),i[1].copy(t.normal),i[2].copy(t.normal)):(i[0]=t.normal.clone(),i[1]=t.normal.clone(),i[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,t=this.faces.length;e<t;e++){const i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}const n=new An;n.faces=this.faces;for(let e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const r=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){const c=new te,l={a:new te,b:new te,c:new te};r.push(c),s.push(l)}}const i=this.morphNormals[e];n.vertices=this.morphTargets[e].vertices,n.computeFaceNormals(),n.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=i.faceNormals[r],c=i.vertexNormals[r];a.copy(o.normal),c.a.copy(o.vertexNormals[0]),c.b.copy(o.vertexNormals[1]),c.c.copy(o.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){const i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Cs),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingSphere.setFromPoints(this.vertices)},merge:function(n,e,t=0){if(!(n&&n.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",n);return}let i;const r=this.vertices.length,s=this.vertices,o=n.vertices,a=this.faces,c=n.faces,l=this.colors,u=n.colors;e!==void 0&&(i=new Wn().getNormalMatrix(e));for(let h=0,f=o.length;h<f;h++){const p=o[h].clone();e!==void 0&&p.applyMatrix4(e),s.push(p)}for(let h=0,f=u.length;h<f;h++)l.push(u[h].clone());for(let h=0,f=c.length;h<f;h++){const d=c[h];let p,v;const y=d.vertexNormals,g=d.vertexColors,m=new s0(d.a+r,d.b+r,d.c+r);m.normal.copy(d.normal),i!==void 0&&m.normal.applyMatrix3(i).normalize();for(let w=0,b=y.length;w<b;w++)p=y[w].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),m.vertexNormals.push(p);m.color.copy(d.color);for(let w=0,b=g.length;w<b;w++)v=g[w],m.vertexColors.push(v.clone());m.materialIndex=d.materialIndex+t,a.push(m)}for(let h=0,f=n.faceVertexUvs.length;h<f;h++){const d=n.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let p=0,v=d.length;p<v;p++){const y=d[p],g=[];for(let m=0,w=y.length;m<w;m++)g.push(y[m].clone());this.faceVertexUvs[h].push(g)}}},mergeMesh:function(n){if(!(n&&n.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",n);return}n.matrixAutoUpdate&&n.updateMatrix(),this.merge(n.geometry,n.matrix)},mergeVertices:function(n=4){const e={},t=[],i=[],r=Math.pow(10,n);for(let a=0,c=this.vertices.length;a<c;a++){const l=this.vertices[a],u=Math.round(l.x*r)+"_"+Math.round(l.y*r)+"_"+Math.round(l.z*r);e[u]===void 0?(e[u]=a,t.push(this.vertices[a]),i[a]=t.length-1):i[a]=i[e[u]]}const s=[];for(let a=0,c=this.faces.length;a<c;a++){const l=this.faces[a];l.a=i[l.a],l.b=i[l.b],l.c=i[l.c];const u=[l.a,l.b,l.c];for(let h=0;h<3;h++)if(u[h]===u[(h+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){const c=s[a];this.faces.splice(c,1);for(let l=0,u=this.faceVertexUvs.length;l<u;l++)this.faceVertexUvs[l].splice(c,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(n){this.vertices=[];for(let e=0,t=n.length;e<t;e++){const i=n[e];this.vertices.push(new te(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const n=this.faces,e=n.length;for(let a=0;a<e;a++)n[a]._id=a;function t(a,c){return a.materialIndex-c.materialIndex}n.sort(t);const i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let s,o;i&&i.length===e&&(s=[]),r&&r.length===e&&(o=[]);for(let a=0;a<e;a++){const c=n[a]._id;s&&s.push(i[c]),o&&o.push(r[c])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const n={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(n[p]=d[p]);return n}const e=[];for(let d=0;d<this.vertices.length;d++){const p=this.vertices[d];e.push(p.x,p.y,p.z)}const t=[],i=[],r={},s=[],o={},a=[],c={};for(let d=0;d<this.faces.length;d++){const p=this.faces[d],v=!0,y=!1,g=this.faceVertexUvs[0][d]!==void 0,m=p.normal.length()>0,w=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,E=p.vertexColors.length>0;let S=0;if(S=l(S,0,0),S=l(S,1,v),S=l(S,2,y),S=l(S,3,g),S=l(S,4,m),S=l(S,5,w),S=l(S,6,b),S=l(S,7,E),t.push(S),t.push(p.a,p.b,p.c),t.push(p.materialIndex),g){const P=this.faceVertexUvs[0][d];t.push(f(P[0]),f(P[1]),f(P[2]))}if(m&&t.push(u(p.normal)),w){const P=p.vertexNormals;t.push(u(P[0]),u(P[1]),u(P[2]))}if(b&&t.push(h(p.color)),E){const P=p.vertexColors;t.push(h(P[0]),h(P[1]),h(P[2]))}}function l(d,p,v){return v?d|1<<p:d&~(1<<p)}function u(d){const p=d.x.toString()+d.y.toString()+d.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(d.x,d.y,d.z)),r[p]}function h(d){const p=d.r.toString()+d.g.toString()+d.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(d.getHex())),o[p]}function f(d){const p=d.x.toString()+d.y.toString();return c[p]!==void 0||(c[p]=a.length/2,a.push(d.x,d.y)),c[p]}return n.data={},n.data.vertices=e,n.data.normals=i,s.length>0&&(n.data.colors=s),a.length>0&&(n.data.uvs=[a]),n.data.faces=t,n},clone:function(){return new An().copy(this)},copy:function(n){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=n.name;const e=n.vertices;for(let h=0,f=e.length;h<f;h++)this.vertices.push(e[h].clone());const t=n.colors;for(let h=0,f=t.length;h<f;h++)this.colors.push(t[h].clone());const i=n.faces;for(let h=0,f=i.length;h<f;h++)this.faces.push(i[h].clone());for(let h=0,f=n.faceVertexUvs.length;h<f;h++){const d=n.faceVertexUvs[h];this.faceVertexUvs[h]===void 0&&(this.faceVertexUvs[h]=[]);for(let p=0,v=d.length;p<v;p++){const y=d[p],g=[];for(let m=0,w=y.length;m<w;m++){const b=y[m];g.push(b.clone())}this.faceVertexUvs[h].push(g)}}const r=n.morphTargets;for(let h=0,f=r.length;h<f;h++){const d={};if(d.name=r[h].name,r[h].vertices!==void 0){d.vertices=[];for(let p=0,v=r[h].vertices.length;p<v;p++)d.vertices.push(r[h].vertices[p].clone())}if(r[h].normals!==void 0){d.normals=[];for(let p=0,v=r[h].normals.length;p<v;p++)d.normals.push(r[h].normals[p].clone())}this.morphTargets.push(d)}const s=n.morphNormals;for(let h=0,f=s.length;h<f;h++){const d={};if(s[h].vertexNormals!==void 0){d.vertexNormals=[];for(let p=0,v=s[h].vertexNormals.length;p<v;p++){const y=s[h].vertexNormals[p],g={};g.a=y.a.clone(),g.b=y.b.clone(),g.c=y.c.clone(),d.vertexNormals.push(g)}}if(s[h].faceNormals!==void 0){d.faceNormals=[];for(let p=0,v=s[h].faceNormals.length;p<v;p++)d.faceNormals.push(s[h].faceNormals[p].clone())}this.morphNormals.push(d)}const o=n.skinWeights;for(let h=0,f=o.length;h<f;h++)this.skinWeights.push(o[h].clone());const a=n.skinIndices;for(let h=0,f=a.length;h<f;h++)this.skinIndices.push(a[h].clone());const c=n.lineDistances;for(let h=0,f=c.length;h<f;h++)this.lineDistances.push(c[h]);const l=n.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=n.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=n.elementsNeedUpdate,this.verticesNeedUpdate=n.verticesNeedUpdate,this.uvsNeedUpdate=n.uvsNeedUpdate,this.normalsNeedUpdate=n.normalsNeedUpdate,this.colorsNeedUpdate=n.colorsNeedUpdate,this.lineDistancesNeedUpdate=n.lineDistancesNeedUpdate,this.groupsNeedUpdate=n.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});let g_=class extends An{constructor(e,t,i,r,s,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o},this.fromBufferGeometry(new m_(e,t,i,r,s,o)),this.mergeVertices()}};class w4 extends Ke{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],c=[],l=new te,u=new Te;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=i+h/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),o.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(o[f]/e+1)/2,u.y=(o[f+1]/e+1)/2,c.push(u.x,u.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new We(o,3)),this.setAttribute("normal",new We(a,3)),this.setAttribute("uv",new We(c,2))}}class M4 extends An{constructor(e,t,i,r){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new w4(e,t,i,r)),this.mergeVertices()}}class S4 extends Ke{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const l=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],d=[];let p=0;const v=[],y=i/2;let g=0;m(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new We(h,3)),this.setAttribute("normal",new We(f,3)),this.setAttribute("uv",new We(d,2));function m(){const b=new te,E=new te;let S=0;const P=(t-e)/i;for(let N=0;N<=s;N++){const z=[],_=N/s,x=_*(t-e)+e;for(let T=0;T<=r;T++){const A=T/r,M=A*c+a,L=Math.sin(M),I=Math.cos(M);E.x=x*L,E.y=-_*i+y,E.z=x*I,h.push(E.x,E.y,E.z),b.set(L,P,I).normalize(),f.push(b.x,b.y,b.z),d.push(A,1-_),z.push(p++)}v.push(z)}for(let N=0;N<r;N++)for(let z=0;z<s;z++){const _=v[z][N],x=v[z+1][N],T=v[z+1][N+1],A=v[z][N+1];u.push(_,x,A),u.push(x,T,A),S+=6}l.addGroup(g,S,0),g+=S}function w(b){const E=p,S=new Te,P=new te;let N=0;const z=b===!0?e:t,_=b===!0?1:-1;for(let T=1;T<=r;T++)h.push(0,y*_,0),f.push(0,_,0),d.push(.5,.5),p++;const x=p;for(let T=0;T<=r;T++){const M=T/r*c+a,L=Math.cos(M),I=Math.sin(M);P.x=z*I,P.y=y*_,P.z=z*L,h.push(P.x,P.y,P.z),f.push(0,_,0),S.x=L*.5+.5,S.y=I*.5*_+.5,d.push(S.x,S.y),p++}for(let T=0;T<r;T++){const A=E+T,M=x+T;b===!0?u.push(M,M+1,A):u.push(M+1,M,A),N+=3}l.addGroup(g,N,b===!0?1:2),g+=N}}}class iA extends An{constructor(e,t,i,r,s,o,a,c){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c},this.fromBufferGeometry(new S4(e,t,i,r,s,o,a,c)),this.mergeVertices()}}new te;new te;new te;new Br;const E4={triangulate:function(n,e,t){t=t||2;const i=e&&e.length,r=i?e[0]*t:n.length;let s=rA(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,h,f,d;if(i&&(s=R4(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let p=t;p<r;p+=t)h=n[p],f=n[p+1],h<a&&(a=h),f<c&&(c=f),h>l&&(l=h),f>u&&(u=f);d=Math.max(l-a,u-c),d=d!==0?1/d:0}return Sh(s,o,t,a,c,d),o}};function rA(n,e,t,i,r){let s,o;if(r===H4(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Vw(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Vw(s,n[s],n[s+1],o);return o&&am(o,o.next)&&(Th(o),o=o.next),o}function To(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(am(t,t.next)||$t(t.prev,t,t.next)===0)){if(Th(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Sh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&O4(n,i,r,s);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,s?A4(n,i,r,s):T4(n)){e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),Th(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=C4(To(n),e,t),Sh(n,e,t,i,r,s,2)):o===2&&L4(n,e,t,i,r,s):Sh(To(n),e,t,i,r,s,1);break}}}function T4(n){const e=n.prev,t=n,i=n.next;if($t(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Dc(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&$t(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function A4(n,e,t,i){const r=n.prev,s=n,o=n.next;if($t(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,c=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=g0(a,c,e,t,i),f=g0(l,u,e,t,i);let d=n.prevZ,p=n.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==n.prev&&d!==n.next&&Dc(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&$t(d.prev,d,d.next)>=0||(d=d.prevZ,p!==n.prev&&p!==n.next&&Dc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&$t(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==n.prev&&d!==n.next&&Dc(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&$t(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&Dc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&$t(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function C4(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!am(r,s)&&sA(r,i,i.next,s)&&Eh(r,s)&&Eh(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Th(i),Th(i.next),i=n=s),i=i.next}while(i!==n);return To(i)}function L4(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&B4(o,a)){let c=oA(o,a);o=To(o,o.next),c=To(c,c.next),Sh(o,e,t,i,r,s),Sh(c,e,t,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function R4(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=rA(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(N4(l));for(r.sort(P4),s=0;s<r.length;s++)I4(r[s],t),t=To(t,t.next);return t}function P4(n,e){return n.x-e.x}function I4(n,e){if(e=D4(n,e),e){const t=oA(e,n);To(e,e.next),To(t,t.next)}}function D4(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let u=1/0,h;t=o;do i>=t.x&&t.x>=c&&i!==t.x&&Dc(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(h=Math.abs(r-t.y)/(i-t.x),Eh(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&F4(o,t)))&&(o=t,u=h)),t=t.next;while(t!==a);return o}function F4(n,e){return $t(n.prev,n,e.prev)<0&&$t(e.next,n,n.next)<0}function O4(n,e,t,i){let r=n;do r.z===null&&(r.z=g0(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,k4(r)}function k4(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,!!i);e++);for(c=l;a>0||c>0&&i;)a!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1);return n}function g0(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function N4(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Dc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function B4(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!z4(n,e)&&(Eh(n,e)&&Eh(e,n)&&U4(n,e)&&($t(n.prev,n,e.prev)||$t(n,e.prev,e))||am(n,e)&&$t(n.prev,n,n.next)>0&&$t(e.prev,e,e.next)>0)}function $t(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function am(n,e){return n.x===e.x&&n.y===e.y}function sA(n,e,t,i){const r=Xf($t(n,e,t)),s=Xf($t(n,e,i)),o=Xf($t(t,i,n)),a=Xf($t(t,i,e));return!!(r!==s&&o!==a||r===0&&jf(n,t,e)||s===0&&jf(n,i,e)||o===0&&jf(t,n,i)||a===0&&jf(t,e,i))}function jf(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Xf(n){return n>0?1:n<0?-1:0}function z4(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&sA(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Eh(n,e){return $t(n.prev,n,n.next)<0?$t(n,e,n.next)>=0&&$t(n,n.prev,e)>=0:$t(n,e,n.prev)<0||$t(n,n.next,e)<0}function U4(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function oA(n,e){const t=new v0(n.i,n.x,n.y),i=new v0(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Vw(n,e,t,i){const r=new v0(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Th(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function v0(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function H4(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}const mo={area:function(n){const e=n.length;let t=0;for(let i=e-1,r=0;r<e;i=r++)t+=n[i].x*n[r].y-n[r].x*n[i].y;return t*.5},isClockWise:function(n){return mo.area(n)<0},triangulateShape:function(n,e){const t=[],i=[],r=[];Ww(n),$w(t,n);let s=n.length;e.forEach(Ww);for(let a=0;a<e.length;a++)i.push(s),s+=e[a].length,$w(t,e[a]);const o=E4.triangulate(t,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function Ww(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function $w(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class aA extends Ke{constructor(e,t){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];o(l)}this.setAttribute("position",new We(r,3)),this.setAttribute("uv",new We(s,2)),this.computeVertexNormals();function o(a){const c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:100,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:6,p=t.bevelSize!==void 0?t.bevelSize:d-2,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,m=t.UVGenerator!==void 0?t.UVGenerator:G4;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let w,b=!1,E,S,P,N;g&&(w=g.getSpacedPoints(u),b=!0,f=!1,E=g.computeFrenetFrames(u,!1),S=new te,P=new te,N=new te),f||(y=0,d=0,p=0,v=0);const z=a.extractPoints(l);let _=z.shape;const x=z.holes;if(!mo.isClockWise(_)){_=_.reverse();for(let D=0,F=x.length;D<F;D++){const U=x[D];mo.isClockWise(U)&&(x[D]=U.reverse())}}const A=mo.triangulateShape(_,x),M=_;for(let D=0,F=x.length;D<F;D++){const U=x[D];_=_.concat(U)}function L(D,F,U){return F||console.error("THREE.ExtrudeGeometry: vec does not exist"),F.clone().multiplyScalar(U).add(D)}const I=_.length,k=A.length;function W(D,F,U){let K,$,R;const C=D.x-F.x,q=D.y-F.y,X=U.x-D.x,H=U.y-D.y,le=C*C+q*q,he=C*H-q*X;if(Math.abs(he)>Number.EPSILON){const fe=Math.sqrt(le),pe=Math.sqrt(X*X+H*H),Y=F.x-q/fe,ne=F.y+C/fe,ve=U.x-H/pe,ue=U.y+X/pe,xe=((ve-Y)*H-(ue-ne)*X)/(C*H-q*X);K=Y+C*xe-D.x,$=ne+q*xe-D.y;const Ee=K*K+$*$;if(Ee<=2)return new Te(K,$);R=Math.sqrt(Ee/2)}else{let fe=!1;C>Number.EPSILON?X>Number.EPSILON&&(fe=!0):C<-Number.EPSILON?X<-Number.EPSILON&&(fe=!0):Math.sign(q)===Math.sign(H)&&(fe=!0),fe?(K=-q,$=C,R=Math.sqrt(le)):(K=C,$=q,R=Math.sqrt(le/2))}return new Te(K/R,$/R)}const j=[];for(let D=0,F=M.length,U=F-1,K=D+1;D<F;D++,U++,K++)U===F&&(U=0),K===F&&(K=0),j[D]=W(M[D],M[U],M[K]);const G=[];let ee,se=j.concat();for(let D=0,F=x.length;D<F;D++){const U=x[D];ee=[];for(let K=0,$=U.length,R=$-1,C=K+1;K<$;K++,R++,C++)R===$&&(R=0),C===$&&(C=0),ee[K]=W(U[K],U[R],U[C]);G.push(ee),se=se.concat(ee)}for(let D=0;D<y;D++){const F=D/y,U=d*Math.cos(F*Math.PI/2),K=p*Math.sin(F*Math.PI/2)+v;for(let $=0,R=M.length;$<R;$++){const C=L(M[$],j[$],K);B(C.x,C.y,-U)}for(let $=0,R=x.length;$<R;$++){const C=x[$];ee=G[$];for(let q=0,X=C.length;q<X;q++){const H=L(C[q],ee[q],K);B(H.x,H.y,-U)}}}const oe=p+v;for(let D=0;D<I;D++){const F=f?L(_[D],se[D],oe):_[D];b?(P.copy(E.normals[0]).multiplyScalar(F.x),S.copy(E.binormals[0]).multiplyScalar(F.y),N.copy(w[0]).add(P).add(S),B(N.x,N.y,N.z)):B(F.x,F.y,0)}for(let D=1;D<=u;D++)for(let F=0;F<I;F++){const U=f?L(_[F],se[F],oe):_[F];b?(P.copy(E.normals[D]).multiplyScalar(U.x),S.copy(E.binormals[D]).multiplyScalar(U.y),N.copy(w[D]).add(P).add(S),B(N.x,N.y,N.z)):B(U.x,U.y,h/u*D)}for(let D=y-1;D>=0;D--){const F=D/y,U=d*Math.cos(F*Math.PI/2),K=p*Math.sin(F*Math.PI/2)+v;for(let $=0,R=M.length;$<R;$++){const C=L(M[$],j[$],K);B(C.x,C.y,h+U)}for(let $=0,R=x.length;$<R;$++){const C=x[$];ee=G[$];for(let q=0,X=C.length;q<X;q++){const H=L(C[q],ee[q],K);b?B(H.x,H.y+w[u-1].y,w[u-1].x+U):B(H.x,H.y,h+U)}}}de(),ae();function de(){const D=r.length/3;if(f){let F=0,U=I*F;for(let K=0;K<k;K++){const $=A[K];Z($[2]+U,$[1]+U,$[0]+U)}F=u+y*2,U=I*F;for(let K=0;K<k;K++){const $=A[K];Z($[0]+U,$[1]+U,$[2]+U)}}else{for(let F=0;F<k;F++){const U=A[F];Z(U[2],U[1],U[0])}for(let F=0;F<k;F++){const U=A[F];Z(U[0]+I*u,U[1]+I*u,U[2]+I*u)}}i.addGroup(D,r.length/3-D,0)}function ae(){const D=r.length/3;let F=0;O(M,F),F+=M.length;for(let U=0,K=x.length;U<K;U++){const $=x[U];O($,F),F+=$.length}i.addGroup(D,r.length/3-D,1)}function O(D,F){let U=D.length;for(;--U>=0;){const K=U;let $=U-1;$<0&&($=D.length-1);for(let R=0,C=u+y*2;R<C;R++){const q=I*R,X=I*(R+1),H=F+K+q,le=F+$+q,he=F+$+X,fe=F+K+X;V(H,le,he,fe)}}}function B(D,F,U){c.push(D),c.push(F),c.push(U)}function Z(D,F,U){J(D),J(F),J(U);const K=r.length/3,$=m.generateTopUV(i,r,K-3,K-2,K-1);re($[0]),re($[1]),re($[2])}function V(D,F,U,K){J(D),J(F),J(K),J(F),J(U),J(K);const $=r.length/3,R=m.generateSideWallUV(i,r,$-6,$-3,$-2,$-1);re(R[0]),re(R[1]),re(R[3]),re(R[1]),re(R[2]),re(R[3])}function J(D){r.push(c[D*3+0]),r.push(c[D*3+1]),r.push(c[D*3+2])}function re(D){s.push(D.x),s.push(D.y)}}}toJSON(){const e=Ke.prototype.toJSON.call(this),t=this.parameters.shapes,i=this.parameters.options;return V4(t,i,e)}}const G4={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],l=e[r*3],u=e[r*3+1];return[new Te(s,o),new Te(a,c),new Te(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],d=e[r*3+1],p=e[r*3+2],v=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<.01?[new Te(o,1-c),new Te(l,1-h),new Te(f,1-p),new Te(v,1-g)]:[new Te(a,1-c),new Te(u,1-h),new Te(d,1-p),new Te(y,1-g)]}};function V4(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}let cA=class extends An{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new aA(e,t)),this.mergeVertices()}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return W4(t,i,e)}};function W4(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}function mp(n,e,t){Ke.call(this),this.type="ParametricBufferGeometry",this.parameters={func:n,slices:e,stacks:t};const i=[],r=[],s=[],o=[],a=1e-5,c=new te,l=new te,u=new te,h=new te,f=new te;n.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=e+1;for(let p=0;p<=t;p++){const v=p/t;for(let y=0;y<=e;y++){const g=y/e;n(g,v,l),r.push(l.x,l.y,l.z),g-a>=0?(n(g-a,v,u),h.subVectors(l,u)):(n(g+a,v,u),h.subVectors(u,l)),v-a>=0?(n(g,v-a,u),f.subVectors(l,u)):(n(g,v+a,u),f.subVectors(u,l)),c.crossVectors(h,f).normalize(),s.push(c.x,c.y,c.z),o.push(g,v)}}for(let p=0;p<t;p++)for(let v=0;v<e;v++){const y=p*d+v,g=p*d+v+1,m=(p+1)*d+v+1,w=(p+1)*d+v;i.push(y,g,w),i.push(g,m,w)}this.setIndex(i),this.setAttribute("position",new We(r,3)),this.setAttribute("normal",new We(s,3)),this.setAttribute("uv",new We(o,2))}mp.prototype=Object.create(Ke.prototype);mp.prototype.constructor=mp;function y0(n,e,t){An.call(this),this.type="ParametricGeometry",this.parameters={func:n,slices:e,stacks:t},this.fromBufferGeometry(new mp(n,e,t)),this.mergeVertices()}y0.prototype=Object.create(An.prototype);y0.prototype.constructor=y0;let Pa=class extends An{constructor(e,t,i,r){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new om(e,t,i,r)),this.mergeVertices()}};class $4 extends Ke{constructor(e,t=12){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;this.setIndex(i),this.setAttribute("position",new We(r,3)),this.setAttribute("normal",new We(s,3)),this.setAttribute("uv",new We(o,2));function l(u){const h=r.length/3,f=u.extractPoints(t);let d=f.shape;const p=f.holes;mo.isClockWise(d)===!1&&(d=d.reverse());for(let y=0,g=p.length;y<g;y++){const m=p[y];mo.isClockWise(m)===!0&&(p[y]=m.reverse())}const v=mo.triangulateShape(d,p);for(let y=0,g=p.length;y<g;y++){const m=p[y];d=d.concat(m)}for(let y=0,g=d.length;y<g;y++){const m=d[y];r.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(let y=0,g=v.length;y<g;y++){const m=v[y],w=m[0]+h,b=m[1]+h,E=m[2]+h;i.push(w,b,E),c+=3}}}toJSON(){const e=Ke.prototype.toJSON.call(this),t=this.parameters.shapes;return q4(t,e)}}function q4(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}let j4=class extends An{constructor(e,t){super(),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new $4(e,t)),this.mergeVertices()}toJSON(){const e=An.prototype.toJSON.call(this),t=this.parameters.shapes;return X4(t,e)}};function X4(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Y4 extends Ke{constructor(e=1,t=8,i=6,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(o+a,Math.PI);let l=0;const u=[],h=new te,f=new te,d=[],p=[],v=[],y=[];for(let g=0;g<=i;g++){const m=[],w=g/i;let b=0;g==0&&o==0?b=.5/t:g==i&&c==Math.PI&&(b=-.5/t);for(let E=0;E<=t;E++){const S=E/t;h.x=-e*Math.cos(r+S*s)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(r+S*s)*Math.sin(o+w*a),p.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),y.push(S+b,1-w),m.push(l++)}u.push(m)}for(let g=0;g<i;g++)for(let m=0;m<t;m++){const w=u[g][m+1],b=u[g][m],E=u[g+1][m],S=u[g+1][m+1];(g!==0||o>0)&&d.push(w,b,S),(g!==i-1||c<Math.PI)&&d.push(b,E,S)}this.setIndex(d),this.setAttribute("position",new We(p,3)),this.setAttribute("normal",new We(v,3)),this.setAttribute("uv",new We(y,2))}}class lr extends An{constructor(e,t,i,r,s,o,a){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Y4(e,t,i,r,s,o,a)),this.mergeVertices()}}function ol(n){je.call(this),this.type="ShadowMaterial",this.color=new Fe(0),this.transparent=!0,this.setValues(n)}ol.prototype=Object.create(je.prototype);ol.prototype.constructor=ol;ol.prototype.isShadowMaterial=!0;ol.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this};function Ah(n){qn.call(this,n),this.type="RawShaderMaterial"}Ah.prototype=Object.create(qn.prototype);Ah.prototype.constructor=Ah;Ah.prototype.isRawShaderMaterial=!0;function un(n){je.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(n)}un.prototype=Object.create(je.prototype);un.prototype.constructor=un;un.prototype.isMeshStandardMaterial=!0;un.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.vertexTangents=n.vertexTangents,this};function Ms(n){un.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Te(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Ue.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(n)}Ms.prototype=Object.create(un.prototype);Ms.prototype.constructor=Ms;Ms.prototype.isMeshPhysicalMaterial=!0;Ms.prototype.copy=function(n){return un.prototype.copy.call(this,n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.reflectivity=n.reflectivity,n.sheen?this.sheen=(this.sheen||new Fe).copy(n.sheen):this.sheen=null,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this};function si(n){je.call(this),this.type="MeshPhongMaterial",this.color=new Fe(16777215),this.specular=new Fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=im,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}si.prototype=Object.create(je.prototype);si.prototype.constructor=si;si.prototype.isMeshPhongMaterial=!0;si.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function al(n){je.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}al.prototype=Object.create(je.prototype);al.prototype.constructor=al;al.prototype.isMeshToonMaterial=!0;al.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function cl(n){je.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}cl.prototype=Object.create(je.prototype);cl.prototype.constructor=cl;cl.prototype.isMeshNormalMaterial=!0;cl.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function Ai(n){je.call(this),this.type="MeshLambertMaterial",this.color=new Fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=im,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}Ai.prototype=Object.create(je.prototype);Ai.prototype.constructor=Ai;Ai.prototype.isMeshLambertMaterial=!0;Ai.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function ll(n){je.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=La,this.normalScale=new Te(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}ll.prototype=Object.create(je.prototype);ll.prototype.constructor=ll;ll.prototype.isMeshMatcapMaterial=!0;ll.prototype.copy=function(n){return je.prototype.copy.call(this,n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function ul(n){Zt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}ul.prototype=Object.create(Zt.prototype);ul.prototype.constructor=ul;ul.prototype.isLineDashedMaterial=!0;ul.prototype.copy=function(n){return Zt.prototype.copy.call(this,n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this};var Z4=Object.freeze({__proto__:null,ShadowMaterial:ol,SpriteMaterial:Vr,RawShaderMaterial:Ah,ShaderMaterial:qn,PointsMaterial:cr,MeshPhysicalMaterial:Ms,MeshStandardMaterial:un,MeshPhongMaterial:si,MeshToonMaterial:al,MeshNormalMaterial:cl,MeshLambertMaterial:Ai,MeshDepthMaterial:ga,MeshDistanceMaterial:va,MeshBasicMaterial:ct,MeshMatcapMaterial:ll,LineDashedMaterial:ul,LineBasicMaterial:Zt,Material:je});const Vt={arraySlice:function(n,e,t){return Vt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const l=s.tracks[c],u=l.getValueSize(),h=[],f=[];for(let d=0;d<l.times.length;++d){const p=l.times[d]*r;if(!(p<t||p>=i)){h.push(l.times[d]);for(let v=0;v<u;++v)f.push(l.values[d*u+v])}}h.length!==0&&(l.times=Vt.convertArray(h,l.times.constructor),l.values=Vt.convertArray(f,l.values.constructor),o.push(l))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const l=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===c});if(l===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const p=a.times.length-1;let v;if(s<=a.times[0]){const g=u,m=h-u;v=Vt.arraySlice(a.values,g,m)}else if(s>=a.times[p]){const g=p*h+u,m=g+h-u;v=Vt.arraySlice(a.values,g,m)}else{const g=a.createInterpolant(),m=u,w=h-u;g.evaluate(s),v=Vt.arraySlice(g.resultBuffer,m,w)}c==="quaternion"&&new en().fromArray(v).normalize().conjugate().toArray(v);const y=l.times.length;for(let g=0;g<y;++g){const m=g*d+f;if(c==="quaternion")en.multiplyQuaternionsFlat(l.values,m,v,0,l.values,m);else{const w=d-f*2;for(let b=0;b<w;++b)l.values[m+b]-=v[b]}}}return n.blendMode=zT,n}};function oi(n,e,t,i){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(t),this.sampleValues=e,this.valueSize=t}Object.assign(oi.prototype,{evaluate:function(n){const e=this.parameterPositions;let t=this._cachedIndex,i=e[t],r=e[t-1];e:{t:{let s;n:{i:if(!(n<i)){for(let o=t+2;;){if(i===void 0){if(n<r)break i;return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,n,r)}if(t===o)break;if(r=i,i=e[++t],n<i)break t}s=e.length;break n}if(!(n>=r)){const o=e[1];n<o&&(t=2,r=o);for(let a=t-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(t===a)break;if(i=r,r=e[--t-1],n>=r)break t}s=t,t=0;break n}break e}for(;t<s;){const o=t+s>>>1;n<e[o]?s=o:t=o+1}if(i=e[t],r=e[t-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(i===void 0)return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,r,n)}this._cachedIndex=t,this.intervalChanged_(t,r,i)}return this.interpolate_(t,r,n,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(n){const e=this.resultBuffer,t=this.sampleValues,i=this.valueSize,r=n*i;for(let s=0;s!==i;++s)e[s]=t[r+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(oi.prototype,{beforeStart_:oi.prototype.copySampleValue_,afterEnd_:oi.prototype.copySampleValue_});function _0(n,e,t,i){oi.call(this,n,e,t,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}_0.prototype=Object.assign(Object.create(oi.prototype),{constructor:_0,DefaultSettings_:{endingStart:Cc,endingEnd:Cc},intervalChanged_:function(n,e,t){const i=this.parameterPositions;let r=n-2,s=n+1,o=i[r],a=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Lc:r=n,o=2*e-t;break;case hp:r=i.length-2,o=e+i[r]-i[r+1];break;default:r=n,o=t}if(a===void 0)switch(this.getSettings_().endingEnd){case Lc:s=n,a=2*t-e;break;case hp:s=1,a=t+i[1]-i[0];break;default:s=n-1,a=e}const c=(t-e)*.5,l=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(a-t),this._offsetPrev=r*l,this._offsetNext=s*l},interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=n*o,c=a-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(t-e)/(i-e),p=d*d,v=p*d,y=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,m=(-1-f)*v+(1.5+f)*p+.5*d,w=f*v-f*p;for(let b=0;b!==o;++b)r[b]=y*s[l+b]+g*s[c+b]+m*s[a+b]+w*s[u+b];return r}});function gp(n,e,t,i){oi.call(this,n,e,t,i)}gp.prototype=Object.assign(Object.create(oi.prototype),{constructor:gp,interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=n*o,c=a-o,l=(t-e)/(i-e),u=1-l;for(let h=0;h!==o;++h)r[h]=s[c+h]*u+s[a+h]*l;return r}});function x0(n,e,t,i){oi.call(this,n,e,t,i)}x0.prototype=Object.assign(Object.create(oi.prototype),{constructor:x0,interpolate_:function(n){return this.copySampleValue_(n-1)}});function Bn(n,e,t,i){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=Vt.convertArray(e,this.TimeBufferType),this.values=Vt.convertArray(t,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(Bn,{toJSON:function(n){const e=n.constructor;let t;if(e.toJSON!==void 0)t=e.toJSON(n);else{t={name:n.name,times:Vt.convertArray(n.times,Array),values:Vt.convertArray(n.values,Array)};const i=n.getInterpolation();i!==n.DefaultInterpolation&&(t.interpolation=i)}return t.type=n.ValueTypeName,t}});Object.assign(Bn.prototype,{constructor:Bn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:$c,InterpolantFactoryMethodDiscrete:function(n){return new x0(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodLinear:function(n){return new gp(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:function(n){return new _0(this.times,this.values,this.getValueSize(),n)},setInterpolation:function(n){let e;switch(n){case ph:e=this.InterpolantFactoryMethodDiscrete;break;case $c:e=this.InterpolantFactoryMethodLinear;break;case Xm:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ph;case this.InterpolantFactoryMethodLinear:return $c;case this.InterpolantFactoryMethodSmooth:return Xm}},getValueSize:function(){return this.values.length/this.times.length},shift:function(n){if(n!==0){const e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]+=n}return this},scale:function(n){if(n!==1){const e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]*=n}return this},trim:function(n,e){const t=this.times,i=t.length;let r=0,s=i-1;for(;r!==i&&t[r]<n;)++r;for(;s!==-1&&t[s]>e;)--s;if(++s,r!==0||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const o=this.getValueSize();this.times=Vt.arraySlice(t,r,s),this.values=Vt.arraySlice(this.values,r*o,s*o)}return this},validate:function(){let n=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const t=this.times,i=this.values,r=t.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let s=null;for(let o=0;o!==r;o++){const a=t[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),n=!1;break}if(s!==null&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),n=!1;break}s=a}if(i!==void 0&&Vt.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const c=i[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),n=!1;break}}return n},optimize:function(){const n=Vt.arraySlice(this.times),e=Vt.arraySlice(this.values),t=this.getValueSize(),i=this.getInterpolation()===Xm,r=n.length-1;let s=1;for(let o=1;o<r;++o){let a=!1;const c=n[o],l=n[o+1];if(c!==l&&(o!==1||c!==c[0]))if(i)a=!0;else{const u=o*t,h=u-t,f=u+t;for(let d=0;d!==t;++d){const p=e[u+d];if(p!==e[h+d]||p!==e[f+d]){a=!0;break}}}if(a){if(o!==s){n[s]=n[o];const u=o*t,h=s*t;for(let f=0;f!==t;++f)e[h+f]=e[u+f]}++s}}if(r>0){n[s]=n[r];for(let o=r*t,a=s*t,c=0;c!==t;++c)e[a+c]=e[o+c];++s}return s!==n.length?(this.times=Vt.arraySlice(n,0,s),this.values=Vt.arraySlice(e,0,s*t)):(this.times=n,this.values=e),this},clone:function(){const n=Vt.arraySlice(this.times,0),e=Vt.arraySlice(this.values,0),t=this.constructor,i=new t(this.name,n,e);return i.createInterpolant=this.createInterpolant,i}});function b0(n,e,t){Bn.call(this,n,e,t)}b0.prototype=Object.assign(Object.create(Bn.prototype),{constructor:b0,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ph,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function w0(n,e,t,i){Bn.call(this,n,e,t,i)}w0.prototype=Object.assign(Object.create(Bn.prototype),{constructor:w0,ValueTypeName:"color"});function xa(n,e,t,i){Bn.call(this,n,e,t,i)}xa.prototype=Object.assign(Object.create(Bn.prototype),{constructor:xa,ValueTypeName:"number"});function M0(n,e,t,i){oi.call(this,n,e,t,i)}M0.prototype=Object.assign(Object.create(oi.prototype),{constructor:M0,interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(t-e)/(i-e);let c=n*o;for(let l=c+o;c!==l;c+=4)en.slerpFlat(r,0,s,c-o,s,c,a);return r}});function hl(n,e,t,i){Bn.call(this,n,e,t,i)}hl.prototype=Object.assign(Object.create(Bn.prototype),{constructor:hl,ValueTypeName:"quaternion",DefaultInterpolation:$c,InterpolantFactoryMethodLinear:function(n){return new M0(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:void 0});function S0(n,e,t,i){Bn.call(this,n,e,t,i)}S0.prototype=Object.assign(Object.create(Bn.prototype),{constructor:S0,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ph,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ba(n,e,t,i){Bn.call(this,n,e,t,i)}ba.prototype=Object.assign(Object.create(Bn.prototype),{constructor:ba,ValueTypeName:"vector"});function bi(n,e=-1,t,i=p_){this.name=n,this.tracks=t,this.duration=e,this.blendMode=i,this.uuid=Ue.generateUUID(),this.duration<0&&this.resetDuration()}function J4(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xa;case"vector":case"vector2":case"vector3":case"vector4":return ba;case"color":return w0;case"quaternion":return hl;case"bool":case"boolean":return b0;case"string":return S0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function K4(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=J4(n.type);if(n.times===void 0){const t=[],i=[];Vt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}Object.assign(bi,{parse:function(n){const e=[],t=n.tracks,i=1/(n.fps||1);for(let s=0,o=t.length;s!==o;++s)e.push(K4(t[s]).scale(i));const r=new bi(n.name,n.duration,e,n.blendMode);return r.uuid=n.uuid,r},toJSON:function(n){const e=[],t=n.tracks,i={name:n.name,duration:n.duration,tracks:e,uuid:n.uuid,blendMode:n.blendMode};for(let r=0,s=t.length;r!==s;++r)e.push(Bn.toJSON(t[r]));return i},CreateFromMorphTargetSequence:function(n,e,t,i){const r=e.length,s=[];for(let o=0;o<r;o++){let a=[],c=[];a.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);const l=Vt.getKeyframeOrder(a);a=Vt.sortedArray(a,1,l),c=Vt.sortedArray(c,1,l),!i&&a[0]===0&&(a.push(r),c.push(c[0])),s.push(new xa(".morphTargetInfluences["+e[o].name+"]",a,c).scale(1/t))}return new bi(n,-1,s)},findByName:function(n,e){let t=n;if(!Array.isArray(n)){const i=n;t=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},CreateClipsFromMorphTargetSequences:function(n,e,t){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=n.length;o<a;o++){const c=n[o],l=c.name.match(r);if(l&&l.length>1){const u=l[1];let h=i[u];h||(i[u]=h=[]),h.push(c)}}const s=[];for(const o in i)s.push(bi.CreateFromMorphTargetSequence(o,i[o],e,t));return s},parseAnimation:function(n,e){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(u,h,f,d,p){if(f.length!==0){const v=[],y=[];Vt.flattenJSON(f,v,y,d),v.length!==0&&p.push(new u(h,v,y))}},i=[],r=n.name||"default",s=n.fps||30,o=n.blendMode;let a=n.length||-1;const c=n.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const f={};let d;for(d=0;d<h.length;d++)if(h[d].morphTargets)for(let p=0;p<h[d].morphTargets.length;p++)f[h[d].morphTargets[p]]=-1;for(const p in f){const v=[],y=[];for(let g=0;g!==h[d].morphTargets.length;++g){const m=h[d];v.push(m.time),y.push(m.morphTarget===p?1:0)}i.push(new xa(".morphTargetInfluence["+p+"]",v,y))}a=f.length*(s||1)}else{const f=".bones["+e[u].name+"]";t(ba,f+".position",h,"pos",i),t(hl,f+".quaternion",h,"rot",i),t(ba,f+".scale",h,"scl",i)}}return i.length===0?null:new bi(r,a,i,o)}});Object.assign(bi.prototype,{resetDuration:function(){const n=this.tracks;let e=0;for(let t=0,i=n.length;t!==i;++t){const r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this},validate:function(){let n=!0;for(let e=0;e<this.tracks.length;e++)n=n&&this.tracks[e].validate();return n},optimize:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this},clone:function(){const n=[];for(let e=0;e<this.tracks.length;e++)n.push(this.tracks[e].clone());return new bi(this.name,this.duration,n,this.blendMode)},toJSON:function(){return bi.toJSON(this)}});const fl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};function Q4(n,e,t){const i=this;let r=!1,s=0,o=0,a;const c=[];this.onStart=void 0,this.onLoad=n,this.onProgress=e,this.onError=t,this.itemStart=function(l){o++,r===!1&&i.onStart!==void 0&&i.onStart(l,s,o),r=!0},this.itemEnd=function(l){s++,i.onProgress!==void 0&&i.onProgress(l,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(l){i.onError!==void 0&&i.onError(l)},this.resolveURL=function(l){return a?a(l):l},this.setURLModifier=function(l){return a=l,this},this.addHandler=function(l,u){return c.push(l,u),this},this.removeHandler=function(l){const u=c.indexOf(l);return u!==-1&&c.splice(u,2),this},this.getHandler=function(l){for(let u=0,h=c.length;u<h;u+=2){const f=c[u],d=c[u+1];if(f.global&&(f.lastIndex=0),f.test(l))return d}return null}}const eB=new Q4;function xt(n){this.manager=n!==void 0?n:eB,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(xt.prototype,{load:function(){},loadAsync:function(n,e){const t=this;return new Promise(function(i,r){t.load(n,i,e,r)})},parse:function(){},setCrossOrigin:function(n){return this.crossOrigin=n,this},setWithCredentials:function(n){return this.withCredentials=n,this},setPath:function(n){return this.path=n,this},setResourcePath:function(n){return this.resourcePath=n,this},setRequestHeader:function(n){return this.requestHeader=n,this}});const Xi={};function jn(n){xt.call(this,n)}jn.prototype=Object.assign(Object.create(xt.prototype),{constructor:jn,load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=fl.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;if(Xi[n]!==void 0){Xi[n].push({onLoad:e,onProgress:t,onError:i});return}const o=/^data:(.*?)(;base64)?,(.*)$/,a=n.match(o);let c;if(a){const l=a[1],u=!!a[2];let h=a[3];h=decodeURIComponent(h),u&&(h=atob(h));try{let f;const d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":const p=new Uint8Array(h.length);for(let y=0;y<h.length;y++)p[y]=h.charCodeAt(y);d==="blob"?f=new Blob([p.buffer],{type:l}):f=p.buffer;break;case"document":f=new DOMParser().parseFromString(h,l);break;case"json":f=JSON.parse(h);break;default:f=h;break}setTimeout(function(){e&&e(f),r.manager.itemEnd(n)},0)}catch(f){setTimeout(function(){i&&i(f),r.manager.itemError(n),r.manager.itemEnd(n)},0)}}else{Xi[n]=[],Xi[n].push({onLoad:e,onProgress:t,onError:i}),c=new XMLHttpRequest,c.open("GET",n,!0),c.addEventListener("load",function(l){const u=this.response,h=Xi[n];if(delete Xi[n],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),fl.add(n,u);for(let f=0,d=h.length;f<d;f++){const p=h[f];p.onLoad&&p.onLoad(u)}r.manager.itemEnd(n)}else{for(let f=0,d=h.length;f<d;f++){const p=h[f];p.onError&&p.onError(l)}r.manager.itemError(n),r.manager.itemEnd(n)}},!1),c.addEventListener("progress",function(l){const u=Xi[n];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onProgress&&d.onProgress(l)}},!1),c.addEventListener("error",function(l){const u=Xi[n];delete Xi[n];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onError&&d.onError(l)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),c.addEventListener("abort",function(l){const u=Xi[n];delete Xi[n];for(let h=0,f=u.length;h<f;h++){const d=u[h];d.onError&&d.onError(l)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),this.responseType!==void 0&&(c.responseType=this.responseType),this.withCredentials!==void 0&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const l in this.requestHeader)c.setRequestHeader(l,this.requestHeader[l]);c.send(null)}return r.manager.itemStart(n),c},setResponseType:function(n){return this.responseType=n,this},setMimeType:function(n){return this.mimeType=n,this}});function qw(n){xt.call(this,n)}qw.prototype=Object.assign(Object.create(xt.prototype),{constructor:qw,load:function(n,e,t,i){const r=this,s=new jn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){const e=[];for(let t=0;t<n.length;t++){const i=bi.parse(n[t]);e.push(i)}return e}});function jw(n){xt.call(this,n)}jw.prototype=Object.assign(Object.create(xt.prototype),{constructor:jw,load:function(n,e,t,i){const r=this,s=[],o=new wh,a=new jn(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let c=0;function l(u){a.load(n[u],function(h){const f=r.parse(h,!0);s[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},c+=1,c===6&&(f.mipmapCount===1&&(o.minFilter=bn),o.image=s,o.format=f.format,o.needsUpdate=!0,e&&e(o))},t,i)}if(Array.isArray(n))for(let u=0,h=n.length;u<h;++u)l(u);else a.load(n,function(u){const h=r.parse(u,!0);if(h.isCubemap){const f=h.mipmaps.length/h.mipmapCount;for(let d=0;d<f;d++){s[d]={mipmaps:[]};for(let p=0;p<h.mipmapCount;p++)s[d].mipmaps.push(h.mipmaps[d*h.mipmapCount+p]),s[d].format=h.format,s[d].width=h.width,s[d].height=h.height}o.image=s}else o.image.width=h.width,o.image.height=h.height,o.mipmaps=h.mipmaps;h.mipmapCount===1&&(o.minFilter=bn),o.format=h.format,o.needsUpdate=!0,e&&e(o)},t,i);return o}});function vp(n){xt.call(this,n)}vp.prototype=Object.assign(Object.create(xt.prototype),{constructor:vp,load:function(n,e,t,i){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=fl.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",c,!1),fl.add(n,this),e&&e(this),r.manager.itemEnd(n)}function c(l){o.removeEventListener("load",a,!1),o.removeEventListener("error",c,!1),i&&i(l),r.manager.itemError(n),r.manager.itemEnd(n)}return o.addEventListener("load",a,!1),o.addEventListener("error",c,!1),n.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(n),o.src=n,o}});function E0(n){xt.call(this,n)}E0.prototype=Object.assign(Object.create(xt.prototype),{constructor:E0,load:function(n,e,t,i){const r=new So,s=new vp(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(c){s.load(n[c],function(l){r.images[c]=l,o++,o===6&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let c=0;c<n.length;++c)a(c);return r}});function Xw(n){xt.call(this,n)}Xw.prototype=Object.assign(Object.create(xt.prototype),{constructor:Xw,load:function(n,e,t,i){const r=this,s=new rl,o=new jn(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(n,function(a){const c=r.parse(a);c&&(c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:On,s.wrapT=c.wrapT!==void 0?c.wrapT:On,s.magFilter=c.magFilter!==void 0?c.magFilter:bn,s.minFilter=c.minFilter!==void 0?c.minFilter:bn,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=el),c.mipmapCount===1&&(s.minFilter=bn),s.needsUpdate=!0,e&&e(s,c))},t,i),s}});function At(n){xt.call(this,n)}At.prototype=Object.assign(Object.create(xt.prototype),{constructor:At,load:function(n,e,t,i){const r=new Ct,s=new vp(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(n,function(o){r.image=o;const a=n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0;r.format=a?fo:or,r.needsUpdate=!0,e!==void 0&&e(r)},t,i),r}});function He(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(He.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(n,e){const t=this.getUtoTmapping(n);return this.getPoint(t,e)},getPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return e},getSpacedPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPointAt(t/n));return e},getLength:function(){const n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let t,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=n;s++)t=this.getPoint(s/n),r+=t.distanceTo(i),e.push(r),i=t;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(n,e){const t=this.getLengths();let i=0;const r=t.length;let s;e?s=e:s=n*t[r-1];let o=0,a=r-1,c;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),c=t[i]-s,c<0)o=i+1;else if(c>0)a=i-1;else{a=i;break}if(i=a,t[i]===s)return i/(r-1);const l=t[i],h=t[i+1]-l,f=(s-l)/h;return(i+f)/(r-1)},getTangent:function(n,e){let i=n-1e-4,r=n+1e-4;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=e||(s.isVector2?new Te:new te);return a.copy(o).sub(s).normalize(),a},getTangentAt:function(n,e){const t=this.getUtoTmapping(n);return this.getTangent(t,e)},computeFrenetFrames:function(n,e){const t=new te,i=[],r=[],s=[],o=new te,a=new Oe;for(let f=0;f<=n;f++){const d=f/n;i[f]=this.getTangentAt(d,new te),i[f].normalize()}r[0]=new te,s[0]=new te;let c=Number.MAX_VALUE;const l=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);l<=c&&(c=l,t.set(1,0,0)),u<=c&&(c=u,t.set(0,1,0)),h<=c&&t.set(0,0,1),o.crossVectors(i[0],t).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let f=1;f<=n;f++){if(r[f]=r[f-1].clone(),s[f]=s[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();const d=Math.acos(Ue.clamp(i[f-1].dot(i[f]),-1,1));r[f].applyMatrix4(a.makeRotationAxis(o,d))}s[f].crossVectors(i[f],r[f])}if(e===!0){let f=Math.acos(Ue.clamp(r[0].dot(r[n]),-1,1));f/=n,i[0].dot(o.crossVectors(r[0],r[n]))>0&&(f=-f);for(let d=1;d<=n;d++)r[d].applyMatrix4(a.makeRotationAxis(i[d],f*d)),s[d].crossVectors(i[d],r[d])}return{tangents:i,normals:r,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this},toJSON:function(){const n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n},fromJSON:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}});function zi(n,e,t,i,r,s,o,a){He.call(this),this.type="EllipseCurve",this.aX=n||0,this.aY=e||0,this.xRadius=t||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}zi.prototype=Object.create(He.prototype);zi.prototype.constructor=zi;zi.prototype.isEllipseCurve=!0;zi.prototype.getPoint=function(n,e){const t=e||new Te,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);const o=this.aStartAngle+n*r;let a=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=a-this.aX,f=c-this.aY;a=h*l-f*u+this.aX,c=h*u+f*l+this.aY}return t.set(a,c)};zi.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};zi.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n};zi.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};function Ao(n,e,t,i,r,s){zi.call(this,n,e,t,t,i,r,s),this.type="ArcCurve"}Ao.prototype=Object.create(zi.prototype);Ao.prototype.constructor=Ao;Ao.prototype.isArcCurve=!0;function v_(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,h){let f=(o-s)/l-(a-s)/(l+u)+(a-o)/u,d=(a-o)/u-(c-o)/(u+h)+(c-a)/h;f*=u,d*=u,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Yf=new te,xg=new v_,bg=new v_,wg=new v_;function Xn(n=[],e=!1,t="centripetal",i=.5){He.call(this),this.type="CatmullRomCurve3",this.points=n,this.closed=e,this.curveType=t,this.tension=i}Xn.prototype=Object.create(He.prototype);Xn.prototype.constructor=Xn;Xn.prototype.isCatmullRomCurve3=!0;Xn.prototype.getPoint=function(n,e=new te){const t=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*n;let o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let c,l;this.closed||o>0?c=i[(o-1)%r]:(Yf.subVectors(i[0],i[1]).add(i[0]),c=Yf);const u=i[o%r],h=i[(o+1)%r];if(this.closed||o+2<r?l=i[(o+2)%r]:(Yf.subVectors(i[r-1],i[r-2]).add(i[r-1]),l=Yf),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let d=Math.pow(c.distanceToSquared(u),f),p=Math.pow(u.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(l),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),xg.initNonuniformCatmullRom(c.x,u.x,h.x,l.x,d,p,v),bg.initNonuniformCatmullRom(c.y,u.y,h.y,l.y,d,p,v),wg.initNonuniformCatmullRom(c.z,u.z,h.z,l.z,d,p,v)}else this.curveType==="catmullrom"&&(xg.initCatmullRom(c.x,u.x,h.x,l.x,this.tension),bg.initCatmullRom(c.y,u.y,h.y,l.y,this.tension),wg.initCatmullRom(c.z,u.z,h.z,l.z,this.tension));return t.set(xg.calc(a),bg.calc(a),wg.calc(a)),t};Xn.prototype.copy=function(n){He.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(i.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};Xn.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];n.points.push(i.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n};Xn.prototype.fromJSON=function(n){He.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(new te().fromArray(i))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};function Yw(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function tB(n,e){const t=1-n;return t*t*e}function nB(n,e){return 2*(1-n)*n*e}function iB(n,e){return n*n*e}function Gu(n,e,t,i){return tB(n,e)+nB(n,t)+iB(n,i)}function rB(n,e){const t=1-n;return t*t*t*e}function sB(n,e){const t=1-n;return 3*t*t*n*e}function oB(n,e){return 3*(1-n)*n*n*e}function aB(n,e){return n*n*n*e}function Vu(n,e,t,i,r){return rB(n,e)+sB(n,t)+oB(n,i)+aB(n,r)}function Wr(n=new Te,e=new Te,t=new Te,i=new Te){He.call(this),this.type="CubicBezierCurve",this.v0=n,this.v1=e,this.v2=t,this.v3=i}Wr.prototype=Object.create(He.prototype);Wr.prototype.constructor=Wr;Wr.prototype.isCubicBezierCurve=!0;Wr.prototype.getPoint=function(n,e=new Te){const t=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return t.set(Vu(n,i.x,r.x,s.x,o.x),Vu(n,i.y,r.y,s.y,o.y)),t};Wr.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};Wr.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};Wr.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function ur(n=new te,e=new te,t=new te,i=new te){He.call(this),this.type="CubicBezierCurve3",this.v0=n,this.v1=e,this.v2=t,this.v3=i}ur.prototype=Object.create(He.prototype);ur.prototype.constructor=ur;ur.prototype.isCubicBezierCurve3=!0;ur.prototype.getPoint=function(n,e=new te){const t=e,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return t.set(Vu(n,i.x,r.x,s.x,o.x),Vu(n,i.y,r.y,s.y,o.y),Vu(n,i.z,r.z,s.z,o.z)),t};ur.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};ur.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};ur.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function Ci(n=new Te,e=new Te){He.call(this),this.type="LineCurve",this.v1=n,this.v2=e}Ci.prototype=Object.create(He.prototype);Ci.prototype.constructor=Ci;Ci.prototype.isLineCurve=!0;Ci.prototype.getPoint=function(n,e=new Te){const t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};Ci.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};Ci.prototype.getTangent=function(n,e){const t=e||new Te;return t.copy(this.v2).sub(this.v1).normalize(),t};Ci.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};Ci.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};Ci.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function $r(n=new te,e=new te){He.call(this),this.type="LineCurve3",this.v1=n,this.v2=e}$r.prototype=Object.create(He.prototype);$r.prototype.constructor=$r;$r.prototype.isLineCurve3=!0;$r.prototype.getPoint=function(n,e=new te){const t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};$r.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};$r.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};$r.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};$r.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function qr(n=new Te,e=new Te,t=new Te){He.call(this),this.type="QuadraticBezierCurve",this.v0=n,this.v1=e,this.v2=t}qr.prototype=Object.create(He.prototype);qr.prototype.constructor=qr;qr.prototype.isQuadraticBezierCurve=!0;qr.prototype.getPoint=function(n,e=new Te){const t=e,i=this.v0,r=this.v1,s=this.v2;return t.set(Gu(n,i.x,r.x,s.x),Gu(n,i.y,r.y,s.y)),t};qr.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};qr.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};qr.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function Ss(n=new te,e=new te,t=new te){He.call(this),this.type="QuadraticBezierCurve3",this.v0=n,this.v1=e,this.v2=t}Ss.prototype=Object.create(He.prototype);Ss.prototype.constructor=Ss;Ss.prototype.isQuadraticBezierCurve3=!0;Ss.prototype.getPoint=function(n,e=new te){const t=e,i=this.v0,r=this.v1,s=this.v2;return t.set(Gu(n,i.x,r.x,s.x),Gu(n,i.y,r.y,s.y),Gu(n,i.z,r.z,s.z)),t};Ss.prototype.copy=function(n){return He.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};Ss.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};Ss.prototype.fromJSON=function(n){return He.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function jr(n=[]){He.call(this),this.type="SplineCurve",this.points=n}jr.prototype=Object.create(He.prototype);jr.prototype.constructor=jr;jr.prototype.isSplineCurve=!0;jr.prototype.getPoint=function(n,e=new Te){const t=e,i=this.points,r=(i.length-1)*n,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],c=i[s],l=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return t.set(Yw(o,a.x,c.x,l.x,u.x),Yw(o,a.y,c.y,l.y,u.y)),t};jr.prototype.copy=function(n){He.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(i.clone())}return this};jr.prototype.toJSON=function(){const n=He.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];n.points.push(i.toArray())}return n};jr.prototype.fromJSON=function(n){He.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(new Te().fromArray(i))}return this};var cB=Object.freeze({__proto__:null,ArcCurve:Ao,CatmullRomCurve3:Xn,CubicBezierCurve:Wr,CubicBezierCurve3:ur,EllipseCurve:zi,LineCurve:Ci,LineCurve3:$r,QuadraticBezierCurve:qr,QuadraticBezierCurve3:Ss,SplineCurve:jr});function co(){He.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}co.prototype=Object.assign(Object.create(He.prototype),{constructor:co,add:function(n){this.curves.push(n)},closePath:function(){const n=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);n.equals(e)||this.curves.push(new Ci(e,n))},getPoint:function(n){const e=n*this.getLength(),t=this.getCurveLengths();let i=0;for(;i<t.length;){if(t[i]>=e){const r=t[i]-e,s=this.curves[i],o=s.getLength(),a=o===0?0:1-r/o;return s.getPointAt(a)}i++}return null},getLength:function(){const n=this.getCurveLengths();return n[n.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let e=0;for(let t=0,i=this.curves.length;t<i;t++)e+=this.curves[t].getLength(),n.push(e);return this.cacheLengths=n,n},getSpacedPoints:function(n=40){const e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return this.autoClose&&e.push(e[0]),e},getPoints:function(n=12){const e=[];let t;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?n*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?n*s.points.length:n,a=s.getPoints(o);for(let c=0;c<a.length;c++){const l=a[c];t&&t.equals(l)||(e.push(l),t=l)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(n){He.prototype.copy.call(this,n),this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){const i=n.curves[e];this.curves.push(i.clone())}return this.autoClose=n.autoClose,this},toJSON:function(){const n=He.prototype.toJSON.call(this);n.autoClose=this.autoClose,n.curves=[];for(let e=0,t=this.curves.length;e<t;e++){const i=this.curves[e];n.curves.push(i.toJSON())}return n},fromJSON:function(n){He.prototype.fromJSON.call(this,n),this.autoClose=n.autoClose,this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){const i=n.curves[e];this.curves.push(new cB[i.type]().fromJSON(i))}return this}});function Pr(n){co.call(this),this.type="Path",this.currentPoint=new Te,n&&this.setFromPoints(n)}Pr.prototype=Object.assign(Object.create(co.prototype),{constructor:Pr,setFromPoints:function(n){this.moveTo(n[0].x,n[0].y);for(let e=1,t=n.length;e<t;e++)this.lineTo(n[e].x,n[e].y);return this},moveTo:function(n,e){return this.currentPoint.set(n,e),this},lineTo:function(n,e){const t=new Ci(this.currentPoint.clone(),new Te(n,e));return this.curves.push(t),this.currentPoint.set(n,e),this},quadraticCurveTo:function(n,e,t,i){const r=new qr(this.currentPoint.clone(),new Te(n,e),new Te(t,i));return this.curves.push(r),this.currentPoint.set(t,i),this},bezierCurveTo:function(n,e,t,i,r,s){const o=new Wr(this.currentPoint.clone(),new Te(n,e),new Te(t,i),new Te(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this},splineThru:function(n){const e=[this.currentPoint.clone()].concat(n),t=new jr(e);return this.curves.push(t),this.currentPoint.copy(n[n.length-1]),this},arc:function(n,e,t,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(n+o,e+a,t,i,r,s),this},absarc:function(n,e,t,i,r,s){return this.absellipse(n,e,t,t,i,r,s),this},ellipse:function(n,e,t,i,r,s,o,a){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(n+c,e+l,t,i,r,s,o,a),this},absellipse:function(n,e,t,i,r,s,o,a){const c=new zi(n,e,t,i,r,s,o,a);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this},copy:function(n){return co.prototype.copy.call(this,n),this.currentPoint.copy(n.currentPoint),this},toJSON:function(){const n=co.prototype.toJSON.call(this);return n.currentPoint=this.currentPoint.toArray(),n},fromJSON:function(n){return co.prototype.fromJSON.call(this,n),this.currentPoint.fromArray(n.currentPoint),this}});function fa(n){Pr.call(this,n),this.uuid=Ue.generateUUID(),this.type="Shape",this.holes=[]}fa.prototype=Object.assign(Object.create(Pr.prototype),{constructor:fa,getPointsHoles:function(n){const e=[];for(let t=0,i=this.holes.length;t<i;t++)e[t]=this.holes[t].getPoints(n);return e},extractPoints:function(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}},copy:function(n){Pr.prototype.copy.call(this,n),this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){const i=n.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const n=Pr.prototype.toJSON.call(this);n.uuid=this.uuid,n.holes=[];for(let e=0,t=this.holes.length;e<t;e++){const i=this.holes[e];n.holes.push(i.toJSON())}return n},fromJSON:function(n){Pr.prototype.fromJSON.call(this,n),this.uuid=n.uuid,this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){const i=n.holes[e];this.holes.push(new Pr().fromJSON(i))}return this}});function Ut(n,e=1){Ne.call(this),this.type="Light",this.color=new Fe(n),this.intensity=e}Ut.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Ut,isLight:!0,copy:function(n){return Ne.prototype.copy.call(this,n),this.color.copy(n.color),this.intensity=n.intensity,this},toJSON:function(n){const e=Ne.prototype.toJSON.call(this,n);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function Ch(n,e,t){Ut.call(this,n,t),this.type="HemisphereLight",this.position.copy(Ne.DefaultUp),this.updateMatrix(),this.groundColor=new Fe(e)}Ch.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Ch,isHemisphereLight:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.groundColor.copy(n.groundColor),this}});function Es(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Te(512,512),this.map=null,this.mapPass=null,this.matrix=new Oe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sm,this._frameExtents=new Te(1,1),this._viewportCount=1,this._viewports=[new vt(0,0,1,1)]}Object.assign(Es.prototype,{_projScreenMatrix:new Oe,_lightPositionWorld:new te,_lookTarget:new te,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(n){const e=this.camera,t=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(n.matrixWorld),e.position.copy(s),r.setFromMatrixPosition(n.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(e.projectionMatrix),t.multiply(e.matrixWorldInverse)},getViewport:function(n){return this._viewports[n]},getFrameExtents:function(){return this._frameExtents},copy:function(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}});function T0(){Es.call(this,new lt(50,1,.5,500)),this.focus=1}T0.prototype=Object.assign(Object.create(Es.prototype),{constructor:T0,isSpotLightShadow:!0,updateMatrices:function(n){const e=this.camera,t=Ue.RAD2DEG*2*n.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=n.distance||e.far;(t!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=t,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Es.prototype.updateMatrices.call(this,n)}});function Co(n,e,t,i,r,s){Ut.call(this,n,e),this.type="SpotLight",this.position.copy(Ne.DefaultUp),this.updateMatrix(),this.target=new Ne,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=t!==void 0?t:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=s!==void 0?s:1,this.shadow=new T0}Co.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Co,isSpotLight:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function A0(){Es.call(this,new lt(90,1,.5,500)),this._frameExtents=new Te(4,2),this._viewportCount=6,this._viewports=[new vt(2,1,1,1),new vt(0,1,1,1),new vt(3,1,1,1),new vt(1,1,1,1),new vt(3,0,1,1),new vt(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}A0.prototype=Object.assign(Object.create(Es.prototype),{constructor:A0,isPointLightShadow:!0,updateMatrices:function(n,e=0){const t=this.camera,i=this.matrix,r=this._lightPositionWorld,s=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(n.matrixWorld),t.position.copy(r),s.copy(t.position),s.add(this._cubeDirections[e]),t.up.copy(this._cubeUps[e]),t.lookAt(s),t.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}});function Xr(n,e,t,i){Ut.call(this,n,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=t!==void 0?t:0,this.decay=i!==void 0?i:1,this.shadow=new A0}Xr.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Xr,isPointLight:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}});function Lh(n=-1,e=1,t=1,i=-1,r=.1,s=2e3){Mo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=e,this.top=t,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}Lh.prototype=Object.assign(Object.create(Mo.prototype),{constructor:Lh,isOrthographicCamera:!0,copy:function(n,e){return Mo.prototype.copy.call(this,n,e),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this},setViewOffset:function(n,e,t,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const n=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=t-n,s=t+n,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,s=r+c*this.view.width,o-=l*this.view.offsetY,a=o-l*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){const e=Ne.prototype.toJSON.call(this,n);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function C0(){Es.call(this,new Lh(-5,5,5,-5,.5,500))}C0.prototype=Object.assign(Object.create(Es.prototype),{constructor:C0,isDirectionalLightShadow:!0,updateMatrices:function(n){Es.prototype.updateMatrices.call(this,n)}});function Ts(n,e){Ut.call(this,n,e),this.type="DirectionalLight",this.position.copy(Ne.DefaultUp),this.updateMatrix(),this.target=new Ne,this.shadow=new C0}Ts.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Ts,isDirectionalLight:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function wa(n,e){Ut.call(this,n,e),this.type="AmbientLight"}wa.prototype=Object.assign(Object.create(Ut.prototype),{constructor:wa,isAmbientLight:!0});function Zw(n,e,t,i){Ut.call(this,n,e),this.type="RectAreaLight",this.width=t!==void 0?t:10,this.height=i!==void 0?i:10}Zw.prototype=Object.assign(Object.create(Ut.prototype),{constructor:Zw,isRectAreaLight:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.width=n.width,this.height=n.height,this},toJSON:function(n){const e=Ut.prototype.toJSON.call(this,n);return e.object.width=this.width,e.object.height=this.height,e}});let lB=class{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}};function zr(n,e){Ut.call(this,void 0,e),this.type="LightProbe",this.sh=n!==void 0?n:new lB}zr.prototype=Object.assign(Object.create(Ut.prototype),{constructor:zr,isLightProbe:!0,copy:function(n){return Ut.prototype.copy.call(this,n),this.sh.copy(n.sh),this},fromJSON:function(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this},toJSON:function(n){const e=Ut.prototype.toJSON.call(this,n);return e.object.sh=this.sh.toArray(),e}});function Jw(n){xt.call(this,n),this.textures={}}Jw.prototype=Object.assign(Object.create(xt.prototype),{constructor:Jw,load:function(n,e,t,i){const r=this,s=new jn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){const e=this.textures;function t(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const i=new Z4[n.type];if(n.uuid!==void 0&&(i.uuid=n.uuid),n.name!==void 0&&(i.name=n.name),n.color!==void 0&&i.color!==void 0&&i.color.setHex(n.color),n.roughness!==void 0&&(i.roughness=n.roughness),n.metalness!==void 0&&(i.metalness=n.metalness),n.sheen!==void 0&&(i.sheen=new Fe().setHex(n.sheen)),n.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(n.emissive),n.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(n.specular),n.shininess!==void 0&&(i.shininess=n.shininess),n.clearcoat!==void 0&&(i.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=n.clearcoatRoughness),n.fog!==void 0&&(i.fog=n.fog),n.flatShading!==void 0&&(i.flatShading=n.flatShading),n.blending!==void 0&&(i.blending=n.blending),n.combine!==void 0&&(i.combine=n.combine),n.side!==void 0&&(i.side=n.side),n.opacity!==void 0&&(i.opacity=n.opacity),n.transparent!==void 0&&(i.transparent=n.transparent),n.alphaTest!==void 0&&(i.alphaTest=n.alphaTest),n.depthTest!==void 0&&(i.depthTest=n.depthTest),n.depthWrite!==void 0&&(i.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(i.colorWrite=n.colorWrite),n.stencilWrite!==void 0&&(i.stencilWrite=n.stencilWrite),n.stencilWriteMask!==void 0&&(i.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(i.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(i.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(i.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(i.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(i.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(i.stencilZPass=n.stencilZPass),n.wireframe!==void 0&&(i.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(i.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(i.rotation=n.rotation),n.linewidth!==1&&(i.linewidth=n.linewidth),n.dashSize!==void 0&&(i.dashSize=n.dashSize),n.gapSize!==void 0&&(i.gapSize=n.gapSize),n.scale!==void 0&&(i.scale=n.scale),n.polygonOffset!==void 0&&(i.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=n.polygonOffsetUnits),n.skinning!==void 0&&(i.skinning=n.skinning),n.morphTargets!==void 0&&(i.morphTargets=n.morphTargets),n.morphNormals!==void 0&&(i.morphNormals=n.morphNormals),n.dithering!==void 0&&(i.dithering=n.dithering),n.vertexTangents!==void 0&&(i.vertexTangents=n.vertexTangents),n.visible!==void 0&&(i.visible=n.visible),n.toneMapped!==void 0&&(i.toneMapped=n.toneMapped),n.userData!==void 0&&(i.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?i.vertexColors=n.vertexColors>0:i.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const r in n.uniforms){const s=n.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=t(s.value);break;case"c":i.uniforms[r].value=new Fe().setHex(s.value);break;case"v2":i.uniforms[r].value=new Te().fromArray(s.value);break;case"v3":i.uniforms[r].value=new te().fromArray(s.value);break;case"v4":i.uniforms[r].value=new vt().fromArray(s.value);break;case"m3":i.uniforms[r].value=new Wn().fromArray(s.value);break;case"m4":i.uniforms[r].value=new Oe().fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(n.defines!==void 0&&(i.defines=n.defines),n.vertexShader!==void 0&&(i.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(i.fragmentShader=n.fragmentShader),n.extensions!==void 0)for(const r in n.extensions)i.extensions[r]=n.extensions[r];if(n.shading!==void 0&&(i.flatShading=n.shading===1),n.size!==void 0&&(i.size=n.size),n.sizeAttenuation!==void 0&&(i.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(i.map=t(n.map)),n.matcap!==void 0&&(i.matcap=t(n.matcap)),n.alphaMap!==void 0&&(i.alphaMap=t(n.alphaMap)),n.bumpMap!==void 0&&(i.bumpMap=t(n.bumpMap)),n.bumpScale!==void 0&&(i.bumpScale=n.bumpScale),n.normalMap!==void 0&&(i.normalMap=t(n.normalMap)),n.normalMapType!==void 0&&(i.normalMapType=n.normalMapType),n.normalScale!==void 0){let r=n.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Te().fromArray(r)}return n.displacementMap!==void 0&&(i.displacementMap=t(n.displacementMap)),n.displacementScale!==void 0&&(i.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(i.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(i.roughnessMap=t(n.roughnessMap)),n.metalnessMap!==void 0&&(i.metalnessMap=t(n.metalnessMap)),n.emissiveMap!==void 0&&(i.emissiveMap=t(n.emissiveMap)),n.emissiveIntensity!==void 0&&(i.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(i.specularMap=t(n.specularMap)),n.envMap!==void 0&&(i.envMap=t(n.envMap)),n.envMapIntensity!==void 0&&(i.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(i.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(i.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(i.lightMap=t(n.lightMap)),n.lightMapIntensity!==void 0&&(i.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(i.aoMap=t(n.aoMap)),n.aoMapIntensity!==void 0&&(i.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(i.gradientMap=t(n.gradientMap)),n.clearcoatMap!==void 0&&(i.clearcoatMap=t(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=t(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=t(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Te().fromArray(n.clearcoatNormalScale)),n.transmission!==void 0&&(i.transmission=n.transmission),n.transmissionMap!==void 0&&(i.transmissionMap=t(n.transmissionMap)),i},setTextures:function(n){return this.textures=n,this}});const xs={decodeText:function(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(n){const e=n.lastIndexOf("/");return e===-1?"./":n.substr(0,e+1)}};function yp(){Ke.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}yp.prototype=Object.assign(Object.create(Ke.prototype),{constructor:yp,isInstancedBufferGeometry:!0,copy:function(n){return Ke.prototype.copy.call(this,n),this.instanceCount=n.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const n=Ke.prototype.toJSON.call(this);return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}});function L0(n,e,t,i){typeof t=="number"&&(i=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Xe.call(this,n,e,t),this.meshPerAttribute=i||1}L0.prototype=Object.assign(Object.create(Xe.prototype),{constructor:L0,isInstancedBufferAttribute:!0,copy:function(n){return Xe.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},toJSON:function(){const n=Xe.prototype.toJSON.call(this);return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}});function Kw(n){xt.call(this,n)}Kw.prototype=Object.assign(Object.create(xt.prototype),{constructor:Kw,load:function(n,e,t,i){const r=this,s=new jn(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(o){try{e(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)},parse:function(n){const e={},t={};function i(f,d){if(e[d]!==void 0)return e[d];const v=f.interleavedBuffers[d],y=r(f,v.buffer),g=Cf(v.type,y),m=new Mi(g,v.stride);return m.uuid=v.uuid,e[d]=m,m}function r(f,d){if(t[d]!==void 0)return t[d];const v=f.arrayBuffers[d],y=new Uint32Array(v).buffer;return t[d]=y,y}const s=n.isInstancedBufferGeometry?new yp:new Ke,o=n.data.index;if(o!==void 0){const f=Cf(o.type,o.array);s.setIndex(new Xe(f,1))}const a=n.data.attributes;for(const f in a){const d=a[f];let p;if(d.isInterleavedBufferAttribute){const v=i(n.data,d.data);p=new Eo(v,d.itemSize,d.offset,d.normalized)}else{const v=Cf(d.type,d.array),y=d.isInstancedBufferAttribute?L0:Xe;p=new y(v,d.itemSize,d.normalized)}d.name!==void 0&&(p.name=d.name),s.setAttribute(f,p)}const c=n.data.morphAttributes;if(c)for(const f in c){const d=c[f],p=[];for(let v=0,y=d.length;v<y;v++){const g=d[v];let m;if(g.isInterleavedBufferAttribute){const w=i(n.data,g.data);m=new Eo(w,g.itemSize,g.offset,g.normalized)}else{const w=Cf(g.type,g.array);m=new Xe(w,g.itemSize,g.normalized)}g.name!==void 0&&(m.name=g.name),p.push(m)}s.morphAttributes[f]=p}n.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const u=n.data.groups||n.data.drawcalls||n.data.offsets;if(u!==void 0)for(let f=0,d=u.length;f!==d;++f){const p=u[f];s.addGroup(p.start,p.count,p.materialIndex)}const h=n.data.boundingSphere;if(h!==void 0){const f=new te;h.center!==void 0&&f.fromArray(h.center),s.boundingSphere=new Ls(f,h.radius)}return n.name&&(s.name=n.name),n.userData&&(s.userData=n.userData),s}});function R0(n){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),xt.call(this,n),this.options={premultiplyAlpha:"none"}}R0.prototype=Object.assign(Object.create(xt.prototype),{constructor:R0,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=fl.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(n,o).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){fl.add(n,a),e&&e(a),r.manager.itemEnd(n)}).catch(function(a){i&&i(a),r.manager.itemError(n),r.manager.itemEnd(n)}),r.manager.itemStart(n)}});function lA(){this.type="ShapePath",this.color=new Fe,this.subPaths=[],this.currentPath=null}Object.assign(lA.prototype,{moveTo:function(n,e){return this.currentPath=new Pr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,e),this},lineTo:function(n,e){return this.currentPath.lineTo(n,e),this},quadraticCurveTo:function(n,e,t,i){return this.currentPath.quadraticCurveTo(n,e,t,i),this},bezierCurveTo:function(n,e,t,i,r,s){return this.currentPath.bezierCurveTo(n,e,t,i,r,s),this},splineThru:function(n){return this.currentPath.splineThru(n),this},toShapes:function(n,e){function t(g){const m=[];for(let w=0,b=g.length;w<b;w++){const E=g[w],S=new fa;S.curves=E.curves,m.push(S)}return m}function i(g,m){const w=m.length;let b=!1;for(let E=w-1,S=0;S<w;E=S++){let P=m[E],N=m[S],z=N.x-P.x,_=N.y-P.y;if(Math.abs(_)>Number.EPSILON){if(_<0&&(P=m[S],z=-z,N=m[E],_=-_),g.y<P.y||g.y>N.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const x=_*(g.x-P.x)-z*(g.y-P.y);if(x===0)return!0;if(x<0)continue;b=!b}}else{if(g.y!==P.y)continue;if(N.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=N.x)return!0}}return b}const r=mo.isClockWise,s=this.subPaths;if(s.length===0)return[];if(e===!0)return t(s);let o,a,c;const l=[];if(s.length===1)return a=s[0],c=new fa,c.curves=a.curves,l.push(c),l;let u=!r(s[0].getPoints());u=n?!u:u;const h=[],f=[];let d=[],p=0,v;f[p]=void 0,d[p]=[];for(let g=0,m=s.length;g<m;g++)a=s[g],v=a.getPoints(),o=r(v),o=n?!o:o,o?(!u&&f[p]&&p++,f[p]={s:new fa,p:v},f[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:v[0]});if(!f[0])return t(s);if(f.length>1){let g=!1;const m=[];for(let w=0,b=f.length;w<b;w++)h[w]=[];for(let w=0,b=f.length;w<b;w++){const E=d[w];for(let S=0;S<E.length;S++){const P=E[S];let N=!0;for(let z=0;z<f.length;z++)i(P.p,f[z].p)&&(w!==z&&m.push({froms:w,tos:z,hole:S}),N?(N=!1,h[z].push(P)):g=!0);N&&h[w].push(P)}}m.length>0&&(g||(d=h))}let y;for(let g=0,m=f.length;g<m;g++){c=f[g].s,l.push(c),y=d[g];for(let w=0,b=y.length;w<b;w++)c.holes.push(y[w].h)}return l}});function uA(n){this.type="Font",this.data=n}Object.assign(uA.prototype,{isFont:!0,generateShapes:function(n,e=100){const t=[],i=uB(n,e,this.data);for(let r=0,s=i.length;r<s;r++)Array.prototype.push.apply(t,i[r].toShapes());return t}});function uB(n,e,t){const i=Array.from?Array.from(n):String(n).split(""),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,c=0;for(let l=0;l<i.length;l++){const u=i[l];if(u===`
`)a=0,c-=s;else{const h=hB(u,r,a,c,t);a+=h.offsetX,o.push(h.path)}}return o}function hB(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const o=new lA;let a,c,l,u,h,f,d,p;if(s.o){const v=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let y=0,g=v.length;y<g;)switch(v[y++]){case"m":a=v[y++]*e+t,c=v[y++]*e+i,o.moveTo(a,c);break;case"l":a=v[y++]*e+t,c=v[y++]*e+i,o.lineTo(a,c);break;case"q":l=v[y++]*e+t,u=v[y++]*e+i,h=v[y++]*e+t,f=v[y++]*e+i,o.quadraticCurveTo(h,f,l,u);break;case"b":l=v[y++]*e+t,u=v[y++]*e+i,h=v[y++]*e+t,f=v[y++]*e+i,d=v[y++]*e+t,p=v[y++]*e+i,o.bezierCurveTo(h,f,d,p,l,u);break}}return{offsetX:s.ha*e,path:o}}function Qw(n){xt.call(this,n)}Qw.prototype=Object.assign(Object.create(xt.prototype),{constructor:Qw,load:function(n,e,t,i){const r=this,s=new jn(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}const c=r.parse(a);e&&e(c)},t,i)},parse:function(n){return new uA(n)}});let Zf;const fB={getContext:function(){return Zf===void 0&&(Zf=new(window.AudioContext||window.webkitAudioContext)),Zf},setContext:function(n){Zf=n}};function e1(n){xt.call(this,n)}e1.prototype=Object.assign(Object.create(xt.prototype),{constructor:e1,load:function(n,e,t,i){const r=this,s=new jn(r.manager);s.setResponseType("arraybuffer"),s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(o){try{const a=o.slice(0);fB.getContext().decodeAudioData(a,function(l){e(l)})}catch(a){i?i(a):console.error(a),r.manager.itemError(n)}},t,i)}});function t1(n,e,t){zr.call(this,void 0,t);const i=new Fe().set(n),r=new Fe().set(e),s=new te(i.r,i.g,i.b),o=new te(r.r,r.g,r.b),a=Math.sqrt(Math.PI),c=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(c)}t1.prototype=Object.assign(Object.create(zr.prototype),{constructor:t1,isHemisphereLightProbe:!0,copy:function(n){return zr.prototype.copy.call(this,n),this},toJSON:function(n){return zr.prototype.toJSON.call(this,n)}});function n1(n,e){zr.call(this,void 0,e);const t=new Fe().set(n);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}n1.prototype=Object.assign(Object.create(zr.prototype),{constructor:n1,isAmbientLightProbe:!0,copy:function(n){return zr.prototype.copy.call(this,n),this},toJSON:function(n){return zr.prototype.toJSON.call(this,n)}});const i1=new Oe,r1=new Oe;function dB(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new lt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new lt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(dB.prototype,{update:function(n){const e=this._cache;if(e.focus!==n.focus||e.fov!==n.fov||e.aspect!==n.aspect*this.aspect||e.near!==n.near||e.far!==n.far||e.zoom!==n.zoom||e.eyeSep!==this.eyeSep){e.focus=n.focus,e.fov=n.fov,e.aspect=n.aspect*this.aspect,e.near=n.near,e.far=n.far,e.zoom=n.zoom,e.eyeSep=this.eyeSep;const i=n.projectionMatrix.clone(),r=e.eyeSep/2,s=r*e.near/e.focus,o=e.near*Math.tan(Ue.DEG2RAD*e.fov*.5)/e.zoom;let a,c;r1.elements[12]=-r,i1.elements[12]=r,a=-o*e.aspect+s,c=o*e.aspect+s,i.elements[0]=2*e.near/(c-a),i.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(i),a=-o*e.aspect-s,c=o*e.aspect-s,i.elements[0]=2*e.near/(c-a),i.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(r1),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(i1)}});class cm{constructor(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=s1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=s1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function s1(){return(typeof performance>"u"?Date:performance).now()}function hA(n,e,t){this.binding=n,this.valueSize=t;let i,r,s;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(hA.prototype,{accumulate:function(n,e){const t=this.buffer,i=this.valueSize,r=n*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)t[r+o]=t[o];s=e}else{s+=e;const o=e/s;this._mixBufferRegion(t,r,0,o,i)}this.cumulativeWeight=s},accumulateAdditive:function(n){const e=this.buffer,t=this.valueSize,i=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,n,t),this.cumulativeWeightAdditive+=n},apply:function(n){const e=this.valueSize,t=this.buffer,i=n*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const a=e*this._origIndex;this._mixBufferRegion(t,i,a,1-r,e)}s>0&&this._mixBufferRegionAdditive(t,i,this._addIndex*e,1,e);for(let a=e,c=e+e;a!==c;++a)if(t[a]!==t[a+e]){o.setValue(t,i);break}},saveOriginalState:function(){const n=this.binding,e=this.buffer,t=this.valueSize,i=t*this._origIndex;n.getValue(e,i);for(let r=t,s=i;r!==s;++r)e[r]=e[i+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)},_setAdditiveIdentityNumeric:function(){const n=this._addIndex*this.valueSize,e=n+this.valueSize;for(let t=n;t<e;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const n=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[e+t]=this.buffer[n+t]},_select:function(n,e,t,i,r){if(i>=.5)for(let s=0;s!==r;++s)n[e+s]=n[t+s]},_slerp:function(n,e,t,i){en.slerpFlat(n,e,n,e,n,t,i)},_slerpAdditive:function(n,e,t,i,r){const s=this._workIndex*r;en.multiplyQuaternionsFlat(n,s,n,e,n,t),en.slerpFlat(n,e,n,e,n,s,i)},_lerp:function(n,e,t,i,r){const s=1-i;for(let o=0;o!==r;++o){const a=e+o;n[a]=n[a]*s+n[t+o]*i}},_lerpAdditive:function(n,e,t,i,r){for(let s=0;s!==r;++s){const o=e+s;n[o]=n[o]+n[t+s]*i}}});const y_="\\[\\]\\.:\\/",pB=new RegExp("["+y_+"]","g"),__="[^"+y_+"]",mB="[^"+y_.replace("\\.","")+"]",gB=/((?:WC+[\/:])*)/.source.replace("WC",__),vB=/(WCOD+)?/.source.replace("WCOD",mB),yB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",__),_B=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",__),xB=new RegExp("^"+gB+vB+yB+_B+"$"),bB=["material","materials","bones"];function fA(n,e,t){const i=t||an.parseTrackName(e);this._targetGroup=n,this._bindings=n.subscribe_(e,i)}Object.assign(fA.prototype,{getValue:function(n,e){this.bind();const t=this._targetGroup.nCachedObjects_,i=this._bindings[t];i!==void 0&&i.getValue(n,e)},setValue:function(n,e){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].setValue(n,e)},bind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].bind()},unbind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].unbind()}});function an(n,e,t){this.path=e,this.parsedPath=t||an.parseTrackName(e),this.node=an.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n}Object.assign(an,{Composite:fA,create:function(n,e,t){return n&&n.isAnimationObjectGroup?new an.Composite(n,e,t):new an(n,e,t)},sanitizeNodeName:function(n){return n.replace(/\s/g,"_").replace(pB,"")},parseTrackName:function(n){const e=xB.exec(n);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const t={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=t.nodeName&&t.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=t.nodeName.substring(i+1);bB.indexOf(r)!==-1&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=r)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return t},findNode:function(n,e){if(!e||e===""||e==="."||e===-1||e===n.name||e===n.uuid)return n;if(n.skeleton){const t=n.skeleton.getBoneByName(e);if(t!==void 0)return t}if(n.children){const t=function(r){for(let s=0;s<r.length;s++){const o=r[s];if(o.name===e||o.uuid===e)return o;const a=t(o.children);if(a)return a}return null},i=t(n.children);if(i)return i}return null}});Object.assign(an.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let n=this.node;const e=this.parsedPath,t=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(n||(n=an.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){let c=e.objectIndex;switch(t){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let l=0;l<n.length;l++)if(n[l].name===c){c=l;break}break;default:if(n[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[t]}if(c!==void 0){if(n[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[c]}}const s=n[i];if(s===void 0){const c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",n);return}let o=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(n.geometry.isBufferGeometry){if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[r]!==void 0&&(r=n.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else s.fromArray!==void 0&&s.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(an.prototype,{_getValue_unbound:an.prototype.getValue,_setValue_unbound:an.prototype.setValue});function wB(){this.uuid=Ue.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let t=0,i=arguments.length;t!==i;++t)n[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(wB.prototype,{isAnimationObjectGroup:!0,add:function(){const n=this._objects,e=this._indicesByUUID,t=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let o,a=n.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],f=h.uuid;let d=e[f];if(d===void 0){d=a++,e[f]=d,n.push(h);for(let p=0,v=s;p!==v;++p)r[p].push(new an(h,t[p],i[p]))}else if(d<c){o=n[d];const p=--c,v=n[p];e[v.uuid]=d,n[d]=v,e[f]=p,n[p]=h;for(let y=0,g=s;y!==g;++y){const m=r[y],w=m[p];let b=m[d];m[d]=w,b===void 0&&(b=new an(h,t[y],i[y])),m[p]=b}}else n[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c},remove:function(){const n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length;let r=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const a=arguments[s],c=a.uuid,l=e[c];if(l!==void 0&&l>=r){const u=r++,h=n[u];e[h.uuid]=l,n[l]=h,e[c]=u,n[u]=a;for(let f=0,d=i;f!==d;++f){const p=t[f],v=p[u],y=p[l];p[l]=v,p[u]=y}}}this.nCachedObjects_=r},uncache:function(){const n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length;let r=this.nCachedObjects_,s=n.length;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],l=c.uuid,u=e[l];if(u!==void 0)if(delete e[l],u<r){const h=--r,f=n[h],d=--s,p=n[d];e[f.uuid]=u,n[u]=f,e[p.uuid]=h,n[h]=p,n.pop();for(let v=0,y=i;v!==y;++v){const g=t[v],m=g[h],w=g[d];g[u]=m,g[h]=w,g.pop()}}else{const h=--s,f=n[h];h>0&&(e[f.uuid]=u),n[u]=f,n.pop();for(let d=0,p=i;d!==p;++d){const v=t[d];v[u]=v[h],v.pop()}}}this.nCachedObjects_=r},subscribe_:function(n,e){const t=this._bindingsIndicesByPath;let i=t[n];const r=this._bindings;if(i!==void 0)return r[i];const s=this._paths,o=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,t[n]=i,s.push(n),o.push(e),r.push(u);for(let h=l,f=a.length;h!==f;++h){const d=a[h];u[h]=new an(d,n,e)}return u},unsubscribe_:function(n){const e=this._bindingsIndicesByPath,t=e[n];if(t!==void 0){const i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o],c=n[o];e[c]=t,s[t]=a,s.pop(),r[t]=r[o],r.pop(),i[t]=i[o],i.pop()}}});let MB=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:Cc,endingEnd:Cc};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=WD,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;if(c<0||i===0)return;this._startTime=null,t=i*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case zT:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);break;case p_:default:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===$D;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===VD){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Lc,r.endingEnd=Lc):(e?r.endingStart=this.zeroSlopeAtStart?Lc:Cc:r.endingStart=hp,t?r.endingEnd=this.zeroSlopeAtEnd?Lc:Cc:r.endingEnd=hp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}};function Rh(n){this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}Rh.prototype=Object.assign(Object.create(fr.prototype),{constructor:Rh,_bindAction:function(n,e){const t=n._localRoot||this._root,i=n._clip.tracks,r=i.length,s=n._propertyBindings,o=n._interpolants,a=t.uuid,c=this._bindingsByRootAndName;let l=c[a];l===void 0&&(l={},c[a]=l);for(let u=0;u!==r;++u){const h=i[u],f=h.name;let d=l[f];if(d!==void 0)s[u]=d;else{if(d=s[u],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,a,f));continue}const p=e&&e._propertyBindings[u].binding.parsedPath;d=new hA(an.create(t,f,p),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,f),s[u]=d}o[u].resultBuffer=d.buffer}},_activateAction:function(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const t=(n._localRoot||this._root).uuid,i=n._clip.uuid,r=this._actionsByClip[i];this._bindAction(n,r&&r.knownActions[0]),this._addInactiveAction(n,i,t)}const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(n)}},_deactivateAction:function(n){if(this._isActiveAction(n)){const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(n)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}},_isActiveAction:function(n){const e=n._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(n,e,t){const i=this._actions,r=this._actionsByClip;let s=r[e];if(s===void 0)s={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,r[e]=s;else{const o=s.knownActions;n._byClipCacheIndex=o.length,o.push(n)}n._cacheIndex=i.length,i.push(n),s.actionByRoot[t]=n},_removeInactiveAction:function(n){const e=this._actions,t=e[e.length-1],i=n._cacheIndex;t._cacheIndex=i,e[i]=t,e.pop(),n._cacheIndex=null;const r=n._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,c=a[a.length-1],l=n._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),n._byClipCacheIndex=null;const u=o.actionByRoot,h=(n._localRoot||this._root).uuid;delete u[h],a.length===0&&delete s[r],this._removeInactiveBindingsForAction(n)},_removeInactiveBindingsForAction:function(n){const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(n){const e=this._actions,t=n._cacheIndex,i=this._nActiveActions++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackAction:function(n){const e=this._actions,t=n._cacheIndex,i=--this._nActiveActions,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_addInactiveBinding:function(n,e,t){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];s===void 0&&(s={},i[e]=s),s[t]=n,n._cacheIndex=r.length,r.push(n)},_removeInactiveBinding:function(n){const e=this._bindings,t=n.binding,i=t.rootNode.uuid,r=t.path,s=this._bindingsByRootAndName,o=s[i],a=e[e.length-1],c=n._cacheIndex;a._cacheIndex=c,e[c]=a,e.pop(),delete o[r],Object.keys(o).length===0&&delete s[i]},_lendBinding:function(n){const e=this._bindings,t=n._cacheIndex,i=this._nActiveBindings++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackBinding:function(n){const e=this._bindings,t=n._cacheIndex,i=--this._nActiveBindings,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_lendControlInterpolant:function(){const n=this._controlInterpolants,e=this._nActiveControlInterpolants++;let t=n[e];return t===void 0&&(t=new gp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),t.__cacheIndex=e,n[e]=t),t},_takeBackControlInterpolant:function(n){const e=this._controlInterpolants,t=n.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];n.__cacheIndex=i,e[i]=n,r.__cacheIndex=t,e[t]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(n,e,t){const i=e||this._root,r=i.uuid;let s=typeof n=="string"?bi.findByName(i,n):n;const o=s!==null?s.uuid:n,a=this._actionsByClip[o];let c=null;if(t===void 0&&(s!==null?t=s.blendMode:t=p_),a!==void 0){const u=a.actionByRoot[r];if(u!==void 0&&u.blendMode===t)return u;c=a.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const l=new MB(this,s,e,t);return this._bindAction(l,c),this._addInactiveAction(l,o,r),l},existingAction:function(n,e){const t=e||this._root,i=t.uuid,r=typeof n=="string"?bi.findByName(t,n):n,s=r?r.uuid:n,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null},stopAllAction:function(){const n=this._actions,e=this._nActiveActions;for(let t=e-1;t>=0;--t)n[t].stop();return this},update:function(n){n*=this.timeScale;const e=this._actions,t=this._nActiveActions,i=this.time+=n,r=Math.sign(n),s=this._accuIndex^=1;for(let c=0;c!==t;++c)e[c]._update(i,n,r,s);const o=this._bindings,a=this._nActiveBindings;for(let c=0;c!==a;++c)o[c].apply(s);return this},setTime:function(n){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(n)},getRoot:function(){return this._root},uncacheClip:function(n){const e=this._actions,t=n.uuid,i=this._actionsByClip,r=i[t];if(r!==void 0){const s=r.knownActions;for(let o=0,a=s.length;o!==a;++o){const c=s[o];this._deactivateAction(c);const l=c._cacheIndex,u=e[e.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,e[l]=u,e.pop(),this._removeInactiveBindingsForAction(c)}delete i[t]}},uncacheRoot:function(n){const e=n.uuid,t=this._actionsByClip;for(const s in t){const o=t[s].actionByRoot,a=o[e];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,r=i[e];if(r!==void 0)for(const s in r){const o=r[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(n,e){const t=this.existingAction(n,e);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}});function o1(n,e,t){Mi.call(this,n,e),this.meshPerAttribute=t||1}o1.prototype=Object.assign(Object.create(Mi.prototype),{constructor:o1,isInstancedInterleavedBuffer:!0,copy:function(n){return Mi.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},clone:function(n){const e=Mi.prototype.clone.call(this,n);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(n){const e=Mi.prototype.toJSON.call(this,n);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function dA(n,e,t,i,r){this.buffer=n,this.type=e,this.itemSize=t,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(dA.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(dA.prototype,{isGLBufferAttribute:!0,setBuffer:function(n){return this.buffer=n,this},setType:function(n,e){return this.type=n,this.elementSize=e,this},setItemSize:function(n){return this.itemSize=n,this},setCount:function(n){return this.count=n,this}});function x_(n,e,t,i){this.ray=new Ra(n,e),this.near=t||0,this.far=i||1/0,this.camera=null,this.layers=new GT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function a1(n,e){return n.distance-e.distance}function P0(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)P0(r[s],e,t,!0)}}Object.assign(x_.prototype,{set:function(n,e){this.ray.set(n,e)},setFromCamera:function(n,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(n,e,t){const i=t||[];return P0(n,this,i,e),i.sort(a1),i},intersectObjects:function(n,e,t){const i=t||[];if(Array.isArray(n)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,s=n.length;r<s;r++)P0(n[r],this,i,e);return i.sort(a1),i}});class c1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ue.clamp(t/this.radius,-1,1))),this}}const l1=new Te;class SB{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new Te(1/0,1/0),this.max=t!==void 0?t:new Te(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=l1.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Te),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Te),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Te),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Te),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return l1.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function _p(n){Ne.call(this),this.material=n,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}_p.prototype=Object.create(Ne.prototype);_p.prototype.constructor=_p;_p.prototype.isImmediateRenderObject=!0;const Vs=new te,Jf=new Oe,Mg=new Oe;let EB=class extends ya{constructor(e){const t=pA(e),i=new Ke,r=[],s=[],o=new Fe(0,0,1),a=new Fe(0,1,0);for(let l=0;l<t.length;l++){const u=t[l];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new We(r,3)),i.setAttribute("color",new We(s,3));const c=new Zt({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Mg.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Jf.multiplyMatrices(Mg,a.matrixWorld),Vs.setFromMatrixPosition(Jf),r.setXYZ(o,Vs.x,Vs.y,Vs.z),Jf.multiplyMatrices(Mg,a.parent.matrixWorld),Vs.setFromMatrixPosition(Jf),r.setXYZ(o+1,Vs.x,Vs.y,Vs.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}};function pA(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,pA(n.children[t]));return e}let b_=class extends ya{constructor(e=10,t=10,i=4473924,r=8947848){i=new Fe(i),r=new Fe(r);const s=t/2,o=e/t,a=e/2,c=[],l=[];for(let f=0,d=0,p=-a;f<=t;f++,p+=o){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);const v=f===s?i:r;v.toArray(l,d),d+=3,v.toArray(l,d),d+=3,v.toArray(l,d),d+=3,v.toArray(l,d),d+=3}const u=new Ke;u.setAttribute("position",new We(c,3)),u.setAttribute("color",new We(l,3));const h=new Zt({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}};class TB extends ya{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Ke;r.setAttribute("position",new We(t,3)),r.setAttribute("color",new We(i,3));const s=new Zt({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}}const AB=new Float32Array(1);new Int32Array(AB.buffer);const CB=2;He.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(He.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Object.assign(co.prototype,{createPointsGeometry:function(n){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(n);return this.createGeometry(e)},createSpacedPointsGeometry:function(n){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(n);return this.createGeometry(e)},createGeometry:function(n){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new An;for(let t=0,i=n.length;t<i;t++){const r=n[t];e.vertices.push(new te(r.x,r.y,r.z||0))}return e}});Object.assign(Pr.prototype,{fromPoints:function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)}});Object.create(Xn.prototype);Object.create(Xn.prototype);function mA(n){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Xn.call(this,n),this.type="catmullrom"}mA.prototype=Object.create(Xn.prototype);Object.assign(mA.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});b_.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};EB.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(xt.prototype,{extractUrlBase:function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),xs.extractUrlBase(n)}});xt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(SB.prototype,{center:function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},size:function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)}});Object.assign(Cs.prototype,{center:function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionSphere:function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},size:function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)}});Object.assign(Ls.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});sm.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Object.assign(Ue,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(n){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ue.floorPowerOfTwo(n)},nextPowerOfTwo:function(n){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ue.ceilPowerOfTwo(n)}});Object.assign(Wn.prototype,{flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},multiplyVector3:function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});Object.assign(Oe.prototype,{extractPosition:function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new te().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector4:function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},crossVector:function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},getInverse:function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});ys.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Object.assign(en.prototype,{multiplyVector3:function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Object.assign(Ra.prototype,{isIntersectionBox:function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionPlane:function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},isIntersectionSphere:function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)}});Object.assign(Br.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},midpoint:function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},normal:function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},plane:function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)}});Object.assign(Br,{barycoordFromPoint:function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Br.getBarycoord(n,e,t,i,r)},normal:function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Br.getNormal(n,e,t,i)}});Object.assign(fa.prototype,{extractAllPoints:function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},extrude:function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new cA(this,n)},makeGeometry:function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new j4(this,n)}});Object.assign(Te.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(te.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},getScaleFromMatrix:function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},getColumnFromMatrix:function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},applyProjection:function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},fromAttribute:function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(vt.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(An.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(n){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.assign(Ne.prototype,{getChildByName:function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(Ne.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(qe.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(qe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qD},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(p0.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(bh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});xh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(He.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(n){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=n}});lt.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Ut.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Xe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===mh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(mh)}}});Object.assign(Xe.prototype,{setDynamic:function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?mh:rm),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Ke.prototype,{addIndex:function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},addAttribute:function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Xe(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)},addDrawCall:function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},applyMatrix:function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(Ke.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(yp.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(n){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=n}}});Object.defineProperties(x_.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(n){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=n}}});Object.defineProperties(Mi.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===mh},set:function(n){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(n)}}});Object.assign(Mi.prototype,{setDynamic:function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?mh:rm),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(aA.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(cn.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(je.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Fe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===FT}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}}});Object.defineProperties(si.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ms.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(n){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=n}}});Object.defineProperties(qn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Object.assign(jt.prototype,{clearTarget:function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},animate:function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(jt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Ir:Qh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(eA.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(ar.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});il.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};il.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Al.crossOrigin=void 0;Al.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new At;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Al.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new E0;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Al.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Al.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:MI}}));const LB=[{title:"vue 教程",key:"Vue",open:!1},{title:"react 教程",key:"React",open:!1},{title:"three 教程",key:"Three",open:!1,child:[{title:"基础概念",key:"Basics"},{title:"渲染器",key:"Renderer"},{title:"控制器",key:"Controls"},{title:"几何体",key:"Geometry"},{title:"材质",key:"Material"},{title:"网格",key:"Mesh"},{title:"纹理",key:"Map"},{title:"光源",key:"Light"},{title:"动画",key:"Animations"},{title:"粒子",key:"Points"},{title:"曲线"}]},{title:"3D 案例",key:"D",open:!0,child:[{title:"简单的3D构建",key:"Easy3D"},{title:"初阶VR看房案例",key:"VR"},{title:"中阶VR看房案例",key:"VR2"},{title:"时空隧道案例",key:"Space"},{title:"粒子系统案例",key:"Points"},{title:"光源影阴案例",key:"Shadow"},{title:"太阳系案例",key:"SolarSystem"},{title:"模型显示标签案例",key:"Tag"},{title:"恐龙模型",key:"ExternalModel"},{title:"树模型",key:"TreeModel"},{title:"移动的球",key:"MoveBall"},{title:"全景漫游移动",key:"Roam"},{title:"地球飞行轨迹图",key:"FlyLine"},{title:"地球飞行轨迹图2",key:"FlyLine2"},{title:"样条曲线",key:"Curve"},{title:"圆弧曲线",key:"ArcCurve"},{title:"贝塞尔曲线",key:"BesselCurve"},{title:"GeoJson绘制中国地图",key:"ChinaMap"}]}],Io=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},RB={},PB={class:"vue"};function IB(n,e){return tt(),_t("div",PB,"vue")}const DB=Io(RB,[["render",IB]]),FB={},OB={class:"react"};function kB(n,e){return tt(),_t("div",OB,"ract")}const NB=Io(FB,[["render",kB]]);function BB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zB(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var bt={};const UB="Á",HB="á",GB="Ă",VB="ă",WB="∾",$B="∿",qB="∾̳",jB="Â",XB="â",YB="´",ZB="А",JB="а",KB="Æ",QB="æ",ez="⁡",tz="𝔄",nz="𝔞",iz="À",rz="à",sz="ℵ",oz="ℵ",az="Α",cz="α",lz="Ā",uz="ā",hz="⨿",fz="&",dz="&",pz="⩕",mz="⩓",gz="∧",vz="⩜",yz="⩘",_z="⩚",xz="∠",bz="⦤",wz="∠",Mz="⦨",Sz="⦩",Ez="⦪",Tz="⦫",Az="⦬",Cz="⦭",Lz="⦮",Rz="⦯",Pz="∡",Iz="∟",Dz="⊾",Fz="⦝",Oz="∢",kz="Å",Nz="⍼",Bz="Ą",zz="ą",Uz="𝔸",Hz="𝕒",Gz="⩯",Vz="≈",Wz="⩰",$z="≊",qz="≋",jz="'",Xz="⁡",Yz="≈",Zz="≊",Jz="Å",Kz="å",Qz="𝒜",e5="𝒶",t5="≔",n5="*",i5="≈",r5="≍",s5="Ã",o5="ã",a5="Ä",c5="ä",l5="∳",u5="⨑",h5="≌",f5="϶",d5="‵",p5="∽",m5="⋍",g5="∖",v5="⫧",y5="⊽",_5="⌅",x5="⌆",b5="⌅",w5="⎵",M5="⎶",S5="≌",E5="Б",T5="б",A5="„",C5="∵",L5="∵",R5="∵",P5="⦰",I5="϶",D5="ℬ",F5="ℬ",O5="Β",k5="β",N5="ℶ",B5="≬",z5="𝔅",U5="𝔟",H5="⋂",G5="◯",V5="⋃",W5="⨀",$5="⨁",q5="⨂",j5="⨆",X5="★",Y5="▽",Z5="△",J5="⨄",K5="⋁",Q5="⋀",eU="⤍",tU="⧫",nU="▪",iU="▴",rU="▾",sU="◂",oU="▸",aU="␣",cU="▒",lU="░",uU="▓",hU="█",fU="=⃥",dU="≡⃥",pU="⫭",mU="⌐",gU="𝔹",vU="𝕓",yU="⊥",_U="⊥",xU="⋈",bU="⧉",wU="┐",MU="╕",SU="╖",EU="╗",TU="┌",AU="╒",CU="╓",LU="╔",RU="─",PU="═",IU="┬",DU="╤",FU="╥",OU="╦",kU="┴",NU="╧",BU="╨",zU="╩",UU="⊟",HU="⊞",GU="⊠",VU="┘",WU="╛",$U="╜",qU="╝",jU="└",XU="╘",YU="╙",ZU="╚",JU="│",KU="║",QU="┼",eH="╪",tH="╫",nH="╬",iH="┤",rH="╡",sH="╢",oH="╣",aH="├",cH="╞",lH="╟",uH="╠",hH="‵",fH="˘",dH="˘",pH="¦",mH="𝒷",gH="ℬ",vH="⁏",yH="∽",_H="⋍",xH="⧅",bH="\\",wH="⟈",MH="•",SH="•",EH="≎",TH="⪮",AH="≏",CH="≎",LH="≏",RH="Ć",PH="ć",IH="⩄",DH="⩉",FH="⩋",OH="∩",kH="⋒",NH="⩇",BH="⩀",zH="ⅅ",UH="∩︀",HH="⁁",GH="ˇ",VH="ℭ",WH="⩍",$H="Č",qH="č",jH="Ç",XH="ç",YH="Ĉ",ZH="ĉ",JH="∰",KH="⩌",QH="⩐",e6="Ċ",t6="ċ",n6="¸",i6="¸",r6="⦲",s6="¢",o6="·",a6="·",c6="𝔠",l6="ℭ",u6="Ч",h6="ч",f6="✓",d6="✓",p6="Χ",m6="χ",g6="ˆ",v6="≗",y6="↺",_6="↻",x6="⊛",b6="⊚",w6="⊝",M6="⊙",S6="®",E6="Ⓢ",T6="⊖",A6="⊕",C6="⊗",L6="○",R6="⧃",P6="≗",I6="⨐",D6="⫯",F6="⧂",O6="∲",k6="”",N6="’",B6="♣",z6="♣",U6=":",H6="∷",G6="⩴",V6="≔",W6="≔",$6=",",q6="@",j6="∁",X6="∘",Y6="∁",Z6="ℂ",J6="≅",K6="⩭",Q6="≡",eG="∮",tG="∯",nG="∮",iG="𝕔",rG="ℂ",sG="∐",oG="∐",aG="©",cG="©",lG="℗",uG="∳",hG="↵",fG="✗",dG="⨯",pG="𝒞",mG="𝒸",gG="⫏",vG="⫑",yG="⫐",_G="⫒",xG="⋯",bG="⤸",wG="⤵",MG="⋞",SG="⋟",EG="↶",TG="⤽",AG="⩈",CG="⩆",LG="≍",RG="∪",PG="⋓",IG="⩊",DG="⊍",FG="⩅",OG="∪︀",kG="↷",NG="⤼",BG="⋞",zG="⋟",UG="⋎",HG="⋏",GG="¤",VG="↶",WG="↷",$G="⋎",qG="⋏",jG="∲",XG="∱",YG="⌭",ZG="†",JG="‡",KG="ℸ",QG="↓",eV="↡",tV="⇓",nV="‐",iV="⫤",rV="⊣",sV="⤏",oV="˝",aV="Ď",cV="ď",lV="Д",uV="д",hV="‡",fV="⇊",dV="ⅅ",pV="ⅆ",mV="⤑",gV="⩷",vV="°",yV="∇",_V="Δ",xV="δ",bV="⦱",wV="⥿",MV="𝔇",SV="𝔡",EV="⥥",TV="⇃",AV="⇂",CV="´",LV="˙",RV="˝",PV="`",IV="˜",DV="⋄",FV="⋄",OV="⋄",kV="♦",NV="♦",BV="¨",zV="ⅆ",UV="ϝ",HV="⋲",GV="÷",VV="÷",WV="⋇",$V="⋇",qV="Ђ",jV="ђ",XV="⌞",YV="⌍",ZV="$",JV="𝔻",KV="𝕕",QV="¨",e8="˙",t8="⃜",n8="≐",i8="≑",r8="≐",s8="∸",o8="∔",a8="⊡",c8="⌆",l8="∯",u8="¨",h8="⇓",f8="⇐",d8="⇔",p8="⫤",m8="⟸",g8="⟺",v8="⟹",y8="⇒",_8="⊨",x8="⇑",b8="⇕",w8="∥",M8="⤓",S8="↓",E8="↓",T8="⇓",A8="⇵",C8="̑",L8="⇊",R8="⇃",P8="⇂",I8="⥐",D8="⥞",F8="⥖",O8="↽",k8="⥟",N8="⥗",B8="⇁",z8="↧",U8="⊤",H8="⤐",G8="⌟",V8="⌌",W8="𝒟",$8="𝒹",q8="Ѕ",j8="ѕ",X8="⧶",Y8="Đ",Z8="đ",J8="⋱",K8="▿",Q8="▾",eW="⇵",tW="⥯",nW="⦦",iW="Џ",rW="џ",sW="⟿",oW="É",aW="é",cW="⩮",lW="Ě",uW="ě",hW="Ê",fW="ê",dW="≖",pW="≕",mW="Э",gW="э",vW="⩷",yW="Ė",_W="ė",xW="≑",bW="ⅇ",wW="≒",MW="𝔈",SW="𝔢",EW="⪚",TW="È",AW="è",CW="⪖",LW="⪘",RW="⪙",PW="∈",IW="⏧",DW="ℓ",FW="⪕",OW="⪗",kW="Ē",NW="ē",BW="∅",zW="∅",UW="◻",HW="∅",GW="▫",VW=" ",WW=" ",$W=" ",qW="Ŋ",jW="ŋ",XW=" ",YW="Ę",ZW="ę",JW="𝔼",KW="𝕖",QW="⋕",e7="⧣",t7="⩱",n7="ε",i7="Ε",r7="ε",s7="ϵ",o7="≖",a7="≕",c7="≂",l7="⪖",u7="⪕",h7="⩵",f7="=",d7="≂",p7="≟",m7="⇌",g7="≡",v7="⩸",y7="⧥",_7="⥱",x7="≓",b7="ℯ",w7="ℰ",M7="≐",S7="⩳",E7="≂",T7="Η",A7="η",C7="Ð",L7="ð",R7="Ë",P7="ë",I7="€",D7="!",F7="∃",O7="∃",k7="ℰ",N7="ⅇ",B7="ⅇ",z7="≒",U7="Ф",H7="ф",G7="♀",V7="ﬃ",W7="ﬀ",$7="ﬄ",q7="𝔉",j7="𝔣",X7="ﬁ",Y7="◼",Z7="▪",J7="fj",K7="♭",Q7="ﬂ",e9="▱",t9="ƒ",n9="𝔽",i9="𝕗",r9="∀",s9="∀",o9="⋔",a9="⫙",c9="ℱ",l9="⨍",u9="½",h9="⅓",f9="¼",d9="⅕",p9="⅙",m9="⅛",g9="⅔",v9="⅖",y9="¾",_9="⅗",x9="⅜",b9="⅘",w9="⅚",M9="⅝",S9="⅞",E9="⁄",T9="⌢",A9="𝒻",C9="ℱ",L9="ǵ",R9="Γ",P9="γ",I9="Ϝ",D9="ϝ",F9="⪆",O9="Ğ",k9="ğ",N9="Ģ",B9="Ĝ",z9="ĝ",U9="Г",H9="г",G9="Ġ",V9="ġ",W9="≥",$9="≧",q9="⪌",j9="⋛",X9="≥",Y9="≧",Z9="⩾",J9="⪩",K9="⩾",Q9="⪀",e$="⪂",t$="⪄",n$="⋛︀",i$="⪔",r$="𝔊",s$="𝔤",o$="≫",a$="⋙",c$="⋙",l$="ℷ",u$="Ѓ",h$="ѓ",f$="⪥",d$="≷",p$="⪒",m$="⪤",g$="⪊",v$="⪊",y$="⪈",_$="≩",x$="⪈",b$="≩",w$="⋧",M$="𝔾",S$="𝕘",E$="`",T$="≥",A$="⋛",C$="≧",L$="⪢",R$="≷",P$="⩾",I$="≳",D$="𝒢",F$="ℊ",O$="≳",k$="⪎",N$="⪐",B$="⪧",z$="⩺",U$=">",H$=">",G$="≫",V$="⋗",W$="⦕",$$="⩼",q$="⪆",j$="⥸",X$="⋗",Y$="⋛",Z$="⪌",J$="≷",K$="≳",Q$="≩︀",eq="≩︀",tq="ˇ",nq=" ",iq="½",rq="ℋ",sq="Ъ",oq="ъ",aq="⥈",cq="↔",lq="⇔",uq="↭",hq="^",fq="ℏ",dq="Ĥ",pq="ĥ",mq="♥",gq="♥",vq="…",yq="⊹",_q="𝔥",xq="ℌ",bq="ℋ",wq="⤥",Mq="⤦",Sq="⇿",Eq="∻",Tq="↩",Aq="↪",Cq="𝕙",Lq="ℍ",Rq="―",Pq="─",Iq="𝒽",Dq="ℋ",Fq="ℏ",Oq="Ħ",kq="ħ",Nq="≎",Bq="≏",zq="⁃",Uq="‐",Hq="Í",Gq="í",Vq="⁣",Wq="Î",$q="î",qq="И",jq="и",Xq="İ",Yq="Е",Zq="е",Jq="¡",Kq="⇔",Qq="𝔦",ej="ℑ",tj="Ì",nj="ì",ij="ⅈ",rj="⨌",sj="∭",oj="⧜",aj="℩",cj="Ĳ",lj="ĳ",uj="Ī",hj="ī",fj="ℑ",dj="ⅈ",pj="ℐ",mj="ℑ",gj="ı",vj="ℑ",yj="⊷",_j="Ƶ",xj="⇒",bj="℅",wj="∞",Mj="⧝",Sj="ı",Ej="⊺",Tj="∫",Aj="∬",Cj="ℤ",Lj="∫",Rj="⊺",Pj="⋂",Ij="⨗",Dj="⨼",Fj="⁣",Oj="⁢",kj="Ё",Nj="ё",Bj="Į",zj="į",Uj="𝕀",Hj="𝕚",Gj="Ι",Vj="ι",Wj="⨼",$j="¿",qj="𝒾",jj="ℐ",Xj="∈",Yj="⋵",Zj="⋹",Jj="⋴",Kj="⋳",Qj="∈",eX="⁢",tX="Ĩ",nX="ĩ",iX="І",rX="і",sX="Ï",oX="ï",aX="Ĵ",cX="ĵ",lX="Й",uX="й",hX="𝔍",fX="𝔧",dX="ȷ",pX="𝕁",mX="𝕛",gX="𝒥",vX="𝒿",yX="Ј",_X="ј",xX="Є",bX="є",wX="Κ",MX="κ",SX="ϰ",EX="Ķ",TX="ķ",AX="К",CX="к",LX="𝔎",RX="𝔨",PX="ĸ",IX="Х",DX="х",FX="Ќ",OX="ќ",kX="𝕂",NX="𝕜",BX="𝒦",zX="𝓀",UX="⇚",HX="Ĺ",GX="ĺ",VX="⦴",WX="ℒ",$X="Λ",qX="λ",jX="⟨",XX="⟪",YX="⦑",ZX="⟨",JX="⪅",KX="ℒ",QX="«",eY="⇤",tY="⤟",nY="←",iY="↞",rY="⇐",sY="⤝",oY="↩",aY="↫",cY="⤹",lY="⥳",uY="↢",hY="⤙",fY="⤛",dY="⪫",pY="⪭",mY="⪭︀",gY="⤌",vY="⤎",yY="❲",_Y="{",xY="[",bY="⦋",wY="⦏",MY="⦍",SY="Ľ",EY="ľ",TY="Ļ",AY="ļ",CY="⌈",LY="{",RY="Л",PY="л",IY="⤶",DY="“",FY="„",OY="⥧",kY="⥋",NY="↲",BY="≤",zY="≦",UY="⟨",HY="⇤",GY="←",VY="←",WY="⇐",$Y="⇆",qY="↢",jY="⌈",XY="⟦",YY="⥡",ZY="⥙",JY="⇃",KY="⌊",QY="↽",eZ="↼",tZ="⇇",nZ="↔",iZ="↔",rZ="⇔",sZ="⇆",oZ="⇋",aZ="↭",cZ="⥎",lZ="↤",uZ="⊣",hZ="⥚",fZ="⋋",dZ="⧏",pZ="⊲",mZ="⊴",gZ="⥑",vZ="⥠",yZ="⥘",_Z="↿",xZ="⥒",bZ="↼",wZ="⪋",MZ="⋚",SZ="≤",EZ="≦",TZ="⩽",AZ="⪨",CZ="⩽",LZ="⩿",RZ="⪁",PZ="⪃",IZ="⋚︀",DZ="⪓",FZ="⪅",OZ="⋖",kZ="⋚",NZ="⪋",BZ="⋚",zZ="≦",UZ="≶",HZ="≶",GZ="⪡",VZ="≲",WZ="⩽",$Z="≲",qZ="⥼",jZ="⌊",XZ="𝔏",YZ="𝔩",ZZ="≶",JZ="⪑",KZ="⥢",QZ="↽",eJ="↼",tJ="⥪",nJ="▄",iJ="Љ",rJ="љ",sJ="⇇",oJ="≪",aJ="⋘",cJ="⌞",lJ="⇚",uJ="⥫",hJ="◺",fJ="Ŀ",dJ="ŀ",pJ="⎰",mJ="⎰",gJ="⪉",vJ="⪉",yJ="⪇",_J="≨",xJ="⪇",bJ="≨",wJ="⋦",MJ="⟬",SJ="⇽",EJ="⟦",TJ="⟵",AJ="⟵",CJ="⟸",LJ="⟷",RJ="⟷",PJ="⟺",IJ="⟼",DJ="⟶",FJ="⟶",OJ="⟹",kJ="↫",NJ="↬",BJ="⦅",zJ="𝕃",UJ="𝕝",HJ="⨭",GJ="⨴",VJ="∗",WJ="_",$J="↙",qJ="↘",jJ="◊",XJ="◊",YJ="⧫",ZJ="(",JJ="⦓",KJ="⇆",QJ="⌟",eK="⇋",tK="⥭",nK="‎",iK="⊿",rK="‹",sK="𝓁",oK="ℒ",aK="↰",cK="↰",lK="≲",uK="⪍",hK="⪏",fK="[",dK="‘",pK="‚",mK="Ł",gK="ł",vK="⪦",yK="⩹",_K="<",xK="<",bK="≪",wK="⋖",MK="⋋",SK="⋉",EK="⥶",TK="⩻",AK="◃",CK="⊴",LK="◂",RK="⦖",PK="⥊",IK="⥦",DK="≨︀",FK="≨︀",OK="¯",kK="♂",NK="✠",BK="✠",zK="↦",UK="↦",HK="↧",GK="↤",VK="↥",WK="▮",$K="⨩",qK="М",jK="м",XK="—",YK="∺",ZK="∡",JK=" ",KK="ℳ",QK="𝔐",eQ="𝔪",tQ="℧",nQ="µ",iQ="*",rQ="⫰",sQ="∣",oQ="·",aQ="⊟",cQ="−",lQ="∸",uQ="⨪",hQ="∓",fQ="⫛",dQ="…",pQ="∓",mQ="⊧",gQ="𝕄",vQ="𝕞",yQ="∓",_Q="𝓂",xQ="ℳ",bQ="∾",wQ="Μ",MQ="μ",SQ="⊸",EQ="⊸",TQ="∇",AQ="Ń",CQ="ń",LQ="∠⃒",RQ="≉",PQ="⩰̸",IQ="≋̸",DQ="ŉ",FQ="≉",OQ="♮",kQ="ℕ",NQ="♮",BQ=" ",zQ="≎̸",UQ="≏̸",HQ="⩃",GQ="Ň",VQ="ň",WQ="Ņ",$Q="ņ",qQ="≇",jQ="⩭̸",XQ="⩂",YQ="Н",ZQ="н",JQ="–",KQ="⤤",QQ="↗",eee="⇗",tee="↗",nee="≠",iee="≐̸",ree="​",see="​",oee="​",aee="​",cee="≢",lee="⤨",uee="≂̸",hee="≫",fee="≪",dee=`
`,pee="∄",mee="∄",gee="𝔑",vee="𝔫",yee="≧̸",_ee="≱",xee="≱",bee="≧̸",wee="⩾̸",Mee="⩾̸",See="⋙̸",Eee="≵",Tee="≫⃒",Aee="≯",Cee="≯",Lee="≫̸",Ree="↮",Pee="⇎",Iee="⫲",Dee="∋",Fee="⋼",Oee="⋺",kee="∋",Nee="Њ",Bee="њ",zee="↚",Uee="⇍",Hee="‥",Gee="≦̸",Vee="≰",Wee="↚",$ee="⇍",qee="↮",jee="⇎",Xee="≰",Yee="≦̸",Zee="⩽̸",Jee="⩽̸",Kee="≮",Qee="⋘̸",ete="≴",tte="≪⃒",nte="≮",ite="⋪",rte="⋬",ste="≪̸",ote="∤",ate="⁠",cte=" ",lte="𝕟",ute="ℕ",hte="⫬",fte="¬",dte="≢",pte="≭",mte="∦",gte="∉",vte="≠",yte="≂̸",_te="∄",xte="≯",bte="≱",wte="≧̸",Mte="≫̸",Ste="≹",Ete="⩾̸",Tte="≵",Ate="≎̸",Cte="≏̸",Lte="∉",Rte="⋵̸",Pte="⋹̸",Ite="∉",Dte="⋷",Fte="⋶",Ote="⧏̸",kte="⋪",Nte="⋬",Bte="≮",zte="≰",Ute="≸",Hte="≪̸",Gte="⩽̸",Vte="≴",Wte="⪢̸",$te="⪡̸",qte="∌",jte="∌",Xte="⋾",Yte="⋽",Zte="⊀",Jte="⪯̸",Kte="⋠",Qte="∌",ene="⧐̸",tne="⋫",nne="⋭",ine="⊏̸",rne="⋢",sne="⊐̸",one="⋣",ane="⊂⃒",cne="⊈",lne="⊁",une="⪰̸",hne="⋡",fne="≿̸",dne="⊃⃒",pne="⊉",mne="≁",gne="≄",vne="≇",yne="≉",_ne="∤",xne="∦",bne="∦",wne="⫽⃥",Mne="∂̸",Sne="⨔",Ene="⊀",Tne="⋠",Ane="⊀",Cne="⪯̸",Lne="⪯̸",Rne="⤳̸",Pne="↛",Ine="⇏",Dne="↝̸",Fne="↛",One="⇏",kne="⋫",Nne="⋭",Bne="⊁",zne="⋡",Une="⪰̸",Hne="𝒩",Gne="𝓃",Vne="∤",Wne="∦",$ne="≁",qne="≄",jne="≄",Xne="∤",Yne="∦",Zne="⋢",Jne="⋣",Kne="⊄",Qne="⫅̸",eie="⊈",tie="⊂⃒",nie="⊈",iie="⫅̸",rie="⊁",sie="⪰̸",oie="⊅",aie="⫆̸",cie="⊉",lie="⊃⃒",uie="⊉",hie="⫆̸",fie="≹",die="Ñ",pie="ñ",mie="≸",gie="⋪",vie="⋬",yie="⋫",_ie="⋭",xie="Ν",bie="ν",wie="#",Mie="№",Sie=" ",Eie="≍⃒",Tie="⊬",Aie="⊭",Cie="⊮",Lie="⊯",Rie="≥⃒",Pie=">⃒",Iie="⤄",Die="⧞",Fie="⤂",Oie="≤⃒",kie="<⃒",Nie="⊴⃒",Bie="⤃",zie="⊵⃒",Uie="∼⃒",Hie="⤣",Gie="↖",Vie="⇖",Wie="↖",$ie="⤧",qie="Ó",jie="ó",Xie="⊛",Yie="Ô",Zie="ô",Jie="⊚",Kie="О",Qie="о",ere="⊝",tre="Ő",nre="ő",ire="⨸",rre="⊙",sre="⦼",ore="Œ",are="œ",cre="⦿",lre="𝔒",ure="𝔬",hre="˛",fre="Ò",dre="ò",pre="⧁",mre="⦵",gre="Ω",vre="∮",yre="↺",_re="⦾",xre="⦻",bre="‾",wre="⧀",Mre="Ō",Sre="ō",Ere="Ω",Tre="ω",Are="Ο",Cre="ο",Lre="⦶",Rre="⊖",Pre="𝕆",Ire="𝕠",Dre="⦷",Fre="“",Ore="‘",kre="⦹",Nre="⊕",Bre="↻",zre="⩔",Ure="∨",Hre="⩝",Gre="ℴ",Vre="ℴ",Wre="ª",$re="º",qre="⊶",jre="⩖",Xre="⩗",Yre="⩛",Zre="Ⓢ",Jre="𝒪",Kre="ℴ",Qre="Ø",ese="ø",tse="⊘",nse="Õ",ise="õ",rse="⨶",sse="⨷",ose="⊗",ase="Ö",cse="ö",lse="⌽",use="‾",hse="⏞",fse="⎴",dse="⏜",pse="¶",mse="∥",gse="∥",vse="⫳",yse="⫽",_se="∂",xse="∂",bse="П",wse="п",Mse="%",Sse=".",Ese="‰",Tse="⊥",Ase="‱",Cse="𝔓",Lse="𝔭",Rse="Φ",Pse="φ",Ise="ϕ",Dse="ℳ",Fse="☎",Ose="Π",kse="π",Nse="⋔",Bse="ϖ",zse="ℏ",Use="ℎ",Hse="ℏ",Gse="⨣",Vse="⊞",Wse="⨢",$se="+",qse="∔",jse="⨥",Xse="⩲",Yse="±",Zse="±",Jse="⨦",Kse="⨧",Qse="±",eoe="ℌ",toe="⨕",noe="𝕡",ioe="ℙ",roe="£",soe="⪷",ooe="⪻",aoe="≺",coe="≼",loe="⪷",uoe="≺",hoe="≼",foe="≺",doe="⪯",poe="≼",moe="≾",goe="⪯",voe="⪹",yoe="⪵",_oe="⋨",xoe="⪯",boe="⪳",woe="≾",Moe="′",Soe="″",Eoe="ℙ",Toe="⪹",Aoe="⪵",Coe="⋨",Loe="∏",Roe="∏",Poe="⌮",Ioe="⌒",Doe="⌓",Foe="∝",Ooe="∝",koe="∷",Noe="∝",Boe="≾",zoe="⊰",Uoe="𝒫",Hoe="𝓅",Goe="Ψ",Voe="ψ",Woe=" ",$oe="𝔔",qoe="𝔮",joe="⨌",Xoe="𝕢",Yoe="ℚ",Zoe="⁗",Joe="𝒬",Koe="𝓆",Qoe="ℍ",eae="⨖",tae="?",nae="≟",iae='"',rae='"',sae="⇛",oae="∽̱",aae="Ŕ",cae="ŕ",lae="√",uae="⦳",hae="⟩",fae="⟫",dae="⦒",pae="⦥",mae="⟩",gae="»",vae="⥵",yae="⇥",_ae="⤠",xae="⤳",bae="→",wae="↠",Mae="⇒",Sae="⤞",Eae="↪",Tae="↬",Aae="⥅",Cae="⥴",Lae="⤖",Rae="↣",Pae="↝",Iae="⤚",Dae="⤜",Fae="∶",Oae="ℚ",kae="⤍",Nae="⤏",Bae="⤐",zae="❳",Uae="}",Hae="]",Gae="⦌",Vae="⦎",Wae="⦐",$ae="Ř",qae="ř",jae="Ŗ",Xae="ŗ",Yae="⌉",Zae="}",Jae="Р",Kae="р",Qae="⤷",ece="⥩",tce="”",nce="”",ice="↳",rce="ℜ",sce="ℛ",oce="ℜ",ace="ℝ",cce="ℜ",lce="▭",uce="®",hce="®",fce="∋",dce="⇋",pce="⥯",mce="⥽",gce="⌋",vce="𝔯",yce="ℜ",_ce="⥤",xce="⇁",bce="⇀",wce="⥬",Mce="Ρ",Sce="ρ",Ece="ϱ",Tce="⟩",Ace="⇥",Cce="→",Lce="→",Rce="⇒",Pce="⇄",Ice="↣",Dce="⌉",Fce="⟧",Oce="⥝",kce="⥕",Nce="⇂",Bce="⌋",zce="⇁",Uce="⇀",Hce="⇄",Gce="⇌",Vce="⇉",Wce="↝",$ce="↦",qce="⊢",jce="⥛",Xce="⋌",Yce="⧐",Zce="⊳",Jce="⊵",Kce="⥏",Qce="⥜",ele="⥔",tle="↾",nle="⥓",ile="⇀",rle="˚",sle="≓",ole="⇄",ale="⇌",cle="‏",lle="⎱",ule="⎱",hle="⫮",fle="⟭",dle="⇾",ple="⟧",mle="⦆",gle="𝕣",vle="ℝ",yle="⨮",_le="⨵",xle="⥰",ble=")",wle="⦔",Mle="⨒",Sle="⇉",Ele="⇛",Tle="›",Ale="𝓇",Cle="ℛ",Lle="↱",Rle="↱",Ple="]",Ile="’",Dle="’",Fle="⋌",Ole="⋊",kle="▹",Nle="⊵",Ble="▸",zle="⧎",Ule="⧴",Hle="⥨",Gle="℞",Vle="Ś",Wle="ś",$le="‚",qle="⪸",jle="Š",Xle="š",Yle="⪼",Zle="≻",Jle="≽",Kle="⪰",Qle="⪴",eue="Ş",tue="ş",nue="Ŝ",iue="ŝ",rue="⪺",sue="⪶",oue="⋩",aue="⨓",cue="≿",lue="С",uue="с",hue="⊡",fue="⋅",due="⩦",pue="⤥",mue="↘",gue="⇘",vue="↘",yue="§",_ue=";",xue="⤩",bue="∖",wue="∖",Mue="✶",Sue="𝔖",Eue="𝔰",Tue="⌢",Aue="♯",Cue="Щ",Lue="щ",Rue="Ш",Pue="ш",Iue="↓",Due="←",Fue="∣",Oue="∥",kue="→",Nue="↑",Bue="­",zue="Σ",Uue="σ",Hue="ς",Gue="ς",Vue="∼",Wue="⩪",$ue="≃",que="≃",jue="⪞",Xue="⪠",Yue="⪝",Zue="⪟",Jue="≆",Kue="⨤",Que="⥲",ehe="←",the="∘",nhe="∖",ihe="⨳",rhe="⧤",she="∣",ohe="⌣",ahe="⪪",che="⪬",lhe="⪬︀",uhe="Ь",hhe="ь",fhe="⌿",dhe="⧄",phe="/",mhe="𝕊",ghe="𝕤",vhe="♠",yhe="♠",_he="∥",xhe="⊓",bhe="⊓︀",whe="⊔",Mhe="⊔︀",She="√",Ehe="⊏",The="⊑",Ahe="⊏",Che="⊑",Lhe="⊐",Rhe="⊒",Phe="⊐",Ihe="⊒",Dhe="□",Fhe="□",Ohe="⊓",khe="⊏",Nhe="⊑",Bhe="⊐",zhe="⊒",Uhe="⊔",Hhe="▪",Ghe="□",Vhe="▪",Whe="→",$he="𝒮",qhe="𝓈",jhe="∖",Xhe="⌣",Yhe="⋆",Zhe="⋆",Jhe="☆",Khe="★",Qhe="ϵ",efe="ϕ",tfe="¯",nfe="⊂",ife="⋐",rfe="⪽",sfe="⫅",ofe="⊆",afe="⫃",cfe="⫁",lfe="⫋",ufe="⊊",hfe="⪿",ffe="⥹",dfe="⊂",pfe="⋐",mfe="⊆",gfe="⫅",vfe="⊆",yfe="⊊",_fe="⫋",xfe="⫇",bfe="⫕",wfe="⫓",Mfe="⪸",Sfe="≻",Efe="≽",Tfe="≻",Afe="⪰",Cfe="≽",Lfe="≿",Rfe="⪰",Pfe="⪺",Ife="⪶",Dfe="⋩",Ffe="≿",Ofe="∋",kfe="∑",Nfe="∑",Bfe="♪",zfe="¹",Ufe="²",Hfe="³",Gfe="⊃",Vfe="⋑",Wfe="⪾",$fe="⫘",qfe="⫆",jfe="⊇",Xfe="⫄",Yfe="⊃",Zfe="⊇",Jfe="⟉",Kfe="⫗",Qfe="⥻",ede="⫂",tde="⫌",nde="⊋",ide="⫀",rde="⊃",sde="⋑",ode="⊇",ade="⫆",cde="⊋",lde="⫌",ude="⫈",hde="⫔",fde="⫖",dde="⤦",pde="↙",mde="⇙",gde="↙",vde="⤪",yde="ß",_de="	",xde="⌖",bde="Τ",wde="τ",Mde="⎴",Sde="Ť",Ede="ť",Tde="Ţ",Ade="ţ",Cde="Т",Lde="т",Rde="⃛",Pde="⌕",Ide="𝔗",Dde="𝔱",Fde="∴",Ode="∴",kde="∴",Nde="Θ",Bde="θ",zde="ϑ",Ude="ϑ",Hde="≈",Gde="∼",Vde="  ",Wde=" ",$de=" ",qde="≈",jde="∼",Xde="Þ",Yde="þ",Zde="˜",Jde="∼",Kde="≃",Qde="≅",epe="≈",tpe="⨱",npe="⊠",ipe="×",rpe="⨰",spe="∭",ope="⤨",ape="⌶",cpe="⫱",lpe="⊤",upe="𝕋",hpe="𝕥",fpe="⫚",dpe="⤩",ppe="‴",mpe="™",gpe="™",vpe="▵",ype="▿",_pe="◃",xpe="⊴",bpe="≜",wpe="▹",Mpe="⊵",Spe="◬",Epe="≜",Tpe="⨺",Ape="⃛",Cpe="⨹",Lpe="⧍",Rpe="⨻",Ppe="⏢",Ipe="𝒯",Dpe="𝓉",Fpe="Ц",Ope="ц",kpe="Ћ",Npe="ћ",Bpe="Ŧ",zpe="ŧ",Upe="≬",Hpe="↞",Gpe="↠",Vpe="Ú",Wpe="ú",$pe="↑",qpe="↟",jpe="⇑",Xpe="⥉",Ype="Ў",Zpe="ў",Jpe="Ŭ",Kpe="ŭ",Qpe="Û",eme="û",tme="У",nme="у",ime="⇅",rme="Ű",sme="ű",ome="⥮",ame="⥾",cme="𝔘",lme="𝔲",ume="Ù",hme="ù",fme="⥣",dme="↿",pme="↾",mme="▀",gme="⌜",vme="⌜",yme="⌏",_me="◸",xme="Ū",bme="ū",wme="¨",Mme="_",Sme="⏟",Eme="⎵",Tme="⏝",Ame="⋃",Cme="⊎",Lme="Ų",Rme="ų",Pme="𝕌",Ime="𝕦",Dme="⤒",Fme="↑",Ome="↑",kme="⇑",Nme="⇅",Bme="↕",zme="↕",Ume="⇕",Hme="⥮",Gme="↿",Vme="↾",Wme="⊎",$me="↖",qme="↗",jme="υ",Xme="ϒ",Yme="ϒ",Zme="Υ",Jme="υ",Kme="↥",Qme="⊥",ege="⇈",tge="⌝",nge="⌝",ige="⌎",rge="Ů",sge="ů",oge="◹",age="𝒰",cge="𝓊",lge="⋰",uge="Ũ",hge="ũ",fge="▵",dge="▴",pge="⇈",mge="Ü",gge="ü",vge="⦧",yge="⦜",_ge="ϵ",xge="ϰ",bge="∅",wge="ϕ",Mge="ϖ",Sge="∝",Ege="↕",Tge="⇕",Age="ϱ",Cge="ς",Lge="⊊︀",Rge="⫋︀",Pge="⊋︀",Ige="⫌︀",Dge="ϑ",Fge="⊲",Oge="⊳",kge="⫨",Nge="⫫",Bge="⫩",zge="В",Uge="в",Hge="⊢",Gge="⊨",Vge="⊩",Wge="⊫",$ge="⫦",qge="⊻",jge="∨",Xge="⋁",Yge="≚",Zge="⋮",Jge="|",Kge="‖",Qge="|",eve="‖",tve="∣",nve="|",ive="❘",rve="≀",sve=" ",ove="𝔙",ave="𝔳",cve="⊲",lve="⊂⃒",uve="⊃⃒",hve="𝕍",fve="𝕧",dve="∝",pve="⊳",mve="𝒱",gve="𝓋",vve="⫋︀",yve="⊊︀",_ve="⫌︀",xve="⊋︀",bve="⊪",wve="⦚",Mve="Ŵ",Sve="ŵ",Eve="⩟",Tve="∧",Ave="⋀",Cve="≙",Lve="℘",Rve="𝔚",Pve="𝔴",Ive="𝕎",Dve="𝕨",Fve="℘",Ove="≀",kve="≀",Nve="𝒲",Bve="𝓌",zve="⋂",Uve="◯",Hve="⋃",Gve="▽",Vve="𝔛",Wve="𝔵",$ve="⟷",qve="⟺",jve="Ξ",Xve="ξ",Yve="⟵",Zve="⟸",Jve="⟼",Kve="⋻",Qve="⨀",e0e="𝕏",t0e="𝕩",n0e="⨁",i0e="⨂",r0e="⟶",s0e="⟹",o0e="𝒳",a0e="𝓍",c0e="⨆",l0e="⨄",u0e="△",h0e="⋁",f0e="⋀",d0e="Ý",p0e="ý",m0e="Я",g0e="я",v0e="Ŷ",y0e="ŷ",_0e="Ы",x0e="ы",b0e="¥",w0e="𝔜",M0e="𝔶",S0e="Ї",E0e="ї",T0e="𝕐",A0e="𝕪",C0e="𝒴",L0e="𝓎",R0e="Ю",P0e="ю",I0e="ÿ",D0e="Ÿ",F0e="Ź",O0e="ź",k0e="Ž",N0e="ž",B0e="З",z0e="з",U0e="Ż",H0e="ż",G0e="ℨ",V0e="​",W0e="Ζ",$0e="ζ",q0e="𝔷",j0e="ℨ",X0e="Ж",Y0e="ж",Z0e="⇝",J0e="𝕫",K0e="ℤ",Q0e="𝒵",eye="𝓏",tye="‍",nye="‌",iye={Aacute:UB,aacute:HB,Abreve:GB,abreve:VB,ac:WB,acd:$B,acE:qB,Acirc:jB,acirc:XB,acute:YB,Acy:ZB,acy:JB,AElig:KB,aelig:QB,af:ez,Afr:tz,afr:nz,Agrave:iz,agrave:rz,alefsym:sz,aleph:oz,Alpha:az,alpha:cz,Amacr:lz,amacr:uz,amalg:hz,amp:fz,AMP:dz,andand:pz,And:mz,and:gz,andd:vz,andslope:yz,andv:_z,ang:xz,ange:bz,angle:wz,angmsdaa:Mz,angmsdab:Sz,angmsdac:Ez,angmsdad:Tz,angmsdae:Az,angmsdaf:Cz,angmsdag:Lz,angmsdah:Rz,angmsd:Pz,angrt:Iz,angrtvb:Dz,angrtvbd:Fz,angsph:Oz,angst:kz,angzarr:Nz,Aogon:Bz,aogon:zz,Aopf:Uz,aopf:Hz,apacir:Gz,ap:Vz,apE:Wz,ape:$z,apid:qz,apos:jz,ApplyFunction:Xz,approx:Yz,approxeq:Zz,Aring:Jz,aring:Kz,Ascr:Qz,ascr:e5,Assign:t5,ast:n5,asymp:i5,asympeq:r5,Atilde:s5,atilde:o5,Auml:a5,auml:c5,awconint:l5,awint:u5,backcong:h5,backepsilon:f5,backprime:d5,backsim:p5,backsimeq:m5,Backslash:g5,Barv:v5,barvee:y5,barwed:_5,Barwed:x5,barwedge:b5,bbrk:w5,bbrktbrk:M5,bcong:S5,Bcy:E5,bcy:T5,bdquo:A5,becaus:C5,because:L5,Because:R5,bemptyv:P5,bepsi:I5,bernou:D5,Bernoullis:F5,Beta:O5,beta:k5,beth:N5,between:B5,Bfr:z5,bfr:U5,bigcap:H5,bigcirc:G5,bigcup:V5,bigodot:W5,bigoplus:$5,bigotimes:q5,bigsqcup:j5,bigstar:X5,bigtriangledown:Y5,bigtriangleup:Z5,biguplus:J5,bigvee:K5,bigwedge:Q5,bkarow:eU,blacklozenge:tU,blacksquare:nU,blacktriangle:iU,blacktriangledown:rU,blacktriangleleft:sU,blacktriangleright:oU,blank:aU,blk12:cU,blk14:lU,blk34:uU,block:hU,bne:fU,bnequiv:dU,bNot:pU,bnot:mU,Bopf:gU,bopf:vU,bot:yU,bottom:_U,bowtie:xU,boxbox:bU,boxdl:wU,boxdL:MU,boxDl:SU,boxDL:EU,boxdr:TU,boxdR:AU,boxDr:CU,boxDR:LU,boxh:RU,boxH:PU,boxhd:IU,boxHd:DU,boxhD:FU,boxHD:OU,boxhu:kU,boxHu:NU,boxhU:BU,boxHU:zU,boxminus:UU,boxplus:HU,boxtimes:GU,boxul:VU,boxuL:WU,boxUl:$U,boxUL:qU,boxur:jU,boxuR:XU,boxUr:YU,boxUR:ZU,boxv:JU,boxV:KU,boxvh:QU,boxvH:eH,boxVh:tH,boxVH:nH,boxvl:iH,boxvL:rH,boxVl:sH,boxVL:oH,boxvr:aH,boxvR:cH,boxVr:lH,boxVR:uH,bprime:hH,breve:fH,Breve:dH,brvbar:pH,bscr:mH,Bscr:gH,bsemi:vH,bsim:yH,bsime:_H,bsolb:xH,bsol:bH,bsolhsub:wH,bull:MH,bullet:SH,bump:EH,bumpE:TH,bumpe:AH,Bumpeq:CH,bumpeq:LH,Cacute:RH,cacute:PH,capand:IH,capbrcup:DH,capcap:FH,cap:OH,Cap:kH,capcup:NH,capdot:BH,CapitalDifferentialD:zH,caps:UH,caret:HH,caron:GH,Cayleys:VH,ccaps:WH,Ccaron:$H,ccaron:qH,Ccedil:jH,ccedil:XH,Ccirc:YH,ccirc:ZH,Cconint:JH,ccups:KH,ccupssm:QH,Cdot:e6,cdot:t6,cedil:n6,Cedilla:i6,cemptyv:r6,cent:s6,centerdot:o6,CenterDot:a6,cfr:c6,Cfr:l6,CHcy:u6,chcy:h6,check:f6,checkmark:d6,Chi:p6,chi:m6,circ:g6,circeq:v6,circlearrowleft:y6,circlearrowright:_6,circledast:x6,circledcirc:b6,circleddash:w6,CircleDot:M6,circledR:S6,circledS:E6,CircleMinus:T6,CirclePlus:A6,CircleTimes:C6,cir:L6,cirE:R6,cire:P6,cirfnint:I6,cirmid:D6,cirscir:F6,ClockwiseContourIntegral:O6,CloseCurlyDoubleQuote:k6,CloseCurlyQuote:N6,clubs:B6,clubsuit:z6,colon:U6,Colon:H6,Colone:G6,colone:V6,coloneq:W6,comma:$6,commat:q6,comp:j6,compfn:X6,complement:Y6,complexes:Z6,cong:J6,congdot:K6,Congruent:Q6,conint:eG,Conint:tG,ContourIntegral:nG,copf:iG,Copf:rG,coprod:sG,Coproduct:oG,copy:aG,COPY:cG,copysr:lG,CounterClockwiseContourIntegral:uG,crarr:hG,cross:fG,Cross:dG,Cscr:pG,cscr:mG,csub:gG,csube:vG,csup:yG,csupe:_G,ctdot:xG,cudarrl:bG,cudarrr:wG,cuepr:MG,cuesc:SG,cularr:EG,cularrp:TG,cupbrcap:AG,cupcap:CG,CupCap:LG,cup:RG,Cup:PG,cupcup:IG,cupdot:DG,cupor:FG,cups:OG,curarr:kG,curarrm:NG,curlyeqprec:BG,curlyeqsucc:zG,curlyvee:UG,curlywedge:HG,curren:GG,curvearrowleft:VG,curvearrowright:WG,cuvee:$G,cuwed:qG,cwconint:jG,cwint:XG,cylcty:YG,dagger:ZG,Dagger:JG,daleth:KG,darr:QG,Darr:eV,dArr:tV,dash:nV,Dashv:iV,dashv:rV,dbkarow:sV,dblac:oV,Dcaron:aV,dcaron:cV,Dcy:lV,dcy:uV,ddagger:hV,ddarr:fV,DD:dV,dd:pV,DDotrahd:mV,ddotseq:gV,deg:vV,Del:yV,Delta:_V,delta:xV,demptyv:bV,dfisht:wV,Dfr:MV,dfr:SV,dHar:EV,dharl:TV,dharr:AV,DiacriticalAcute:CV,DiacriticalDot:LV,DiacriticalDoubleAcute:RV,DiacriticalGrave:PV,DiacriticalTilde:IV,diam:DV,diamond:FV,Diamond:OV,diamondsuit:kV,diams:NV,die:BV,DifferentialD:zV,digamma:UV,disin:HV,div:GV,divide:VV,divideontimes:WV,divonx:$V,DJcy:qV,djcy:jV,dlcorn:XV,dlcrop:YV,dollar:ZV,Dopf:JV,dopf:KV,Dot:QV,dot:e8,DotDot:t8,doteq:n8,doteqdot:i8,DotEqual:r8,dotminus:s8,dotplus:o8,dotsquare:a8,doublebarwedge:c8,DoubleContourIntegral:l8,DoubleDot:u8,DoubleDownArrow:h8,DoubleLeftArrow:f8,DoubleLeftRightArrow:d8,DoubleLeftTee:p8,DoubleLongLeftArrow:m8,DoubleLongLeftRightArrow:g8,DoubleLongRightArrow:v8,DoubleRightArrow:y8,DoubleRightTee:_8,DoubleUpArrow:x8,DoubleUpDownArrow:b8,DoubleVerticalBar:w8,DownArrowBar:M8,downarrow:S8,DownArrow:E8,Downarrow:T8,DownArrowUpArrow:A8,DownBreve:C8,downdownarrows:L8,downharpoonleft:R8,downharpoonright:P8,DownLeftRightVector:I8,DownLeftTeeVector:D8,DownLeftVectorBar:F8,DownLeftVector:O8,DownRightTeeVector:k8,DownRightVectorBar:N8,DownRightVector:B8,DownTeeArrow:z8,DownTee:U8,drbkarow:H8,drcorn:G8,drcrop:V8,Dscr:W8,dscr:$8,DScy:q8,dscy:j8,dsol:X8,Dstrok:Y8,dstrok:Z8,dtdot:J8,dtri:K8,dtrif:Q8,duarr:eW,duhar:tW,dwangle:nW,DZcy:iW,dzcy:rW,dzigrarr:sW,Eacute:oW,eacute:aW,easter:cW,Ecaron:lW,ecaron:uW,Ecirc:hW,ecirc:fW,ecir:dW,ecolon:pW,Ecy:mW,ecy:gW,eDDot:vW,Edot:yW,edot:_W,eDot:xW,ee:bW,efDot:wW,Efr:MW,efr:SW,eg:EW,Egrave:TW,egrave:AW,egs:CW,egsdot:LW,el:RW,Element:PW,elinters:IW,ell:DW,els:FW,elsdot:OW,Emacr:kW,emacr:NW,empty:BW,emptyset:zW,EmptySmallSquare:UW,emptyv:HW,EmptyVerySmallSquare:GW,emsp13:VW,emsp14:WW,emsp:$W,ENG:qW,eng:jW,ensp:XW,Eogon:YW,eogon:ZW,Eopf:JW,eopf:KW,epar:QW,eparsl:e7,eplus:t7,epsi:n7,Epsilon:i7,epsilon:r7,epsiv:s7,eqcirc:o7,eqcolon:a7,eqsim:c7,eqslantgtr:l7,eqslantless:u7,Equal:h7,equals:f7,EqualTilde:d7,equest:p7,Equilibrium:m7,equiv:g7,equivDD:v7,eqvparsl:y7,erarr:_7,erDot:x7,escr:b7,Escr:w7,esdot:M7,Esim:S7,esim:E7,Eta:T7,eta:A7,ETH:C7,eth:L7,Euml:R7,euml:P7,euro:I7,excl:D7,exist:F7,Exists:O7,expectation:k7,exponentiale:N7,ExponentialE:B7,fallingdotseq:z7,Fcy:U7,fcy:H7,female:G7,ffilig:V7,fflig:W7,ffllig:$7,Ffr:q7,ffr:j7,filig:X7,FilledSmallSquare:Y7,FilledVerySmallSquare:Z7,fjlig:J7,flat:K7,fllig:Q7,fltns:e9,fnof:t9,Fopf:n9,fopf:i9,forall:r9,ForAll:s9,fork:o9,forkv:a9,Fouriertrf:c9,fpartint:l9,frac12:u9,frac13:h9,frac14:f9,frac15:d9,frac16:p9,frac18:m9,frac23:g9,frac25:v9,frac34:y9,frac35:_9,frac38:x9,frac45:b9,frac56:w9,frac58:M9,frac78:S9,frasl:E9,frown:T9,fscr:A9,Fscr:C9,gacute:L9,Gamma:R9,gamma:P9,Gammad:I9,gammad:D9,gap:F9,Gbreve:O9,gbreve:k9,Gcedil:N9,Gcirc:B9,gcirc:z9,Gcy:U9,gcy:H9,Gdot:G9,gdot:V9,ge:W9,gE:$9,gEl:q9,gel:j9,geq:X9,geqq:Y9,geqslant:Z9,gescc:J9,ges:K9,gesdot:Q9,gesdoto:e$,gesdotol:t$,gesl:n$,gesles:i$,Gfr:r$,gfr:s$,gg:o$,Gg:a$,ggg:c$,gimel:l$,GJcy:u$,gjcy:h$,gla:f$,gl:d$,glE:p$,glj:m$,gnap:g$,gnapprox:v$,gne:y$,gnE:_$,gneq:x$,gneqq:b$,gnsim:w$,Gopf:M$,gopf:S$,grave:E$,GreaterEqual:T$,GreaterEqualLess:A$,GreaterFullEqual:C$,GreaterGreater:L$,GreaterLess:R$,GreaterSlantEqual:P$,GreaterTilde:I$,Gscr:D$,gscr:F$,gsim:O$,gsime:k$,gsiml:N$,gtcc:B$,gtcir:z$,gt:U$,GT:H$,Gt:G$,gtdot:V$,gtlPar:W$,gtquest:$$,gtrapprox:q$,gtrarr:j$,gtrdot:X$,gtreqless:Y$,gtreqqless:Z$,gtrless:J$,gtrsim:K$,gvertneqq:Q$,gvnE:eq,Hacek:tq,hairsp:nq,half:iq,hamilt:rq,HARDcy:sq,hardcy:oq,harrcir:aq,harr:cq,hArr:lq,harrw:uq,Hat:hq,hbar:fq,Hcirc:dq,hcirc:pq,hearts:mq,heartsuit:gq,hellip:vq,hercon:yq,hfr:_q,Hfr:xq,HilbertSpace:bq,hksearow:wq,hkswarow:Mq,hoarr:Sq,homtht:Eq,hookleftarrow:Tq,hookrightarrow:Aq,hopf:Cq,Hopf:Lq,horbar:Rq,HorizontalLine:Pq,hscr:Iq,Hscr:Dq,hslash:Fq,Hstrok:Oq,hstrok:kq,HumpDownHump:Nq,HumpEqual:Bq,hybull:zq,hyphen:Uq,Iacute:Hq,iacute:Gq,ic:Vq,Icirc:Wq,icirc:$q,Icy:qq,icy:jq,Idot:Xq,IEcy:Yq,iecy:Zq,iexcl:Jq,iff:Kq,ifr:Qq,Ifr:ej,Igrave:tj,igrave:nj,ii:ij,iiiint:rj,iiint:sj,iinfin:oj,iiota:aj,IJlig:cj,ijlig:lj,Imacr:uj,imacr:hj,image:fj,ImaginaryI:dj,imagline:pj,imagpart:mj,imath:gj,Im:vj,imof:yj,imped:_j,Implies:xj,incare:bj,in:"∈",infin:wj,infintie:Mj,inodot:Sj,intcal:Ej,int:Tj,Int:Aj,integers:Cj,Integral:Lj,intercal:Rj,Intersection:Pj,intlarhk:Ij,intprod:Dj,InvisibleComma:Fj,InvisibleTimes:Oj,IOcy:kj,iocy:Nj,Iogon:Bj,iogon:zj,Iopf:Uj,iopf:Hj,Iota:Gj,iota:Vj,iprod:Wj,iquest:$j,iscr:qj,Iscr:jj,isin:Xj,isindot:Yj,isinE:Zj,isins:Jj,isinsv:Kj,isinv:Qj,it:eX,Itilde:tX,itilde:nX,Iukcy:iX,iukcy:rX,Iuml:sX,iuml:oX,Jcirc:aX,jcirc:cX,Jcy:lX,jcy:uX,Jfr:hX,jfr:fX,jmath:dX,Jopf:pX,jopf:mX,Jscr:gX,jscr:vX,Jsercy:yX,jsercy:_X,Jukcy:xX,jukcy:bX,Kappa:wX,kappa:MX,kappav:SX,Kcedil:EX,kcedil:TX,Kcy:AX,kcy:CX,Kfr:LX,kfr:RX,kgreen:PX,KHcy:IX,khcy:DX,KJcy:FX,kjcy:OX,Kopf:kX,kopf:NX,Kscr:BX,kscr:zX,lAarr:UX,Lacute:HX,lacute:GX,laemptyv:VX,lagran:WX,Lambda:$X,lambda:qX,lang:jX,Lang:XX,langd:YX,langle:ZX,lap:JX,Laplacetrf:KX,laquo:QX,larrb:eY,larrbfs:tY,larr:nY,Larr:iY,lArr:rY,larrfs:sY,larrhk:oY,larrlp:aY,larrpl:cY,larrsim:lY,larrtl:uY,latail:hY,lAtail:fY,lat:dY,late:pY,lates:mY,lbarr:gY,lBarr:vY,lbbrk:yY,lbrace:_Y,lbrack:xY,lbrke:bY,lbrksld:wY,lbrkslu:MY,Lcaron:SY,lcaron:EY,Lcedil:TY,lcedil:AY,lceil:CY,lcub:LY,Lcy:RY,lcy:PY,ldca:IY,ldquo:DY,ldquor:FY,ldrdhar:OY,ldrushar:kY,ldsh:NY,le:BY,lE:zY,LeftAngleBracket:UY,LeftArrowBar:HY,leftarrow:GY,LeftArrow:VY,Leftarrow:WY,LeftArrowRightArrow:$Y,leftarrowtail:qY,LeftCeiling:jY,LeftDoubleBracket:XY,LeftDownTeeVector:YY,LeftDownVectorBar:ZY,LeftDownVector:JY,LeftFloor:KY,leftharpoondown:QY,leftharpoonup:eZ,leftleftarrows:tZ,leftrightarrow:nZ,LeftRightArrow:iZ,Leftrightarrow:rZ,leftrightarrows:sZ,leftrightharpoons:oZ,leftrightsquigarrow:aZ,LeftRightVector:cZ,LeftTeeArrow:lZ,LeftTee:uZ,LeftTeeVector:hZ,leftthreetimes:fZ,LeftTriangleBar:dZ,LeftTriangle:pZ,LeftTriangleEqual:mZ,LeftUpDownVector:gZ,LeftUpTeeVector:vZ,LeftUpVectorBar:yZ,LeftUpVector:_Z,LeftVectorBar:xZ,LeftVector:bZ,lEg:wZ,leg:MZ,leq:SZ,leqq:EZ,leqslant:TZ,lescc:AZ,les:CZ,lesdot:LZ,lesdoto:RZ,lesdotor:PZ,lesg:IZ,lesges:DZ,lessapprox:FZ,lessdot:OZ,lesseqgtr:kZ,lesseqqgtr:NZ,LessEqualGreater:BZ,LessFullEqual:zZ,LessGreater:UZ,lessgtr:HZ,LessLess:GZ,lesssim:VZ,LessSlantEqual:WZ,LessTilde:$Z,lfisht:qZ,lfloor:jZ,Lfr:XZ,lfr:YZ,lg:ZZ,lgE:JZ,lHar:KZ,lhard:QZ,lharu:eJ,lharul:tJ,lhblk:nJ,LJcy:iJ,ljcy:rJ,llarr:sJ,ll:oJ,Ll:aJ,llcorner:cJ,Lleftarrow:lJ,llhard:uJ,lltri:hJ,Lmidot:fJ,lmidot:dJ,lmoustache:pJ,lmoust:mJ,lnap:gJ,lnapprox:vJ,lne:yJ,lnE:_J,lneq:xJ,lneqq:bJ,lnsim:wJ,loang:MJ,loarr:SJ,lobrk:EJ,longleftarrow:TJ,LongLeftArrow:AJ,Longleftarrow:CJ,longleftrightarrow:LJ,LongLeftRightArrow:RJ,Longleftrightarrow:PJ,longmapsto:IJ,longrightarrow:DJ,LongRightArrow:FJ,Longrightarrow:OJ,looparrowleft:kJ,looparrowright:NJ,lopar:BJ,Lopf:zJ,lopf:UJ,loplus:HJ,lotimes:GJ,lowast:VJ,lowbar:WJ,LowerLeftArrow:$J,LowerRightArrow:qJ,loz:jJ,lozenge:XJ,lozf:YJ,lpar:ZJ,lparlt:JJ,lrarr:KJ,lrcorner:QJ,lrhar:eK,lrhard:tK,lrm:nK,lrtri:iK,lsaquo:rK,lscr:sK,Lscr:oK,lsh:aK,Lsh:cK,lsim:lK,lsime:uK,lsimg:hK,lsqb:fK,lsquo:dK,lsquor:pK,Lstrok:mK,lstrok:gK,ltcc:vK,ltcir:yK,lt:_K,LT:xK,Lt:bK,ltdot:wK,lthree:MK,ltimes:SK,ltlarr:EK,ltquest:TK,ltri:AK,ltrie:CK,ltrif:LK,ltrPar:RK,lurdshar:PK,luruhar:IK,lvertneqq:DK,lvnE:FK,macr:OK,male:kK,malt:NK,maltese:BK,Map:"⤅",map:zK,mapsto:UK,mapstodown:HK,mapstoleft:GK,mapstoup:VK,marker:WK,mcomma:$K,Mcy:qK,mcy:jK,mdash:XK,mDDot:YK,measuredangle:ZK,MediumSpace:JK,Mellintrf:KK,Mfr:QK,mfr:eQ,mho:tQ,micro:nQ,midast:iQ,midcir:rQ,mid:sQ,middot:oQ,minusb:aQ,minus:cQ,minusd:lQ,minusdu:uQ,MinusPlus:hQ,mlcp:fQ,mldr:dQ,mnplus:pQ,models:mQ,Mopf:gQ,mopf:vQ,mp:yQ,mscr:_Q,Mscr:xQ,mstpos:bQ,Mu:wQ,mu:MQ,multimap:SQ,mumap:EQ,nabla:TQ,Nacute:AQ,nacute:CQ,nang:LQ,nap:RQ,napE:PQ,napid:IQ,napos:DQ,napprox:FQ,natural:OQ,naturals:kQ,natur:NQ,nbsp:BQ,nbump:zQ,nbumpe:UQ,ncap:HQ,Ncaron:GQ,ncaron:VQ,Ncedil:WQ,ncedil:$Q,ncong:qQ,ncongdot:jQ,ncup:XQ,Ncy:YQ,ncy:ZQ,ndash:JQ,nearhk:KQ,nearr:QQ,neArr:eee,nearrow:tee,ne:nee,nedot:iee,NegativeMediumSpace:ree,NegativeThickSpace:see,NegativeThinSpace:oee,NegativeVeryThinSpace:aee,nequiv:cee,nesear:lee,nesim:uee,NestedGreaterGreater:hee,NestedLessLess:fee,NewLine:dee,nexist:pee,nexists:mee,Nfr:gee,nfr:vee,ngE:yee,nge:_ee,ngeq:xee,ngeqq:bee,ngeqslant:wee,nges:Mee,nGg:See,ngsim:Eee,nGt:Tee,ngt:Aee,ngtr:Cee,nGtv:Lee,nharr:Ree,nhArr:Pee,nhpar:Iee,ni:Dee,nis:Fee,nisd:Oee,niv:kee,NJcy:Nee,njcy:Bee,nlarr:zee,nlArr:Uee,nldr:Hee,nlE:Gee,nle:Vee,nleftarrow:Wee,nLeftarrow:$ee,nleftrightarrow:qee,nLeftrightarrow:jee,nleq:Xee,nleqq:Yee,nleqslant:Zee,nles:Jee,nless:Kee,nLl:Qee,nlsim:ete,nLt:tte,nlt:nte,nltri:ite,nltrie:rte,nLtv:ste,nmid:ote,NoBreak:ate,NonBreakingSpace:cte,nopf:lte,Nopf:ute,Not:hte,not:fte,NotCongruent:dte,NotCupCap:pte,NotDoubleVerticalBar:mte,NotElement:gte,NotEqual:vte,NotEqualTilde:yte,NotExists:_te,NotGreater:xte,NotGreaterEqual:bte,NotGreaterFullEqual:wte,NotGreaterGreater:Mte,NotGreaterLess:Ste,NotGreaterSlantEqual:Ete,NotGreaterTilde:Tte,NotHumpDownHump:Ate,NotHumpEqual:Cte,notin:Lte,notindot:Rte,notinE:Pte,notinva:Ite,notinvb:Dte,notinvc:Fte,NotLeftTriangleBar:Ote,NotLeftTriangle:kte,NotLeftTriangleEqual:Nte,NotLess:Bte,NotLessEqual:zte,NotLessGreater:Ute,NotLessLess:Hte,NotLessSlantEqual:Gte,NotLessTilde:Vte,NotNestedGreaterGreater:Wte,NotNestedLessLess:$te,notni:qte,notniva:jte,notnivb:Xte,notnivc:Yte,NotPrecedes:Zte,NotPrecedesEqual:Jte,NotPrecedesSlantEqual:Kte,NotReverseElement:Qte,NotRightTriangleBar:ene,NotRightTriangle:tne,NotRightTriangleEqual:nne,NotSquareSubset:ine,NotSquareSubsetEqual:rne,NotSquareSuperset:sne,NotSquareSupersetEqual:one,NotSubset:ane,NotSubsetEqual:cne,NotSucceeds:lne,NotSucceedsEqual:une,NotSucceedsSlantEqual:hne,NotSucceedsTilde:fne,NotSuperset:dne,NotSupersetEqual:pne,NotTilde:mne,NotTildeEqual:gne,NotTildeFullEqual:vne,NotTildeTilde:yne,NotVerticalBar:_ne,nparallel:xne,npar:bne,nparsl:wne,npart:Mne,npolint:Sne,npr:Ene,nprcue:Tne,nprec:Ane,npreceq:Cne,npre:Lne,nrarrc:Rne,nrarr:Pne,nrArr:Ine,nrarrw:Dne,nrightarrow:Fne,nRightarrow:One,nrtri:kne,nrtrie:Nne,nsc:Bne,nsccue:zne,nsce:Une,Nscr:Hne,nscr:Gne,nshortmid:Vne,nshortparallel:Wne,nsim:$ne,nsime:qne,nsimeq:jne,nsmid:Xne,nspar:Yne,nsqsube:Zne,nsqsupe:Jne,nsub:Kne,nsubE:Qne,nsube:eie,nsubset:tie,nsubseteq:nie,nsubseteqq:iie,nsucc:rie,nsucceq:sie,nsup:oie,nsupE:aie,nsupe:cie,nsupset:lie,nsupseteq:uie,nsupseteqq:hie,ntgl:fie,Ntilde:die,ntilde:pie,ntlg:mie,ntriangleleft:gie,ntrianglelefteq:vie,ntriangleright:yie,ntrianglerighteq:_ie,Nu:xie,nu:bie,num:wie,numero:Mie,numsp:Sie,nvap:Eie,nvdash:Tie,nvDash:Aie,nVdash:Cie,nVDash:Lie,nvge:Rie,nvgt:Pie,nvHarr:Iie,nvinfin:Die,nvlArr:Fie,nvle:Oie,nvlt:kie,nvltrie:Nie,nvrArr:Bie,nvrtrie:zie,nvsim:Uie,nwarhk:Hie,nwarr:Gie,nwArr:Vie,nwarrow:Wie,nwnear:$ie,Oacute:qie,oacute:jie,oast:Xie,Ocirc:Yie,ocirc:Zie,ocir:Jie,Ocy:Kie,ocy:Qie,odash:ere,Odblac:tre,odblac:nre,odiv:ire,odot:rre,odsold:sre,OElig:ore,oelig:are,ofcir:cre,Ofr:lre,ofr:ure,ogon:hre,Ograve:fre,ograve:dre,ogt:pre,ohbar:mre,ohm:gre,oint:vre,olarr:yre,olcir:_re,olcross:xre,oline:bre,olt:wre,Omacr:Mre,omacr:Sre,Omega:Ere,omega:Tre,Omicron:Are,omicron:Cre,omid:Lre,ominus:Rre,Oopf:Pre,oopf:Ire,opar:Dre,OpenCurlyDoubleQuote:Fre,OpenCurlyQuote:Ore,operp:kre,oplus:Nre,orarr:Bre,Or:zre,or:Ure,ord:Hre,order:Gre,orderof:Vre,ordf:Wre,ordm:$re,origof:qre,oror:jre,orslope:Xre,orv:Yre,oS:Zre,Oscr:Jre,oscr:Kre,Oslash:Qre,oslash:ese,osol:tse,Otilde:nse,otilde:ise,otimesas:rse,Otimes:sse,otimes:ose,Ouml:ase,ouml:cse,ovbar:lse,OverBar:use,OverBrace:hse,OverBracket:fse,OverParenthesis:dse,para:pse,parallel:mse,par:gse,parsim:vse,parsl:yse,part:_se,PartialD:xse,Pcy:bse,pcy:wse,percnt:Mse,period:Sse,permil:Ese,perp:Tse,pertenk:Ase,Pfr:Cse,pfr:Lse,Phi:Rse,phi:Pse,phiv:Ise,phmmat:Dse,phone:Fse,Pi:Ose,pi:kse,pitchfork:Nse,piv:Bse,planck:zse,planckh:Use,plankv:Hse,plusacir:Gse,plusb:Vse,pluscir:Wse,plus:$se,plusdo:qse,plusdu:jse,pluse:Xse,PlusMinus:Yse,plusmn:Zse,plussim:Jse,plustwo:Kse,pm:Qse,Poincareplane:eoe,pointint:toe,popf:noe,Popf:ioe,pound:roe,prap:soe,Pr:ooe,pr:aoe,prcue:coe,precapprox:loe,prec:uoe,preccurlyeq:hoe,Precedes:foe,PrecedesEqual:doe,PrecedesSlantEqual:poe,PrecedesTilde:moe,preceq:goe,precnapprox:voe,precneqq:yoe,precnsim:_oe,pre:xoe,prE:boe,precsim:woe,prime:Moe,Prime:Soe,primes:Eoe,prnap:Toe,prnE:Aoe,prnsim:Coe,prod:Loe,Product:Roe,profalar:Poe,profline:Ioe,profsurf:Doe,prop:Foe,Proportional:Ooe,Proportion:koe,propto:Noe,prsim:Boe,prurel:zoe,Pscr:Uoe,pscr:Hoe,Psi:Goe,psi:Voe,puncsp:Woe,Qfr:$oe,qfr:qoe,qint:joe,qopf:Xoe,Qopf:Yoe,qprime:Zoe,Qscr:Joe,qscr:Koe,quaternions:Qoe,quatint:eae,quest:tae,questeq:nae,quot:iae,QUOT:rae,rAarr:sae,race:oae,Racute:aae,racute:cae,radic:lae,raemptyv:uae,rang:hae,Rang:fae,rangd:dae,range:pae,rangle:mae,raquo:gae,rarrap:vae,rarrb:yae,rarrbfs:_ae,rarrc:xae,rarr:bae,Rarr:wae,rArr:Mae,rarrfs:Sae,rarrhk:Eae,rarrlp:Tae,rarrpl:Aae,rarrsim:Cae,Rarrtl:Lae,rarrtl:Rae,rarrw:Pae,ratail:Iae,rAtail:Dae,ratio:Fae,rationals:Oae,rbarr:kae,rBarr:Nae,RBarr:Bae,rbbrk:zae,rbrace:Uae,rbrack:Hae,rbrke:Gae,rbrksld:Vae,rbrkslu:Wae,Rcaron:$ae,rcaron:qae,Rcedil:jae,rcedil:Xae,rceil:Yae,rcub:Zae,Rcy:Jae,rcy:Kae,rdca:Qae,rdldhar:ece,rdquo:tce,rdquor:nce,rdsh:ice,real:rce,realine:sce,realpart:oce,reals:ace,Re:cce,rect:lce,reg:uce,REG:hce,ReverseElement:fce,ReverseEquilibrium:dce,ReverseUpEquilibrium:pce,rfisht:mce,rfloor:gce,rfr:vce,Rfr:yce,rHar:_ce,rhard:xce,rharu:bce,rharul:wce,Rho:Mce,rho:Sce,rhov:Ece,RightAngleBracket:Tce,RightArrowBar:Ace,rightarrow:Cce,RightArrow:Lce,Rightarrow:Rce,RightArrowLeftArrow:Pce,rightarrowtail:Ice,RightCeiling:Dce,RightDoubleBracket:Fce,RightDownTeeVector:Oce,RightDownVectorBar:kce,RightDownVector:Nce,RightFloor:Bce,rightharpoondown:zce,rightharpoonup:Uce,rightleftarrows:Hce,rightleftharpoons:Gce,rightrightarrows:Vce,rightsquigarrow:Wce,RightTeeArrow:$ce,RightTee:qce,RightTeeVector:jce,rightthreetimes:Xce,RightTriangleBar:Yce,RightTriangle:Zce,RightTriangleEqual:Jce,RightUpDownVector:Kce,RightUpTeeVector:Qce,RightUpVectorBar:ele,RightUpVector:tle,RightVectorBar:nle,RightVector:ile,ring:rle,risingdotseq:sle,rlarr:ole,rlhar:ale,rlm:cle,rmoustache:lle,rmoust:ule,rnmid:hle,roang:fle,roarr:dle,robrk:ple,ropar:mle,ropf:gle,Ropf:vle,roplus:yle,rotimes:_le,RoundImplies:xle,rpar:ble,rpargt:wle,rppolint:Mle,rrarr:Sle,Rrightarrow:Ele,rsaquo:Tle,rscr:Ale,Rscr:Cle,rsh:Lle,Rsh:Rle,rsqb:Ple,rsquo:Ile,rsquor:Dle,rthree:Fle,rtimes:Ole,rtri:kle,rtrie:Nle,rtrif:Ble,rtriltri:zle,RuleDelayed:Ule,ruluhar:Hle,rx:Gle,Sacute:Vle,sacute:Wle,sbquo:$le,scap:qle,Scaron:jle,scaron:Xle,Sc:Yle,sc:Zle,sccue:Jle,sce:Kle,scE:Qle,Scedil:eue,scedil:tue,Scirc:nue,scirc:iue,scnap:rue,scnE:sue,scnsim:oue,scpolint:aue,scsim:cue,Scy:lue,scy:uue,sdotb:hue,sdot:fue,sdote:due,searhk:pue,searr:mue,seArr:gue,searrow:vue,sect:yue,semi:_ue,seswar:xue,setminus:bue,setmn:wue,sext:Mue,Sfr:Sue,sfr:Eue,sfrown:Tue,sharp:Aue,SHCHcy:Cue,shchcy:Lue,SHcy:Rue,shcy:Pue,ShortDownArrow:Iue,ShortLeftArrow:Due,shortmid:Fue,shortparallel:Oue,ShortRightArrow:kue,ShortUpArrow:Nue,shy:Bue,Sigma:zue,sigma:Uue,sigmaf:Hue,sigmav:Gue,sim:Vue,simdot:Wue,sime:$ue,simeq:que,simg:jue,simgE:Xue,siml:Yue,simlE:Zue,simne:Jue,simplus:Kue,simrarr:Que,slarr:ehe,SmallCircle:the,smallsetminus:nhe,smashp:ihe,smeparsl:rhe,smid:she,smile:ohe,smt:ahe,smte:che,smtes:lhe,SOFTcy:uhe,softcy:hhe,solbar:fhe,solb:dhe,sol:phe,Sopf:mhe,sopf:ghe,spades:vhe,spadesuit:yhe,spar:_he,sqcap:xhe,sqcaps:bhe,sqcup:whe,sqcups:Mhe,Sqrt:She,sqsub:Ehe,sqsube:The,sqsubset:Ahe,sqsubseteq:Che,sqsup:Lhe,sqsupe:Rhe,sqsupset:Phe,sqsupseteq:Ihe,square:Dhe,Square:Fhe,SquareIntersection:Ohe,SquareSubset:khe,SquareSubsetEqual:Nhe,SquareSuperset:Bhe,SquareSupersetEqual:zhe,SquareUnion:Uhe,squarf:Hhe,squ:Ghe,squf:Vhe,srarr:Whe,Sscr:$he,sscr:qhe,ssetmn:jhe,ssmile:Xhe,sstarf:Yhe,Star:Zhe,star:Jhe,starf:Khe,straightepsilon:Qhe,straightphi:efe,strns:tfe,sub:nfe,Sub:ife,subdot:rfe,subE:sfe,sube:ofe,subedot:afe,submult:cfe,subnE:lfe,subne:ufe,subplus:hfe,subrarr:ffe,subset:dfe,Subset:pfe,subseteq:mfe,subseteqq:gfe,SubsetEqual:vfe,subsetneq:yfe,subsetneqq:_fe,subsim:xfe,subsub:bfe,subsup:wfe,succapprox:Mfe,succ:Sfe,succcurlyeq:Efe,Succeeds:Tfe,SucceedsEqual:Afe,SucceedsSlantEqual:Cfe,SucceedsTilde:Lfe,succeq:Rfe,succnapprox:Pfe,succneqq:Ife,succnsim:Dfe,succsim:Ffe,SuchThat:Ofe,sum:kfe,Sum:Nfe,sung:Bfe,sup1:zfe,sup2:Ufe,sup3:Hfe,sup:Gfe,Sup:Vfe,supdot:Wfe,supdsub:$fe,supE:qfe,supe:jfe,supedot:Xfe,Superset:Yfe,SupersetEqual:Zfe,suphsol:Jfe,suphsub:Kfe,suplarr:Qfe,supmult:ede,supnE:tde,supne:nde,supplus:ide,supset:rde,Supset:sde,supseteq:ode,supseteqq:ade,supsetneq:cde,supsetneqq:lde,supsim:ude,supsub:hde,supsup:fde,swarhk:dde,swarr:pde,swArr:mde,swarrow:gde,swnwar:vde,szlig:yde,Tab:_de,target:xde,Tau:bde,tau:wde,tbrk:Mde,Tcaron:Sde,tcaron:Ede,Tcedil:Tde,tcedil:Ade,Tcy:Cde,tcy:Lde,tdot:Rde,telrec:Pde,Tfr:Ide,tfr:Dde,there4:Fde,therefore:Ode,Therefore:kde,Theta:Nde,theta:Bde,thetasym:zde,thetav:Ude,thickapprox:Hde,thicksim:Gde,ThickSpace:Vde,ThinSpace:Wde,thinsp:$de,thkap:qde,thksim:jde,THORN:Xde,thorn:Yde,tilde:Zde,Tilde:Jde,TildeEqual:Kde,TildeFullEqual:Qde,TildeTilde:epe,timesbar:tpe,timesb:npe,times:ipe,timesd:rpe,tint:spe,toea:ope,topbot:ape,topcir:cpe,top:lpe,Topf:upe,topf:hpe,topfork:fpe,tosa:dpe,tprime:ppe,trade:mpe,TRADE:gpe,triangle:vpe,triangledown:ype,triangleleft:_pe,trianglelefteq:xpe,triangleq:bpe,triangleright:wpe,trianglerighteq:Mpe,tridot:Spe,trie:Epe,triminus:Tpe,TripleDot:Ape,triplus:Cpe,trisb:Lpe,tritime:Rpe,trpezium:Ppe,Tscr:Ipe,tscr:Dpe,TScy:Fpe,tscy:Ope,TSHcy:kpe,tshcy:Npe,Tstrok:Bpe,tstrok:zpe,twixt:Upe,twoheadleftarrow:Hpe,twoheadrightarrow:Gpe,Uacute:Vpe,uacute:Wpe,uarr:$pe,Uarr:qpe,uArr:jpe,Uarrocir:Xpe,Ubrcy:Ype,ubrcy:Zpe,Ubreve:Jpe,ubreve:Kpe,Ucirc:Qpe,ucirc:eme,Ucy:tme,ucy:nme,udarr:ime,Udblac:rme,udblac:sme,udhar:ome,ufisht:ame,Ufr:cme,ufr:lme,Ugrave:ume,ugrave:hme,uHar:fme,uharl:dme,uharr:pme,uhblk:mme,ulcorn:gme,ulcorner:vme,ulcrop:yme,ultri:_me,Umacr:xme,umacr:bme,uml:wme,UnderBar:Mme,UnderBrace:Sme,UnderBracket:Eme,UnderParenthesis:Tme,Union:Ame,UnionPlus:Cme,Uogon:Lme,uogon:Rme,Uopf:Pme,uopf:Ime,UpArrowBar:Dme,uparrow:Fme,UpArrow:Ome,Uparrow:kme,UpArrowDownArrow:Nme,updownarrow:Bme,UpDownArrow:zme,Updownarrow:Ume,UpEquilibrium:Hme,upharpoonleft:Gme,upharpoonright:Vme,uplus:Wme,UpperLeftArrow:$me,UpperRightArrow:qme,upsi:jme,Upsi:Xme,upsih:Yme,Upsilon:Zme,upsilon:Jme,UpTeeArrow:Kme,UpTee:Qme,upuparrows:ege,urcorn:tge,urcorner:nge,urcrop:ige,Uring:rge,uring:sge,urtri:oge,Uscr:age,uscr:cge,utdot:lge,Utilde:uge,utilde:hge,utri:fge,utrif:dge,uuarr:pge,Uuml:mge,uuml:gge,uwangle:vge,vangrt:yge,varepsilon:_ge,varkappa:xge,varnothing:bge,varphi:wge,varpi:Mge,varpropto:Sge,varr:Ege,vArr:Tge,varrho:Age,varsigma:Cge,varsubsetneq:Lge,varsubsetneqq:Rge,varsupsetneq:Pge,varsupsetneqq:Ige,vartheta:Dge,vartriangleleft:Fge,vartriangleright:Oge,vBar:kge,Vbar:Nge,vBarv:Bge,Vcy:zge,vcy:Uge,vdash:Hge,vDash:Gge,Vdash:Vge,VDash:Wge,Vdashl:$ge,veebar:qge,vee:jge,Vee:Xge,veeeq:Yge,vellip:Zge,verbar:Jge,Verbar:Kge,vert:Qge,Vert:eve,VerticalBar:tve,VerticalLine:nve,VerticalSeparator:ive,VerticalTilde:rve,VeryThinSpace:sve,Vfr:ove,vfr:ave,vltri:cve,vnsub:lve,vnsup:uve,Vopf:hve,vopf:fve,vprop:dve,vrtri:pve,Vscr:mve,vscr:gve,vsubnE:vve,vsubne:yve,vsupnE:_ve,vsupne:xve,Vvdash:bve,vzigzag:wve,Wcirc:Mve,wcirc:Sve,wedbar:Eve,wedge:Tve,Wedge:Ave,wedgeq:Cve,weierp:Lve,Wfr:Rve,wfr:Pve,Wopf:Ive,wopf:Dve,wp:Fve,wr:Ove,wreath:kve,Wscr:Nve,wscr:Bve,xcap:zve,xcirc:Uve,xcup:Hve,xdtri:Gve,Xfr:Vve,xfr:Wve,xharr:$ve,xhArr:qve,Xi:jve,xi:Xve,xlarr:Yve,xlArr:Zve,xmap:Jve,xnis:Kve,xodot:Qve,Xopf:e0e,xopf:t0e,xoplus:n0e,xotime:i0e,xrarr:r0e,xrArr:s0e,Xscr:o0e,xscr:a0e,xsqcup:c0e,xuplus:l0e,xutri:u0e,xvee:h0e,xwedge:f0e,Yacute:d0e,yacute:p0e,YAcy:m0e,yacy:g0e,Ycirc:v0e,ycirc:y0e,Ycy:_0e,ycy:x0e,yen:b0e,Yfr:w0e,yfr:M0e,YIcy:S0e,yicy:E0e,Yopf:T0e,yopf:A0e,Yscr:C0e,yscr:L0e,YUcy:R0e,yucy:P0e,yuml:I0e,Yuml:D0e,Zacute:F0e,zacute:O0e,Zcaron:k0e,zcaron:N0e,Zcy:B0e,zcy:z0e,Zdot:U0e,zdot:H0e,zeetrf:G0e,ZeroWidthSpace:V0e,Zeta:W0e,zeta:$0e,zfr:q0e,Zfr:j0e,ZHcy:X0e,zhcy:Y0e,zigrarr:Z0e,zopf:J0e,Zopf:K0e,Zscr:Q0e,zscr:eye,zwj:tye,zwnj:nye};var gA=iye,w_=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Ll={},u1={};function rye(n){var e,t,i=u1[n];if(i)return i;for(i=u1[n]=[],e=0;e<128;e++)t=String.fromCharCode(e),/^[0-9a-z]$/i.test(t)?i.push(t):i.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<n.length;e++)i[n.charCodeAt(e)]=n[e];return i}function lm(n,e,t){var i,r,s,o,a,c="";for(typeof e!="string"&&(t=e,e=lm.defaultChars),typeof t>"u"&&(t=!0),a=rye(e),i=0,r=n.length;i<r;i++){if(s=n.charCodeAt(i),t&&s===37&&i+2<r&&/^[0-9a-f]{2}$/i.test(n.slice(i+1,i+3))){c+=n.slice(i,i+3),i+=2;continue}if(s<128){c+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<r&&(o=n.charCodeAt(i+1),o>=56320&&o<=57343)){c+=encodeURIComponent(n[i]+n[i+1]),i++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(n[i])}return c}lm.defaultChars=";/?:@&=+$,-_.!~*'()#";lm.componentChars="-_.!~*'()";var sye=lm,h1={};function oye(n){var e,t,i=h1[n];if(i)return i;for(i=h1[n]=[],e=0;e<128;e++)t=String.fromCharCode(e),i.push(t);for(e=0;e<n.length;e++)t=n.charCodeAt(e),i[t]="%"+("0"+t.toString(16).toUpperCase()).slice(-2);return i}function um(n,e){var t;return typeof e!="string"&&(e=um.defaultChars),t=oye(e),n.replace(/(%[a-f0-9]{2})+/gi,function(i){var r,s,o,a,c,l,u,h="";for(r=0,s=i.length;r<s;r+=3){if(o=parseInt(i.slice(r+1,r+3),16),o<128){h+=t[o];continue}if((o&224)===192&&r+3<s&&(a=parseInt(i.slice(r+4,r+6),16),(a&192)===128)){u=o<<6&1984|a&63,u<128?h+="��":h+=String.fromCharCode(u),r+=3;continue}if((o&240)===224&&r+6<s&&(a=parseInt(i.slice(r+4,r+6),16),c=parseInt(i.slice(r+7,r+9),16),(a&192)===128&&(c&192)===128)){u=o<<12&61440|a<<6&4032|c&63,u<2048||u>=55296&&u<=57343?h+="���":h+=String.fromCharCode(u),r+=6;continue}if((o&248)===240&&r+9<s&&(a=parseInt(i.slice(r+4,r+6),16),c=parseInt(i.slice(r+7,r+9),16),l=parseInt(i.slice(r+10,r+12),16),(a&192)===128&&(c&192)===128&&(l&192)===128)){u=o<<18&1835008|a<<12&258048|c<<6&4032|l&63,u<65536||u>1114111?h+="����":(u-=65536,h+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),r+=9;continue}h+="�"}return h})}um.defaultChars=";/?:@&=+$,#";um.componentChars="";var aye=um,cye=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t};function xp(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var lye=/^([a-z0-9.+-]+:)/i,uye=/:[0-9]*$/,hye=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fye=["<",">",'"',"`"," ","\r",`
`,"	"],dye=["{","}","|","\\","^","`"].concat(fye),pye=["'"].concat(dye),f1=["%","/","?",";","#"].concat(pye),d1=["/","?","#"],mye=255,p1=/^[+a-z0-9A-Z_-]{0,63}$/,gye=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m1={javascript:!0,"javascript:":!0},g1={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function vye(n,e){if(n&&n instanceof xp)return n;var t=new xp;return t.parse(n,e),t}xp.prototype.parse=function(n,e){var t,i,r,s,o,a=n;if(a=a.trim(),!e&&n.split("#").length===1){var c=hye.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=lye.exec(a);if(l&&(l=l[0],r=l.toLowerCase(),this.protocol=l,a=a.substr(l.length)),(e||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(o=a.substr(0,2)==="//",o&&!(l&&m1[l])&&(a=a.substr(2),this.slashes=!0)),!m1[l]&&(o||l&&!g1[l])){var u=-1;for(t=0;t<d1.length;t++)s=a.indexOf(d1[t]),s!==-1&&(u===-1||s<u)&&(u=s);var h,f;for(u===-1?f=a.lastIndexOf("@"):f=a.lastIndexOf("@",u),f!==-1&&(h=a.slice(0,f),a=a.slice(f+1),this.auth=h),u=-1,t=0;t<f1.length;t++)s=a.indexOf(f1[t]),s!==-1&&(u===-1||s<u)&&(u=s);u===-1&&(u=a.length),a[u-1]===":"&&u--;var d=a.slice(0,u);a=a.slice(u),this.parseHost(d),this.hostname=this.hostname||"";var p=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!p){var v=this.hostname.split(/\./);for(t=0,i=v.length;t<i;t++){var y=v[t];if(y&&!y.match(p1)){for(var g="",m=0,w=y.length;m<w;m++)y.charCodeAt(m)>127?g+="x":g+=y[m];if(!g.match(p1)){var b=v.slice(0,t),E=v.slice(t+1),S=y.match(gye);S&&(b.push(S[1]),E.unshift(S[2])),E.length&&(a=E.join(".")+a),this.hostname=b.join(".");break}}}}this.hostname.length>mye&&(this.hostname=""),p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var P=a.indexOf("#");P!==-1&&(this.hash=a.substr(P),a=a.slice(0,P));var N=a.indexOf("?");return N!==-1&&(this.search=a.substr(N),a=a.slice(0,N)),a&&(this.pathname=a),g1[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};xp.prototype.parseHost=function(n){var e=uye.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};var yye=vye;Ll.encode=sye;Ll.decode=aye;Ll.format=cye;Ll.parse=yye;var jo={},Sg,v1;function vA(){return v1||(v1=1,Sg=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),Sg}var Eg,y1;function yA(){return y1||(y1=1,Eg=/[\0-\x1F\x7F-\x9F]/),Eg}var Tg,_1;function _ye(){return _1||(_1=1,Tg=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),Tg}var Ag,x1;function _A(){return x1||(x1=1,Ag=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),Ag}var b1;function xye(){return b1||(b1=1,jo.Any=vA(),jo.Cc=yA(),jo.Cf=_ye(),jo.P=w_,jo.Z=_A()),jo}(function(n){function e(M){return Object.prototype.toString.call(M)}function t(M){return e(M)==="[object String]"}var i=Object.prototype.hasOwnProperty;function r(M,L){return i.call(M,L)}function s(M){var L=Array.prototype.slice.call(arguments,1);return L.forEach(function(I){if(I){if(typeof I!="object")throw new TypeError(I+"must be object");Object.keys(I).forEach(function(k){M[k]=I[k]})}}),M}function o(M,L,I){return[].concat(M.slice(0,L),I,M.slice(L+1))}function a(M){return!(M>=55296&&M<=57343||M>=64976&&M<=65007||(M&65535)===65535||(M&65535)===65534||M>=0&&M<=8||M===11||M>=14&&M<=31||M>=127&&M<=159||M>1114111)}function c(M){if(M>65535){M-=65536;var L=55296+(M>>10),I=56320+(M&1023);return String.fromCharCode(L,I)}return String.fromCharCode(M)}var l=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,h=new RegExp(l.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,d=gA;function p(M,L){var I;return r(d,L)?d[L]:L.charCodeAt(0)===35&&f.test(L)&&(I=L[1].toLowerCase()==="x"?parseInt(L.slice(2),16):parseInt(L.slice(1),10),a(I))?c(I):M}function v(M){return M.indexOf("\\")<0?M:M.replace(l,"$1")}function y(M){return M.indexOf("\\")<0&&M.indexOf("&")<0?M:M.replace(h,function(L,I,k){return I||p(L,k)})}var g=/[&<>"]/,m=/[&<>"]/g,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function b(M){return w[M]}function E(M){return g.test(M)?M.replace(m,b):M}var S=/[.?*+^$[\]\\(){}|-]/g;function P(M){return M.replace(S,"\\$&")}function N(M){switch(M){case 9:case 32:return!0}return!1}function z(M){if(M>=8192&&M<=8202)return!0;switch(M){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var _=w_;function x(M){return _.test(M)}function T(M){switch(M){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function A(M){return M=M.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(M=M.replace(/ẞ/g,"ß")),M.toLowerCase().toUpperCase()}n.lib={},n.lib.mdurl=Ll,n.lib.ucmicro=xye(),n.assign=s,n.isString=t,n.has=r,n.unescapeMd=v,n.unescapeAll=y,n.isValidEntityCode=a,n.fromCodePoint=c,n.escapeHtml=E,n.arrayReplaceAt=o,n.isSpace=N,n.isWhiteSpace=z,n.isMdAsciiPunct=T,n.isPunctChar=x,n.escapeRE=P,n.normalizeReference=A})(bt);var hm={},bye=function(e,t,i){var r,s,o,a,c=-1,l=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<l;){if(o=e.src.charCodeAt(e.pos),o===93&&(r--,r===0)){s=!0;break}if(a=e.pos,e.md.inline.skipToken(e),o===91){if(a===e.pos-1)r++;else if(i)return e.pos=u,-1}}return s&&(c=e.pos),e.pos=u,c},w1=bt.unescapeAll,wye=function(e,t,i){var r,s,o=t,a={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(o)===60){for(o++;o<i;){if(r=e.charCodeAt(o),r===10||r===60)return a;if(r===62)return a.pos=o+1,a.str=w1(e.slice(t+1,o)),a.ok=!0,a;if(r===92&&o+1<i){o+=2;continue}o++}return a}for(s=0;o<i&&(r=e.charCodeAt(o),!(r===32||r<32||r===127));){if(r===92&&o+1<i){if(e.charCodeAt(o+1)===32)break;o+=2;continue}if(r===40&&(s++,s>32))return a;if(r===41){if(s===0)break;s--}o++}return t===o||s!==0||(a.str=w1(e.slice(t,o)),a.pos=o,a.ok=!0),a},Mye=bt.unescapeAll,Sye=function(e,t,i){var r,s,o=0,a=t,c={ok:!1,pos:0,lines:0,str:""};if(a>=i||(s=e.charCodeAt(a),s!==34&&s!==39&&s!==40))return c;for(a++,s===40&&(s=41);a<i;){if(r=e.charCodeAt(a),r===s)return c.pos=a+1,c.lines=o,c.str=Mye(e.slice(t+1,a)),c.ok=!0,c;if(r===40&&s===41)return c;r===10?o++:r===92&&a+1<i&&(a++,e.charCodeAt(a)===10&&o++),a++}return c};hm.parseLinkLabel=bye;hm.parseLinkDestination=wye;hm.parseLinkTitle=Sye;var Eye=bt.assign,Tye=bt.unescapeAll,Ma=bt.escapeHtml,Kr={};Kr.code_inline=function(n,e,t,i,r){var s=n[e];return"<code"+r.renderAttrs(s)+">"+Ma(s.content)+"</code>"};Kr.code_block=function(n,e,t,i,r){var s=n[e];return"<pre"+r.renderAttrs(s)+"><code>"+Ma(n[e].content)+`</code></pre>
`};Kr.fence=function(n,e,t,i,r){var s=n[e],o=s.info?Tye(s.info).trim():"",a="",c="",l,u,h,f,d;return o&&(h=o.split(/(\s+)/g),a=h[0],c=h.slice(2).join("")),t.highlight?l=t.highlight(s.content,a,c)||Ma(s.content):l=Ma(s.content),l.indexOf("<pre")===0?l+`
`:o?(u=s.attrIndex("class"),f=s.attrs?s.attrs.slice():[],u<0?f.push(["class",t.langPrefix+a]):(f[u]=f[u].slice(),f[u][1]+=" "+t.langPrefix+a),d={attrs:f},"<pre><code"+r.renderAttrs(d)+">"+l+`</code></pre>
`):"<pre><code"+r.renderAttrs(s)+">"+l+`</code></pre>
`};Kr.image=function(n,e,t,i,r){var s=n[e];return s.attrs[s.attrIndex("alt")][1]=r.renderInlineAsText(s.children,t,i),r.renderToken(n,e,t)};Kr.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Kr.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Kr.text=function(n,e){return Ma(n[e].content)};Kr.html_block=function(n,e){return n[e].content};Kr.html_inline=function(n,e){return n[e].content};function Rl(){this.rules=Eye({},Kr)}Rl.prototype.renderAttrs=function(e){var t,i,r;if(!e.attrs)return"";for(r="",t=0,i=e.attrs.length;t<i;t++)r+=" "+Ma(e.attrs[t][0])+'="'+Ma(e.attrs[t][1])+'"';return r};Rl.prototype.renderToken=function(e,t,i){var r,s="",o=!1,a=e[t];return a.hidden?"":(a.block&&a.nesting!==-1&&t&&e[t-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&i.xhtmlOut&&(s+=" /"),a.block&&(o=!0,a.nesting===1&&t+1<e.length&&(r=e[t+1],(r.type==="inline"||r.hidden||r.nesting===-1&&r.tag===a.tag)&&(o=!1))),s+=o?`>
`:">",s)};Rl.prototype.renderInline=function(n,e,t){for(var i,r="",s=this.rules,o=0,a=n.length;o<a;o++)i=n[o].type,typeof s[i]<"u"?r+=s[i](n,o,e,t,this):r+=this.renderToken(n,o,e);return r};Rl.prototype.renderInlineAsText=function(n,e,t){for(var i="",r=0,s=n.length;r<s;r++)n[r].type==="text"?i+=n[r].content:n[r].type==="image"?i+=this.renderInlineAsText(n[r].children,e,t):n[r].type==="softbreak"&&(i+=`
`);return i};Rl.prototype.render=function(n,e,t){var i,r,s,o="",a=this.rules;for(i=0,r=n.length;i<r;i++)s=n[i].type,s==="inline"?o+=this.renderInline(n[i].children,e,t):typeof a[s]<"u"?o+=a[s](n,i,e,t,this):o+=this.renderToken(n,i,e,t);return o};var Aye=Rl;function dr(){this.__rules__=[],this.__cache__=null}dr.prototype.__find__=function(n){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};dr.prototype.__compile__=function(){var n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(i){e.indexOf(i)<0&&e.push(i)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(i){i.enabled&&(t&&i.alt.indexOf(t)<0||n.__cache__[t].push(i.fn))})})};dr.prototype.at=function(n,e,t){var i=this.__find__(n),r=t||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__[i].fn=e,this.__rules__[i].alt=r.alt||[],this.__cache__=null};dr.prototype.before=function(n,e,t,i){var r=this.__find__(n),s=i||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};dr.prototype.after=function(n,e,t,i){var r=this.__find__(n),s=i||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(r+1,0,{name:e,enabled:!0,fn:t,alt:s.alt||[]}),this.__cache__=null};dr.prototype.push=function(n,e,t){var i=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null};dr.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);var t=[];return n.forEach(function(i){var r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!0,t.push(i)},this),this.__cache__=null,t};dr.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};dr.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);var t=[];return n.forEach(function(i){var r=this.__find__(i);if(r<0){if(e)return;throw new Error("Rules manager: invalid rule name "+i)}this.__rules__[r].enabled=!1,t.push(i)},this),this.__cache__=null,t};dr.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};var M_=dr,Cye=/\r\n?|\n/g,Lye=/\0/g,Rye=function(e){var t;t=e.src.replace(Cye,`
`),t=t.replace(Lye,"�"),e.src=t},Pye=function(e){var t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)},Iye=function(e){var t=e.tokens,i,r,s;for(r=0,s=t.length;r<s;r++)i=t[r],i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)},Dye=bt.arrayReplaceAt;function Fye(n){return/^<a[>\s]/i.test(n)}function Oye(n){return/^<\/a\s*>/i.test(n)}var kye=function(e){var t,i,r,s,o,a,c,l,u,h,f,d,p,v,y,g,m=e.tokens,w;if(e.md.options.linkify){for(i=0,r=m.length;i<r;i++)if(!(m[i].type!=="inline"||!e.md.linkify.pretest(m[i].content)))for(s=m[i].children,p=0,t=s.length-1;t>=0;t--){if(a=s[t],a.type==="link_close"){for(t--;s[t].level!==a.level&&s[t].type!=="link_open";)t--;continue}if(a.type==="html_inline"&&(Fye(a.content)&&p>0&&p--,Oye(a.content)&&p++),!(p>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(u=a.content,w=e.md.linkify.match(u),c=[],d=a.level,f=0,w.length>0&&w[0].index===0&&t>0&&s[t-1].type==="text_special"&&(w=w.slice(1)),l=0;l<w.length;l++)v=w[l].url,y=e.md.normalizeLink(v),e.md.validateLink(y)&&(g=w[l].text,w[l].schema?w[l].schema==="mailto:"&&!/^mailto:/i.test(g)?g=e.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=e.md.normalizeLinkText(g):g=e.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,""),h=w[l].index,h>f&&(o=new e.Token("text","",0),o.content=u.slice(f,h),o.level=d,c.push(o)),o=new e.Token("link_open","a",1),o.attrs=[["href",y]],o.level=d++,o.markup="linkify",o.info="auto",c.push(o),o=new e.Token("text","",0),o.content=g,o.level=d,c.push(o),o=new e.Token("link_close","a",-1),o.level=--d,o.markup="linkify",o.info="auto",c.push(o),f=w[l].lastIndex);f<u.length&&(o=new e.Token("text","",0),o.content=u.slice(f),o.level=d,c.push(o)),m[i].children=s=Dye(s,t,c)}}}},xA=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Nye=/\((c|tm|r)\)/i,Bye=/\((c|tm|r)\)/ig,zye={c:"©",r:"®",tm:"™"};function Uye(n,e){return zye[e.toLowerCase()]}function Hye(n){var e,t,i=0;for(e=n.length-1;e>=0;e--)t=n[e],t.type==="text"&&!i&&(t.content=t.content.replace(Bye,Uye)),t.type==="link_open"&&t.info==="auto"&&i--,t.type==="link_close"&&t.info==="auto"&&i++}function Gye(n){var e,t,i=0;for(e=n.length-1;e>=0;e--)t=n[e],t.type==="text"&&!i&&xA.test(t.content)&&(t.content=t.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),t.type==="link_open"&&t.info==="auto"&&i--,t.type==="link_close"&&t.info==="auto"&&i++}var Vye=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Nye.test(e.tokens[t].content)&&Hye(e.tokens[t].children),xA.test(e.tokens[t].content)&&Gye(e.tokens[t].children))},M1=bt.isWhiteSpace,S1=bt.isPunctChar,E1=bt.isMdAsciiPunct,Wye=/['"]/,T1=/['"]/g,A1="’";function Kf(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function $ye(n,e){var t,i,r,s,o,a,c,l,u,h,f,d,p,v,y,g,m,w,b,E,S;for(b=[],t=0;t<n.length;t++){for(i=n[t],c=n[t].level,m=b.length-1;m>=0&&!(b[m].level<=c);m--);if(b.length=m+1,i.type==="text"){r=i.content,o=0,a=r.length;e:for(;o<a&&(T1.lastIndex=o,s=T1.exec(r),!!s);){if(y=g=!0,o=s.index+1,w=s[0]==="'",u=32,s.index-1>=0)u=r.charCodeAt(s.index-1);else for(m=t-1;m>=0&&!(n[m].type==="softbreak"||n[m].type==="hardbreak");m--)if(n[m].content){u=n[m].content.charCodeAt(n[m].content.length-1);break}if(h=32,o<a)h=r.charCodeAt(o);else for(m=t+1;m<n.length&&!(n[m].type==="softbreak"||n[m].type==="hardbreak");m++)if(n[m].content){h=n[m].content.charCodeAt(0);break}if(f=E1(u)||S1(String.fromCharCode(u)),d=E1(h)||S1(String.fromCharCode(h)),p=M1(u),v=M1(h),v?y=!1:d&&(p||f||(y=!1)),p?g=!1:f&&(v||d||(g=!1)),h===34&&s[0]==='"'&&u>=48&&u<=57&&(g=y=!1),y&&g&&(y=f,g=d),!y&&!g){w&&(i.content=Kf(i.content,s.index,A1));continue}if(g){for(m=b.length-1;m>=0&&(l=b[m],!(b[m].level<c));m--)if(l.single===w&&b[m].level===c){l=b[m],w?(E=e.md.options.quotes[2],S=e.md.options.quotes[3]):(E=e.md.options.quotes[0],S=e.md.options.quotes[1]),i.content=Kf(i.content,s.index,S),n[l.token].content=Kf(n[l.token].content,l.pos,E),o+=S.length-1,l.token===t&&(o+=E.length-1),r=i.content,a=r.length,b.length=m;continue e}}y?b.push({token:t,pos:s.index,single:w,level:c}):g&&w&&(i.content=Kf(i.content,s.index,A1))}}}}var qye=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Wye.test(e.tokens[t].content)||$ye(e.tokens[t].children,e)},jye=function(e){var t,i,r,s,o,a,c=e.tokens;for(t=0,i=c.length;t<i;t++)if(c[t].type==="inline"){for(r=c[t].children,o=r.length,s=0;s<o;s++)r[s].type==="text_special"&&(r[s].type="text");for(s=a=0;s<o;s++)r[s].type==="text"&&s+1<o&&r[s+1].type==="text"?r[s+1].content=r[s].content+r[s+1].content:(s!==a&&(r[a]=r[s]),a++);s!==a&&(r.length=a)}};function Pl(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Pl.prototype.attrIndex=function(e){var t,i,r;if(!this.attrs)return-1;for(t=this.attrs,i=0,r=t.length;i<r;i++)if(t[i][0]===e)return i;return-1};Pl.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Pl.prototype.attrSet=function(e,t){var i=this.attrIndex(e),r=[e,t];i<0?this.attrPush(r):this.attrs[i]=r};Pl.prototype.attrGet=function(e){var t=this.attrIndex(e),i=null;return t>=0&&(i=this.attrs[t][1]),i};Pl.prototype.attrJoin=function(e,t){var i=this.attrIndex(e);i<0?this.attrPush([e,t]):this.attrs[i][1]=this.attrs[i][1]+" "+t};var S_=Pl,Xye=S_;function bA(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}bA.prototype.Token=Xye;var Yye=bA,Zye=M_,Cg=[["normalize",Rye],["block",Pye],["inline",Iye],["linkify",kye],["replacements",Vye],["smartquotes",qye],["text_join",jye]];function E_(){this.ruler=new Zye;for(var n=0;n<Cg.length;n++)this.ruler.push(Cg[n][0],Cg[n][1])}E_.prototype.process=function(n){var e,t,i;for(i=this.ruler.getRules(""),e=0,t=i.length;e<t;e++)i[e](n)};E_.prototype.State=Yye;var Jye=E_,Lg=bt.isSpace;function Rg(n,e){var t=n.bMarks[e]+n.tShift[e],i=n.eMarks[e];return n.src.slice(t,i)}function C1(n){var e=[],t=0,i=n.length,r,s=!1,o=0,a="";for(r=n.charCodeAt(t);t<i;)r===124&&(s?(a+=n.substring(o,t-1),o=t):(e.push(a+n.substring(o,t)),a="",o=t+1)),s=r===92,t++,r=n.charCodeAt(t);return e.push(a+n.substring(o)),e}var Kye=function(e,t,i,r){var s,o,a,c,l,u,h,f,d,p,v,y,g,m,w,b,E,S;if(t+2>i||(u=t+1,e.sCount[u]<e.blkIndent)||e.sCount[u]-e.blkIndent>=4||(a=e.bMarks[u]+e.tShift[u],a>=e.eMarks[u])||(E=e.src.charCodeAt(a++),E!==124&&E!==45&&E!==58)||a>=e.eMarks[u]||(S=e.src.charCodeAt(a++),S!==124&&S!==45&&S!==58&&!Lg(S))||E===45&&Lg(S))return!1;for(;a<e.eMarks[u];){if(s=e.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!Lg(s))return!1;a++}for(o=Rg(e,t+1),h=o.split("|"),p=[],c=0;c<h.length;c++){if(v=h[c].trim(),!v){if(c===0||c===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;v.charCodeAt(v.length-1)===58?p.push(v.charCodeAt(0)===58?"center":"right"):v.charCodeAt(0)===58?p.push("left"):p.push("")}if(o=Rg(e,t).trim(),o.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4||(h=C1(o),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),f=h.length,f===0||f!==p.length))return!1;if(r)return!0;for(m=e.parentType,e.parentType="table",b=e.md.block.ruler.getRules("blockquote"),d=e.push("table_open","table",1),d.map=y=[t,0],d=e.push("thead_open","thead",1),d.map=[t,t+1],d=e.push("tr_open","tr",1),d.map=[t,t+1],c=0;c<h.length;c++)d=e.push("th_open","th",1),p[c]&&(d.attrs=[["style","text-align:"+p[c]]]),d=e.push("inline","",0),d.content=h[c].trim(),d.children=[],d=e.push("th_close","th",-1);for(d=e.push("tr_close","tr",-1),d=e.push("thead_close","thead",-1),u=t+2;u<i&&!(e.sCount[u]<e.blkIndent);u++){for(w=!1,c=0,l=b.length;c<l;c++)if(b[c](e,u,i,!0)){w=!0;break}if(w||(o=Rg(e,u).trim(),!o)||e.sCount[u]-e.blkIndent>=4)break;for(h=C1(o),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),u===t+2&&(d=e.push("tbody_open","tbody",1),d.map=g=[t+2,0]),d=e.push("tr_open","tr",1),d.map=[u,u+1],c=0;c<f;c++)d=e.push("td_open","td",1),p[c]&&(d.attrs=[["style","text-align:"+p[c]]]),d=e.push("inline","",0),d.content=h[c]?h[c].trim():"",d.children=[],d=e.push("td_close","td",-1);d=e.push("tr_close","tr",-1)}return g&&(d=e.push("tbody_close","tbody",-1),g[1]=u),d=e.push("table_close","table",-1),y[1]=u,e.parentType=m,e.line=u,!0},Qye=function(e,t,i){var r,s,o;if(e.sCount[t]-e.blkIndent<4)return!1;for(s=r=t+1;r<i;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}return e.line=s,o=e.push("code_block","code",0),o.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,o.map=[t,e.line],!0},e_e=function(e,t,i,r){var s,o,a,c,l,u,h,f=!1,d=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||d+3>p||(s=e.src.charCodeAt(d),s!==126&&s!==96)||(l=d,d=e.skipChars(d,s),o=d-l,o<3)||(h=e.src.slice(l,d),a=e.src.slice(d,p),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(r)return!0;for(c=t;c++,!(c>=i||(d=l=e.bMarks[c]+e.tShift[c],p=e.eMarks[c],d<p&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(d)===s&&!(e.sCount[c]-e.blkIndent>=4)&&(d=e.skipChars(d,s),!(d-l<o)&&(d=e.skipSpaces(d),!(d<p)))){f=!0;break}return o=e.sCount[t],e.line=c+(f?1:0),u=e.push("fence","code",0),u.info=a,u.content=e.getLines(t+1,c,o,!0),u.markup=h,u.map=[t,e.line],!0},t_e=bt.isSpace,n_e=function(e,t,i,r){var s,o,a,c,l,u,h,f,d,p,v,y,g,m,w,b,E,S,P,N,z=e.lineMax,_=e.bMarks[t]+e.tShift[t],x=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(_)!==62)return!1;if(r)return!0;for(p=[],v=[],m=[],w=[],S=e.md.block.ruler.getRules("blockquote"),g=e.parentType,e.parentType="blockquote",f=t;f<i&&(N=e.sCount[f]<e.blkIndent,_=e.bMarks[f]+e.tShift[f],x=e.eMarks[f],!(_>=x));f++){if(e.src.charCodeAt(_++)===62&&!N){for(c=e.sCount[f]+1,e.src.charCodeAt(_)===32?(_++,c++,s=!1,b=!0):e.src.charCodeAt(_)===9?(b=!0,(e.bsCount[f]+c)%4===3?(_++,c++,s=!1):s=!0):b=!1,d=c,p.push(e.bMarks[f]),e.bMarks[f]=_;_<x&&(o=e.src.charCodeAt(_),t_e(o));){o===9?d+=4-(d+e.bsCount[f]+(s?1:0))%4:d++;_++}u=_>=x,v.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(b?1:0),m.push(e.sCount[f]),e.sCount[f]=d-c,w.push(e.tShift[f]),e.tShift[f]=_-e.bMarks[f];continue}if(u)break;for(E=!1,a=0,l=S.length;a<l;a++)if(S[a](e,f,i,!0)){E=!0;break}if(E){e.lineMax=f,e.blkIndent!==0&&(p.push(e.bMarks[f]),v.push(e.bsCount[f]),w.push(e.tShift[f]),m.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}p.push(e.bMarks[f]),v.push(e.bsCount[f]),w.push(e.tShift[f]),m.push(e.sCount[f]),e.sCount[f]=-1}for(y=e.blkIndent,e.blkIndent=0,P=e.push("blockquote_open","blockquote",1),P.markup=">",P.map=h=[t,0],e.md.block.tokenize(e,t,f),P=e.push("blockquote_close","blockquote",-1),P.markup=">",e.lineMax=z,e.parentType=g,h[1]=e.line,a=0;a<w.length;a++)e.bMarks[a+t]=p[a],e.tShift[a+t]=w[a],e.sCount[a+t]=m[a],e.bsCount[a+t]=v[a];return e.blkIndent=y,!0},i_e=bt.isSpace,r_e=function(e,t,i,r){var s,o,a,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||(s=e.src.charCodeAt(l++),s!==42&&s!==45&&s!==95))return!1;for(o=1;l<u;){if(a=e.src.charCodeAt(l++),a!==s&&!i_e(a))return!1;a===s&&o++}return o<3?!1:(r||(e.line=t+1,c=e.push("hr","hr",0),c.map=[t,e.line],c.markup=Array(o+1).join(String.fromCharCode(s))),!0)},wA=bt.isSpace;function L1(n,e){var t,i,r,s;return i=n.bMarks[e]+n.tShift[e],r=n.eMarks[e],t=n.src.charCodeAt(i++),t!==42&&t!==45&&t!==43||i<r&&(s=n.src.charCodeAt(i),!wA(s))?-1:i}function R1(n,e){var t,i=n.bMarks[e]+n.tShift[e],r=i,s=n.eMarks[e];if(r+1>=s||(t=n.src.charCodeAt(r++),t<48||t>57))return-1;for(;;){if(r>=s)return-1;if(t=n.src.charCodeAt(r++),t>=48&&t<=57){if(r-i>=10)return-1;continue}if(t===41||t===46)break;return-1}return r<s&&(t=n.src.charCodeAt(r),!wA(t))?-1:r}function s_e(n,e){var t,i,r=n.level+2;for(t=e+2,i=n.tokens.length-2;t<i;t++)n.tokens[t].level===r&&n.tokens[t].type==="paragraph_open"&&(n.tokens[t+2].hidden=!0,n.tokens[t].hidden=!0,t+=2)}var o_e=function(e,t,i,r){var s,o,a,c,l,u,h,f,d,p,v,y,g,m,w,b,E,S,P,N,z,_,x,T,A,M,L,I=t,k=!1,W=!0;if(e.sCount[I]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[I]-e.listIndent>=4&&e.sCount[I]<e.blkIndent)return!1;if(r&&e.parentType==="paragraph"&&e.sCount[I]>=e.blkIndent&&(k=!0),(_=R1(e,I))>=0){if(h=!0,T=e.bMarks[I]+e.tShift[I],g=Number(e.src.slice(T,_-1)),k&&g!==1)return!1}else if((_=L1(e,I))>=0)h=!1;else return!1;if(k&&e.skipSpaces(_)>=e.eMarks[I])return!1;if(r)return!0;for(y=e.src.charCodeAt(_-1),v=e.tokens.length,h?(L=e.push("ordered_list_open","ol",1),g!==1&&(L.attrs=[["start",g]])):L=e.push("bullet_list_open","ul",1),L.map=p=[I,0],L.markup=String.fromCharCode(y),x=!1,M=e.md.block.ruler.getRules("list"),E=e.parentType,e.parentType="list";I<i;){for(z=_,m=e.eMarks[I],u=w=e.sCount[I]+_-(e.bMarks[I]+e.tShift[I]);z<m;){if(s=e.src.charCodeAt(z),s===9)w+=4-(w+e.bsCount[I])%4;else if(s===32)w++;else break;z++}if(o=z,o>=m?l=1:l=w-u,l>4&&(l=1),c=u+l,L=e.push("list_item_open","li",1),L.markup=String.fromCharCode(y),L.map=f=[I,0],h&&(L.info=e.src.slice(T,_-1)),N=e.tight,P=e.tShift[I],S=e.sCount[I],b=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[I]=o-e.bMarks[I],e.sCount[I]=w,o>=m&&e.isEmpty(I+1)?e.line=Math.min(e.line+2,i):e.md.block.tokenize(e,I,i,!0),(!e.tight||x)&&(W=!1),x=e.line-I>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=b,e.tShift[I]=P,e.sCount[I]=S,e.tight=N,L=e.push("list_item_close","li",-1),L.markup=String.fromCharCode(y),I=e.line,f[1]=I,I>=i||e.sCount[I]<e.blkIndent||e.sCount[I]-e.blkIndent>=4)break;for(A=!1,a=0,d=M.length;a<d;a++)if(M[a](e,I,i,!0)){A=!0;break}if(A)break;if(h){if(_=R1(e,I),_<0)break;T=e.bMarks[I]+e.tShift[I]}else if(_=L1(e,I),_<0)break;if(y!==e.src.charCodeAt(_-1))break}return h?L=e.push("ordered_list_close","ol",-1):L=e.push("bullet_list_close","ul",-1),L.markup=String.fromCharCode(y),p[1]=I,e.line=I,e.parentType=E,W&&s_e(e,v),!0},a_e=bt.normalizeReference,Qf=bt.isSpace,c_e=function(e,t,i,r){var s,o,a,c,l,u,h,f,d,p,v,y,g,m,w,b,E=0,S=e.bMarks[t]+e.tShift[t],P=e.eMarks[t],N=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(S)!==91)return!1;for(;++S<P;)if(e.src.charCodeAt(S)===93&&e.src.charCodeAt(S-1)!==92){if(S+1===P||e.src.charCodeAt(S+1)!==58)return!1;break}for(c=e.lineMax,w=e.md.block.ruler.getRules("reference"),p=e.parentType,e.parentType="reference";N<c&&!e.isEmpty(N);N++)if(!(e.sCount[N]-e.blkIndent>3)&&!(e.sCount[N]<0)){for(m=!1,u=0,h=w.length;u<h;u++)if(w[u](e,N,c,!0)){m=!0;break}if(m)break}for(g=e.getLines(t,N,e.blkIndent,!1).trim(),P=g.length,S=1;S<P;S++){if(s=g.charCodeAt(S),s===91)return!1;if(s===93){d=S;break}else s===10?E++:s===92&&(S++,S<P&&g.charCodeAt(S)===10&&E++)}if(d<0||g.charCodeAt(d+1)!==58)return!1;for(S=d+2;S<P;S++)if(s=g.charCodeAt(S),s===10)E++;else if(!Qf(s))break;if(v=e.md.helpers.parseLinkDestination(g,S,P),!v.ok||(l=e.md.normalizeLink(v.str),!e.md.validateLink(l)))return!1;for(S=v.pos,E+=v.lines,o=S,a=E,y=S;S<P;S++)if(s=g.charCodeAt(S),s===10)E++;else if(!Qf(s))break;for(v=e.md.helpers.parseLinkTitle(g,S,P),S<P&&y!==S&&v.ok?(b=v.str,S=v.pos,E+=v.lines):(b="",S=o,E=a);S<P&&(s=g.charCodeAt(S),!!Qf(s));)S++;if(S<P&&g.charCodeAt(S)!==10&&b)for(b="",S=o,E=a;S<P&&(s=g.charCodeAt(S),!!Qf(s));)S++;return S<P&&g.charCodeAt(S)!==10||(f=a_e(g.slice(1,d)),!f)?!1:(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[f]>"u"&&(e.env.references[f]={title:b,href:l}),e.parentType=p,e.line=t+E+1),!0)},l_e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fm={},u_e="[a-zA-Z_:][a-zA-Z0-9:._-]*",h_e="[^\"'=<>`\\x00-\\x20]+",f_e="'[^']*'",d_e='"[^"]*"',p_e="(?:"+h_e+"|"+f_e+"|"+d_e+")",m_e="(?:\\s+"+u_e+"(?:\\s*=\\s*"+p_e+")?)",MA="<[A-Za-z][A-Za-z0-9\\-]*"+m_e+"*\\s*\\/?>",SA="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",g_e="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",v_e="<[?][\\s\\S]*?[?]>",y_e="<![A-Z]+\\s+[^>]*>",__e="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",x_e=new RegExp("^(?:"+MA+"|"+SA+"|"+g_e+"|"+v_e+"|"+y_e+"|"+__e+")"),b_e=new RegExp("^(?:"+MA+"|"+SA+")");fm.HTML_TAG_RE=x_e;fm.HTML_OPEN_CLOSE_TAG_RE=b_e;var w_e=l_e,M_e=fm.HTML_OPEN_CLOSE_TAG_RE,Ja=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+w_e.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(M_e.source+"\\s*$"),/^$/,!1]],S_e=function(e,t,i,r){var s,o,a,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(l)!==60)return!1;for(c=e.src.slice(l,u),s=0;s<Ja.length&&!Ja[s][0].test(c);s++);if(s===Ja.length)return!1;if(r)return Ja[s][2];if(o=t+1,!Ja[s][1].test(c)){for(;o<i&&!(e.sCount[o]<e.blkIndent);o++)if(l=e.bMarks[o]+e.tShift[o],u=e.eMarks[o],c=e.src.slice(l,u),Ja[s][1].test(c)){c.length!==0&&o++;break}}return e.line=o,a=e.push("html_block","",0),a.map=[t,o],a.content=e.getLines(t,o,e.blkIndent,!0),!0},P1=bt.isSpace,E_e=function(e,t,i,r){var s,o,a,c,l=e.bMarks[t]+e.tShift[t],u=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||(s=e.src.charCodeAt(l),s!==35||l>=u))return!1;for(o=1,s=e.src.charCodeAt(++l);s===35&&l<u&&o<=6;)o++,s=e.src.charCodeAt(++l);return o>6||l<u&&!P1(s)?!1:(r||(u=e.skipSpacesBack(u,l),a=e.skipCharsBack(u,35,l),a>l&&P1(e.src.charCodeAt(a-1))&&(u=a),e.line=t+1,c=e.push("heading_open","h"+String(o),1),c.markup="########".slice(0,o),c.map=[t,e.line],c=e.push("inline","",0),c.content=e.src.slice(l,u).trim(),c.map=[t,e.line],c.children=[],c=e.push("heading_close","h"+String(o),-1),c.markup="########".slice(0,o)),!0)},T_e=function(e,t,i){var r,s,o,a,c,l,u,h,f,d=t+1,p,v=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(p=e.parentType,e.parentType="paragraph";d<i&&!e.isEmpty(d);d++)if(!(e.sCount[d]-e.blkIndent>3)){if(e.sCount[d]>=e.blkIndent&&(l=e.bMarks[d]+e.tShift[d],u=e.eMarks[d],l<u&&(f=e.src.charCodeAt(l),(f===45||f===61)&&(l=e.skipChars(l,f),l=e.skipSpaces(l),l>=u)))){h=f===61?1:2;break}if(!(e.sCount[d]<0)){for(s=!1,o=0,a=v.length;o<a;o++)if(v[o](e,d,i,!0)){s=!0;break}if(s)break}}return h?(r=e.getLines(t,d,e.blkIndent,!1).trim(),e.line=d+1,c=e.push("heading_open","h"+String(h),1),c.markup=String.fromCharCode(f),c.map=[t,e.line],c=e.push("inline","",0),c.content=r,c.map=[t,e.line-1],c.children=[],c=e.push("heading_close","h"+String(h),-1),c.markup=String.fromCharCode(f),e.parentType=p,!0):!1},A_e=function(e,t,i){var r,s,o,a,c,l,u=t+1,h=e.md.block.ruler.getRules("paragraph");for(l=e.parentType,e.parentType="paragraph";u<i&&!e.isEmpty(u);u++)if(!(e.sCount[u]-e.blkIndent>3)&&!(e.sCount[u]<0)){for(s=!1,o=0,a=h.length;o<a;o++)if(h[o](e,u,i,!0)){s=!0;break}if(s)break}return r=e.getLines(t,u,e.blkIndent,!1).trim(),e.line=u,c=e.push("paragraph_open","p",1),c.map=[t,e.line],c=e.push("inline","",0),c.content=r,c.map=[t,e.line],c.children=[],c=e.push("paragraph_close","p",-1),e.parentType=l,!0},EA=S_,dm=bt.isSpace;function Qr(n,e,t,i){var r,s,o,a,c,l,u,h;for(this.src=n,this.md=e,this.env=t,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,h=!1,o=a=l=u=0,c=s.length;a<c;a++){if(r=s.charCodeAt(a),!h)if(dm(r)){l++,r===9?u+=4-u%4:u++;continue}else h=!0;(r===10||a===c-1)&&(r!==10&&a++,this.bMarks.push(o),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),h=!1,l=0,u=0,o=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Qr.prototype.push=function(n,e,t){var i=new EA(n,e,t);return i.block=!0,t<0&&this.level--,i.level=this.level,t>0&&this.level++,this.tokens.push(i),i};Qr.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Qr.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Qr.prototype.skipSpaces=function(e){for(var t,i=this.src.length;e<i&&(t=this.src.charCodeAt(e),!!dm(t));e++);return e};Qr.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!dm(this.src.charCodeAt(--e)))return e+1;return e};Qr.prototype.skipChars=function(e,t){for(var i=this.src.length;e<i&&this.src.charCodeAt(e)===t;e++);return e};Qr.prototype.skipCharsBack=function(e,t,i){if(e<=i)return e;for(;e>i;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Qr.prototype.getLines=function(e,t,i,r){var s,o,a,c,l,u,h,f=e;if(e>=t)return"";for(u=new Array(t-e),s=0;f<t;f++,s++){for(o=0,h=c=this.bMarks[f],f+1<t||r?l=this.eMarks[f]+1:l=this.eMarks[f];c<l&&o<i;){if(a=this.src.charCodeAt(c),dm(a))a===9?o+=4-(o+this.bsCount[f])%4:o++;else if(c-h<this.tShift[f])o++;else break;c++}o>i?u[s]=new Array(o-i+1).join(" ")+this.src.slice(c,l):u[s]=this.src.slice(c,l)}return u.join("")};Qr.prototype.Token=EA;var C_e=Qr,L_e=M_,ed=[["table",Kye,["paragraph","reference"]],["code",Qye],["fence",e_e,["paragraph","reference","blockquote","list"]],["blockquote",n_e,["paragraph","reference","blockquote","list"]],["hr",r_e,["paragraph","reference","blockquote","list"]],["list",o_e,["paragraph","reference","blockquote"]],["reference",c_e],["html_block",S_e,["paragraph","reference","blockquote"]],["heading",E_e,["paragraph","reference","blockquote"]],["lheading",T_e],["paragraph",A_e]];function pm(){this.ruler=new L_e;for(var n=0;n<ed.length;n++)this.ruler.push(ed[n][0],ed[n][1],{alt:(ed[n][2]||[]).slice()})}pm.prototype.tokenize=function(n,e,t){for(var i,r,s,o=this.ruler.getRules(""),a=o.length,c=e,l=!1,u=n.md.options.maxNesting;c<t&&(n.line=c=n.skipEmptyLines(c),!(c>=t||n.sCount[c]<n.blkIndent));){if(n.level>=u){n.line=t;break}for(s=n.line,r=0;r<a;r++)if(i=o[r](n,c,t,!1),i){if(s>=n.line)throw new Error("block rule didn't increment state.line");break}if(!i)throw new Error("none of the block rules matched");n.tight=!l,n.isEmpty(n.line-1)&&(l=!0),c=n.line,c<t&&n.isEmpty(c)&&(l=!0,c++,n.line=c)}};pm.prototype.parse=function(n,e,t,i){var r;n&&(r=new this.State(n,e,t,i),this.tokenize(r,r.line,r.lineMax))};pm.prototype.State=C_e;var R_e=pm;function P_e(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var I_e=function(e,t){for(var i=e.pos;i<e.posMax&&!P_e(e.src.charCodeAt(i));)i++;return i===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,i)),e.pos=i,!0)},D_e=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i,F_e=function(e,t){var i,r,s,o,a,c,l,u;return!e.md.options.linkify||e.linkLevel>0||(i=e.pos,r=e.posMax,i+3>r)||e.src.charCodeAt(i)!==58||e.src.charCodeAt(i+1)!==47||e.src.charCodeAt(i+2)!==47||(s=e.pending.match(D_e),!s)||(o=s[1],a=e.md.linkify.matchAtStart(e.src.slice(i-o.length)),!a)||(c=a.url,c.length<=o.length)||(c=c.replace(/\*+$/,""),l=e.md.normalizeLink(c),!e.md.validateLink(l))?!1:(t||(e.pending=e.pending.slice(0,-o.length),u=e.push("link_open","a",1),u.attrs=[["href",l]],u.markup="linkify",u.info="auto",u=e.push("text","",0),u.content=e.md.normalizeLinkText(c),u=e.push("link_close","a",-1),u.markup="linkify",u.info="auto"),e.pos+=c.length-o.length,!0)},O_e=bt.isSpace,k_e=function(e,t){var i,r,s,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;if(i=e.pending.length-1,r=e.posMax,!t)if(i>=0&&e.pending.charCodeAt(i)===32)if(i>=1&&e.pending.charCodeAt(i-1)===32){for(s=i-1;s>=1&&e.pending.charCodeAt(s-1)===32;)s--;e.pending=e.pending.slice(0,s),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(o++;o<r&&O_e(e.src.charCodeAt(o));)o++;return e.pos=o,!0},N_e=bt.isSpace,T_=[];for(var I1=0;I1<256;I1++)T_.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){T_[n.charCodeAt(0)]=1});var B_e=function(e,t){var i,r,s,o,a,c=e.pos,l=e.posMax;if(e.src.charCodeAt(c)!==92||(c++,c>=l))return!1;if(i=e.src.charCodeAt(c),i===10){for(t||e.push("hardbreak","br",0),c++;c<l&&(i=e.src.charCodeAt(c),!!N_e(i));)c++;return e.pos=c,!0}return o=e.src[c],i>=55296&&i<=56319&&c+1<l&&(r=e.src.charCodeAt(c+1),r>=56320&&r<=57343&&(o+=e.src[c+1],c++)),s="\\"+o,t||(a=e.push("text_special","",0),i<256&&T_[i]!==0?a.content=o:a.content=s,a.markup=s,a.info="escape"),e.pos=c+1,!0},z_e=function(e,t){var i,r,s,o,a,c,l,u,h=e.pos,f=e.src.charCodeAt(h);if(f!==96)return!1;for(i=h,h++,r=e.posMax;h<r&&e.src.charCodeAt(h)===96;)h++;if(s=e.src.slice(i,h),l=s.length,e.backticksScanned&&(e.backticks[l]||0)<=i)return t||(e.pending+=s),e.pos+=l,!0;for(c=h;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<r&&e.src.charCodeAt(c)===96;)c++;if(u=c-a,u===l)return t||(o=e.push("code_inline","code",0),o.markup=s,o.content=e.src.slice(h,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[u]=a}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=l,!0},mm={};mm.tokenize=function(e,t){var i,r,s,o,a,c=e.pos,l=e.src.charCodeAt(c);if(t||l!==126||(r=e.scanDelims(e.pos,!0),o=r.length,a=String.fromCharCode(l),o<2))return!1;for(o%2&&(s=e.push("text","",0),s.content=a,o--),i=0;i<o;i+=2)s=e.push("text","",0),s.content=a+a,e.delimiters.push({marker:l,length:0,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0};function D1(n,e){var t,i,r,s,o,a=[],c=e.length;for(t=0;t<c;t++)r=e[t],r.marker===126&&r.end!==-1&&(s=e[r.end],o=n.tokens[r.token],o.type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",o=n.tokens[s.token],o.type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="",n.tokens[s.token-1].type==="text"&&n.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(t=a.pop(),i=t+1;i<n.tokens.length&&n.tokens[i].type==="s_close";)i++;i--,t!==i&&(o=n.tokens[i],n.tokens[i]=n.tokens[t],n.tokens[t]=o)}}mm.postProcess=function(e){var t,i=e.tokens_meta,r=e.tokens_meta.length;for(D1(e,e.delimiters),t=0;t<r;t++)i[t]&&i[t].delimiters&&D1(e,i[t].delimiters)};var gm={};gm.tokenize=function(e,t){var i,r,s,o=e.pos,a=e.src.charCodeAt(o);if(t||a!==95&&a!==42)return!1;for(r=e.scanDelims(e.pos,a===42),i=0;i<r.length;i++)s=e.push("text","",0),s.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:r.length,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0};function F1(n,e){var t,i,r,s,o,a,c=e.length;for(t=c-1;t>=0;t--)i=e[t],!(i.marker!==95&&i.marker!==42)&&i.end!==-1&&(r=e[i.end],a=t>0&&e[t-1].end===i.end+1&&e[t-1].marker===i.marker&&e[t-1].token===i.token-1&&e[i.end+1].token===r.token+1,o=String.fromCharCode(i.marker),s=n.tokens[i.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?o+o:o,s.content="",s=n.tokens[r.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?o+o:o,s.content="",a&&(n.tokens[e[t-1].token].content="",n.tokens[e[i.end+1].token].content="",t--))}gm.postProcess=function(e){var t,i=e.tokens_meta,r=e.tokens_meta.length;for(F1(e,e.delimiters),t=0;t<r;t++)i[t]&&i[t].delimiters&&F1(e,i[t].delimiters)};var U_e=bt.normalizeReference,Pg=bt.isSpace,H_e=function(e,t){var i,r,s,o,a,c,l,u,h,f="",d="",p=e.pos,v=e.posMax,y=e.pos,g=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,o=e.md.helpers.parseLinkLabel(e,e.pos,!0),o<0))return!1;if(c=o+1,c<v&&e.src.charCodeAt(c)===40){for(g=!1,c++;c<v&&(r=e.src.charCodeAt(c),!(!Pg(r)&&r!==10));c++);if(c>=v)return!1;if(y=c,l=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),l.ok){for(f=e.md.normalizeLink(l.str),e.md.validateLink(f)?c=l.pos:f="",y=c;c<v&&(r=e.src.charCodeAt(c),!(!Pg(r)&&r!==10));c++);if(l=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<v&&y!==c&&l.ok)for(d=l.str,c=l.pos;c<v&&(r=e.src.charCodeAt(c),!(!Pg(r)&&r!==10));c++);}(c>=v||e.src.charCodeAt(c)!==41)&&(g=!0),c++}if(g){if(typeof e.env.references>"u")return!1;if(c<v&&e.src.charCodeAt(c)===91?(y=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?s=e.src.slice(y,c++):c=o+1):c=o+1,s||(s=e.src.slice(a,o)),u=e.env.references[U_e(s)],!u)return e.pos=p,!1;f=u.href,d=u.title}return t||(e.pos=a,e.posMax=o,h=e.push("link_open","a",1),h.attrs=i=[["href",f]],d&&i.push(["title",d]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,h=e.push("link_close","a",-1)),e.pos=c,e.posMax=v,!0},G_e=bt.normalizeReference,Ig=bt.isSpace,V_e=function(e,t){var i,r,s,o,a,c,l,u,h,f,d,p,v,y="",g=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(l=a+1,l<m&&e.src.charCodeAt(l)===40){for(l++;l<m&&(r=e.src.charCodeAt(l),!(!Ig(r)&&r!==10));l++);if(l>=m)return!1;for(v=l,h=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),h.ok&&(y=e.md.normalizeLink(h.str),e.md.validateLink(y)?l=h.pos:y=""),v=l;l<m&&(r=e.src.charCodeAt(l),!(!Ig(r)&&r!==10));l++);if(h=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<m&&v!==l&&h.ok)for(f=h.str,l=h.pos;l<m&&(r=e.src.charCodeAt(l),!(!Ig(r)&&r!==10));l++);else f="";if(l>=m||e.src.charCodeAt(l)!==41)return e.pos=g,!1;l++}else{if(typeof e.env.references>"u")return!1;if(l<m&&e.src.charCodeAt(l)===91?(v=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?o=e.src.slice(v,l++):l=a+1):l=a+1,o||(o=e.src.slice(c,a)),u=e.env.references[G_e(o)],!u)return e.pos=g,!1;y=u.href,f=u.title}return t||(s=e.src.slice(c,a),e.md.inline.parse(s,e.md,e.env,p=[]),d=e.push("image","img",0),d.attrs=i=[["src",y],["alt",""]],d.children=p,d.content=s,f&&i.push(["title",f])),e.pos=l,e.posMax=m,!0},W_e=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,$_e=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,q_e=function(e,t){var i,r,s,o,a,c,l=e.pos;if(e.src.charCodeAt(l)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++l>=c||(o=e.src.charCodeAt(l),o===60))return!1;if(o===62)break}return i=e.src.slice(a+1,l),$_e.test(i)?(r=e.md.normalizeLink(i),e.md.validateLink(r)?(t||(s=e.push("link_open","a",1),s.attrs=[["href",r]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(i),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=i.length+2,!0):!1):W_e.test(i)?(r=e.md.normalizeLink("mailto:"+i),e.md.validateLink(r)?(t||(s=e.push("link_open","a",1),s.attrs=[["href",r]],s.markup="autolink",s.info="auto",s=e.push("text","",0),s.content=e.md.normalizeLinkText(i),s=e.push("link_close","a",-1),s.markup="autolink",s.info="auto"),e.pos+=i.length+2,!0):!1):!1},j_e=fm.HTML_TAG_RE;function X_e(n){return/^<a[>\s]/i.test(n)}function Y_e(n){return/^<\/a\s*>/i.test(n)}function Z_e(n){var e=n|32;return e>=97&&e<=122}var J_e=function(e,t){var i,r,s,o,a=e.pos;return!e.md.options.html||(s=e.posMax,e.src.charCodeAt(a)!==60||a+2>=s)||(i=e.src.charCodeAt(a+1),i!==33&&i!==63&&i!==47&&!Z_e(i))||(r=e.src.slice(a).match(j_e),!r)?!1:(t||(o=e.push("html_inline","",0),o.content=r[0],X_e(o.content)&&e.linkLevel++,Y_e(o.content)&&e.linkLevel--),e.pos+=r[0].length,!0)},O1=gA,K_e=bt.has,Q_e=bt.isValidEntityCode,k1=bt.fromCodePoint,exe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,txe=/^&([a-z][a-z0-9]{1,31});/i,nxe=function(e,t){var i,r,s,o,a=e.pos,c=e.posMax;if(e.src.charCodeAt(a)!==38||a+1>=c)return!1;if(i=e.src.charCodeAt(a+1),i===35){if(s=e.src.slice(a).match(exe),s)return t||(r=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),o=e.push("text_special","",0),o.content=Q_e(r)?k1(r):k1(65533),o.markup=s[0],o.info="entity"),e.pos+=s[0].length,!0}else if(s=e.src.slice(a).match(txe),s&&K_e(O1,s[1]))return t||(o=e.push("text_special","",0),o.content=O1[s[1]],o.markup=s[0],o.info="entity"),e.pos+=s[0].length,!0;return!1};function N1(n){var e,t,i,r,s,o,a,c,l={},u=n.length;if(u){var h=0,f=-2,d=[];for(e=0;e<u;e++)if(i=n[e],d.push(0),(n[h].marker!==i.marker||f!==i.token-1)&&(h=e),f=i.token,i.length=i.length||0,!!i.close){for(l.hasOwnProperty(i.marker)||(l[i.marker]=[-1,-1,-1,-1,-1,-1]),s=l[i.marker][(i.open?3:0)+i.length%3],t=h-d[h]-1,o=t;t>s;t-=d[t]+1)if(r=n[t],r.marker===i.marker&&r.open&&r.end<0&&(a=!1,(r.close||i.open)&&(r.length+i.length)%3===0&&(r.length%3!==0||i.length%3!==0)&&(a=!0),!a)){c=t>0&&!n[t-1].open?d[t-1]+1:0,d[e]=e-t+c,d[t]=c,i.open=!1,r.end=e,r.close=!1,o=-1,f=-2;break}o!==-1&&(l[i.marker][(i.open?3:0)+(i.length||0)%3]=o)}}}var ixe=function(e){var t,i=e.tokens_meta,r=e.tokens_meta.length;for(N1(e.delimiters),t=0;t<r;t++)i[t]&&i[t].delimiters&&N1(i[t].delimiters)},rxe=function(e){var t,i,r=0,s=e.tokens,o=e.tokens.length;for(t=i=0;t<o;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==i&&(s[i]=s[t]),i++);t!==i&&(s.length=i)},A_=S_,B1=bt.isWhiteSpace,z1=bt.isPunctChar,U1=bt.isMdAsciiPunct;function ef(n,e,t,i){this.src=n,this.env=t,this.md=e,this.tokens=i,this.tokens_meta=Array(i.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}ef.prototype.pushPending=function(){var n=new A_("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};ef.prototype.push=function(n,e,t){this.pending&&this.pushPending();var i=new A_(n,e,t),r=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],r={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(r),i};ef.prototype.scanDelims=function(n,e){var t=n,i,r,s,o,a,c,l,u,h,f=!0,d=!0,p=this.posMax,v=this.src.charCodeAt(n);for(i=n>0?this.src.charCodeAt(n-1):32;t<p&&this.src.charCodeAt(t)===v;)t++;return s=t-n,r=t<p?this.src.charCodeAt(t):32,l=U1(i)||z1(String.fromCharCode(i)),h=U1(r)||z1(String.fromCharCode(r)),c=B1(i),u=B1(r),u?f=!1:h&&(c||l||(f=!1)),c?d=!1:l&&(u||h||(d=!1)),e?(o=f,a=d):(o=f&&(!d||l),a=d&&(!f||h)),{can_open:o,can_close:a,length:s}};ef.prototype.Token=A_;var sxe=ef,H1=M_,Dg=[["text",I_e],["linkify",F_e],["newline",k_e],["escape",B_e],["backticks",z_e],["strikethrough",mm.tokenize],["emphasis",gm.tokenize],["link",H_e],["image",V_e],["autolink",q_e],["html_inline",J_e],["entity",nxe]],Fg=[["balance_pairs",ixe],["strikethrough",mm.postProcess],["emphasis",gm.postProcess],["fragments_join",rxe]];function tf(){var n;for(this.ruler=new H1,n=0;n<Dg.length;n++)this.ruler.push(Dg[n][0],Dg[n][1]);for(this.ruler2=new H1,n=0;n<Fg.length;n++)this.ruler2.push(Fg[n][0],Fg[n][1])}tf.prototype.skipToken=function(n){var e,t,i=n.pos,r=this.ruler.getRules(""),s=r.length,o=n.md.options.maxNesting,a=n.cache;if(typeof a[i]<"u"){n.pos=a[i];return}if(n.level<o){for(t=0;t<s;t++)if(n.level++,e=r[t](n,!0),n.level--,e){if(i>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;e||n.pos++,a[i]=n.pos};tf.prototype.tokenize=function(n){for(var e,t,i,r=this.ruler.getRules(""),s=r.length,o=n.posMax,a=n.md.options.maxNesting;n.pos<o;){if(i=n.pos,n.level<a){for(t=0;t<s;t++)if(e=r[t](n,!1),e){if(i>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(e){if(n.pos>=o)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};tf.prototype.parse=function(n,e,t,i){var r,s,o,a=new this.State(n,e,t,i);for(this.tokenize(a),s=this.ruler2.getRules(""),o=s.length,r=0;r<o;r++)s[r](a)};tf.prototype.State=sxe;var oxe=tf,Og,G1;function axe(){return G1||(G1=1,Og=function(n){var e={};n=n||{},e.src_Any=vA().source,e.src_Cc=yA().source,e.src_Z=_A().source,e.src_P=w_.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var t="[><｜]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+e.src_ZPCc+"))((?![$+<=>^`|｜])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}),Og}function I0(n){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(t){t&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n}function vm(n){return Object.prototype.toString.call(n)}function cxe(n){return vm(n)==="[object String]"}function lxe(n){return vm(n)==="[object Object]"}function uxe(n){return vm(n)==="[object RegExp]"}function V1(n){return vm(n)==="[object Function]"}function hxe(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var TA={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function fxe(n){return Object.keys(n||{}).reduce(function(e,t){return e||TA.hasOwnProperty(t)},!1)}var dxe={"http:":{validate:function(n,e,t){var i=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(i)?i.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){var i=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(i)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:i.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){var i=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(i)?i.match(t.re.mailto)[0].length:0}}},pxe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",mxe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function gxe(n){n.__index__=-1,n.__text_cache__=""}function vxe(n){return function(e,t){var i=e.slice(t);return n.test(i)?i.match(n)[0].length:0}}function W1(){return function(n,e){e.normalize(n)}}function bp(n){var e=n.re=axe()(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(pxe),t.push(e.src_xn),e.src_tlds=t.join("|");function i(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(i(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(i(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(i(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(i(e.tpl_host_fuzzy_test),"i");var r=[];n.__compiled__={};function s(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(n.__schemas__).forEach(function(a){var c=n.__schemas__[a];if(c!==null){var l={validate:null,link:null};if(n.__compiled__[a]=l,lxe(c)){uxe(c.validate)?l.validate=vxe(c.validate):V1(c.validate)?l.validate=c.validate:s(a,c),V1(c.normalize)?l.normalize=c.normalize:c.normalize?s(a,c):l.normalize=W1();return}if(cxe(c)){r.push(a);return}s(a,c)}}),r.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:W1()};var o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(hxe).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),gxe(n)}function yxe(n,e){var t=n.__index__,i=n.__last_index__,r=n.__text_cache__.slice(t,i);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=i+e,this.raw=r,this.text=r,this.url=r}function D0(n,e){var t=new yxe(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function Li(n,e){if(!(this instanceof Li))return new Li(n,e);e||fxe(n)&&(e=n,n={}),this.__opts__=I0({},TA,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=I0({},dxe,n),this.__compiled__={},this.__tlds__=mxe,this.__tlds_replaced__=!1,this.re={},bp(this)}Li.prototype.add=function(e,t){return this.__schemas__[e]=t,bp(this),this};Li.prototype.set=function(e){return this.__opts__=I0(this.__opts__,e),this};Li.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,i,r,s,o,a,c,l,u;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(t=c.exec(e))!==null;)if(s=this.testSchemaAt(e,t[2],c.lastIndex),s){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test),l>=0&&(this.__index__<0||l<this.__index__)&&(i=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=i.index+i[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=i.index+i[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(u=e.indexOf("@"),u>=0&&(r=e.match(this.re.email_fuzzy))!==null&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Li.prototype.pretest=function(e){return this.re.pretest.test(e)};Li.prototype.testSchemaAt=function(e,t,i){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,i,this):0};Li.prototype.match=function(e){var t=0,i=[];this.__index__>=0&&this.__text_cache__===e&&(i.push(D0(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)i.push(D0(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return i.length?i:null};Li.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var t=this.re.schema_at_start.exec(e);if(!t)return null;var i=this.testSchemaAt(e,t[2],t[0].length);return i?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i,D0(this,0)):null};Li.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(i,r,s){return i!==s[r-1]}).reverse(),bp(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,bp(this),this)};Li.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Li.prototype.onCompile=function(){};var _xe=Li;const qc=2147483647,Dr=36,C_=1,Ph=26,xxe=38,bxe=700,AA=72,CA=128,LA="-",wxe=/^xn--/,Mxe=/[^\0-\x7F]/,Sxe=/[\x2E\u3002\uFF0E\uFF61]/g,Exe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},kg=Dr-C_,Fr=Math.floor,Ng=String.fromCharCode;function ro(n){throw new RangeError(Exe[n])}function Txe(n,e){const t=[];let i=n.length;for(;i--;)t[i]=e(n[i]);return t}function RA(n,e){const t=n.split("@");let i="";t.length>1&&(i=t[0]+"@",n=t[1]),n=n.replace(Sxe,".");const r=n.split("."),s=Txe(r,e).join(".");return i+s}function L_(n){const e=[];let t=0;const i=n.length;for(;t<i;){const r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){const s=n.charCodeAt(t++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}const PA=n=>String.fromCodePoint(...n),Axe=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Dr},$1=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},IA=function(n,e,t){let i=0;for(n=t?Fr(n/bxe):n>>1,n+=Fr(n/e);n>kg*Ph>>1;i+=Dr)n=Fr(n/kg);return Fr(i+(kg+1)*n/(n+xxe))},R_=function(n){const e=[],t=n.length;let i=0,r=CA,s=AA,o=n.lastIndexOf(LA);o<0&&(o=0);for(let a=0;a<o;++a)n.charCodeAt(a)>=128&&ro("not-basic"),e.push(n.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const c=i;for(let u=1,h=Dr;;h+=Dr){a>=t&&ro("invalid-input");const f=Axe(n.charCodeAt(a++));f>=Dr&&ro("invalid-input"),f>Fr((qc-i)/u)&&ro("overflow"),i+=f*u;const d=h<=s?C_:h>=s+Ph?Ph:h-s;if(f<d)break;const p=Dr-d;u>Fr(qc/p)&&ro("overflow"),u*=p}const l=e.length+1;s=IA(i-c,l,c==0),Fr(i/l)>qc-r&&ro("overflow"),r+=Fr(i/l),i%=l,e.splice(i++,0,r)}return String.fromCodePoint(...e)},P_=function(n){const e=[];n=L_(n);const t=n.length;let i=CA,r=0,s=AA;for(const c of n)c<128&&e.push(Ng(c));const o=e.length;let a=o;for(o&&e.push(LA);a<t;){let c=qc;for(const u of n)u>=i&&u<c&&(c=u);const l=a+1;c-i>Fr((qc-r)/l)&&ro("overflow"),r+=(c-i)*l,i=c;for(const u of n)if(u<i&&++r>qc&&ro("overflow"),u===i){let h=r;for(let f=Dr;;f+=Dr){const d=f<=s?C_:f>=s+Ph?Ph:f-s;if(h<d)break;const p=h-d,v=Dr-d;e.push(Ng($1(d+p%v,0))),h=Fr(p/v)}e.push(Ng($1(h,0))),s=IA(r,l,a===o),r=0,++a}++r,++i}return e.join("")},DA=function(n){return RA(n,function(e){return wxe.test(e)?R_(e.slice(4).toLowerCase()):e})},FA=function(n){return RA(n,function(e){return Mxe.test(e)?"xn--"+P_(e):e})},Cxe={version:"2.1.0",ucs2:{decode:L_,encode:PA},decode:R_,encode:P_,toASCII:FA,toUnicode:DA},Lxe=Object.freeze(Object.defineProperty({__proto__:null,decode:R_,default:Cxe,encode:P_,toASCII:FA,toUnicode:DA,ucs2decode:L_,ucs2encode:PA},Symbol.toStringTag,{value:"Module"})),Rxe=zB(Lxe);var Pxe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Ixe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Dxe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Wu=bt,Fxe=hm,Oxe=Aye,kxe=Jye,Nxe=R_e,Bxe=oxe,zxe=_xe,la=Ll,OA=Rxe,Uxe={default:Pxe,zero:Ixe,commonmark:Dxe},Hxe=/^(vbscript|javascript|file|data):/,Gxe=/^data:image\/(gif|png|jpeg|webp);/;function Vxe(n){var e=n.trim().toLowerCase();return Hxe.test(e)?!!Gxe.test(e):!0}var kA=["http:","https:","mailto:"];function Wxe(n){var e=la.parse(n,!0);if(e.hostname&&(!e.protocol||kA.indexOf(e.protocol)>=0))try{e.hostname=OA.toASCII(e.hostname)}catch{}return la.encode(la.format(e))}function $xe(n){var e=la.parse(n,!0);if(e.hostname&&(!e.protocol||kA.indexOf(e.protocol)>=0))try{e.hostname=OA.toUnicode(e.hostname)}catch{}return la.decode(la.format(e),la.decode.defaultChars+"%")}function Ui(n,e){if(!(this instanceof Ui))return new Ui(n,e);e||Wu.isString(n)||(e=n||{},n="default"),this.inline=new Bxe,this.block=new Nxe,this.core=new kxe,this.renderer=new Oxe,this.linkify=new zxe,this.validateLink=Vxe,this.normalizeLink=Wxe,this.normalizeLinkText=$xe,this.utils=Wu,this.helpers=Wu.assign({},Fxe),this.options={},this.configure(n),e&&this.set(e)}Ui.prototype.set=function(n){return Wu.assign(this.options,n),this};Ui.prototype.configure=function(n){var e=this,t;if(Wu.isString(n)&&(t=n,n=Uxe[t],!n))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(i){n.components[i].rules&&e[i].ruler.enableOnly(n.components[i].rules),n.components[i].rules2&&e[i].ruler2.enableOnly(n.components[i].rules2)}),this};Ui.prototype.enable=function(n,e){var t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));var i=n.filter(function(r){return t.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+i);return this};Ui.prototype.disable=function(n,e){var t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));var i=n.filter(function(r){return t.indexOf(r)<0});if(i.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+i);return this};Ui.prototype.use=function(n){var e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Ui.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");var t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Ui.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Ui.prototype.parseInline=function(n,e){var t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Ui.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};var qxe=Ui,jxe=qxe;const Xxe=BB(jxe),q1=`### 3D 组成：\r
\r
场景（scene）：所有模型存在的地方。  \r
相机（camera）：相当于人体视觉看向的位置。  \r
渲染器（renderer）：渲染整个场景，在浏览器上显示出来。  \r
控制器（controls）：控制相机移动的轨迹。  \r
模型/网格（mesh）：由几何体（geometry）、材质（material）组成。\r
\r
### 场景\r
\r
语法：const scene = new THREE.Scene();  \r
常用属性方法：\r
\r
- background：设置场景背景，默认为黑色，\r
- children：所有子对象的列表，\r
- autoUpdate：设置是否自动更新，\r
- add()：向场景中添加对象，\r
- remove()：从场景中移除对象，\r
- getChildByName()：根据名字直接返回这个对象，\r
- fog(color, near, far)：设置场景的雾化效果,可以渲染出一层雾气，隐层远处的的物体，\r
  - color: 表示雾的颜色，最远和最近之间的物体颜色是物体本身颜色和雾颜色的混合效果，\r
  - near：表示应用雾化效果的最小距离，距离活动摄像机长度小于 near 的物体将不会被雾所影响，\r
  - far：表示应用雾化效果的最大距离，距离活动摄像机长度大于 far 的物体将不会被雾所影响。\r
\r
### 相机\r
\r
语法：const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);  \r
参数：\r
\r
- fov：表示视场，就是能够看到的角度范围，默认值 45，\r
- aspect：表示渲染窗口的长宽比，\r
- near：属性表示的是从距离相机多远的位置开始渲染，一般情况会设置一个很小的值。 默认值 0.1，\r
- far：属性表示的是距离相机多远的位置截止渲染，如果设置的值偏小，会有部分场景看不到，默认值 1000，\r
\r
属性和方法：\r
\r
- camera.position.set(x, y, z)：设置相机 x, y, z 轴上的位置，\r
- camera.position.x = 10：设置设置 x 轴上的位置，\r
\r
### 渲染器\r
\r
语法：const renderer = new THREE.WebGLRenderer({canvas,antialias});  \r
参数：\r
\r
- canvas：dom 节点，\r
- antialias：是否开启抗锯齿，默认 false，\r
\r
属性和方法：\r
\r
- renderer.setSize(width, height)：设置渲染画布大小，\r
- renderer.setClearColor('#fff')：设置渲染画布背景颜色，\r
- renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))：设置画布的像素比为当前设备的屏幕像素比，避免高分屏下出现模糊情况，\r
- div.appendChild(renderer.domElement)：把渲染画布加入到 div 节点。\r
\r
### 控制器\r
\r
语法：const controls = new OrbitControls(camera, renderer.domElement);  \r
参数：\r
\r
- camera：相机，\r
- renderer.domElement：渲染画布，，\r
\r
属性和方法：\r
\r
- controls.autoRotateSpeed = 0.5：阻尼系数，\r
- controls.enableDamping = true：转动惯性，\r
- controls.enablePan = false：禁止平移，\r
- controls.maxDistance = 12：缩放限制，\r
- controls.minPolarAngle = Math.PI / 2：垂直旋转限制，\r
- controls.maxPolarAngle = Math.PI / 2：垂直旋转限制，\r
\r
### 模型/网格\r
\r
语法：const mesh = new THREE.Mesh(geometry, material);  \r
参数：\r
\r
- geometry：几何体，\r
- material：材质，\r
\r
属性和方法：\r
\r
- mesh.position.set(x, y, z)：设置相机 x, y, z 轴上的位置，\r
- mesh.position.x = 10：设置设置 x 轴上的位置，\r
\r
### 案例\r
\r
import \\* as THREE from 'three';  \r
import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r
\r
// 创建场景  \r
const scene = new THREE.Scene();\r
\r
// 创建相机  \r
const camera = new THREE.PerspectiveCamera(45,window.innerWidth / window.innerHeight,0.1,10000);  \r
// 相机位置  \r
camera.position.z = 100;  \r
// 把相机加到场景中\r
scene.add(camera)\r
\r
// 元素节点  \r
const dom = document.getElementById("webgl");  \r
// 渲染器  \r
const renderer = new THREE.WebGLRenderer({ antialias: true });  \r
renderer.setSize(window.innerWidth, window.innerHeight);  \r
dom.appendChild(renderer.domElement);\r
\r
// 控制器\r
const controls = new OrbitControls(camera, css3DRender.domElement);\r
\r
// 循环渲染\r
const render = () => {  \r
 controls.update();  \r
 renderer.render(scene, camera);  \r
 css2DRender.render(scene, camera);  \r
 css3DRender.render(scene, camera);  \r
 requestAnimationFrame(render);  \r
};  \r
render();\r
`,Yxe=`## 相机\r
\r
### 初始化相机\r
\r
const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\r
\r
### 参数\r
\r
fov：表示视场，就是能够看到的角度范围，人的眼睛大约能够看到 180 度 的视场，视角大小设置要根据具体应用，一般游戏会设置 60~90 度，默认值 45，  \r
aspect：表示渲染窗口的长宽比，如果一个网页上只有一个全屏的 canvas 画布且画布上只有一个窗口，那么 aspect 的值就是网页窗口客户区的宽高比 window.innerWidth/window.innerHeight，  \r
near：属性表示的是从距离相机多远的位置开始渲染，一般情况会设置一个很小的值。 默认值 0.1，  \r
far：属性表示的是距离相机多远的位置截止渲染，如果设置的值偏小，会有部分场景看不到，默认值 1000，\r
\r
### 属性方法\r
\r
position：相机位置，\r
- 语法：camera.position.set(x, y, z)\r
- 语法：camera.position.x = 10\r
\r
### 平滑的控制相机的移动\r
`,Zxe="dsfdsfdsf",Jxe="",Kxe="",Qxe="## 材质",ebe="",tbe="",nbe="",ibe="",rbe="",sbe=`### 二维样条曲线SplineCurve \r
二维向量Vector2创建一组顶点坐标   \r
const arr = [   \r
    new THREE.Vector2(-100, 0),   \r
    new THREE.Vector2(0, 30),   \r
    new THREE.Vector2(100, 0),  \r
];    \r
const curve = new THREE.SplineCurve(arr);    \r
\r
\r
\r
\r
### 三维样条曲线CatmullRomCurve3\r
三维向量Vector3创建一组顶点坐标    \r
const arr = [   \r
    new THREE.Vector3(-50, 20, 90),   \r
    new THREE.Vector3(-10, 40, 40),   \r
    new THREE.Vector3(0, 0, 0),  \r
    new THREE.Vector3(60, -60, 0),   \r
    new THREE.Vector3(70, 0, 80)  \r
]    \r
const curve = new THREE.CatmullRomCurve3(arr);   \r
\r
\r
### 二维二次贝塞尔曲线QuadraticBezierCurve\r
p2为曲线的控制点    \r
const p1 = new THREE.Vector2(-80, 0);   \r
const p2 = new THREE.Vector2(20, 100);   \r
const p3 = new THREE.Vector2(80, 0);   \r
const curve = new THREE.QuadraticBezierCurve(p1, p2, p3);   \r
\r
\r
### 二维三次贝塞尔曲线CubicBezierCurve \r
p1、p4是曲线起始点，p2、p3是曲线的控制点    \r
const p1 = new THREE.Vector2(-80, 0);    \r
const p2 = new THREE.Vector2(-40, 50);   \r
const p3 = new THREE.Vector2(50, 50);   \r
const p4 = new THREE.Vector2(80, 0);   \r
const curve = new THREE.CubicBezierCurve(p1, p2, p3, p4);   \r
\r
\r
### 三维二次贝赛尔曲线QuadraticBezierCurve3\r
p2为曲线的控制点    \r
const p1 = new THREE.Vector3(-80, 0, 0);   \r
const p2 = new THREE.Vector3(20, 100, 0);   \r
const p3 = new THREE.Vector3(80, 0, 100);   \r
const curve = new THREE.QuadraticBezierCurve3(p1, p2, p3);   \r
\r
\r
### 三维三次贝赛尔曲线CubicBezierCurve3 \r
p1、p4是曲线起始点，p2、p3是曲线的控制点    \r
const p1 = new THREE.Vector3(-80, 0, 0);    \r
const p2 = new THREE.Vector3(-40, 50, 0);   \r
const p3 = new THREE.Vector3(50, 50, 0);   \r
const p4 = new THREE.Vector3(80, 0, 100);   \r
const curve = new THREE.CubicBezierCurve3(p1, p2, p3, p4);   \r
\r
\r
\r
### 组合曲线CurvePath\r
通过CurvePath对象，你可以将直线、圆弧、贝塞尔曲线等线条连接成一条直线。    \r
直线1、直线2     \r
const line1 = new THREE.LineCurve(new THREE.Vector2(80, 200), new THREE.Vector2(80, 0));    \r
const line2 = new THREE.LineCurve(new THREE.Vector2(-80, 0), new THREE.Vector2(-80, 200));    \r
圆弧   \r
const arc = new THREE.ArcCurve(0, 0, 80, 0, Math.PI, true);   \r
   \r
CurvePath创建一个组合曲线对象   \r
const CurvePath = new THREE.CurvePath();   \r
line1, arc, line2拼接出来一个U型轮廓曲线，注意顺序   \r
CurvePath.curves.push(line1, arc, line2);   \r
\r
\r
\r
### 将样条曲线通过线模型Line显示 \r
const geometry = new THREE.BufferGeometry();  \r
// getPoints 方法可以从曲线上获取顶点数据  \r
const pointsArr = curve.getPoints(100);    \r
// setFromPoints 方法可以把数组 pointsArr 中坐标数据提取出来赋值给几何体   \r
geometry.setFromPoints(pointsArr);    \r
const material = new THREE.LineBasicMaterial({ color: 0x00fffff });    \r
const line = new THREE.Line(geometry, material);   \r
scene.add(line)   \r
\r
\r
\r
### 渐变色曲线\r
const geometry = new THREE.BufferGeometry();    \r
const curve = new THREE.CatmullRomCurve3([    \r
    new THREE.Vector3(-50, 20, 90),    \r
    new THREE.Vector3(-10, 40, 40),    \r
    new THREE.Vector3(0, 0, 0),   \r
    new THREE.Vector3(60, -60, 0),   \r
    new THREE.Vector3(70, 0, 80)   \r
]);   \r
const pointsArr = curve.getSpacedPoints(100);          \r
geometry.setFromPoints(pointsArr);      \r
     \r
const pos = geometry.attributes.position;    \r
顶点数量 \r
const count = pos.count;   \r
计算每个顶点的颜色值       \r
const colorsArr = [];    \r
for (let i = 0; i < count; i++) {    \r
    点索引值相对所有点数量的百分比    \r
    const percent = i / count;    \r
    根据顶点位置顺序大小设置颜色渐变，红色分量从0到1变化，蓝色分量从1到0变化       \r
    colorsArr.push(percent, 0, 1 - percent);   \r
}   \r
 \r
类型数组创建顶点颜色color数据    \r
const colors = new Float32Array(colorsArr);    \r
设置几何体attributes属性的颜色color属性    \r
geometry.attributes.color = new THREE.BufferAttribute(colors, 3);    \r
const material = new THREE.LineBasicMaterial({     \r
    vertexColors: true, // 使用顶点颜色渲染    \r
});   \r
const line = new THREE.Line(geometry, material);    `,obe=["innerHTML"],abe={__name:"index",props:{message:String},setup(n){const e=n,t=new Xxe,i=nr(q1),r={Basics:q1,Camera:Yxe,Renderer:Zxe,Controls:Jxe,Geometry:Kxe,Material:Qxe,Mesh:ebe,Map:tbe,Light:nbe,Animations:ibe,Points:rbe,Curve:sbe};return kr(()=>e.message,s=>{i.value=r[s]}),(s,o)=>(tt(),_t("div",{class:"document",innerHTML:ea(t).render(i.value)},null,8,obe))}},cbe=Io(abe,[["__scopeId","data-v-11b34ec3"]]);var rn=function(n,e){e===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=n,this.domElement=e,this.enabled=!0,this.target=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:no.ROTATE,MIDDLE:no.DOLLY,RIGHT:no.PAN},this.touches={ONE:io.ROTATE,TWO:io.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(i),t.update(),a=o.NONE},this.update=function(){var Y=new te,ne=new en().setFromUnitVectors(n.up,new te(0,1,0)),ve=ne.clone().invert(),ue=new te,xe=new en,Ee=2*Math.PI;return function(){var ft=t.object.position;Y.copy(ft).sub(t.target),Y.applyQuaternion(ne),l.setFromVector3(Y),t.autoRotate&&a===o.NONE&&z(P()),t.enableDamping?(l.theta+=u.theta*t.dampingFactor,l.phi+=u.phi*t.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);var dt=t.minAzimuthAngle,rt=t.maxAzimuthAngle;return isFinite(dt)&&isFinite(rt)&&(dt<-Math.PI?dt+=Ee:dt>Math.PI&&(dt-=Ee),rt<-Math.PI?rt+=Ee:rt>Math.PI&&(rt-=Ee),dt<=rt?l.theta=Math.max(dt,Math.min(rt,l.theta)):l.theta=l.theta>(dt+rt)/2?Math.max(dt,l.theta):Math.min(rt,l.theta)),l.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=h,l.radius=Math.max(t.minDistance,Math.min(t.maxDistance,l.radius)),t.enableDamping===!0?t.target.addScaledVector(f,t.dampingFactor):t.target.add(f),Y.setFromSpherical(l),Y.applyQuaternion(ve),ft.copy(t.target).add(Y),t.object.lookAt(t.target),t.enableDamping===!0?(u.theta*=1-t.dampingFactor,u.phi*=1-t.dampingFactor,f.multiplyScalar(1-t.dampingFactor)):(u.set(0,0,0),f.set(0,0,0)),h=1,d||ue.distanceToSquared(t.object.position)>c||8*(1-xe.dot(t.object.quaternion))>c?(t.dispatchEvent(i),ue.copy(t.object.position),xe.copy(t.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",pe,!1),t.domElement.removeEventListener("pointerdown",U,!1),t.domElement.removeEventListener("wheel",X,!1),t.domElement.removeEventListener("touchstart",le,!1),t.domElement.removeEventListener("touchend",fe,!1),t.domElement.removeEventListener("touchmove",he,!1),t.domElement.ownerDocument.removeEventListener("pointermove",K,!1),t.domElement.ownerDocument.removeEventListener("pointerup",$,!1),t.domElement.removeEventListener("keydown",H,!1)};var t=this,i={type:"change"},r={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=o.NONE,c=1e-6,l=new c1,u=new c1,h=1,f=new te,d=!1,p=new Te,v=new Te,y=new Te,g=new Te,m=new Te,w=new Te,b=new Te,E=new Te,S=new Te;function P(){return 2*Math.PI/60/60*t.autoRotateSpeed}function N(){return Math.pow(.95,t.zoomSpeed)}function z(Y){u.theta-=Y}function _(Y){u.phi-=Y}var x=function(){var Y=new te;return function(ve,ue){Y.setFromMatrixColumn(ue,0),Y.multiplyScalar(-ve),f.add(Y)}}(),T=function(){var Y=new te;return function(ve,ue){t.screenSpacePanning===!0?Y.setFromMatrixColumn(ue,1):(Y.setFromMatrixColumn(ue,0),Y.crossVectors(t.object.up,Y)),Y.multiplyScalar(ve),f.add(Y)}}(),A=function(){var Y=new te;return function(ve,ue){var xe=t.domElement;if(t.object.isPerspectiveCamera){var Ee=t.object.position;Y.copy(Ee).sub(t.target);var Be=Y.length();Be*=Math.tan(t.object.fov/2*Math.PI/180),x(2*ve*Be/xe.clientHeight,t.object.matrix),T(2*ue*Be/xe.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(x(ve*(t.object.right-t.object.left)/t.object.zoom/xe.clientWidth,t.object.matrix),T(ue*(t.object.top-t.object.bottom)/t.object.zoom/xe.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function M(Y){t.object.isPerspectiveCamera?h/=Y:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*Y)),t.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function L(Y){t.object.isPerspectiveCamera?h*=Y:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/Y)),t.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function I(Y){p.set(Y.clientX,Y.clientY)}function k(Y){b.set(Y.clientX,Y.clientY)}function W(Y){g.set(Y.clientX,Y.clientY)}function j(Y){v.set(Y.clientX,Y.clientY),y.subVectors(v,p).multiplyScalar(t.rotateSpeed);var ne=t.domElement;z(2*Math.PI*y.x/ne.clientHeight),_(2*Math.PI*y.y/ne.clientHeight),p.copy(v),t.update()}function G(Y){E.set(Y.clientX,Y.clientY),S.subVectors(E,b),S.y>0?M(N()):S.y<0&&L(N()),b.copy(E),t.update()}function ee(Y){m.set(Y.clientX,Y.clientY),w.subVectors(m,g).multiplyScalar(t.panSpeed),A(w.x,w.y),g.copy(m),t.update()}function se(Y){Y.deltaY<0?L(N()):Y.deltaY>0&&M(N()),t.update()}function oe(Y){var ne=!1;switch(Y.keyCode){case t.keys.UP:A(0,t.keyPanSpeed),ne=!0;break;case t.keys.BOTTOM:A(0,-t.keyPanSpeed),ne=!0;break;case t.keys.LEFT:A(t.keyPanSpeed,0),ne=!0;break;case t.keys.RIGHT:A(-t.keyPanSpeed,0),ne=!0;break}ne&&(Y.preventDefault(),t.update())}function de(Y){if(Y.touches.length==1)p.set(Y.touches[0].pageX,Y.touches[0].pageY);else{var ne=.5*(Y.touches[0].pageX+Y.touches[1].pageX),ve=.5*(Y.touches[0].pageY+Y.touches[1].pageY);p.set(ne,ve)}}function ae(Y){if(Y.touches.length==1)g.set(Y.touches[0].pageX,Y.touches[0].pageY);else{var ne=.5*(Y.touches[0].pageX+Y.touches[1].pageX),ve=.5*(Y.touches[0].pageY+Y.touches[1].pageY);g.set(ne,ve)}}function O(Y){var ne=Y.touches[0].pageX-Y.touches[1].pageX,ve=Y.touches[0].pageY-Y.touches[1].pageY,ue=Math.sqrt(ne*ne+ve*ve);b.set(0,ue)}function B(Y){t.enableZoom&&O(Y),t.enablePan&&ae(Y)}function Z(Y){t.enableZoom&&O(Y),t.enableRotate&&de(Y)}function V(Y){if(Y.touches.length==1)v.set(Y.touches[0].pageX,Y.touches[0].pageY);else{var ne=.5*(Y.touches[0].pageX+Y.touches[1].pageX),ve=.5*(Y.touches[0].pageY+Y.touches[1].pageY);v.set(ne,ve)}y.subVectors(v,p).multiplyScalar(t.rotateSpeed);var ue=t.domElement;z(2*Math.PI*y.x/ue.clientHeight),_(2*Math.PI*y.y/ue.clientHeight),p.copy(v)}function J(Y){if(Y.touches.length==1)m.set(Y.touches[0].pageX,Y.touches[0].pageY);else{var ne=.5*(Y.touches[0].pageX+Y.touches[1].pageX),ve=.5*(Y.touches[0].pageY+Y.touches[1].pageY);m.set(ne,ve)}w.subVectors(m,g).multiplyScalar(t.panSpeed),A(w.x,w.y),g.copy(m)}function re(Y){var ne=Y.touches[0].pageX-Y.touches[1].pageX,ve=Y.touches[0].pageY-Y.touches[1].pageY,ue=Math.sqrt(ne*ne+ve*ve);E.set(0,ue),S.set(0,Math.pow(E.y/b.y,t.zoomSpeed)),M(S.y),b.copy(E)}function D(Y){t.enableZoom&&re(Y),t.enablePan&&J(Y)}function F(Y){t.enableZoom&&re(Y),t.enableRotate&&V(Y)}function U(Y){if(t.enabled!==!1)switch(Y.pointerType){case"mouse":case"pen":R(Y);break}}function K(Y){if(t.enabled!==!1)switch(Y.pointerType){case"mouse":case"pen":C(Y);break}}function $(Y){switch(Y.pointerType){case"mouse":case"pen":q();break}}function R(Y){Y.preventDefault(),t.domElement.focus?t.domElement.focus():window.focus();var ne;switch(Y.button){case 0:ne=t.mouseButtons.LEFT;break;case 1:ne=t.mouseButtons.MIDDLE;break;case 2:ne=t.mouseButtons.RIGHT;break;default:ne=-1}switch(ne){case no.DOLLY:if(t.enableZoom===!1)return;k(Y),a=o.DOLLY;break;case no.ROTATE:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(t.enablePan===!1)return;W(Y),a=o.PAN}else{if(t.enableRotate===!1)return;I(Y),a=o.ROTATE}break;case no.PAN:if(Y.ctrlKey||Y.metaKey||Y.shiftKey){if(t.enableRotate===!1)return;I(Y),a=o.ROTATE}else{if(t.enablePan===!1)return;W(Y),a=o.PAN}break;default:a=o.NONE}a!==o.NONE&&(t.domElement.ownerDocument.addEventListener("pointermove",K,!1),t.domElement.ownerDocument.addEventListener("pointerup",$,!1),t.dispatchEvent(r))}function C(Y){if(t.enabled!==!1)switch(Y.preventDefault(),a){case o.ROTATE:if(t.enableRotate===!1)return;j(Y);break;case o.DOLLY:if(t.enableZoom===!1)return;G(Y);break;case o.PAN:if(t.enablePan===!1)return;ee(Y);break}}function q(Y){t.domElement.ownerDocument.removeEventListener("pointermove",K,!1),t.domElement.ownerDocument.removeEventListener("pointerup",$,!1),t.enabled!==!1&&(t.dispatchEvent(s),a=o.NONE)}function X(Y){t.enabled===!1||t.enableZoom===!1||a!==o.NONE&&a!==o.ROTATE||(Y.preventDefault(),Y.stopPropagation(),t.dispatchEvent(r),se(Y),t.dispatchEvent(s))}function H(Y){t.enabled===!1||t.enableKeys===!1||t.enablePan===!1||oe(Y)}function le(Y){if(t.enabled!==!1){switch(Y.preventDefault(),Y.touches.length){case 1:switch(t.touches.ONE){case io.ROTATE:if(t.enableRotate===!1)return;de(Y),a=o.TOUCH_ROTATE;break;case io.PAN:if(t.enablePan===!1)return;ae(Y),a=o.TOUCH_PAN;break;default:a=o.NONE}break;case 2:switch(t.touches.TWO){case io.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;B(Y),a=o.TOUCH_DOLLY_PAN;break;case io.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Z(Y),a=o.TOUCH_DOLLY_ROTATE;break;default:a=o.NONE}break;default:a=o.NONE}a!==o.NONE&&t.dispatchEvent(r)}}function he(Y){if(t.enabled!==!1)switch(Y.preventDefault(),Y.stopPropagation(),a){case o.TOUCH_ROTATE:if(t.enableRotate===!1)return;V(Y),t.update();break;case o.TOUCH_PAN:if(t.enablePan===!1)return;J(Y),t.update();break;case o.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;D(Y),t.update();break;case o.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;F(Y),t.update();break;default:a=o.NONE}}function fe(Y){t.enabled!==!1&&(t.dispatchEvent(s),a=o.NONE)}function pe(Y){t.enabled!==!1&&Y.preventDefault()}t.domElement.addEventListener("contextmenu",pe,!1),t.domElement.addEventListener("pointerdown",U,!1),t.domElement.addEventListener("wheel",X,!1),t.domElement.addEventListener("touchstart",le,!1),t.domElement.addEventListener("touchend",fe,!1),t.domElement.addEventListener("touchmove",he,!1),t.domElement.addEventListener("keydown",H,!1),this.update()};rn.prototype=Object.create(fr.prototype);rn.prototype.constructor=rn;var F0=function(n,e){rn.call(this,n,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=no.PAN,this.mouseButtons.RIGHT=no.ROTATE,this.touches.ONE=io.PAN,this.touches.TWO=io.DOLLY_ROTATE};F0.prototype=Object.create(fr.prototype);F0.prototype.constructor=F0;const lbe={id:"webgl"},ube={__name:"Easy3D",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,1,1e3);s.position.set(50,50,50),r.add(s);const o=new g_(10,10,10),a=[new ct({color:65520}),new ct({color:65280}),new ct({color:16773120}),new ct({color:16711680}),new ct({color:240}),new ct({color:15728895})],c=new qe(o,a);r.add(c);const l=new jt({antialias:!0,alpha:!0});l.setSize(e,t),i.appendChild(l.domElement);const u=new rn(s,l.domElement);u.autoRotateSpeed=.5;const h=()=>{l.render(r,s),requestAnimationFrame(h)};h(),window.addEventListener("resize",()=>{s.aspect=e/t,s.updateProjectionMatrix(),l.setSize(e,t),l.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(e,t)=>(tt(),_t("div",lbe))}},hbe={id:"webgl"},fbe={__name:"VR",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,.1,1e3);s.position.z=8,r.add(s);const o=new lr(16,256,256);o.scale(1,1,-1);const a=new ct({map:new At().load("/models/Living.jpg"),side:Rn}),c=new qe(o,a);r.add(c);const l=new jt({canvas:i,antialias:!0,alpha:!0});l.setSize(e,t);const u=new rn(s,l.domElement);u.autoRotateSpeed=.5,u.enableDamping=!1,u.enablePan=!1,u.maxDistance=12;const h=()=>{l.render(r,s),requestAnimationFrame(h)};h(),window.addEventListener("resize",()=>{s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(e,t)=>(tt(),_t("canvas",hbe))}};var $u={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}},Back:{In:function(n){var e=1.70158;return n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}},Bounce:{In:function(n){return 1-$u.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?$u.Bounce.In(n*2)*.5:$u.Bounce.Out(n*2-1)*.5+.5}}},Mu;typeof self>"u"&&typeof process<"u"&&process.hrtime?Mu=function(){var n=process.hrtime();return n[0]*1e3+n[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?Mu=self.performance.now.bind(self.performance):Date.now!==void 0?Mu=Date.now:Mu=function(){return new Date().getTime()};var ra=Mu,NA=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,t){e===void 0&&(e=ra()),t===void 0&&(t=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var s=this._tweens[i[r]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),Fc={Linear:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Fc.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[t],n[t-1],t-i):s(n[r],n[r+1>t?t:r+1],i-r)},Bezier:function(n,e){for(var t=0,i=n.length-1,r=Math.pow,s=Fc.Utils.Bernstein,o=0;o<=i;o++)t+=r(1-e,i-o)*r(e,o)*n[o]*s(i,o);return t},CatmullRom:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Fc.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(r=Math.floor(i=t*(1+e))),s(n[(r-1+t)%t],n[r],n[(r+1)%t],n[(r+2)%t],i-r)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-i)-n[0]):e>1?n[t]-(s(n[t],n[t],n[t-1],n[t-1],i-t)-n[t]):s(n[r?r-1:0],n[r],n[t<r+1?t:r+1],n[t<r+2?t:r+2],i-r)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=Fc.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var i=e;i>1;i--)t*=i;return n[e]=t,t}}(),CatmullRom:function(n,e,t,i,r){var s=(t-n)*.5,o=(i-e)*.5,a=r*r,c=r*a;return(2*e-2*t+s+o)*c+(-3*e+3*t-2*s-o)*a+s*r+e}}},I_=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),BA=new NA,dbe=function(){function n(e,t){t===void 0&&(t=BA),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=$u.Linear.None,this._interpolationFunction=Fc.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=I_.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),t!==void 0&&(this._duration=t),this},n.prototype.duration=function(e){return this._duration=e,this},n.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?ra()+parseFloat(e):e:ra(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},n.prototype._setupProperties=function(e,t,i,r){for(var s in i){var o=e[s],a=Array.isArray(o),c=a?"array":typeof o,l=!a&&Array.isArray(i[s]);if(!(c==="undefined"||c==="function")){if(l){var u=i[s];if(u.length===0)continue;u=u.map(this._handleRelativeValue.bind(this,o)),i[s]=[o].concat(u)}if((c==="object"||a)&&o&&!l){t[s]=a?[]:{};for(var h in o)t[s][h]=o[h];r[s]=a?[]:{},this._setupProperties(o,t[s],i[s],r[s])}else typeof t[s]>"u"&&(t[s]=o),a||(t[s]*=1),l?r[s]=i[s].slice().reverse():r[s]=t[s]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return e===void 0&&(e=ra()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},n.prototype.resume=function(e){return e===void 0&&(e=ra()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return this._group=e,this},n.prototype.delay=function(e){return this._delayTime=e,this},n.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return this._yoyo=e,this},n.prototype.easing=function(e){return this._easingFunction=e,this},n.prototype.interpolation=function(e){return this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){if(e===void 0&&(e=ra()),t===void 0&&(t=!0),this._isPaused)return!0;var i,r,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,i,r){for(var s in i)if(t[s]!==void 0){var o=t[s]||0,a=i[s],c=Array.isArray(e[s]),l=Array.isArray(a),u=!c&&l;u?e[s]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[s],o,a,r):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*r))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n}(),pbe="18.6.4",mbe=I_.nextId,Yr=BA,gbe=Yr.getAll.bind(Yr),vbe=Yr.removeAll.bind(Yr),ybe=Yr.add.bind(Yr),_be=Yr.remove.bind(Yr),xbe=Yr.update.bind(Yr),Cr={Easing:$u,Group:NA,Interpolation:Fc,now:ra,Sequence:I_,nextId:mbe,Tween:dbe,VERSION:pbe,getAll:gbe,removeAll:vbe,add:ybe,remove:_be,update:xbe};const bbe={animateCamera:(n,e,t,i,r=2e3,s)=>{const o=new Cr.Tween({x1:n.position.x,y1:n.position.y,z1:n.position.z,x2:e.target.x,y2:e.target.y,z2:e.target.z});o.to({x1:t.x,y1:t.y,z1:t.z,x2:i.x,y2:i.y,z2:i.z},r),o.onUpdate(function(a){n.position.x=a.x1,n.position.y=a.y1,n.position.z=a.z1,e.target.x=a.x2,e.target.y=a.y2,e.target.z=a.z2,e.update()}),o.onComplete(function(){e.enabled=!0,e.update(),s()}),o.easing(Cr.Easing.Cubic.InOut),o.start()}},wbe=n=>(Dy("data-v-1119b77e"),n=n(),Fy(),n),Mbe=wbe(()=>Tn("canvas",{id:"webgl"},null,-1)),Sbe={class:"nav"},Ebe=["onClick"],Tbe={__name:"VR2",setup(n){const e=[{name:"客厅",key:"living",map:new URL("/models/Living.jpg",self.location).href,position:new te(0,0,0)},{name:"房间",key:"room",map:new URL("/models/room.jpg",self.location).href,position:new te(50,0,0)},{name:"书房",key:"room2",map:new URL("/models/room2.jpg",self.location).href,position:new te(-50,0,0)}],t=$n({camera:null,controls:null});Bt(()=>{const s=window.innerWidth,o=window.innerHeight,a=document.querySelector("#webgl"),c=new cn,l=new lt(45,s/o,.1,1e3);l.position.z=8,c.add(l),e.map(d=>i(d.key,d.position,d.map,c));const u=new jt({canvas:a,antialias:!0,alpha:!0});u.setSize(s,o);const h=new rn(l,u.domElement);h.autoRotateSpeed=.5,h.enableDamping=!1,h.enablePan=!1,h.maxDistance=12,t.controls=h,t.camera=l;const f=()=>{Cr.update(),h.update(),u.render(c,l),requestAnimationFrame(f)};f(),window.addEventListener("resize",()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),u.setSize(window.innerWidth,window.innerHeight),u.setPixelRatio(Math.min(window.devicePixelRatio,2))})});const i=(s,o,a,c)=>{const l=new lr(16,256,256);l.scale(1,1,-1);const u=new At().load(a),h=new ct({map:u,side:Rn}),f=new qe(l,h);f.name=s,f.position.set(o.x,o.y,o.z),f.rotation.y=Math.PI/2,c.add(f)},r=s=>{const o=e.filter(u=>u.key===s)[0],a=o.position.x,c=o.position.y,l=o.position.z;bbe.animateCamera(t.camera,t.controls,{x:a,y:c,z:8},{x:a,y:c,z:l},1600,()=>{}),t.controls.update()};return(s,o)=>(tt(),_t(on,null,[Mbe,Tn("div",Sbe,[(tt(),_t(on,null,Uv(e,a=>Tn("div",{key:a.key,onClick:c=>r(a.key)},Dv(a.name)+" > ",9,Ebe)),64))])],64))}},Abe=Io(Tbe,[["__scopeId","data-v-1119b77e"]]);/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var zA={},vi=void 0,Cbe=zA;function D_(n,e){var t=n.split("."),i=Cbe;!(t[0]in i)&&i.execScript&&i.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)!t.length&&e!==vi?i[r]=e:i=i[r]?i[r]:i[r]={}}var zt=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u"&&typeof DataView<"u";function sa(n){var e=n.length,t=0,i=Number.POSITIVE_INFINITY,r,s,o,a,c,l,u,h,f,d;for(h=0;h<e;++h)n[h]>t&&(t=n[h]),n[h]<i&&(i=n[h]);for(r=1<<t,s=new(zt?Uint32Array:Array)(r),o=1,a=0,c=2;o<=t;){for(h=0;h<e;++h)if(n[h]===o){for(l=0,u=a,f=0;f<o;++f)l=l<<1|u&1,u>>=1;for(d=o<<16|h,f=l;f<r;f+=c)s[f]=d;++a}++o,a<<=1,c<<=1}return[s,t,i]}function Do(n,e){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=zt?new Uint8Array(n):n,this.m=!1,this.i=wp,this.r=!1,(e||!(e={}))&&(e.index&&(this.a=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.r=e.resize)),this.i){case F_:this.b=32768,this.c=new(zt?Uint8Array:Array)(32768+this.h+258);break;case wp:this.b=0,this.c=new(zt?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var F_=0,wp=1,j1={t:F_,s:wp};Do.prototype.k=function(){for(;!this.m;){var n=Di(this,3);switch(n&1&&(this.m=!0),n>>>=1,n){case 0:var e=this.input,t=this.a,i=this.c,r=this.b,s=e.length,o=vi,a=vi,c=i.length,l=vi;if(this.d=this.f=0,t+1>=s)throw Error("invalid uncompressed block header: LEN");if(o=e[t++]|e[t++]<<8,t+1>=s)throw Error("invalid uncompressed block header: NLEN");if(a=e[t++]|e[t++]<<8,o===~a)throw Error("invalid uncompressed block header: length verify");if(t+o>e.length)throw Error("input buffer is broken");switch(this.i){case F_:for(;r+o>i.length;){if(l=c-r,o-=l,zt)i.set(e.subarray(t,t+l),r),r+=l,t+=l;else for(;l--;)i[r++]=e[t++];this.b=r,i=this.e(),r=this.b}break;case wp:for(;r+o>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(zt)i.set(e.subarray(t,t+o),r),r+=o,t+=o;else for(;o--;)i[r++]=e[t++];this.a=t,this.b=r,this.c=i;break;case 1:this.j(Lbe,Rbe);break;case 2:for(var u=Di(this,5)+257,h=Di(this,5)+1,f=Di(this,4)+4,d=new(zt?Uint8Array:Array)(Bg.length),p=vi,v=vi,y=vi,g=vi,m=vi,w=vi,b=vi,S=vi,E=vi,S=0;S<f;++S)d[Bg[S]]=Di(this,3);if(!zt)for(S=f,f=d.length;S<f;++S)d[Bg[S]]=0;for(p=sa(d),g=new(zt?Uint8Array:Array)(u+h),S=0,E=u+h;S<E;)switch(m=Ih(this,p),m){case 16:for(b=3+Di(this,2);b--;)g[S++]=w;break;case 17:for(b=3+Di(this,3);b--;)g[S++]=0;w=0;break;case 18:for(b=11+Di(this,7);b--;)g[S++]=0;w=0;break;default:w=g[S++]=m}v=sa(zt?g.subarray(0,u):g.slice(0,u)),y=sa(zt?g.subarray(u):g.slice(u)),this.j(v,y);break;default:throw Error("unknown BTYPE: "+n)}}return this.n()};var X1=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Bg=zt?new Uint16Array(X1):X1,Y1=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],UA=zt?new Uint16Array(Y1):Y1,Z1=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],Mp=zt?new Uint8Array(Z1):Z1,J1=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],HA=zt?new Uint16Array(J1):J1,K1=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Sp=zt?new Uint8Array(K1):K1,O0=new(zt?Uint8Array:Array)(288),Ko,Q1;Ko=0;for(Q1=O0.length;Ko<Q1;++Ko)O0[Ko]=143>=Ko?8:255>=Ko?9:279>=Ko?7:8;var Lbe=sa(O0),k0=new(zt?Uint8Array:Array)(30),Jd,eM;Jd=0;for(eM=k0.length;Jd<eM;++Jd)k0[Jd]=5;var Rbe=sa(k0);function Di(n,e){for(var t=n.f,i=n.d,r=n.input,s=n.a,o=r.length,a;i<e;){if(s>=o)throw Error("input buffer is broken");t|=r[s++]<<i,i+=8}return a=t&(1<<e)-1,n.f=t>>>e,n.d=i-e,n.a=s,a}function Ih(n,e){for(var t=n.f,i=n.d,r=n.input,s=n.a,o=r.length,a=e[0],c=e[1],l,u;i<c&&!(s>=o);)t|=r[s++]<<i,i+=8;if(l=a[t&(1<<c)-1],u=l>>>16,u>i)throw Error("invalid code length: "+u);return n.f=t>>u,n.d=i-u,n.a=s,l&65535}Do.prototype.j=function(n,e){var t=this.c,i=this.b;this.o=n;for(var r=t.length-258,s,o,a,c;(s=Ih(this,n))!==256;)if(256>s)i>=r&&(this.b=i,t=this.e(),i=this.b),t[i++]=s;else for(o=s-257,c=UA[o],0<Mp[o]&&(c+=Di(this,Mp[o])),s=Ih(this,e),a=HA[s],0<Sp[s]&&(a+=Di(this,Sp[s])),i>=r&&(this.b=i,t=this.e(),i=this.b);c--;)t[i]=t[i++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=i};Do.prototype.w=function(n,e){var t=this.c,i=this.b;this.o=n;for(var r=t.length,s,o,a,c;(s=Ih(this,n))!==256;)if(256>s)i>=r&&(t=this.e(),r=t.length),t[i++]=s;else for(o=s-257,c=UA[o],0<Mp[o]&&(c+=Di(this,Mp[o])),s=Ih(this,e),a=HA[s],0<Sp[s]&&(a+=Di(this,Sp[s])),i+c>r&&(t=this.e(),r=t.length);c--;)t[i]=t[i++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=i};Do.prototype.e=function(){var n=new(zt?Uint8Array:Array)(this.b-32768),e=this.b-32768,t,i,r=this.c;if(zt)n.set(r.subarray(32768,n.length));else for(t=0,i=n.length;t<i;++t)n[t]=r[t+32768];if(this.g.push(n),this.l+=n.length,zt)r.set(r.subarray(e,e+32768));else for(t=0;32768>t;++t)r[t]=r[e+t];return this.b=32768,r};Do.prototype.z=function(n){var e,t=this.input.length/this.a+1|0,i,r,s,o=this.input,a=this.c;return n&&(typeof n.p=="number"&&(t=n.p),typeof n.u=="number"&&(t+=n.u)),2>t?(i=(o.length-this.a)/this.o[2],s=258*(i/2)|0,r=s<a.length?a.length+s:a.length<<1):r=a.length*t,zt?(e=new Uint8Array(r),e.set(a)):e=a,this.c=e};Do.prototype.n=function(){var n=0,e=this.c,t=this.g,i,r=new(zt?Uint8Array:Array)(this.l+(this.b-32768)),s,o,a,c;if(t.length===0)return zt?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(s=0,o=t.length;s<o;++s)for(i=t[s],a=0,c=i.length;a<c;++a)r[n++]=i[a];for(s=32768,o=this.b;s<o;++s)r[n++]=e[s];return this.g=[],this.buffer=r};Do.prototype.v=function(){var n,e=this.b;return zt?this.r?(n=new Uint8Array(e),n.set(this.c.subarray(0,e))):n=this.c.subarray(0,e):(this.c.length>e&&(this.c.length=e),n=this.c),this.buffer=n};function O_(n,e){var t,i;switch(this.input=n,this.a=0,(e||!(e={}))&&(e.index&&(this.a=e.index),e.verify&&(this.A=e.verify)),t=n[this.a++],i=n[this.a++],t&15){case tM:this.method=tM;break;default:throw Error("unsupported compression method")}if(((t<<8)+i)%31!==0)throw Error("invalid fcheck flag:"+((t<<8)+i)%31);if(i&32)throw Error("fdict flag is not supported");this.q=new Do(n,{index:this.a,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}O_.prototype.k=function(){var n=this.input,e,t;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var i=e;if(typeof i=="string"){var r=i.split(""),s,o;for(s=0,o=r.length;s<o;s++)r[s]=(r[s].charCodeAt(0)&255)>>>0;i=r}for(var a=1,c=0,l=i.length,u,h=0;0<l;){u=1024<l?1024:l,l-=u;do a+=i[h++],c+=a;while(--u);a%=65521,c%=65521}if(t!==(c<<16|a)>>>0)throw Error("invalid adler-32 checksum")}return e};var tM=8;D_("Zlib.Inflate",O_);D_("Zlib.Inflate.prototype.decompress",O_.prototype.k);var N0={ADAPTIVE:j1.s,BLOCK:j1.t},qu,ju,jc,nM;if(Object.keys)qu=Object.keys(N0);else for(ju in qu=[],jc=0,N0)qu[jc++]=ju;jc=0;for(nM=qu.length;jc<nM;++jc)ju=qu[jc],D_("Zlib.Inflate.BufferType."+ju,N0[ju]);var iM=zA.Zlib.Inflate,GA={findSpan:function(n,e,t){var i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;for(var r=n,s=i,o=Math.floor((r+s)/2);e<t[o]||e>=t[o+1];)e<t[o]?s=o:r=o,o=Math.floor((r+s)/2);return o},calcBasisFunctions:function(n,e,t,i){var r=[],s=[],o=[];r[0]=1;for(var a=1;a<=t;++a){s[a]=e-i[n+1-a],o[a]=i[n+a]-e;for(var c=0,l=0;l<a;++l){var u=o[l+1],h=s[a-l],f=r[l]/(u+h);r[l]=c+u*f,c=h*f}r[a]=c}return r},calcBSplinePoint:function(n,e,t,i){for(var r=this.findSpan(n,i,e),s=this.calcBasisFunctions(r,i,n,e),o=new vt(0,0,0,0),a=0;a<=n;++a){var c=t[r-n+a],l=s[a],u=c.w*l;o.x+=c.x*u,o.y+=c.y*u,o.z+=c.z*u,o.w+=c.w*l}return o},calcBasisFunctionDerivatives:function(n,e,t,i,r){for(var s=[],o=0;o<=t;++o)s[o]=0;for(var a=[],o=0;o<=i;++o)a[o]=s.slice(0);for(var c=[],o=0;o<=t;++o)c[o]=s.slice(0);c[0][0]=1;for(var l=s.slice(0),u=s.slice(0),h=1;h<=t;++h){l[h]=e-r[n+1-h],u[h]=r[n+h]-e;for(var f=0,z=0;z<h;++z){var d=u[z+1],p=l[h-z];c[h][z]=d+p;var v=c[z][h-1]/c[h][z];c[z][h]=f+d*v,f=p*v}c[h][h]=f}for(var h=0;h<=t;++h)a[0][h]=c[h][t];for(var z=0;z<=t;++z){for(var y=0,g=1,m=[],o=0;o<=t;++o)m[o]=s.slice(0);m[0][0]=1;for(var w=1;w<=i;++w){var b=0,E=z-w,S=t-w;z>=w&&(m[g][0]=m[y][0]/c[S+1][E],b=m[g][0]*c[E][S]);for(var P=E>=-1?1:-E,N=z-1<=S?w-1:t-z,h=P;h<=N;++h)m[g][h]=(m[y][h]-m[y][h-1])/c[S+1][E+h],b+=m[g][h]*c[E+h][S];z<=S&&(m[g][w]=-m[y][w-1]/c[S+1][z],b+=m[g][w]*c[z][S]),a[w][z]=b;var h=y;y=g,g=h}}for(var z=t,w=1;w<=i;++w){for(var h=0;h<=t;++h)a[w][h]*=z;z*=t-w}return a},calcBSplineDerivatives:function(n,e,t,i,r){for(var s=r<n?r:n,o=[],a=this.findSpan(n,i,e),c=this.calcBasisFunctionDerivatives(a,i,n,s,e),l=[],u=0;u<t.length;++u){var h=t[u].clone(),f=h.w;h.x*=f,h.y*=f,h.z*=f,l[u]=h}for(var d=0;d<=s;++d){for(var h=l[a-n].clone().multiplyScalar(c[d][0]),p=1;p<=n;++p)h.add(l[a-n+p].clone().multiplyScalar(c[d][p]));o[d]=h}for(var d=s+1;d<=r+1;++d)o[d]=new vt(0,0,0);return o},calcKoverI:function(n,e){for(var t=1,i=2;i<=n;++i)t*=i;for(var r=1,i=2;i<=e;++i)r*=i;for(var i=2;i<=n-e;++i)r*=i;return t/r},calcRationalCurveDerivatives:function(n){for(var e=n.length,t=[],i=[],r=0;r<e;++r){var s=n[r];t[r]=new te(s.x,s.y,s.z),i[r]=s.w}for(var o=[],a=0;a<e;++a){for(var c=t[a].clone(),r=1;r<=a;++r)c.sub(o[a-r].clone().multiplyScalar(this.calcKoverI(a,r)*i[r]));o[a]=c.divideScalar(i[0])}return o},calcNURBSDerivatives:function(n,e,t,i,r){var s=this.calcBSplineDerivatives(n,e,t,i,r);return this.calcRationalCurveDerivatives(s)},calcSurfacePoint:function(n,e,t,i,r,s,o,a){for(var c=this.findSpan(n,s,t),l=this.findSpan(e,o,i),u=this.calcBasisFunctions(c,s,n,t),h=this.calcBasisFunctions(l,o,e,i),f=[],d=0;d<=e;++d){f[d]=new vt(0,0,0,0);for(var p=0;p<=n;++p){var v=r[c-n+p][l-e+d].clone(),y=v.w;v.x*=y,v.y*=y,v.z*=y,f[d].add(v.multiplyScalar(u[p]))}}for(var g=new vt(0,0,0,0),d=0;d<=e;++d)g.add(f[d].multiplyScalar(h[d]));g.divideScalar(g.w),a.set(g.x,g.y,g.z)}},Sa=function(n,e,t,i,r){He.call(this),this.degree=n,this.knots=e,this.controlPoints=[],this.startKnot=i||0,this.endKnot=r||this.knots.length-1;for(var s=0;s<t.length;++s){var o=t[s];this.controlPoints[s]=new vt(o.x,o.y,o.z,o.w)}};Sa.prototype=Object.create(He.prototype);Sa.prototype.constructor=Sa;Sa.prototype.getPoint=function(n,e){var t=e||new te,i=this.knots[this.startKnot]+n*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=GA.calcBSplinePoint(this.degree,this.knots,this.controlPoints,i);return r.w!=1&&r.divideScalar(r.w),t.set(r.x,r.y,r.z)};Sa.prototype.getTangent=function(n,e){var t=e||new te,i=this.knots[0]+n*(this.knots[this.knots.length-1]-this.knots[0]),r=GA.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,i,1);return t.copy(r[1]).normalize(),t};var rM=function(){var n,e,t;function i(_){xt.call(this,_)}i.prototype=Object.assign(Object.create(xt.prototype),{constructor:i,load:function(_,x,T,A){var M=this,L=M.path===""?xs.extractUrlBase(_):M.path,I=new jn(this.manager);I.setPath(M.path),I.setResponseType("arraybuffer"),I.setRequestHeader(M.requestHeader),I.setWithCredentials(M.withCredentials),I.load(_,function(k){try{x(M.parse(k,L))}catch(W){A?A(W):console.error(W),M.manager.itemError(_)}},T,A)},parse:function(_,x){if(h(_))n=new c().parse(_);else{var T=S(_);if(!f(T))throw new Error("THREE.FBXLoader: Unknown format.");if(d(T)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+d(T));n=new a().parse(T)}var A=new At(this.manager).setPath(this.resourcePath||x).setCrossOrigin(this.crossOrigin);return new r(A,this.manager).parse(n)}});function r(_,x){this.textureLoader=_,this.manager=x}r.prototype={constructor:r,parse:function(){e=this.parseConnections();var _=this.parseImages(),x=this.parseTextures(_),T=this.parseMaterials(x),A=this.parseDeformers(),M=new s().parse(A);return this.parseScene(A,M,T),t},parseConnections:function(){var _=new Map;if("Connections"in n){var x=n.Connections.connections;x.forEach(function(T){var A=T[0],M=T[1],L=T[2];_.has(A)||_.set(A,{parents:[],children:[]});var I={ID:M,relationship:L};_.get(A).parents.push(I),_.has(M)||_.set(M,{parents:[],children:[]});var k={ID:A,relationship:L};_.get(M).children.push(k)})}return _},parseImages:function(){var _={},x={};if("Video"in n.Objects){var T=n.Objects.Video;for(var A in T){var M=T[A],L=parseInt(A);if(_[L]=M.RelativeFilename||M.Filename,"Content"in M){var I=M.Content instanceof ArrayBuffer&&M.Content.byteLength>0,k=typeof M.Content=="string"&&M.Content!=="";if(I||k){var W=this.parseImage(T[A]);x[M.RelativeFilename||M.Filename]=W}}}}for(var L in _){var j=_[L];x[j]!==void 0?_[L]=x[j]:_[L]=_[L].split("\\").pop()}return _},parseImage:function(_){var x=_.Content,T=_.RelativeFilename||_.Filename,A=T.slice(T.lastIndexOf(".")+1).toLowerCase(),M;switch(A){case"bmp":M="image/bmp";break;case"jpg":case"jpeg":M="image/jpeg";break;case"png":M="image/png";break;case"tif":M="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",T),M="image/tga";break;default:console.warn('FBXLoader: Image type "'+A+'" is not supported.');return}if(typeof x=="string")return"data:"+M+";base64,"+x;var L=new Uint8Array(x);return window.URL.createObjectURL(new Blob([L],{type:M}))},parseTextures:function(_){var x=new Map;if("Texture"in n.Objects){var T=n.Objects.Texture;for(var A in T){var M=this.parseTexture(T[A],_);x.set(parseInt(A),M)}}return x},parseTexture:function(_,x){var T=this.loadTexture(_,x);T.ID=_.id,T.name=_.attrName;var A=_.WrapModeU,M=_.WrapModeV,L=A!==void 0?A.value:0,I=M!==void 0?M.value:0;if(T.wrapS=L===0?Nr:On,T.wrapT=I===0?Nr:On,"Scaling"in _){var k=_.Scaling.value;T.repeat.x=k[0],T.repeat.y=k[1]}return T},loadTexture:function(_,x){var T,A=this.textureLoader.path,M=e.get(_.id).children;M!==void 0&&M.length>0&&x[M[0].ID]!==void 0&&(T=x[M[0].ID],(T.indexOf("blob:")===0||T.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));var L,I=_.FileName.slice(-3).toLowerCase();if(I==="tga"){var k=this.manager.getHandler(".tga");k===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",_.RelativeFilename),L=new Ct):L=k.load(T)}else I==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",_.RelativeFilename),L=new Ct):L=this.textureLoader.load(T);return this.textureLoader.setPath(A),L},parseMaterials:function(_){var x=new Map;if("Material"in n.Objects){var T=n.Objects.Material;for(var A in T){var M=this.parseMaterial(T[A],_);M!==null&&x.set(parseInt(A),M)}}return x},parseMaterial:function(_,x){var T=_.id,A=_.attrName,M=_.ShadingModel;if(typeof M=="object"&&(M=M.value),!e.has(T))return null;var L=this.parseParameters(_,x,T),I;switch(M.toLowerCase()){case"phong":I=new si;break;case"lambert":I=new Ai;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',M),I=new si;break}return I.setValues(L),I.name=A,I},parseParameters:function(_,x,T){var A={};_.BumpFactor&&(A.bumpScale=_.BumpFactor.value),_.Diffuse?A.color=new Fe().fromArray(_.Diffuse.value):_.DiffuseColor&&(_.DiffuseColor.type==="Color"||_.DiffuseColor.type==="ColorRGB")&&(A.color=new Fe().fromArray(_.DiffuseColor.value)),_.DisplacementFactor&&(A.displacementScale=_.DisplacementFactor.value),_.Emissive?A.emissive=new Fe().fromArray(_.Emissive.value):_.EmissiveColor&&(_.EmissiveColor.type==="Color"||_.EmissiveColor.type==="ColorRGB")&&(A.emissive=new Fe().fromArray(_.EmissiveColor.value)),_.EmissiveFactor&&(A.emissiveIntensity=parseFloat(_.EmissiveFactor.value)),_.Opacity&&(A.opacity=parseFloat(_.Opacity.value)),A.opacity<1&&(A.transparent=!0),_.ReflectionFactor&&(A.reflectivity=_.ReflectionFactor.value),_.Shininess&&(A.shininess=_.Shininess.value),_.Specular?A.specular=new Fe().fromArray(_.Specular.value):_.SpecularColor&&_.SpecularColor.type==="Color"&&(A.specular=new Fe().fromArray(_.SpecularColor.value));var M=this;return e.get(T).children.forEach(function(L){var I=L.relationship;switch(I){case"Bump":A.bumpMap=M.getTexture(x,L.ID);break;case"Maya|TEX_ao_map":A.aoMap=M.getTexture(x,L.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":A.map=M.getTexture(x,L.ID),A.map.encoding=Ir;break;case"DisplacementColor":A.displacementMap=M.getTexture(x,L.ID);break;case"EmissiveColor":A.emissiveMap=M.getTexture(x,L.ID),A.emissiveMap.encoding=Ir;break;case"NormalMap":case"Maya|TEX_normal_map":A.normalMap=M.getTexture(x,L.ID);break;case"ReflectionColor":A.envMap=M.getTexture(x,L.ID),A.envMap.mapping=n0,A.envMap.encoding=Ir;break;case"SpecularColor":A.specularMap=M.getTexture(x,L.ID),A.specularMap.encoding=Ir;break;case"TransparentColor":case"TransparencyFactor":A.alphaMap=M.getTexture(x,L.ID),A.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",I);break}}),A},getTexture:function(_,x){return"LayeredTexture"in n.Objects&&x in n.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),x=e.get(x).children[0].ID),_.get(x)},parseDeformers:function(){var _={},x={};if("Deformer"in n.Objects){var T=n.Objects.Deformer;for(var A in T){var M=T[A],L=e.get(parseInt(A));if(M.attrType==="Skin"){var I=this.parseSkeleton(L,T);I.ID=A,L.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),I.geometryID=L.parents[0].ID,_[A]=I}else if(M.attrType==="BlendShape"){var k={id:A};k.rawTargets=this.parseMorphTargets(L,T),k.id=A,L.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),x[A]=k}}}return{skeletons:_,morphTargets:x}},parseSkeleton:function(_,x){var T=[];return _.children.forEach(function(A){var M=x[A.ID];if(M.attrType==="Cluster"){var L={ID:A.ID,indices:[],weights:[],transformLink:new Oe().fromArray(M.TransformLink.a)};"Indexes"in M&&(L.indices=M.Indexes.a,L.weights=M.Weights.a),T.push(L)}}),{rawBones:T,bones:[]}},parseMorphTargets:function(_,x){for(var T=[],A=0;A<_.children.length;A++){var M=_.children[A],L=x[M.ID],I={name:L.attrName,initialWeight:L.DeformPercent,id:L.id,fullWeights:L.FullWeights.a};if(L.attrType!=="BlendShapeChannel")return;I.geoID=e.get(parseInt(M.ID)).children.filter(function(k){return k.relationship===void 0})[0].ID,T.push(I)}return T},parseScene:function(_,x,T){t=new tn;var A=this.parseModels(_.skeletons,x,T),M=n.Objects.Model,L=this;A.forEach(function(k){var W=M[k.ID];L.setLookAtProperties(k,W);var j=e.get(k.ID).parents;j.forEach(function(G){var ee=A.get(G.ID);ee!==void 0&&ee.add(k)}),k.parent===null&&t.add(k)}),this.bindSkeleton(_.skeletons,x,A),this.createAmbientLight(),this.setupMorphMaterials(),t.traverse(function(k){if(k.userData.transformData){k.parent&&(k.userData.transformData.parentMatrixWorld=k.parent.matrix);var W=w(k.userData.transformData);k.applyMatrix4(W)}});var I=new o().parse();t.children.length===1&&t.children[0].isGroup&&(t.children[0].animations=I,t=t.children[0]),t.animations=I},parseModels:function(_,x,T){var A=new Map,M=n.Objects.Model;for(var L in M){var I=parseInt(L),k=M[L],W=e.get(I),j=this.buildSkeleton(W,_,I,k.attrName);if(!j){switch(k.attrType){case"Camera":j=this.createCamera(W);break;case"Light":j=this.createLight(W);break;case"Mesh":j=this.createMesh(W,x,T);break;case"NurbsCurve":j=this.createCurve(W,x);break;case"LimbNode":case"Root":j=new sl;break;case"Null":default:j=new tn;break}j.name=k.attrName?an.sanitizeNodeName(k.attrName):"",j.ID=I}this.getTransformData(j,k),A.set(I,j)}return A},buildSkeleton:function(_,x,T,A){var M=null;return _.parents.forEach(function(L){for(var I in x){var k=x[I];k.rawBones.forEach(function(W,j){if(W.ID===L.ID){var G=M;M=new sl,M.matrixWorld.copy(W.transformLink),M.name=A?an.sanitizeNodeName(A):"",M.ID=T,k.bones[j]=M,G!==null&&M.add(G)}})}}),M},createCamera:function(_){var x,T;if(_.children.forEach(function(ee){var se=n.Objects.NodeAttribute[ee.ID];se!==void 0&&(T=se)}),T===void 0)x=new Ne;else{var A=0;T.CameraProjectionType!==void 0&&T.CameraProjectionType.value===1&&(A=1);var M=1;T.NearPlane!==void 0&&(M=T.NearPlane.value/1e3);var L=1e3;T.FarPlane!==void 0&&(L=T.FarPlane.value/1e3);var I=window.innerWidth,k=window.innerHeight;T.AspectWidth!==void 0&&T.AspectHeight!==void 0&&(I=T.AspectWidth.value,k=T.AspectHeight.value);var W=I/k,j=45;T.FieldOfView!==void 0&&(j=T.FieldOfView.value);var G=T.FocalLength?T.FocalLength.value:null;switch(A){case 0:x=new lt(j,W,M,L),G!==null&&x.setFocalLength(G);break;case 1:x=new Lh(-I/2,I/2,k/2,-k/2,M,L);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+A+"."),x=new Ne;break}}return x},createLight:function(_){var x,T;if(_.children.forEach(function(G){var ee=n.Objects.NodeAttribute[G.ID];ee!==void 0&&(T=ee)}),T===void 0)x=new Ne;else{var A;T.LightType===void 0?A=0:A=T.LightType.value;var M=16777215;T.Color!==void 0&&(M=new Fe().fromArray(T.Color.value));var L=T.Intensity===void 0?1:T.Intensity.value/100;T.CastLightOnObject!==void 0&&T.CastLightOnObject.value===0&&(L=0);var I=0;T.FarAttenuationEnd!==void 0&&(T.EnableFarAttenuation!==void 0&&T.EnableFarAttenuation.value===0?I=0:I=T.FarAttenuationEnd.value);var k=1;switch(A){case 0:x=new Xr(M,L,I,k);break;case 1:x=new Ts(M,L);break;case 2:var W=Math.PI/3;T.InnerAngle!==void 0&&(W=Ue.degToRad(T.InnerAngle.value));var j=0;T.OuterAngle!==void 0&&(j=Ue.degToRad(T.OuterAngle.value),j=Math.max(j,1)),x=new Co(M,L,I,W,j,k);break;default:console.warn("THREE.FBXLoader: Unknown light type "+T.LightType.value+", defaulting to a PointLight."),x=new Xr(M,L);break}T.CastShadows!==void 0&&T.CastShadows.value===1&&(x.castShadow=!0)}return x},createMesh:function(_,x,T){var A,M=null,L=null,I=[];return _.children.forEach(function(k){x.has(k.ID)&&(M=x.get(k.ID)),T.has(k.ID)&&I.push(T.get(k.ID))}),I.length>1?L=I:I.length>0?L=I[0]:(L=new si({color:13421772}),I.push(L)),"color"in M.attributes&&I.forEach(function(k){k.vertexColors=!0}),M.FBX_Deformer?(I.forEach(function(k){k.skinning=!0}),A=new xh(M,L),A.normalizeSkinWeights()):A=new qe(M,L),A},createCurve:function(_,x){var T=_.children.reduce(function(M,L){return x.has(L.ID)&&(M=x.get(L.ID)),M},null),A=new Zt({color:3342591,linewidth:1});return new Ti(T,A)},getTransformData:function(_,x){var T={};"InheritType"in x&&(T.inheritType=parseInt(x.InheritType.value)),"RotationOrder"in x?T.eulerOrder=b(x.RotationOrder.value):T.eulerOrder="ZYX","Lcl_Translation"in x&&(T.translation=x.Lcl_Translation.value),"PreRotation"in x&&(T.preRotation=x.PreRotation.value),"Lcl_Rotation"in x&&(T.rotation=x.Lcl_Rotation.value),"PostRotation"in x&&(T.postRotation=x.PostRotation.value),"Lcl_Scaling"in x&&(T.scale=x.Lcl_Scaling.value),"ScalingOffset"in x&&(T.scalingOffset=x.ScalingOffset.value),"ScalingPivot"in x&&(T.scalingPivot=x.ScalingPivot.value),"RotationOffset"in x&&(T.rotationOffset=x.RotationOffset.value),"RotationPivot"in x&&(T.rotationPivot=x.RotationPivot.value),_.userData.transformData=T},setLookAtProperties:function(_,x){if("LookAtProperty"in x){var T=e.get(_.ID).children;T.forEach(function(A){if(A.relationship==="LookAtProperty"){var M=n.Objects.Model[A.ID];if("Lcl_Translation"in M){var L=M.Lcl_Translation.value;_.target!==void 0?(_.target.position.fromArray(L),t.add(_.target)):_.lookAt(new te().fromArray(L))}}})}},bindSkeleton:function(_,x,T){var A=this.parsePoseNodes();for(var M in _){var L=_[M],I=e.get(parseInt(L.ID)).parents;I.forEach(function(k){if(x.has(k.ID)){var W=k.ID,j=e.get(W);j.parents.forEach(function(G){if(T.has(G.ID)){var ee=T.get(G.ID);ee.bind(new bh(L.bones),A[G.ID])}})}})}},parsePoseNodes:function(){var _={};if("Pose"in n.Objects){var x=n.Objects.Pose;for(var T in x)if(x[T].attrType==="BindPose"){var A=x[T].PoseNode;Array.isArray(A)?A.forEach(function(M){_[M.Node]=new Oe().fromArray(M.Matrix.a)}):_[A.Node]=new Oe().fromArray(A.Matrix.a)}}return _},createAmbientLight:function(){if("GlobalSettings"in n&&"AmbientColor"in n.GlobalSettings){var _=n.GlobalSettings.AmbientColor.value,x=_[0],T=_[1],A=_[2];if(x!==0||T!==0||A!==0){var M=new Fe(x,T,A);t.add(new wa(M,1))}}},setupMorphMaterials:function(){var _=this;t.traverse(function(x){x.isMesh&&x.geometry.morphAttributes.position&&x.geometry.morphAttributes.position.length&&(Array.isArray(x.material)?x.material.forEach(function(T,A){_.setupMorphMaterial(x,T,A)}):_.setupMorphMaterial(x,x.material))})},setupMorphMaterial:function(_,x,T){var A=_.uuid,M=x.uuid,L=!1;if(t.traverse(function(k){k.isMesh&&(Array.isArray(k.material)?k.material.forEach(function(W){W.uuid===M&&k.uuid!==A&&(L=!0)}):k.material.uuid===M&&k.uuid!==A&&(L=!0))}),L===!0){var I=x.clone();I.morphTargets=!0,T===void 0?_.material=I:_.material[T]=I}else x.morphTargets=!0}};function s(){}s.prototype={constructor:s,parse:function(_){var x=new Map;if("Geometry"in n.Objects){var T=n.Objects.Geometry;for(var A in T){var M=e.get(parseInt(A)),L=this.parseGeometry(M,T[A],_);x.set(parseInt(A),L)}}return x},parseGeometry:function(_,x,T){switch(x.attrType){case"Mesh":return this.parseMeshGeometry(_,x,T);case"NurbsCurve":return this.parseNurbsGeometry(x)}},parseMeshGeometry:function(_,x,T){var A=T.skeletons,M=[],L=_.parents.map(function(G){return n.Objects.Model[G.ID]});if(L.length!==0){var I=_.children.reduce(function(G,ee){return A[ee.ID]!==void 0&&(G=A[ee.ID]),G},null);_.children.forEach(function(G){T.morphTargets[G.ID]!==void 0&&M.push(T.morphTargets[G.ID])});var k=L[0],W={};"RotationOrder"in k&&(W.eulerOrder=b(k.RotationOrder.value)),"InheritType"in k&&(W.inheritType=parseInt(k.InheritType.value)),"GeometricTranslation"in k&&(W.translation=k.GeometricTranslation.value),"GeometricRotation"in k&&(W.rotation=k.GeometricRotation.value),"GeometricScaling"in k&&(W.scale=k.GeometricScaling.value);var j=w(W);return this.genGeometry(x,I,M,j)}},genGeometry:function(_,x,T,A){var M=new Ke;_.attrName&&(M.name=_.attrName);var L=this.parseGeoNode(_,x),I=this.genBuffers(L),k=new We(I.vertex,3);if(k.applyMatrix4(A),M.setAttribute("position",k),I.colors.length>0&&M.setAttribute("color",new We(I.colors,3)),x&&(M.setAttribute("skinIndex",new tl(I.weightsIndices,4)),M.setAttribute("skinWeight",new We(I.vertexWeights,4)),M.FBX_Deformer=x),I.normal.length>0){var W=new Wn().getNormalMatrix(A),j=new We(I.normal,3);j.applyNormalMatrix(W),M.setAttribute("normal",j)}if(I.uvs.forEach(function(de,ae){var O="uv"+(ae+1).toString();ae===0&&(O="uv"),M.setAttribute(O,new We(I.uvs[ae],2))}),L.material&&L.material.mappingType!=="AllSame"){var G=I.materialIndex[0],ee=0;if(I.materialIndex.forEach(function(de,ae){de!==G&&(M.addGroup(ee,ae-ee,G),G=de,ee=ae)}),M.groups.length>0){var se=M.groups[M.groups.length-1],oe=se.start+se.count;oe!==I.materialIndex.length&&M.addGroup(oe,I.materialIndex.length-oe,G)}M.groups.length===0&&M.addGroup(0,I.materialIndex.length,I.materialIndex[0])}return this.addMorphTargets(M,_,T,A),M},parseGeoNode:function(_,x){var T={};if(T.vertexPositions=_.Vertices!==void 0?_.Vertices.a:[],T.vertexIndices=_.PolygonVertexIndex!==void 0?_.PolygonVertexIndex.a:[],_.LayerElementColor&&(T.color=this.parseVertexColors(_.LayerElementColor[0])),_.LayerElementMaterial&&(T.material=this.parseMaterialIndices(_.LayerElementMaterial[0])),_.LayerElementNormal&&(T.normal=this.parseNormals(_.LayerElementNormal[0])),_.LayerElementUV){T.uv=[];for(var A=0;_.LayerElementUV[A];)_.LayerElementUV[A].UV&&T.uv.push(this.parseUVs(_.LayerElementUV[A])),A++}return T.weightTable={},x!==null&&(T.skeleton=x,x.rawBones.forEach(function(M,L){M.indices.forEach(function(I,k){T.weightTable[I]===void 0&&(T.weightTable[I]=[]),T.weightTable[I].push({id:L,weight:M.weights[k]})})})),T},genBuffers:function(_){var x={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},T=0,A=0,M=!1,L=[],I=[],k=[],W=[],j=[],G=[],ee=this;return _.vertexIndices.forEach(function(se,oe){var de=!1;se<0&&(se=se^-1,de=!0);var ae=[],O=[];if(L.push(se*3,se*3+1,se*3+2),_.color){var B=y(oe,T,se,_.color);k.push(B[0],B[1],B[2])}if(_.skeleton){if(_.weightTable[se]!==void 0&&_.weightTable[se].forEach(function(D){O.push(D.weight),ae.push(D.id)}),O.length>4){M||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),M=!0);var Z=[0,0,0,0],V=[0,0,0,0];O.forEach(function(D,F){var U=D,K=ae[F];V.forEach(function($,R,C){if(U>$){C[R]=U,U=$;var q=Z[R];Z[R]=K,K=q}})}),ae=Z,O=V}for(;O.length<4;)O.push(0),ae.push(0);for(var J=0;J<4;++J)j.push(O[J]),G.push(ae[J])}if(_.normal){var B=y(oe,T,se,_.normal);I.push(B[0],B[1],B[2])}if(_.material&&_.material.mappingType!=="AllSame")var re=y(oe,T,se,_.material)[0];_.uv&&_.uv.forEach(function(D,F){var U=y(oe,T,se,D);W[F]===void 0&&(W[F]=[]),W[F].push(U[0]),W[F].push(U[1])}),A++,de&&(ee.genFace(x,_,L,re,I,k,W,j,G,A),T++,A=0,L=[],I=[],k=[],W=[],j=[],G=[])}),x},genFace:function(_,x,T,A,M,L,I,k,W,j){for(var G=2;G<j;G++)_.vertex.push(x.vertexPositions[T[0]]),_.vertex.push(x.vertexPositions[T[1]]),_.vertex.push(x.vertexPositions[T[2]]),_.vertex.push(x.vertexPositions[T[(G-1)*3]]),_.vertex.push(x.vertexPositions[T[(G-1)*3+1]]),_.vertex.push(x.vertexPositions[T[(G-1)*3+2]]),_.vertex.push(x.vertexPositions[T[G*3]]),_.vertex.push(x.vertexPositions[T[G*3+1]]),_.vertex.push(x.vertexPositions[T[G*3+2]]),x.skeleton&&(_.vertexWeights.push(k[0]),_.vertexWeights.push(k[1]),_.vertexWeights.push(k[2]),_.vertexWeights.push(k[3]),_.vertexWeights.push(k[(G-1)*4]),_.vertexWeights.push(k[(G-1)*4+1]),_.vertexWeights.push(k[(G-1)*4+2]),_.vertexWeights.push(k[(G-1)*4+3]),_.vertexWeights.push(k[G*4]),_.vertexWeights.push(k[G*4+1]),_.vertexWeights.push(k[G*4+2]),_.vertexWeights.push(k[G*4+3]),_.weightsIndices.push(W[0]),_.weightsIndices.push(W[1]),_.weightsIndices.push(W[2]),_.weightsIndices.push(W[3]),_.weightsIndices.push(W[(G-1)*4]),_.weightsIndices.push(W[(G-1)*4+1]),_.weightsIndices.push(W[(G-1)*4+2]),_.weightsIndices.push(W[(G-1)*4+3]),_.weightsIndices.push(W[G*4]),_.weightsIndices.push(W[G*4+1]),_.weightsIndices.push(W[G*4+2]),_.weightsIndices.push(W[G*4+3])),x.color&&(_.colors.push(L[0]),_.colors.push(L[1]),_.colors.push(L[2]),_.colors.push(L[(G-1)*3]),_.colors.push(L[(G-1)*3+1]),_.colors.push(L[(G-1)*3+2]),_.colors.push(L[G*3]),_.colors.push(L[G*3+1]),_.colors.push(L[G*3+2])),x.material&&x.material.mappingType!=="AllSame"&&(_.materialIndex.push(A),_.materialIndex.push(A),_.materialIndex.push(A)),x.normal&&(_.normal.push(M[0]),_.normal.push(M[1]),_.normal.push(M[2]),_.normal.push(M[(G-1)*3]),_.normal.push(M[(G-1)*3+1]),_.normal.push(M[(G-1)*3+2]),_.normal.push(M[G*3]),_.normal.push(M[G*3+1]),_.normal.push(M[G*3+2])),x.uv&&x.uv.forEach(function(ee,se){_.uvs[se]===void 0&&(_.uvs[se]=[]),_.uvs[se].push(I[se][0]),_.uvs[se].push(I[se][1]),_.uvs[se].push(I[se][(G-1)*2]),_.uvs[se].push(I[se][(G-1)*2+1]),_.uvs[se].push(I[se][G*2]),_.uvs[se].push(I[se][G*2+1])})},addMorphTargets:function(_,x,T,A){if(T.length!==0){_.morphTargetsRelative=!0,_.morphAttributes.position=[];var M=this;T.forEach(function(L){L.rawTargets.forEach(function(I){var k=n.Objects.Geometry[I.geoID];k!==void 0&&M.genMorphGeometry(_,x,k,A,I.name)})})}},genMorphGeometry:function(_,x,T,A,M){for(var L=x.PolygonVertexIndex!==void 0?x.PolygonVertexIndex.a:[],I=T.Vertices!==void 0?T.Vertices.a:[],k=T.Indexes!==void 0?T.Indexes.a:[],W=_.attributes.position.count*3,j=new Float32Array(W),G=0;G<k.length;G++){var ee=k[G]*3;j[ee]=I[G*3],j[ee+1]=I[G*3+1],j[ee+2]=I[G*3+2]}var se={vertexIndices:L,vertexPositions:j},oe=this.genBuffers(se),de=new We(oe.vertex,3);de.name=M||T.attrName,de.applyMatrix4(A),_.morphAttributes.position.push(de)},parseNormals:function(_){var x=_.MappingInformationType,T=_.ReferenceInformationType,A=_.Normals.a,M=[];return T==="IndexToDirect"&&("NormalIndex"in _?M=_.NormalIndex.a:"NormalsIndex"in _&&(M=_.NormalsIndex.a)),{dataSize:3,buffer:A,indices:M,mappingType:x,referenceType:T}},parseUVs:function(_){var x=_.MappingInformationType,T=_.ReferenceInformationType,A=_.UV.a,M=[];return T==="IndexToDirect"&&(M=_.UVIndex.a),{dataSize:2,buffer:A,indices:M,mappingType:x,referenceType:T}},parseVertexColors:function(_){var x=_.MappingInformationType,T=_.ReferenceInformationType,A=_.Colors.a,M=[];return T==="IndexToDirect"&&(M=_.ColorIndex.a),{dataSize:4,buffer:A,indices:M,mappingType:x,referenceType:T}},parseMaterialIndices:function(_){var x=_.MappingInformationType,T=_.ReferenceInformationType;if(x==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:T};for(var A=_.Materials.a,M=[],L=0;L<A.length;++L)M.push(L);return{dataSize:1,buffer:A,indices:M,mappingType:x,referenceType:T}},parseNurbsGeometry:function(_){if(Sa===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Ke;var x=parseInt(_.Order);if(isNaN(x))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",_.Order,_.id),new Ke;for(var T=x-1,A=_.KnotVector.a,M=[],L=_.Points.a,I=0,k=L.length;I<k;I+=4)M.push(new vt().fromArray(L,I));var W,j;if(_.Form==="Closed")M.push(M[0]);else if(_.Form==="Periodic"){W=T,j=A.length-1-W;for(var I=0;I<T;++I)M.push(M[I])}var G=new Sa(T,A,M,W,j),ee=G.getPoints(M.length*7),se=new Float32Array(ee.length*3);ee.forEach(function(de,ae){de.toArray(se,ae*3)});var oe=new Ke;return oe.setAttribute("position",new Xe(se,3)),oe}};function o(){}o.prototype={constructor:o,parse:function(){var _=[],x=this.parseClips();if(x!==void 0)for(var T in x){var A=x[T],M=this.addClip(A);_.push(M)}return _},parseClips:function(){if(n.Objects.AnimationCurve!==void 0){var _=this.parseAnimationCurveNodes();this.parseAnimationCurves(_);var x=this.parseAnimationLayers(_),T=this.parseAnimStacks(x);return T}},parseAnimationCurveNodes:function(){var _=n.Objects.AnimationCurveNode,x=new Map;for(var T in _){var A=_[T];if(A.attrName.match(/S|R|T|DeformPercent/)!==null){var M={id:A.id,attr:A.attrName,curves:{}};x.set(M.id,M)}}return x},parseAnimationCurves:function(_){var x=n.Objects.AnimationCurve;for(var T in x){var A={id:x[T].id,times:x[T].KeyTime.a.map(p),values:x[T].KeyValueFloat.a},M=e.get(A.id);if(M!==void 0){var L=M.parents[0].ID,I=M.parents[0].relationship;I.match(/X/)?_.get(L).curves.x=A:I.match(/Y/)?_.get(L).curves.y=A:I.match(/Z/)?_.get(L).curves.z=A:I.match(/d|DeformPercent/)&&_.has(L)&&(_.get(L).curves.morph=A)}}},parseAnimationLayers:function(_){var x=n.Objects.AnimationLayer,T=new Map;for(var A in x){var M=[],L=e.get(parseInt(A));if(L!==void 0){var I=L.children;I.forEach(function(k,W){if(_.has(k.ID)){var j=_.get(k.ID);if(j.curves.x!==void 0||j.curves.y!==void 0||j.curves.z!==void 0){if(M[W]===void 0){var G=e.get(k.ID).parents.filter(function(O){return O.relationship!==void 0})[0].ID;if(G!==void 0){var ee=n.Objects.Model[G.toString()];if(ee===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",k);return}var se={modelName:ee.attrName?an.sanitizeNodeName(ee.attrName):"",ID:ee.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};t.traverse(function(O){O.ID===ee.id&&(se.transform=O.matrix,O.userData.transformData&&(se.eulerOrder=O.userData.transformData.eulerOrder))}),se.transform||(se.transform=new Oe),"PreRotation"in ee&&(se.preRotation=ee.PreRotation.value),"PostRotation"in ee&&(se.postRotation=ee.PostRotation.value),M[W]=se}}M[W]&&(M[W][j.attr]=j)}else if(j.curves.morph!==void 0){if(M[W]===void 0){var oe=e.get(k.ID).parents.filter(function(V){return V.relationship!==void 0})[0].ID,de=e.get(oe).parents[0].ID,ae=e.get(de).parents[0].ID,G=e.get(ae).parents[0].ID,ee=n.Objects.Model[G],se={modelName:ee.attrName?an.sanitizeNodeName(ee.attrName):"",morphName:n.Objects.Deformer[oe].attrName};M[W]=se}M[W][j.attr]=j}}}),T.set(parseInt(A),M)}}return T},parseAnimStacks:function(_){var x=n.Objects.AnimationStack,T={};for(var A in x){var M=e.get(parseInt(A)).children;M.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var L=_.get(M[0].ID);T[A]={name:x[A].attrName,layer:L}}return T},addClip:function(_){var x=[],T=this;return _.layer.forEach(function(A){x=x.concat(T.generateTracks(A))}),new bi(_.name,-1,x)},generateTracks:function(_){var x=[],T=new te,A=new en,M=new te;if(_.transform&&_.transform.decompose(T,A,M),T=T.toArray(),A=new oo().setFromQuaternion(A,_.eulerOrder).toArray(),M=M.toArray(),_.T!==void 0&&Object.keys(_.T.curves).length>0){var L=this.generateVectorTrack(_.modelName,_.T.curves,T,"position");L!==void 0&&x.push(L)}if(_.R!==void 0&&Object.keys(_.R.curves).length>0){var I=this.generateRotationTrack(_.modelName,_.R.curves,A,_.preRotation,_.postRotation,_.eulerOrder);I!==void 0&&x.push(I)}if(_.S!==void 0&&Object.keys(_.S.curves).length>0){var k=this.generateVectorTrack(_.modelName,_.S.curves,M,"scale");k!==void 0&&x.push(k)}if(_.DeformPercent!==void 0){var W=this.generateMorphTrack(_);W!==void 0&&x.push(W)}return x},generateVectorTrack:function(_,x,T,A){var M=this.getTimesForAllAxes(x),L=this.getKeyframeTrackValues(M,x,T);return new ba(_+"."+A,M,L)},generateRotationTrack:function(_,x,T,A,M,L){x.x!==void 0&&(this.interpolateRotations(x.x),x.x.values=x.x.values.map(Ue.degToRad)),x.y!==void 0&&(this.interpolateRotations(x.y),x.y.values=x.y.values.map(Ue.degToRad)),x.z!==void 0&&(this.interpolateRotations(x.z),x.z.values=x.z.values.map(Ue.degToRad));var I=this.getTimesForAllAxes(x),k=this.getKeyframeTrackValues(I,x,T);A!==void 0&&(A=A.map(Ue.degToRad),A.push(L),A=new oo().fromArray(A),A=new en().setFromEuler(A)),M!==void 0&&(M=M.map(Ue.degToRad),M.push(L),M=new oo().fromArray(M),M=new en().setFromEuler(M).invert());for(var W=new en,j=new oo,G=[],ee=0;ee<k.length;ee+=3)j.set(k[ee],k[ee+1],k[ee+2],L),W.setFromEuler(j),A!==void 0&&W.premultiply(A),M!==void 0&&W.multiply(M),W.toArray(G,ee/3*4);return new hl(_+".quaternion",I,G)},generateMorphTrack:function(_){var x=_.DeformPercent.curves.morph,T=x.values.map(function(M){return M/100}),A=t.getObjectByName(_.modelName).morphTargetDictionary[_.morphName];return new xa(_.modelName+".morphTargetInfluences["+A+"]",x.times,T)},getTimesForAllAxes:function(_){var x=[];if(_.x!==void 0&&(x=x.concat(_.x.times)),_.y!==void 0&&(x=x.concat(_.y.times)),_.z!==void 0&&(x=x.concat(_.z.times)),x=x.sort(function(I,k){return I-k}),x.length>1){for(var T=1,A=x[0],M=1;M<x.length;M++){var L=x[M];L!==A&&(x[T]=L,A=L,T++)}x=x.slice(0,T)}return x},getKeyframeTrackValues:function(_,x,T){var A=T,M=[],L=-1,I=-1,k=-1;return _.forEach(function(W){if(x.x&&(L=x.x.times.indexOf(W)),x.y&&(I=x.y.times.indexOf(W)),x.z&&(k=x.z.times.indexOf(W)),L!==-1){var j=x.x.values[L];M.push(j),A[0]=j}else M.push(A[0]);if(I!==-1){var G=x.y.values[I];M.push(G),A[1]=G}else M.push(A[1]);if(k!==-1){var ee=x.z.values[k];M.push(ee),A[2]=ee}else M.push(A[2])}),M},interpolateRotations:function(_){for(var x=1;x<_.values.length;x++){var T=_.values[x-1],A=_.values[x]-T,M=Math.abs(A);if(M>=180){for(var L=M/180,I=A/L,k=T+I,W=_.times[x-1],j=_.times[x]-W,G=j/L,ee=W+G,se=[],oe=[];ee<_.times[x];)se.push(ee),ee+=G,oe.push(k),k+=I;_.times=z(_.times,x,se),_.values=z(_.values,x,oe)}}}};function a(){}a.prototype={constructor:a,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(_){this.nodeStack.push(_),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(_,x){this.currentProp=_,this.currentPropName=x},parse:function(_){this.currentIndent=0,this.allNodes=new u,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var x=this,T=_.split(/[\r\n]+/);return T.forEach(function(A,M){var L=A.match(/^[\s\t]*;/),I=A.match(/^[\s\t]*$/);if(!(L||I)){var k=A.match("^\\t{"+x.currentIndent+"}(\\w+):(.*){",""),W=A.match("^\\t{"+x.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),j=A.match("^\\t{"+(x.currentIndent-1)+"}}");k?x.parseNodeBegin(A,k):W?x.parseNodeProperty(A,W,T[++M]):j?x.popStack():A.match(/^[^\s\t}]/)&&x.parseNodePropertyContinued(A)}}),this.allNodes},parseNodeBegin:function(_,x){var T=x[1].trim().replace(/^"/,"").replace(/"$/,""),A=x[2].split(",").map(function(k){return k.trim().replace(/^"/,"").replace(/"$/,"")}),M={name:T},L=this.parseNodeAttr(A),I=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(T,M):T in I?(T==="PoseNode"?I.PoseNode.push(M):I[T].id!==void 0&&(I[T]={},I[T][I[T].id]=I[T]),L.id!==""&&(I[T][L.id]=M)):typeof L.id=="number"?(I[T]={},I[T][L.id]=M):T!=="Properties70"&&(T==="PoseNode"?I[T]=[M]:I[T]=M),typeof L.id=="number"&&(M.id=L.id),L.name!==""&&(M.attrName=L.name),L.type!==""&&(M.attrType=L.type),this.pushStack(M)},parseNodeAttr:function(_){var x=_[0];_[0]!==""&&(x=parseInt(_[0]),isNaN(x)&&(x=_[0]));var T="",A="";return _.length>1&&(T=_[1].replace(/^(\w+)::/,""),A=_[2]),{id:x,name:T,type:A}},parseNodeProperty:function(_,x,T){var A=x[1].replace(/^"/,"").replace(/"$/,"").trim(),M=x[2].replace(/^"/,"").replace(/"$/,"").trim();A==="Content"&&M===","&&(M=T.replace(/"/g,"").replace(/,$/,"").trim());var L=this.getCurrentNode(),I=L.name;if(I==="Properties70"){this.parseNodeSpecialProperty(_,A,M);return}if(A==="C"){var k=M.split(",").slice(1),W=parseInt(k[0]),j=parseInt(k[1]),G=M.split(",").slice(3);G=G.map(function(ee){return ee.trim().replace(/^"/,"")}),A="connections",M=[W,j],P(M,G),L[A]===void 0&&(L[A]=[])}A==="Node"&&(L.id=M),A in L&&Array.isArray(L[A])?L[A].push(M):A!=="a"?L[A]=M:L.a=M,this.setCurrentProp(L,A),A==="a"&&M.slice(-1)!==","&&(L.a=E(M))},parseNodePropertyContinued:function(_){var x=this.getCurrentNode();x.a+=_,_.slice(-1)!==","&&(x.a=E(x.a))},parseNodeSpecialProperty:function(_,x,T){var A=T.split('",').map(function(j){return j.trim().replace(/^\"/,"").replace(/\s/,"_")}),M=A[0],L=A[1],I=A[2],k=A[3],W=A[4];switch(L){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":W=parseFloat(W);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":W=E(W);break}this.getPrevNode()[M]={type:L,type2:I,flag:k,value:W},this.setCurrentProp(this.getPrevNode(),M)}};function c(){}c.prototype={constructor:c,parse:function(_){var x=new l(_);x.skip(23);var T=x.getUint32();if(T<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+T);for(var A=new u;!this.endOfContent(x);){var M=this.parseNode(x,T);M!==null&&A.add(M.name,M)}return A},endOfContent:function(_){return _.size()%16===0?(_.getOffset()+160+16&-16)>=_.size():_.getOffset()+160+16>=_.size()},parseNode:function(_,x){var T={},A=x>=7500?_.getUint64():_.getUint32(),M=x>=7500?_.getUint64():_.getUint32();x>=7500?_.getUint64():_.getUint32();var L=_.getUint8(),I=_.getString(L);if(A===0)return null;for(var k=[],W=0;W<M;W++)k.push(this.parseProperty(_));var j=k.length>0?k[0]:"",G=k.length>1?k[1]:"",ee=k.length>2?k[2]:"";for(T.singleProperty=M===1&&_.getOffset()===A;A>_.getOffset();){var se=this.parseNode(_,x);se!==null&&this.parseSubNode(I,T,se)}return T.propertyList=k,typeof j=="number"&&(T.id=j),G!==""&&(T.attrName=G),ee!==""&&(T.attrType=ee),I!==""&&(T.name=I),T},parseSubNode:function(_,x,T){if(T.singleProperty===!0){var A=T.propertyList[0];Array.isArray(A)?(x[T.name]=T,T.a=A):x[T.name]=A}else if(_==="Connections"&&T.name==="C"){var M=[];T.propertyList.forEach(function(ee,se){se!==0&&M.push(ee)}),x.connections===void 0&&(x.connections=[]),x.connections.push(M)}else if(T.name==="Properties70"){var L=Object.keys(T);L.forEach(function(ee){x[ee]=T[ee]})}else if(_==="Properties70"&&T.name==="P"){var I=T.propertyList[0],k=T.propertyList[1],W=T.propertyList[2],j=T.propertyList[3],G;I.indexOf("Lcl ")===0&&(I=I.replace("Lcl ","Lcl_")),k.indexOf("Lcl ")===0&&(k=k.replace("Lcl ","Lcl_")),k==="Color"||k==="ColorRGB"||k==="Vector"||k==="Vector3D"||k.indexOf("Lcl_")===0?G=[T.propertyList[4],T.propertyList[5],T.propertyList[6]]:G=T.propertyList[4],x[I]={type:k,type2:W,flag:j,value:G}}else x[T.name]===void 0?typeof T.id=="number"?(x[T.name]={},x[T.name][T.id]=T):x[T.name]=T:T.name==="PoseNode"?(Array.isArray(x[T.name])||(x[T.name]=[x[T.name]]),x[T.name].push(T)):x[T.name][T.id]===void 0&&(x[T.name][T.id]=T)},parseProperty:function(_){var x=_.getString(1);switch(x){case"C":return _.getBoolean();case"D":return _.getFloat64();case"F":return _.getFloat32();case"I":return _.getInt32();case"L":return _.getInt64();case"R":var T=_.getUint32();return _.getArrayBuffer(T);case"S":var T=_.getUint32();return _.getString(T);case"Y":return _.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var A=_.getUint32(),M=_.getUint32(),L=_.getUint32();if(M===0)switch(x){case"b":case"c":return _.getBooleanArray(A);case"d":return _.getFloat64Array(A);case"f":return _.getFloat32Array(A);case"i":return _.getInt32Array(A);case"l":return _.getInt64Array(A)}typeof iM>"u"&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var I=new iM(new Uint8Array(_.getArrayBuffer(L))),k=new l(I.decompress().buffer);switch(x){case"b":case"c":return k.getBooleanArray(A);case"d":return k.getFloat64Array(A);case"f":return k.getFloat32Array(A);case"i":return k.getInt32Array(A);case"l":return k.getInt64Array(A)}default:throw new Error("THREE.FBXLoader: Unknown property type "+x)}}};function l(_,x){this.dv=new DataView(_),this.offset=0,this.littleEndian=x!==void 0?x:!0}l.prototype={constructor:l,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(_){this.offset+=_},getBoolean:function(){return(this.getUint8()&1)===1},getBooleanArray:function(_){for(var x=[],T=0;T<_;T++)x.push(this.getBoolean());return x},getUint8:function(){var _=this.dv.getUint8(this.offset);return this.offset+=1,_},getInt16:function(){var _=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,_},getInt32:function(){var _=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,_},getInt32Array:function(_){for(var x=[],T=0;T<_;T++)x.push(this.getInt32());return x},getUint32:function(){var _=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,_},getInt64:function(){var _,x;return this.littleEndian?(_=this.getUint32(),x=this.getUint32()):(x=this.getUint32(),_=this.getUint32()),x&2147483648?(x=~x&4294967295,_=~_&4294967295,_===4294967295&&(x=x+1&4294967295),_=_+1&4294967295,-(x*4294967296+_)):x*4294967296+_},getInt64Array:function(_){for(var x=[],T=0;T<_;T++)x.push(this.getInt64());return x},getUint64:function(){var _,x;return this.littleEndian?(_=this.getUint32(),x=this.getUint32()):(x=this.getUint32(),_=this.getUint32()),x*4294967296+_},getFloat32:function(){var _=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_},getFloat32Array:function(_){for(var x=[],T=0;T<_;T++)x.push(this.getFloat32());return x},getFloat64:function(){var _=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_},getFloat64Array:function(_){for(var x=[],T=0;T<_;T++)x.push(this.getFloat64());return x},getArrayBuffer:function(_){var x=this.dv.buffer.slice(this.offset,this.offset+_);return this.offset+=_,x},getString:function(_){for(var x=[],T=0;T<_;T++)x[T]=this.getUint8();var A=x.indexOf(0);return A>=0&&(x=x.slice(0,A)),xs.decodeText(new Uint8Array(x))}};function u(){}u.prototype={constructor:u,add:function(_,x){this[_]=x}};function h(_){var x="Kaydara FBX Binary  \0";return _.byteLength>=x.length&&x===S(_,0,x.length)}function f(_){var x=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],T=0;function A(I){var k=_[I-1];return _=_.slice(T+I),T++,k}for(var M=0;M<x.length;++M){var L=A(1);if(L===x[M])return!1}return!0}function d(_){var x=/FBXVersion: (\d+)/,T=_.match(x);if(T){var A=parseInt(T[1]);return A}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function p(_){return _/46186158e3}var v=[];function y(_,x,T,A){var M;switch(A.mappingType){case"ByPolygonVertex":M=_;break;case"ByPolygon":M=x;break;case"ByVertice":M=T;break;case"AllSame":M=A.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+A.mappingType)}A.referenceType==="IndexToDirect"&&(M=A.indices[M]);var L=M*A.dataSize,I=L+A.dataSize;return N(v,A.buffer,L,I)}var g=new oo,m=new te;function w(_){var x=new Oe,T=new Oe,A=new Oe,M=new Oe,L=new Oe,I=new Oe,k=new Oe,W=new Oe,j=new Oe,G=new Oe,ee=new Oe,se=_.inheritType?_.inheritType:0;if(_.translation&&x.setPosition(m.fromArray(_.translation)),_.preRotation){var oe=_.preRotation.map(Ue.degToRad);oe.push(_.eulerOrder),T.makeRotationFromEuler(g.fromArray(oe))}if(_.rotation){var oe=_.rotation.map(Ue.degToRad);oe.push(_.eulerOrder),A.makeRotationFromEuler(g.fromArray(oe))}if(_.postRotation){var oe=_.postRotation.map(Ue.degToRad);oe.push(_.eulerOrder),M.makeRotationFromEuler(g.fromArray(oe))}_.scale&&L.scale(m.fromArray(_.scale)),_.scalingOffset&&k.setPosition(m.fromArray(_.scalingOffset)),_.scalingPivot&&I.setPosition(m.fromArray(_.scalingPivot)),_.rotationOffset&&W.setPosition(m.fromArray(_.rotationOffset)),_.rotationPivot&&j.setPosition(m.fromArray(_.rotationPivot)),_.parentMatrixWorld&&(G=_.parentMatrixWorld);var de=T.multiply(A).multiply(M),ae=new Oe;G.extractRotation(ae);var O=new Oe;O.copyPosition(G);var B=new Oe;B.copy(ae).invert().multiply(G);var Z=new Oe;if(se===0)Z.copy(ae).multiply(de).multiply(B).multiply(L);else if(se===1)Z.copy(ae).multiply(B).multiply(de).multiply(L);else{var V=new Oe;V.copy(L).invert();var J=new Oe().multiply(B).multiply(V);Z.copy(ae).multiply(de).multiply(J).multiply(L)}var re=new Oe;re.copy(j).invert();var D=new Oe;D.copy(I).invert();var F=new Oe;F.copy(x).multiply(W).multiply(j).multiply(T).multiply(A).multiply(M).multiply(re).multiply(k).multiply(I).multiply(L).multiply(D);var U=new Oe().copyPosition(F),K=new Oe().copy(G).multiply(U);return ee.copyPosition(K),F=new Oe().multiply(ee).multiply(Z),F}function b(_){_=_||0;var x=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return _===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),x[0]):x[_]}function E(_){var x=_.split(",").map(function(T){return parseFloat(T)});return x}function S(_,x,T){return x===void 0&&(x=0),T===void 0&&(T=_.byteLength),xs.decodeText(new Uint8Array(_,x,T))}function P(_,x){for(var T=0,A=_.length,M=x.length;T<M;T++,A++)_[A]=x[T]}function N(_,x,T,A){for(var M=T,L=0;M<A;M++,L++)_[L]=x[M];return _}function z(_,x,T){return _.slice(0,x).concat(T).concat(_.slice(x))}return i}();const Pbe=n=>(Dy("data-v-6694bd40"),n=n(),Fy(),n),Ibe=Pbe(()=>Tn("div",{class:"points",id:"webgl"},null,-1)),Dbe={__name:"Points",setup(n){const e=nr(""),t=nr(""),i=()=>{const o=e.value;for(let a=0;a<3e4;a++){const c=new Cr.Tween(o.array);c.to({[a*3]:0,[a*3+1]:0,[a*3+2]:0},3e3*Math.random()),c.delay(1e3),c.onUpdate(()=>{o.needsUpdate=!0}),c.start()}},r=()=>{new rM().load("./models/fu.fbx",function(a){const c=e.value,l=a.children[0].geometry.getAttribute("position");for(let u=0;u<c.count;u++){const h=new Cr.Tween(c.array),f=u%l.count;h.to({[u*3]:l.array[f*3],[u*3+1]:l.array[f*3+1],[u*3+2]:l.array[f*3+2]},3e3*Math.random()),h.easing(Cr.Easing.Exponential.In),h.delay(1e3),h.start(),h.onUpdate(()=>{c.needsUpdate=!0})}})},s=()=>{new rM;const o=e.value;for(let a=0;a<o.count;a++){const c=new Cr.Tween(o.array);c.to({[a*3]:t.value[a*3],[a*3+1]:t.value[a*3+1],[a*3+2]:t.value[a*3+2]},3e3*Math.random()),c.easing(Cr.Easing.Exponential.In),c.delay(1e3),c.start(),c.onUpdate(()=>{o.needsUpdate=!0})}};return Bt(()=>{const o=window.innerWidth,a=window.innerHeight,c=document.querySelector("#webgl"),l=new cn,u=new lt(45,o/a,.1,1e3);u.position.set(0,0,300),l.add(u);const h=new Ke,f=[];for(let m=0;m<5e3;m++){const w=Ue.randFloatSpread(2e3),b=Ue.randFloatSpread(2e3),E=Ue.randFloatSpread(2e3);f.push(w,b,E)}h.setAttribute("position",new We(f,3)),e.value=h.getAttribute("position");const d=new cr({color:65535,size:5,sizeAttenuation:!0,depthWrite:!1,blending:pa}),p=new _a(h,d);t.value=[...h.getAttribute("position").array],l.add(p);const v=new jt({antialias:!0,alpha:!0});v.setSize(o,a),c.appendChild(v.domElement);const y=new rn(u,v.domElement);y.autoRotateSpeed=.5,y.maxDistance=500,y.minDistance=100;const g=()=>{Cr.update(),v.render(l,u),p.rotation.y+=1e-4,requestAnimationFrame(g)};g(),window.addEventListener("resize",()=>{u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight),v.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(o,a)=>(tt(),_t(on,null,[Ibe,Tn("div",{class:"btn"},[Tn("div",{class:"b1",onClick:i},"回到原点 >"),Tn("div",{class:"b2",onClick:r},"回到福字 >"),Tn("div",{class:"b3",onClick:s},"宇宙爆炸 >")])],64))}},Fbe=Io(Dbe,[["__scopeId","data-v-6694bd40"]]);var Ea=function(n){Ne.call(this),this.element=n||document.createElement("div"),this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})};Ea.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Ea,copy:function(n,e){return Ne.prototype.copy.call(this,n,e),this.element=n.element.cloneNode(!0),this}});var Ep=function(n){Ea.call(this,n)};Ep.prototype=Object.create(Ea.prototype);Ep.prototype.constructor=Ep;var Obe=function(){var n=this,e,t,i,r,s=new Oe,o={camera:{fov:0,style:""},objects:new WeakMap},a=document.createElement("div");a.style.overflow="hidden",this.domElement=a;var c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",c.style.pointerEvents="none",a.appendChild(c);var l=/Trident/i.test(navigator.userAgent);this.getSize=function(){return{width:e,height:t}},this.setSize=function(g,m){e=g,t=m,i=e/2,r=t/2,a.style.width=g+"px",a.style.height=m+"px",c.style.width=g+"px",c.style.height=m+"px"};function u(g){return Math.abs(g)<1e-10?0:g}function h(g){var m=g.elements;return"matrix3d("+u(m[0])+","+u(-m[1])+","+u(m[2])+","+u(m[3])+","+u(m[4])+","+u(-m[5])+","+u(m[6])+","+u(m[7])+","+u(m[8])+","+u(-m[9])+","+u(m[10])+","+u(m[11])+","+u(m[12])+","+u(-m[13])+","+u(m[14])+","+u(m[15])+")"}function f(g,m){var w=g.elements,b="matrix3d("+u(w[0])+","+u(w[1])+","+u(w[2])+","+u(w[3])+","+u(-w[4])+","+u(-w[5])+","+u(-w[6])+","+u(-w[7])+","+u(w[8])+","+u(w[9])+","+u(w[10])+","+u(w[11])+","+u(w[12])+","+u(w[13])+","+u(w[14])+","+u(w[15])+")";return l?"translate(-50%,-50%)translate("+i+"px,"+r+"px)"+m+b:"translate(-50%,-50%)"+b}function d(g,m,w,b){if(g instanceof Ea){g.onBeforeRender(n,m,w);var E;g instanceof Ep?(s.copy(w.matrixWorldInverse),s.transpose(),s.copyPosition(g.matrixWorld),s.scale(g.scale),s.elements[3]=0,s.elements[7]=0,s.elements[11]=0,s.elements[15]=1,E=f(s,b)):E=f(g.matrixWorld,b);var S=g.element,P=o.objects.get(g);if(P===void 0||P.style!==E){S.style.WebkitTransform=E,S.style.transform=E;var N={style:E};l&&(N.distanceToCameraSquared=p(w,g)),o.objects.set(g,N)}S.style.display=g.visible?"":"none",S.parentNode!==c&&c.appendChild(S),g.onAfterRender(n,m,w)}for(var z=0,_=g.children.length;z<_;z++)d(g.children[z],m,w,b)}var p=function(){var g=new te,m=new te;return function(w,b){return g.setFromMatrixPosition(w.matrixWorld),m.setFromMatrixPosition(b.matrixWorld),g.distanceToSquared(m)}}();function v(g){var m=[];return g.traverse(function(w){w instanceof Ea&&m.push(w)}),m}function y(g){for(var m=v(g).sort(function(S,P){var N=o.objects.get(S).distanceToCameraSquared,z=o.objects.get(P).distanceToCameraSquared;return N-z}),w=m.length,b=0,E=m.length;b<E;b++)m[b].element.style.zIndex=w-b}this.render=function(g,m){var w=m.projectionMatrix.elements[5]*r;if(o.camera.fov!==w&&(m.isPerspectiveCamera?(a.style.WebkitPerspective=w+"px",a.style.perspective=w+"px"):(a.style.WebkitPerspective="",a.style.perspective=""),o.camera.fov=w),g.autoUpdate===!0&&g.updateMatrixWorld(),m.parent===null&&m.updateMatrixWorld(),m.isOrthographicCamera)var b=-(m.right+m.left)/2,E=(m.top+m.bottom)/2;var S=m.isOrthographicCamera?"scale("+w+")translate("+u(b)+"px,"+u(E)+"px)"+h(m.matrixWorldInverse):"translateZ("+w+"px)"+h(m.matrixWorldInverse),P=S+"translate("+i+"px,"+r+"px)";o.camera.style!==P&&!l&&(c.style.WebkitTransform=P,c.style.transform=P,o.camera.style=P),d(g,g,m,S),l&&y(g)}},Dh=function(n){Ne.call(this),this.element=n||document.createElement("div"),this.element.style.position="absolute",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&e.element.parentNode!==null&&e.element.parentNode.removeChild(e.element)})})};Dh.prototype=Object.assign(Object.create(Ne.prototype),{constructor:Dh,copy:function(n,e){return Ne.prototype.copy.call(this,n,e),this.element=n.element.cloneNode(!0),this}});var kbe=function(){var n=this,e,t,i,r,s=new te,o=new Oe,a=new Oe,c={objects:new WeakMap},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:e,height:t}},this.setSize=function(p,v){e=p,t=v,i=e/2,r=t/2,l.style.width=p+"px",l.style.height=v+"px"};var u=function(p,v,y){if(p instanceof Dh){p.onBeforeRender(n,v,y),s.setFromMatrixPosition(p.matrixWorld),s.applyMatrix4(a);var g=p.element,m="translate(-50%,-50%) translate("+(s.x*i+i)+"px,"+(-s.y*r+r)+"px)";g.style.WebkitTransform=m,g.style.MozTransform=m,g.style.oTransform=m,g.style.transform=m,g.style.display=p.visible&&s.z>=-1&&s.z<=1?"":"none";var w={distanceToCameraSquared:h(y,p)};c.objects.set(p,w),g.parentNode!==l&&l.appendChild(g),p.onAfterRender(n,v,y)}for(var b=0,E=p.children.length;b<E;b++)u(p.children[b],v,y)},h=function(){var p=new te,v=new te;return function(y,g){return p.setFromMatrixPosition(y.matrixWorld),v.setFromMatrixPosition(g.matrixWorld),p.distanceToSquared(v)}}(),f=function(p){var v=[];return p.traverse(function(y){y instanceof Dh&&v.push(y)}),v},d=function(p){for(var v=f(p).sort(function(w,b){var E=c.objects.get(w).distanceToCameraSquared,S=c.objects.get(b).distanceToCameraSquared;return E-S}),y=v.length,g=0,m=v.length;g<m;g++)v[g].element.style.zIndex=y-g};this.render=function(p,v){p.autoUpdate===!0&&p.updateMatrixWorld(),v.parent===null&&v.updateMatrixWorld(),o.copy(v.matrixWorldInverse),a.multiplyMatrices(v.projectionMatrix,o),u(p,p,v),d(p)}};const Nbe={id:"webgl"},Bbe={__name:"Tag",setup(n){return Bt(()=>{const e=new cn,t=new lt(45,window.innerWidth/window.innerHeight,.1,1e4);t.position.z=100;const i=document.createElement("div");i.style.width="10px",i.style.height="10px",i.innerHTML="CSS3DObject---",i.style.color="red",i.style.fontSize="1px",i.style.backgroundColor="#fff";const r=document.createElement("div2");r.style.width="100px",r.style.height="100px",r.innerHTML="CSS2DObject---",r.style.color="blue",r.style.fontSize="16px",r.style.backgroundColor="#fff";const s=new Ea(i);s.position.set(0,0,10),e.add(s);const o=new Dh(r);o.position.set(0,0,20),e.add(o);const c=new At().load("/models/noon.jpg"),l=new Vr({map:c}),u=new _h(l);u.scale.set(4,4,1),u.position.set(10,0,0),e.add(u);const h=new g_(10,10,10),f=new ct({color:"#95B9F0"}),d=new qe(h,f);e.add(d);const p=document.getElementById("webgl"),v=new jt({antialias:!0,alpha:!0});v.setSize(window.innerWidth,window.innerHeight),p.appendChild(v.domElement);const y=new kbe;y.setSize(window.innerWidth,window.innerHeight),y.domElement.style.position="absolute",y.domElement.style.top=0,y.domElement.style.left=0,p.appendChild(y.domElement);const g=new Obe;g.setSize(window.innerWidth,window.innerHeight),g.domElement.style.position="absolute",g.domElement.style.top="40px",g.domElement.style.left="180px",p.appendChild(g.domElement);const m=new rn(t,g.domElement),w=()=>{m.update(),v.render(e,t),y.render(e,t),g.render(e,t),requestAnimationFrame(w)};w()}),(e,t)=>(tt(),_t("div",Nbe))}},zbe={id:"webgl"},Ube={__name:"SolarSystem",setup(n){const e=[{name:"太阳",position:new te(0,0,0),radius:50,segments:32,url:"/models/ty.jpg",path:0,speed:1},{name:"水星",position:new te(0,100,0),radius:10,segments:32,url:"/models/sx.jpg",path:100,speed:3.4,color:""},{name:"金星",position:new te(-150,0,0),radius:20,segments:32,url:"/models/jx.jpg",path:150,speed:4.1},{name:"地球",position:new te(0,-200,0),radius:18,segments:32,url:"/models/dq.jpg",path:200,speed:2.4},{name:"火星",position:new te(250,0,0),radius:16,segments:32,url:"/models/hx.jpg",path:250,speed:3.5},{name:"木星",position:new te(-300,0,0),radius:25,segments:32,url:"/models/mx.jpg",path:300,speed:4.4},{name:"土星",position:new te(0,350,0),radius:17,segments:32,url:"/models/tx.jpg",path:350,speed:1.4},{name:"天王星",position:new te(400,0,0),radius:9,segments:32,url:"/models/twx.jpg",path:400,speed:3.2},{name:"海王星",position:new te(0,450,0),radius:8,segments:32,url:"/models/hwx.jpg",path:450,speed:2.8}];return Bt(()=>{const t=window.innerWidth,i=window.innerHeight,r=document.querySelector("#webgl"),s=new cn,o=new lt(45,t/i,300,5e3);o.position.set(0,0,1200),s.add(o);const a=new tn;e.forEach(f=>{const d=new Ao(0,0,f.path,0,2*Math.PI),p=new Ke,v=d.getPoints(500);p.setFromPoints(v);const y=new Zt({color:3495317}),g=new ya(p,y);a.add(g);const m=new lr(f.radius,f.segments,f.segments);var w=new ct({map:new At().load(f.url)}),b=new qe(m,w);b.position.set(f.position.x,f.position.y,f.position.z),b.name=f.name,b.arc=d,b.speed=f.speed,a.add(b)}),a.rotateX(-Math.PI/4),s.add(a);const c=new jt({antialias:!0,alpha:!0});c.setSize(t,i),r.appendChild(c.domElement);const l=new rn(o,c.domElement);l.autoRotateSpeed=.5;var u=0;const h=()=>{u+=3e-4,a.children.forEach(f=>{if(f.arc){let d=f.arc.getPoint((u*f.speed).toFixed(3));f.position.set(d.x,d.y,d.z),f.rotation.z+=.01*f.speed}}),c.render(s,o),requestAnimationFrame(h)};h(),window.addEventListener("resize",()=>{o.aspect=t/i,o.updateProjectionMatrix(),c.setSize(t,i),c.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(t,i)=>(tt(),_t("div",zbe))}},Hbe={id:"webgl"},Gbe={__name:"Space",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,1,1e3);s.position.set(0,0,500),r.add(s);const o=new Xr(16777215);o.position.set(0,0,500),r.add(o);let a,c;const l=new iA(30,50,1e3,32,32,!0);new At().load("/models/storm.jpg",function(d){c=d,d.wrapS=d.wrapT=Nr,d.repeat.set(1,3);const p=new si({transparent:!0,alphaMap:d,side:yn});a=new qe(l,p),a.rotation.x=-Math.PI/2,r.add(a)});const u=new jt({antialias:!0,alpha:!0});u.setSize(e,t),i.appendChild(u.domElement);let h=0;const f=()=>{h+=.002,h>1&&(h=0),a&&(a.material.color.setHSL(h,.5,.5),a.rotation.y+=.01,c.offset.y+=.01),u.render(r,s),requestAnimationFrame(f)};f(),window.addEventListener("resize",()=>{s.aspect=e/t,s.updateProjectionMatrix(),u.setSize(e,t),u.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(e,t)=>(tt(),_t("div",Hbe))}};var k_=function(){function n(O){xt.call(this,O),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(B){return new o(B)}),this.register(function(B){return new c(B)}),this.register(function(B){return new l(B)}),this.register(function(B){return new a(B)}),this.register(function(B){return new r(B)}),this.register(function(B){return new u(B)})}n.prototype=Object.assign(Object.create(xt.prototype),{constructor:n,load:function(O,B,Z,V){var J=this,re;this.resourcePath!==""?re=this.resourcePath:this.path!==""?re=this.path:re=xs.extractUrlBase(O),this.manager.itemStart(O);var D=function(U){V?V(U):console.error(U),J.manager.itemError(O),J.manager.itemEnd(O)},F=new jn(this.manager);F.setPath(this.path),F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setWithCredentials(this.withCredentials),F.load(O,function(U){try{J.parse(U,re,function(K){B(K),J.manager.itemEnd(O)},D)}catch(K){D(K)}},Z,D)},setDRACOLoader:function(O){return this.dracoLoader=O,this},setDDSLoader:function(O){return this.ddsLoader=O,this},setKTX2Loader:function(O){return this.ktx2Loader=O,this},setMeshoptDecoder:function(O){return this.meshoptDecoder=O,this},register:function(O){return this.pluginCallbacks.indexOf(O)===-1&&this.pluginCallbacks.push(O),this},unregister:function(O){return this.pluginCallbacks.indexOf(O)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(O),1),this},parse:function(O,B,Z,V){var J,re={},D={};if(typeof O=="string")J=O;else{var F=xs.decodeText(new Uint8Array(O,0,4));if(F===h){try{re[t.KHR_BINARY_GLTF]=new p(O)}catch(X){V&&V(X);return}J=re[t.KHR_BINARY_GLTF].content}else J=xs.decodeText(new Uint8Array(O))}var U=JSON.parse(J);if(U.asset===void 0||U.asset.version[0]<2){V&&V(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}var K=new se(U,{path:B||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});K.fileLoader.setRequestHeader(this.requestHeader);for(var $=0;$<this.pluginCallbacks.length;$++){var R=this.pluginCallbacks[$](K);D[R.name]=R,re[R.name]=!0}if(U.extensionsUsed)for(var $=0;$<U.extensionsUsed.length;++$){var C=U.extensionsUsed[$],q=U.extensionsRequired||[];switch(C){case t.KHR_MATERIALS_UNLIT:re[C]=new s;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:re[C]=new m;break;case t.KHR_DRACO_MESH_COMPRESSION:re[C]=new v(U,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:re[C]=new i(this.ddsLoader);break;case t.KHR_TEXTURE_TRANSFORM:re[C]=new y;break;case t.KHR_MESH_QUANTIZATION:re[C]=new w;break;default:q.indexOf(C)>=0&&D[C]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+C+'".')}}K.setExtensions(re),K.setPlugins(D),K.parse(Z,V)}});function e(){var O={};return{get:function(B){return O[B]},add:function(B,Z){O[B]=Z},remove:function(B){delete O[B]},removeAll:function(){O={}}}}var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function i(O){if(!O)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=O}function r(O){this.parser=O,this.name=t.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}r.prototype._markDefs=function(){for(var O=this.parser,B=this.parser.json.nodes||[],Z=0,V=B.length;Z<V;Z++){var J=B[Z];J.extensions&&J.extensions[this.name]&&J.extensions[this.name].light!==void 0&&O._addNodeRef(this.cache,J.extensions[this.name].light)}},r.prototype._loadLight=function(O){var B=this.parser,Z="light:"+O,V=B.cache.get(Z);if(V)return V;var J=B.json,re=J.extensions&&J.extensions[this.name]||{},D=re.lights||[],F=D[O],U,K=new Fe(16777215);F.color!==void 0&&K.fromArray(F.color);var $=F.range!==void 0?F.range:0;switch(F.type){case"directional":U=new Ts(K),U.target.position.set(0,0,-1),U.add(U.target);break;case"point":U=new Xr(K),U.distance=$;break;case"spot":U=new Co(K),U.distance=$,F.spot=F.spot||{},F.spot.innerConeAngle=F.spot.innerConeAngle!==void 0?F.spot.innerConeAngle:0,F.spot.outerConeAngle=F.spot.outerConeAngle!==void 0?F.spot.outerConeAngle:Math.PI/4,U.angle=F.spot.outerConeAngle,U.penumbra=1-F.spot.innerConeAngle/F.spot.outerConeAngle,U.target.position.set(0,0,-1),U.add(U.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+F.type)}return U.position.set(0,0,0),U.decay=2,F.intensity!==void 0&&(U.intensity=F.intensity),U.name=B.createUniqueName(F.name||"light_"+O),V=Promise.resolve(U),B.cache.add(Z,V),V},r.prototype.createNodeAttachment=function(O){var B=this,Z=this.parser,V=Z.json,J=V.nodes[O],re=J.extensions&&J.extensions[this.name]||{},D=re.light;return D===void 0?null:this._loadLight(D).then(function(F){return Z._getNodeRef(B.cache,D,F)})};function s(){this.name=t.KHR_MATERIALS_UNLIT}s.prototype.getMaterialType=function(){return ct},s.prototype.extendParams=function(O,B,Z){var V=[];O.color=new Fe(1,1,1),O.opacity=1;var J=B.pbrMetallicRoughness;if(J){if(Array.isArray(J.baseColorFactor)){var re=J.baseColorFactor;O.color.fromArray(re),O.opacity=re[3]}J.baseColorTexture!==void 0&&V.push(Z.assignTexture(O,"map",J.baseColorTexture))}return Promise.all(V)};function o(O){this.parser=O,this.name=t.KHR_MATERIALS_CLEARCOAT}o.prototype.getMaterialType=function(O){var B=this.parser,Z=B.json.materials[O];return!Z.extensions||!Z.extensions[this.name]?null:Ms},o.prototype.extendMaterialParams=function(O,B){var Z=this.parser,V=Z.json.materials[O];if(!V.extensions||!V.extensions[this.name])return Promise.resolve();var J=[],re=V.extensions[this.name];if(re.clearcoatFactor!==void 0&&(B.clearcoat=re.clearcoatFactor),re.clearcoatTexture!==void 0&&J.push(Z.assignTexture(B,"clearcoatMap",re.clearcoatTexture)),re.clearcoatRoughnessFactor!==void 0&&(B.clearcoatRoughness=re.clearcoatRoughnessFactor),re.clearcoatRoughnessTexture!==void 0&&J.push(Z.assignTexture(B,"clearcoatRoughnessMap",re.clearcoatRoughnessTexture)),re.clearcoatNormalTexture!==void 0&&(J.push(Z.assignTexture(B,"clearcoatNormalMap",re.clearcoatNormalTexture)),re.clearcoatNormalTexture.scale!==void 0)){var D=re.clearcoatNormalTexture.scale;B.clearcoatNormalScale=new Te(D,D)}return Promise.all(J)};function a(O){this.parser=O,this.name=t.KHR_MATERIALS_TRANSMISSION}a.prototype.getMaterialType=function(O){var B=this.parser,Z=B.json.materials[O];return!Z.extensions||!Z.extensions[this.name]?null:Ms},a.prototype.extendMaterialParams=function(O,B){var Z=this.parser,V=Z.json.materials[O];if(!V.extensions||!V.extensions[this.name])return Promise.resolve();var J=[],re=V.extensions[this.name];return re.transmissionFactor!==void 0&&(B.transmission=re.transmissionFactor),re.transmissionTexture!==void 0&&J.push(Z.assignTexture(B,"transmissionMap",re.transmissionTexture)),Promise.all(J)};function c(O){this.parser=O,this.name=t.KHR_TEXTURE_BASISU}c.prototype.loadTexture=function(O){var B=this.parser,Z=B.json,V=Z.textures[O];if(!V.extensions||!V.extensions[this.name])return null;var J=V.extensions[this.name],re=Z.images[J.source],D=B.options.ktx2Loader;if(!D){if(Z.extensionsRequired&&Z.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return B.loadTextureImage(O,re,D)};function l(O){this.parser=O,this.name=t.EXT_TEXTURE_WEBP,this.isSupported=null}l.prototype.loadTexture=function(O){var B=this.name,Z=this.parser,V=Z.json,J=V.textures[O];if(!J.extensions||!J.extensions[B])return null;var re=J.extensions[B],D=V.images[re.source],F=D.uri?Z.options.manager.getHandler(D.uri):Z.textureLoader;return this.detectSupport().then(function(U){if(U)return Z.loadTextureImage(O,D,F);if(V.extensionsRequired&&V.extensionsRequired.indexOf(B)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Z.loadTexture(O)})},l.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(O){var B=new Image;B.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",B.onload=B.onerror=function(){O(B.height===1)}})),this.isSupported};function u(O){this.name=t.EXT_MESHOPT_COMPRESSION,this.parser=O}u.prototype.loadBufferView=function(O){var B=this.parser.json,Z=B.bufferViews[O];if(Z.extensions&&Z.extensions[this.name]){var V=Z.extensions[this.name],J=this.parser.getDependency("buffer",V.buffer),re=this.parser.options.meshoptDecoder;if(!re||!re.supported){if(B.extensionsRequired&&B.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([J,re.ready]).then(function(D){var F=V.byteOffset||0,U=V.byteLength||0,K=V.count,$=V.byteStride,R=new ArrayBuffer(K*$),C=new Uint8Array(D[0],F,U);return re.decodeGltfBuffer(new Uint8Array(R),K,$,C,V.mode,V.filter),R})}else return null};var h="glTF",f=12,d={JSON:1313821514,BIN:5130562};function p(O){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var B=new DataView(O,0,f);if(this.header={magic:xs.decodeText(new Uint8Array(O.slice(0,4))),version:B.getUint32(4,!0),length:B.getUint32(8,!0)},this.header.magic!==h)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var Z=new DataView(O,f),V=0;V<Z.byteLength;){var J=Z.getUint32(V,!0);V+=4;var re=Z.getUint32(V,!0);if(V+=4,re===d.JSON){var D=new Uint8Array(O,f+V,J);this.content=xs.decodeText(D)}else if(re===d.BIN){var F=f+V;this.body=O.slice(F,F+J)}V+=J}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function v(O,B){if(!B)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=O,this.dracoLoader=B,this.dracoLoader.preload()}v.prototype.decodePrimitive=function(O,B){var Z=this.json,V=this.dracoLoader,J=O.extensions[this.name].bufferView,re=O.extensions[this.name].attributes,D={},F={},U={};for(var K in re){var $=_[K]||K.toLowerCase();D[$]=re[K]}for(K in O.attributes){var $=_[K]||K.toLowerCase();if(re[K]!==void 0){var R=Z.accessors[O.attributes[K]],C=S[R.componentType];U[$]=C,F[$]=R.normalized===!0}}return B.getDependency("bufferView",J).then(function(q){return new Promise(function(X){V.decodeDracoFile(q,function(H){for(var le in H.attributes){var he=H.attributes[le],fe=F[le];fe!==void 0&&(he.normalized=fe)}X(H)},D,U)})})};function y(){this.name=t.KHR_TEXTURE_TRANSFORM}y.prototype.extendTexture=function(O,B){return O=O.clone(),B.offset!==void 0&&O.offset.fromArray(B.offset),B.rotation!==void 0&&(O.rotation=B.rotation),B.scale!==void 0&&O.repeat.fromArray(B.scale),B.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),O.needsUpdate=!0,O};function g(O){un.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var B=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),Z=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),V=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),J=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),re=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),D={specular:{value:new Fe().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=D,this.onBeforeCompile=function(F){for(var U in D)F.uniforms[U]=D[U];F.fragmentShader=F.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",B).replace("#include <metalnessmap_pars_fragment>",Z).replace("#include <roughnessmap_fragment>",V).replace("#include <metalnessmap_fragment>",J).replace("#include <lights_physical_fragment>",re)},Object.defineProperties(this,{specular:{get:function(){return D.specular.value},set:function(F){D.specular.value=F}},specularMap:{get:function(){return D.specularMap.value},set:function(F){D.specularMap.value=F,F?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return D.glossiness.value},set:function(F){D.glossiness.value=F}},glossinessMap:{get:function(){return D.glossinessMap.value},set:function(F){D.glossinessMap.value=F,F?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(O)}g.prototype=Object.create(un.prototype),g.prototype.constructor=g,g.prototype.copy=function(O){return un.prototype.copy.call(this,O),this.specularMap=O.specularMap,this.specular.copy(O.specular),this.glossinessMap=O.glossinessMap,this.glossiness=O.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function m(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return g},extendParams:function(O,B,Z){var V=B.extensions[this.name];O.color=new Fe(1,1,1),O.opacity=1;var J=[];if(Array.isArray(V.diffuseFactor)){var re=V.diffuseFactor;O.color.fromArray(re),O.opacity=re[3]}if(V.diffuseTexture!==void 0&&J.push(Z.assignTexture(O,"map",V.diffuseTexture)),O.emissive=new Fe(0,0,0),O.glossiness=V.glossinessFactor!==void 0?V.glossinessFactor:1,O.specular=new Fe(1,1,1),Array.isArray(V.specularFactor)&&O.specular.fromArray(V.specularFactor),V.specularGlossinessTexture!==void 0){var D=V.specularGlossinessTexture;J.push(Z.assignTexture(O,"glossinessMap",D)),J.push(Z.assignTexture(O,"specularMap",D))}return Promise.all(J)},createMaterial:function(O){var B=new g(O);return B.fog=!0,B.color=O.color,B.map=O.map===void 0?null:O.map,B.lightMap=null,B.lightMapIntensity=1,B.aoMap=O.aoMap===void 0?null:O.aoMap,B.aoMapIntensity=1,B.emissive=O.emissive,B.emissiveIntensity=1,B.emissiveMap=O.emissiveMap===void 0?null:O.emissiveMap,B.bumpMap=O.bumpMap===void 0?null:O.bumpMap,B.bumpScale=1,B.normalMap=O.normalMap===void 0?null:O.normalMap,B.normalMapType=La,O.normalScale&&(B.normalScale=O.normalScale),B.displacementMap=null,B.displacementScale=1,B.displacementBias=0,B.specularMap=O.specularMap===void 0?null:O.specularMap,B.specular=O.specular,B.glossinessMap=O.glossinessMap===void 0?null:O.glossinessMap,B.glossiness=O.glossiness,B.alphaMap=null,B.envMap=O.envMap===void 0?null:O.envMap,B.envMapIntensity=1,B.refractionRatio=.98,B}}}function w(){this.name=t.KHR_MESH_QUANTIZATION}function b(O,B,Z,V){oi.call(this,O,B,Z,V)}b.prototype=Object.create(oi.prototype),b.prototype.constructor=b,b.prototype.copySampleValue_=function(O){for(var B=this.resultBuffer,Z=this.sampleValues,V=this.valueSize,J=O*V*3+V,re=0;re!==V;re++)B[re]=Z[J+re];return B},b.prototype.beforeStart_=b.prototype.copySampleValue_,b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(O,B,Z,V){for(var J=this.resultBuffer,re=this.sampleValues,D=this.valueSize,F=D*2,U=D*3,K=V-B,$=(Z-B)/K,R=$*$,C=R*$,q=O*U,X=q-U,H=-2*C+3*R,le=C-R,he=1-H,fe=le-R+$,pe=0;pe!==D;pe++){var Y=re[X+pe+D],ne=re[X+pe+F]*K,ve=re[q+pe+D],ue=re[q+pe]*K;J[pe]=he*Y+fe*ne+H*ve+le*ue}return J};var E={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P={9728:kn,9729:bn,9984:i0,9985:BT,9986:r0,9987:el},N={33071:On,33648:cp,10497:Nr},z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},T={CUBICSPLINE:void 0,LINEAR:$c,STEP:ph},A={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function M(O,B){return typeof O!="string"||O===""?"":(/^https?:\/\//i.test(B)&&/^\//.test(O)&&(B=B.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(O)||/^data:.*,.*$/i.test(O)||/^blob:.*$/i.test(O)?O:B+O)}function L(O){return O.DefaultMaterial===void 0&&(O.DefaultMaterial=new un({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Kh})),O.DefaultMaterial}function I(O,B,Z){for(var V in Z.extensions)O[V]===void 0&&(B.userData.gltfExtensions=B.userData.gltfExtensions||{},B.userData.gltfExtensions[V]=Z.extensions[V])}function k(O,B){B.extras!==void 0&&(typeof B.extras=="object"?Object.assign(O.userData,B.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+B.extras))}function W(O,B,Z){for(var V=!1,J=!1,re=0,D=B.length;re<D;re++){var F=B[re];if(F.POSITION!==void 0&&(V=!0),F.NORMAL!==void 0&&(J=!0),V&&J)break}if(!V&&!J)return Promise.resolve(O);for(var U=[],K=[],re=0,D=B.length;re<D;re++){var F=B[re];if(V){var $=F.POSITION!==void 0?Z.getDependency("accessor",F.POSITION):O.attributes.position;U.push($)}if(J){var $=F.NORMAL!==void 0?Z.getDependency("accessor",F.NORMAL):O.attributes.normal;K.push($)}}return Promise.all([Promise.all(U),Promise.all(K)]).then(function(R){var C=R[0],q=R[1];return V&&(O.morphAttributes.position=C),J&&(O.morphAttributes.normal=q),O.morphTargetsRelative=!0,O})}function j(O,B){if(O.updateMorphTargets(),B.weights!==void 0)for(var Z=0,V=B.weights.length;Z<V;Z++)O.morphTargetInfluences[Z]=B.weights[Z];if(B.extras&&Array.isArray(B.extras.targetNames)){var J=B.extras.targetNames;if(O.morphTargetInfluences.length===J.length){O.morphTargetDictionary={};for(var Z=0,V=J.length;Z<V;Z++)O.morphTargetDictionary[J[Z]]=Z}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function G(O){var B=O.extensions&&O.extensions[t.KHR_DRACO_MESH_COMPRESSION],Z;return B?Z="draco:"+B.bufferView+":"+B.indices+":"+ee(B.attributes):Z=O.indices+":"+ee(O.attributes)+":"+O.mode,Z}function ee(O){for(var B="",Z=Object.keys(O).sort(),V=0,J=Z.length;V<J;V++)B+=Z[V]+":"+O[Z[V]]+";";return B}function se(O,B){this.json=O||{},this.extensions={},this.plugins={},this.options=B||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},typeof createImageBitmap<"u"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new R0(this.options.manager):this.textureLoader=new At(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new jn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}se.prototype.setExtensions=function(O){this.extensions=O},se.prototype.setPlugins=function(O){this.plugins=O},se.prototype.parse=function(O,B){var Z=this,V=this.json,J=this.extensions;this.cache.removeAll(),this._invokeAll(function(re){return re._markDefs&&re._markDefs()}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(re){var D={scene:re[0][V.scene||0],scenes:re[0],animations:re[1],cameras:re[2],asset:V.asset,parser:Z,userData:{}};I(J,D,V),k(D,V),O(D)}).catch(B)},se.prototype._markDefs=function(){for(var O=this.json.nodes||[],B=this.json.skins||[],Z=this.json.meshes||[],V=0,J=B.length;V<J;V++)for(var re=B[V].joints,D=0,F=re.length;D<F;D++)O[re[D]].isBone=!0;for(var U=0,K=O.length;U<K;U++){var $=O[U];$.mesh!==void 0&&(this._addNodeRef(this.meshCache,$.mesh),$.skin!==void 0&&(Z[$.mesh].isSkinnedMesh=!0)),$.camera!==void 0&&this._addNodeRef(this.cameraCache,$.camera)}},se.prototype._addNodeRef=function(O,B){B!==void 0&&(O.refs[B]===void 0&&(O.refs[B]=O.uses[B]=0),O.refs[B]++)},se.prototype._getNodeRef=function(O,B,Z){if(O.refs[B]<=1)return Z;var V=Z.clone();return V.name+="_instance_"+O.uses[B]++,V},se.prototype._invokeOne=function(O){var B=Object.values(this.plugins);B.push(this);for(var Z=0;Z<B.length;Z++){var V=O(B[Z]);if(V)return V}},se.prototype._invokeAll=function(O){var B=Object.values(this.plugins);B.unshift(this);for(var Z=[],V=0;V<B.length;V++){var J=O(B[V]);J&&Z.push(J)}return Z},se.prototype.getDependency=function(O,B){var Z=O+":"+B,V=this.cache.get(Z);if(!V){switch(O){case"scene":V=this.loadScene(B);break;case"node":V=this.loadNode(B);break;case"mesh":V=this._invokeOne(function(J){return J.loadMesh&&J.loadMesh(B)});break;case"accessor":V=this.loadAccessor(B);break;case"bufferView":V=this._invokeOne(function(J){return J.loadBufferView&&J.loadBufferView(B)});break;case"buffer":V=this.loadBuffer(B);break;case"material":V=this._invokeOne(function(J){return J.loadMaterial&&J.loadMaterial(B)});break;case"texture":V=this._invokeOne(function(J){return J.loadTexture&&J.loadTexture(B)});break;case"skin":V=this.loadSkin(B);break;case"animation":V=this.loadAnimation(B);break;case"camera":V=this.loadCamera(B);break;default:throw new Error("Unknown type: "+O)}this.cache.add(Z,V)}return V},se.prototype.getDependencies=function(O){var B=this.cache.get(O);if(!B){var Z=this,V=this.json[O+(O==="mesh"?"es":"s")]||[];B=Promise.all(V.map(function(J,re){return Z.getDependency(O,re)})),this.cache.add(O,B)}return B},se.prototype.loadBuffer=function(O){var B=this.json.buffers[O],Z=this.fileLoader;if(B.type&&B.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+B.type+" buffer type is not supported.");if(B.uri===void 0&&O===0)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var V=this.options;return new Promise(function(J,re){Z.load(M(B.uri,V.path),J,void 0,function(){re(new Error('THREE.GLTFLoader: Failed to load buffer "'+B.uri+'".'))})})},se.prototype.loadBufferView=function(O){var B=this.json.bufferViews[O];return this.getDependency("buffer",B.buffer).then(function(Z){var V=B.byteLength||0,J=B.byteOffset||0;return Z.slice(J,J+V)})},se.prototype.loadAccessor=function(O){var B=this,Z=this.json,V=this.json.accessors[O];if(V.bufferView===void 0&&V.sparse===void 0)return Promise.resolve(null);var J=[];return V.bufferView!==void 0?J.push(this.getDependency("bufferView",V.bufferView)):J.push(null),V.sparse!==void 0&&(J.push(this.getDependency("bufferView",V.sparse.indices.bufferView)),J.push(this.getDependency("bufferView",V.sparse.values.bufferView))),Promise.all(J).then(function(re){var D=re[0],F=z[V.type],U=S[V.componentType],K=U.BYTES_PER_ELEMENT,$=K*F,R=V.byteOffset||0,C=V.bufferView!==void 0?Z.bufferViews[V.bufferView].byteStride:void 0,q=V.normalized===!0,X,H;if(C&&C!==$){var le=Math.floor(R/C),he="InterleavedBuffer:"+V.bufferView+":"+V.componentType+":"+le+":"+V.count,fe=B.cache.get(he);fe||(X=new U(D,le*C,V.count*C/K),fe=new Mi(X,C/K),B.cache.add(he,fe)),H=new Eo(fe,F,R%C/K,q)}else D===null?X=new U(V.count*F):X=new U(D,R,V.count*F),H=new Xe(X,F,q);if(V.sparse!==void 0){var pe=z.SCALAR,Y=S[V.sparse.indices.componentType],ne=V.sparse.indices.byteOffset||0,ve=V.sparse.values.byteOffset||0,ue=new Y(re[1],ne,V.sparse.count*pe),xe=new U(re[2],ve,V.sparse.count*F);D!==null&&(H=new Xe(H.array.slice(),H.itemSize,H.normalized));for(var Ee=0,Be=ue.length;Ee<Be;Ee++){var ft=ue[Ee];if(H.setX(ft,xe[Ee*F]),F>=2&&H.setY(ft,xe[Ee*F+1]),F>=3&&H.setZ(ft,xe[Ee*F+2]),F>=4&&H.setW(ft,xe[Ee*F+3]),F>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return H})},se.prototype.loadTexture=function(O){var B=this,Z=this.json,V=this.options,J=Z.textures[O],re=J.extensions||{},D;re[t.MSFT_TEXTURE_DDS]?D=Z.images[re[t.MSFT_TEXTURE_DDS].source]:D=Z.images[J.source];var F;return D.uri&&(F=V.manager.getHandler(D.uri)),F||(F=re[t.MSFT_TEXTURE_DDS]?B.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(O,D,F)},se.prototype.loadTextureImage=function(O,B,Z){var V=this,J=this.json,re=this.options,D=J.textures[O],F=self.URL||self.webkitURL,U=B.uri,K=!1,$=!0;return B.mimeType==="image/jpeg"&&($=!1),B.bufferView!==void 0&&(U=V.getDependency("bufferView",B.bufferView).then(function(R){if(B.mimeType==="image/png"){var C=new DataView(R,25,1).getUint8(0,!1);$=C===6||C===4||C===3}K=!0;var q=new Blob([R],{type:B.mimeType});return U=F.createObjectURL(q),U})),Promise.resolve(U).then(function(R){return new Promise(function(C,q){var X=C;Z.isImageBitmapLoader===!0&&(X=function(H){C(new Mh(H))}),Z.load(M(R,re.path),X,void 0,q)})}).then(function(R){K===!0&&F.revokeObjectURL(U),R.flipY=!1,D.name&&(R.name=D.name),$||(R.format=fo);var C=J.samplers||{},q=C[D.sampler]||{};return R.magFilter=P[q.magFilter]||bn,R.minFilter=P[q.minFilter]||el,R.wrapS=N[q.wrapS]||Nr,R.wrapT=N[q.wrapT]||Nr,V.associations.set(R,{type:"textures",index:O}),R})},se.prototype.assignTexture=function(O,B,Z){var V=this;return this.getDependency("texture",Z.index).then(function(J){if(Z.texCoord!==void 0&&Z.texCoord!=0&&!(B==="aoMap"&&Z.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Z.texCoord+" for texture "+B+" not yet supported."),V.extensions[t.KHR_TEXTURE_TRANSFORM]){var re=Z.extensions!==void 0?Z.extensions[t.KHR_TEXTURE_TRANSFORM]:void 0;if(re){var D=V.associations.get(J);J=V.extensions[t.KHR_TEXTURE_TRANSFORM].extendTexture(J,re),V.associations.set(J,D)}}O[B]=J})},se.prototype.assignFinalMaterial=function(O){var B=O.geometry,Z=O.material,V=B.attributes.tangent!==void 0,J=B.attributes.color!==void 0,re=B.attributes.normal===void 0,D=O.isSkinnedMesh===!0,F=Object.keys(B.morphAttributes).length>0,U=F&&B.morphAttributes.normal!==void 0;if(O.isPoints){var K="PointsMaterial:"+Z.uuid,$=this.cache.get(K);$||($=new cr,je.prototype.copy.call($,Z),$.color.copy(Z.color),$.map=Z.map,$.sizeAttenuation=!1,this.cache.add(K,$)),Z=$}else if(O.isLine){var K="LineBasicMaterial:"+Z.uuid,R=this.cache.get(K);R||(R=new Zt,je.prototype.copy.call(R,Z),R.color.copy(Z.color),this.cache.add(K,R)),Z=R}if(V||J||re||D||F){var K="ClonedMaterial:"+Z.uuid+":";Z.isGLTFSpecularGlossinessMaterial&&(K+="specular-glossiness:"),D&&(K+="skinning:"),V&&(K+="vertex-tangents:"),J&&(K+="vertex-colors:"),re&&(K+="flat-shading:"),F&&(K+="morph-targets:"),U&&(K+="morph-normals:");var C=this.cache.get(K);C||(C=Z.clone(),D&&(C.skinning=!0),V&&(C.vertexTangents=!0),J&&(C.vertexColors=!0),re&&(C.flatShading=!0),F&&(C.morphTargets=!0),U&&(C.morphNormals=!0),this.cache.add(K,C),this.associations.set(C,this.associations.get(Z))),Z=C}Z.aoMap&&B.attributes.uv2===void 0&&B.attributes.uv!==void 0&&B.setAttribute("uv2",B.attributes.uv),Z.normalScale&&!V&&(Z.normalScale.y=-Z.normalScale.y),Z.clearcoatNormalScale&&!V&&(Z.clearcoatNormalScale.y=-Z.clearcoatNormalScale.y),O.material=Z},se.prototype.getMaterialType=function(){return un},se.prototype.loadMaterial=function(O){var B=this,Z=this.json,V=this.extensions,J=Z.materials[O],re,D={},F=J.extensions||{},U=[];if(F[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var K=V[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];re=K.getMaterialType(),U.push(K.extendParams(D,J,B))}else if(F[t.KHR_MATERIALS_UNLIT]){var $=V[t.KHR_MATERIALS_UNLIT];re=$.getMaterialType(),U.push($.extendParams(D,J,B))}else{var R=J.pbrMetallicRoughness||{};if(D.color=new Fe(1,1,1),D.opacity=1,Array.isArray(R.baseColorFactor)){var C=R.baseColorFactor;D.color.fromArray(C),D.opacity=C[3]}R.baseColorTexture!==void 0&&U.push(B.assignTexture(D,"map",R.baseColorTexture)),D.metalness=R.metallicFactor!==void 0?R.metallicFactor:1,D.roughness=R.roughnessFactor!==void 0?R.roughnessFactor:1,R.metallicRoughnessTexture!==void 0&&(U.push(B.assignTexture(D,"metalnessMap",R.metallicRoughnessTexture)),U.push(B.assignTexture(D,"roughnessMap",R.metallicRoughnessTexture))),re=this._invokeOne(function(X){return X.getMaterialType&&X.getMaterialType(O)}),U.push(Promise.all(this._invokeAll(function(X){return X.extendMaterialParams&&X.extendMaterialParams(O,D)})))}J.doubleSided===!0&&(D.side=Rn);var q=J.alphaMode||A.OPAQUE;return q===A.BLEND?(D.transparent=!0,D.depthWrite=!1):(D.transparent=!1,q===A.MASK&&(D.alphaTest=J.alphaCutoff!==void 0?J.alphaCutoff:.5)),J.normalTexture!==void 0&&re!==ct&&(U.push(B.assignTexture(D,"normalMap",J.normalTexture)),D.normalScale=new Te(1,1),J.normalTexture.scale!==void 0&&D.normalScale.set(J.normalTexture.scale,J.normalTexture.scale)),J.occlusionTexture!==void 0&&re!==ct&&(U.push(B.assignTexture(D,"aoMap",J.occlusionTexture)),J.occlusionTexture.strength!==void 0&&(D.aoMapIntensity=J.occlusionTexture.strength)),J.emissiveFactor!==void 0&&re!==ct&&(D.emissive=new Fe().fromArray(J.emissiveFactor)),J.emissiveTexture!==void 0&&re!==ct&&U.push(B.assignTexture(D,"emissiveMap",J.emissiveTexture)),Promise.all(U).then(function(){var X;return re===g?X=V[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(D):X=new re(D),J.name&&(X.name=J.name),X.map&&(X.map.encoding=Ir),X.emissiveMap&&(X.emissiveMap.encoding=Ir),k(X,J),B.associations.set(X,{type:"materials",index:O}),J.extensions&&I(V,X,J),X})},se.prototype.createUniqueName=function(O){for(var B=an.sanitizeNodeName(O||""),Z=B,V=1;this.nodeNamesUsed[Z];++V)Z=B+"_"+V;return this.nodeNamesUsed[Z]=!0,Z};function oe(O,B,Z){var V=B.attributes,J=new Cs;if(V.POSITION!==void 0){var re=Z.json.accessors[V.POSITION],D=re.min,F=re.max;if(D!==void 0&&F!==void 0)J.set(new te(D[0],D[1],D[2]),new te(F[0],F[1],F[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var U=B.targets;if(U!==void 0){for(var K=new te,$=new te,R=0,C=U.length;R<C;R++){var q=U[R];if(q.POSITION!==void 0){var re=Z.json.accessors[q.POSITION],D=re.min,F=re.max;D!==void 0&&F!==void 0?($.setX(Math.max(Math.abs(D[0]),Math.abs(F[0]))),$.setY(Math.max(Math.abs(D[1]),Math.abs(F[1]))),$.setZ(Math.max(Math.abs(D[2]),Math.abs(F[2]))),K.max($)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}J.expandByVector(K)}O.boundingBox=J;var X=new Ls;J.getCenter(X.center),X.radius=J.min.distanceTo(J.max)/2,O.boundingSphere=X}function de(O,B,Z){var V=B.attributes,J=[];function re(K,$){return Z.getDependency("accessor",K).then(function(R){O.setAttribute($,R)})}for(var D in V){var F=_[D]||D.toLowerCase();F in O.attributes||J.push(re(V[D],F))}if(B.indices!==void 0&&!O.index){var U=Z.getDependency("accessor",B.indices).then(function(K){O.setIndex(K)});J.push(U)}return k(O,B),oe(O,B,Z),Promise.all(J).then(function(){return B.targets!==void 0?W(O,B.targets,Z):O})}function ae(O,B){var Z=O.getIndex();if(Z===null){var V=[],J=O.getAttribute("position");if(J!==void 0){for(var re=0;re<J.count;re++)V.push(re);O.setIndex(V),Z=O.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),O}var D=Z.count-2,F=[];if(B===Qb)for(var re=1;re<=D;re++)F.push(Z.getX(0)),F.push(Z.getX(re)),F.push(Z.getX(re+1));else for(var re=0;re<D;re++)re%2===0?(F.push(Z.getX(re)),F.push(Z.getX(re+1)),F.push(Z.getX(re+2))):(F.push(Z.getX(re+2)),F.push(Z.getX(re+1)),F.push(Z.getX(re)));F.length/3!==D&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var U=O.clone();return U.setIndex(F),U}return se.prototype.loadGeometries=function(O){var B=this,Z=this.extensions,V=this.primitiveCache;function J(C){return Z[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(C,B).then(function(q){return de(q,C,B)})}for(var re=[],D=0,F=O.length;D<F;D++){var U=O[D],K=G(U),$=V[K];if($)re.push($.promise);else{var R;U.extensions&&U.extensions[t.KHR_DRACO_MESH_COMPRESSION]?R=J(U):R=de(new Ke,U,B),V[K]={primitive:U,promise:R},re.push(R)}}return Promise.all(re)},se.prototype.loadMesh=function(O){for(var B=this,Z=this.json,V=this.extensions,J=Z.meshes[O],re=J.primitives,D=[],F=0,U=re.length;F<U;F++){var K=re[F].material===void 0?L(this.cache):this.getDependency("material",re[F].material);D.push(K)}return D.push(B.loadGeometries(re)),Promise.all(D).then(function($){for(var R=$.slice(0,$.length-1),C=$[$.length-1],q=[],X=0,H=C.length;X<H;X++){var le=C[X],he=re[X],fe,pe=R[X];if(he.mode===E.TRIANGLES||he.mode===E.TRIANGLE_STRIP||he.mode===E.TRIANGLE_FAN||he.mode===void 0)fe=J.isSkinnedMesh===!0?new xh(le,pe):new qe(le,pe),fe.isSkinnedMesh===!0&&!fe.geometry.attributes.skinWeight.normalized&&fe.normalizeSkinWeights(),he.mode===E.TRIANGLE_STRIP?fe.geometry=ae(fe.geometry,jD):he.mode===E.TRIANGLE_FAN&&(fe.geometry=ae(fe.geometry,Qb));else if(he.mode===E.LINES)fe=new ya(le,pe);else if(he.mode===E.LINE_STRIP)fe=new Ti(le,pe);else if(he.mode===E.LINE_LOOP)fe=new dp(le,pe);else if(he.mode===E.POINTS)fe=new _a(le,pe);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+he.mode);Object.keys(fe.geometry.morphAttributes).length>0&&j(fe,J),fe.name=B.createUniqueName(J.name||"mesh_"+O),k(fe,J),he.extensions&&I(V,fe,he),B.assignFinalMaterial(fe),q.push(fe)}if(q.length===1)return q[0];for(var Y=new tn,X=0,H=q.length;X<H;X++)Y.add(q[X]);return Y})},se.prototype.loadCamera=function(O){var B,Z=this.json.cameras[O],V=Z[Z.type];if(!V){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Z.type==="perspective"?B=new lt(Ue.radToDeg(V.yfov),V.aspectRatio||1,V.znear||1,V.zfar||2e6):Z.type==="orthographic"&&(B=new Lh(-V.xmag,V.xmag,V.ymag,-V.ymag,V.znear,V.zfar)),Z.name&&(B.name=this.createUniqueName(Z.name)),k(B,Z),Promise.resolve(B)},se.prototype.loadSkin=function(O){var B=this.json.skins[O],Z={joints:B.joints};return B.inverseBindMatrices===void 0?Promise.resolve(Z):this.getDependency("accessor",B.inverseBindMatrices).then(function(V){return Z.inverseBindMatrices=V,Z})},se.prototype.loadAnimation=function(O){for(var B=this.json,Z=B.animations[O],V=[],J=[],re=[],D=[],F=[],U=0,K=Z.channels.length;U<K;U++){var $=Z.channels[U],R=Z.samplers[$.sampler],C=$.target,q=C.node!==void 0?C.node:C.id,X=Z.parameters!==void 0?Z.parameters[R.input]:R.input,H=Z.parameters!==void 0?Z.parameters[R.output]:R.output;V.push(this.getDependency("node",q)),J.push(this.getDependency("accessor",X)),re.push(this.getDependency("accessor",H)),D.push(R),F.push(C)}return Promise.all([Promise.all(V),Promise.all(J),Promise.all(re),Promise.all(D),Promise.all(F)]).then(function(le){for(var he=le[0],fe=le[1],pe=le[2],Y=le[3],ne=le[4],ve=[],ue=0,xe=he.length;ue<xe;ue++){var Ee=he[ue],Be=fe[ue],ft=pe[ue],dt=Y[ue],rt=ne[ue];if(Ee!==void 0){Ee.updateMatrix(),Ee.matrixAutoUpdate=!0;var st;switch(x[rt.path]){case x.weights:st=xa;break;case x.rotation:st=hl;break;case x.position:case x.scale:default:st=ba;break}var dn=Ee.name?Ee.name:Ee.uuid,ui=dt.interpolation!==void 0?T[dt.interpolation]:$c,Jn=[];x[rt.path]===x.weights?Ee.traverse(function(ie){ie.isMesh===!0&&ie.morphTargetInfluences&&Jn.push(ie.name?ie.name:ie.uuid)}):Jn.push(dn);var Kn=ft.array;if(ft.normalized){var Vi;if(Kn.constructor===Int8Array)Vi=1/127;else if(Kn.constructor===Uint8Array)Vi=1/255;else if(Kn.constructor==Int16Array)Vi=1/32767;else if(Kn.constructor===Uint16Array)Vi=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var Rs=new Float32Array(Kn.length),It=0,ts=Kn.length;It<ts;It++)Rs[It]=Kn[It]*Vi;Kn=Rs}for(var It=0,ts=Jn.length;It<ts;It++){var Ps=new st(Jn[It]+"."+x[rt.path],Be.array,Kn,ui);dt.interpolation==="CUBICSPLINE"&&(Ps.createInterpolant=function(Se){return new b(this.times,this.values,this.getValueSize()/3,Se)},Ps.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ve.push(Ps)}}}var Vl=Z.name?Z.name:"animation_"+O;return new bi(Vl,void 0,ve)})},se.prototype.loadNode=function(O){var B=this.json,Z=this.extensions,V=this,J=B.nodes[O],re=J.name?V.createUniqueName(J.name):"";return function(){var D=[];return J.mesh!==void 0&&D.push(V.getDependency("mesh",J.mesh).then(function(F){var U=V._getNodeRef(V.meshCache,J.mesh,F);return J.weights!==void 0&&U.traverse(function(K){if(K.isMesh)for(var $=0,R=J.weights.length;$<R;$++)K.morphTargetInfluences[$]=J.weights[$]}),U})),J.camera!==void 0&&D.push(V.getDependency("camera",J.camera).then(function(F){return V._getNodeRef(V.cameraCache,J.camera,F)})),V._invokeAll(function(F){return F.createNodeAttachment&&F.createNodeAttachment(O)}).forEach(function(F){D.push(F)}),Promise.all(D)}().then(function(D){var F;if(J.isBone===!0?F=new sl:D.length>1?F=new tn:D.length===1?F=D[0]:F=new Ne,F!==D[0])for(var U=0,K=D.length;U<K;U++)F.add(D[U]);if(J.name&&(F.userData.name=J.name,F.name=re),k(F,J),J.extensions&&I(Z,F,J),J.matrix!==void 0){var $=new Oe;$.fromArray(J.matrix),F.applyMatrix4($)}else J.translation!==void 0&&F.position.fromArray(J.translation),J.rotation!==void 0&&F.quaternion.fromArray(J.rotation),J.scale!==void 0&&F.scale.fromArray(J.scale);return V.associations.set(F,{type:"nodes",index:O}),F})},se.prototype.loadScene=function(){function O(B,Z,V,J){var re=V.nodes[B];return J.getDependency("node",B).then(function(D){if(re.skin===void 0)return D;var F;return J.getDependency("skin",re.skin).then(function(U){F=U;for(var K=[],$=0,R=F.joints.length;$<R;$++)K.push(J.getDependency("node",F.joints[$]));return Promise.all(K)}).then(function(U){return D.traverse(function(K){if(K.isMesh){for(var $=[],R=[],C=0,q=U.length;C<q;C++){var X=U[C];if(X){$.push(X);var H=new Oe;F.inverseBindMatrices!==void 0&&H.fromArray(F.inverseBindMatrices.array,C*16),R.push(H)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',F.joints[C])}K.bind(new bh($,R),K.matrixWorld)}}),D})}).then(function(D){Z.add(D);var F=[];if(re.children)for(var U=re.children,K=0,$=U.length;K<$;K++){var R=U[K];F.push(O(R,D,V,J))}return Promise.all(F)})}return function(Z){var V=this.json,J=this.extensions,re=this.json.scenes[Z],D=this,F=new tn;re.name&&(F.name=D.createUniqueName(re.name)),k(F,re),re.extensions&&I(J,F,re);for(var U=re.nodes||[],K=[],$=0,R=U.length;$<R;$++)K.push(O(U[$],F,V,D));return Promise.all(K).then(function(){return F})}}(),n}();function Vbe(n){if(n&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=n,document.head.appendChild(e),n}}function Oc(n,e){var t=n.__state.conversionName.toString(),i=Math.round(n.r),r=Math.round(n.g),s=Math.round(n.b),o=n.a,a=Math.round(n.h),c=n.s.toFixed(1),l=n.v.toFixed(1);if(e||t==="THREE_CHAR_HEX"||t==="SIX_CHAR_HEX"){for(var u=n.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}else{if(t==="CSS_RGB")return"rgb("+i+","+r+","+s+")";if(t==="CSS_RGBA")return"rgba("+i+","+r+","+s+","+o+")";if(t==="HEX")return"0x"+n.hex.toString(16);if(t==="RGB_ARRAY")return"["+i+","+r+","+s+"]";if(t==="RGBA_ARRAY")return"["+i+","+r+","+s+","+o+"]";if(t==="RGB_OBJ")return"{r:"+i+",g:"+r+",b:"+s+"}";if(t==="RGBA_OBJ")return"{r:"+i+",g:"+r+",b:"+s+",a:"+o+"}";if(t==="HSV_OBJ")return"{h:"+a+",s:"+c+",v:"+l+"}";if(t==="HSVA_OBJ")return"{h:"+a+",s:"+c+",v:"+l+",a:"+o+"}"}return"unknown format"}var sM=Array.prototype.forEach,tu=Array.prototype.slice,Ae={BREAK:{},extend:function(e){return this.each(tu.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(t[r])||(e[r]=t[r])}).bind(this))},this),e},defaults:function(e){return this.each(tu.call(arguments,1),function(t){var i=this.isObject(t)?Object.keys(t):[];i.forEach((function(r){this.isUndefined(e[r])&&(e[r]=t[r])}).bind(this))},this),e},compose:function(){var e=tu.call(arguments);return function(){for(var t=tu.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(e){if(sM&&e.forEach&&e.forEach===sM)e.forEach(t,i);else if(e.length===e.length+0){var r=void 0,s=void 0;for(r=0,s=e.length;r<s;r++)if(r in e&&t.call(i,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(i,e[o],o)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var r=void 0;return function(){var s=this,o=arguments;function a(){r=null,i||e.apply(s,o)}var c=i||!r;clearTimeout(r),r=setTimeout(a,t),c&&e.apply(s,o)}},toArray:function(e){return e.toArray?e.toArray():tu.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){return isNaN(n)}),isArray:Array.isArray||function(n){return n.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},Wbe=[{litmus:Ae.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Oc},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return t===null?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Oc},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Oc},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return t===null?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Oc}}},{litmus:Ae.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Ae.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Ae.isObject,conversions:{RGBA_OBJ:{read:function(e){return Ae.isNumber(e.r)&&Ae.isNumber(e.g)&&Ae.isNumber(e.b)&&Ae.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return Ae.isNumber(e.r)&&Ae.isNumber(e.g)&&Ae.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return Ae.isNumber(e.h)&&Ae.isNumber(e.s)&&Ae.isNumber(e.v)&&Ae.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return Ae.isNumber(e.h)&&Ae.isNumber(e.s)&&Ae.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],nu=void 0,td=void 0,Tp=function(){td=!1;var e=arguments.length>1?Ae.toArray(arguments):arguments[0];return Ae.each(Wbe,function(t){if(t.litmus(e))return Ae.each(t.conversions,function(i,r){if(nu=i.read(e),td===!1&&nu!==!1)return td=nu,nu.conversionName=r,nu.conversion=i,Ae.BREAK}),Ae.BREAK}),td},oM=void 0,Fh={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),o=i*(1-t),a=i*(1-s*t),c=i*(1-(1-s)*t),l=[[i,c,o],[a,i,o],[o,i,c],[o,a,i],[c,o,i],[i,o,a]][r];return{r:l[0]*255,g:l[1]*255,b:l[2]*255}},rgb_to_hsv:function(e,t,i){var r=Math.min(e,t,i),s=Math.max(e,t,i),o=s-r,a=void 0,c=void 0;if(s!==0)c=o/s;else return{h:NaN,s:0,v:0};return e===s?a=(t-i)/o:t===s?a=2+(i-e)/o:a=4+(e-t)/o,a/=6,a<0&&(a+=1),{h:a*360,s:c,v:s/255}},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i),r},component_from_hex:function(e,t){return e>>t*8&255},hex_with_component:function(e,t,i){return i<<(oM=t*8)|e&~(255<<oM)}},$be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pr=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},mr=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),Lo=function n(e,t,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:n(s,t,i)}else{if("value"in r)return r.value;var o=r.get;return o===void 0?void 0:o.call(i)}},Fo=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},Oo=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},fn=function(){function n(){if(pr(this,n),this.__state=Tp.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return mr(n,[{key:"toString",value:function(){return Oc(this)}},{key:"toHexString",value:function(){return Oc(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),n}();function N_(n,e,t){Object.defineProperty(n,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(fn.recalculateRGB(this,e,t),this.__state[e])},set:function(r){this.__state.space!=="RGB"&&(fn.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function B_(n,e){Object.defineProperty(n,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(fn.recalculateHSV(this),this.__state[e])},set:function(i){this.__state.space!=="HSV"&&(fn.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=i}})}fn.recalculateRGB=function(n,e,t){if(n.__state.space==="HEX")n.__state[e]=Fh.component_from_hex(n.__state.hex,t);else if(n.__state.space==="HSV")Ae.extend(n.__state,Fh.hsv_to_rgb(n.__state.h,n.__state.s,n.__state.v));else throw new Error("Corrupted color state")};fn.recalculateHSV=function(n){var e=Fh.rgb_to_hsv(n.r,n.g,n.b);Ae.extend(n.__state,{s:e.s,v:e.v}),Ae.isNaN(e.h)?Ae.isUndefined(n.__state.h)&&(n.__state.h=0):n.__state.h=e.h};fn.COMPONENTS=["r","g","b","h","s","v","hex","a"];N_(fn.prototype,"r",2);N_(fn.prototype,"g",1);N_(fn.prototype,"b",0);B_(fn.prototype,"h");B_(fn.prototype,"s");B_(fn.prototype,"v");Object.defineProperty(fn.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(fn.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=Fh.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var ko=function(){function n(e,t){pr(this,n),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return mr(n,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),n}(),qbe={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},VA={};Ae.each(qbe,function(n,e){Ae.each(n,function(t){VA[t]=e})});var jbe=/(\d+(\.\d+)?)px/;function br(n){if(n==="0"||Ae.isUndefined(n))return 0;var e=n.match(jbe);return Ae.isNull(e)?0:parseFloat(e[1])}var _e={makeSelectable:function(e,t){e===void 0||e.style===void 0||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var r=i,s=t;Ae.isUndefined(s)&&(s=!0),Ae.isUndefined(r)&&(r=!0),e.style.position="absolute",s&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,r){var s=i||{},o=VA[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":{var c=s.x||s.clientX||0,l=s.y||s.clientY||0;a.initMouseEvent(t,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,c,l,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var u=a.initKeyboardEvent||a.initKeyEvent;Ae.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break}default:{a.initEvent(t,s.bubbles||!1,s.cancelable||!0);break}}Ae.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,i,r){var s=r||!1;return e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i),_e},unbind:function(e,t,i,r){var s=r||!1;return e.removeEventListener?e.removeEventListener(t,i,s):e.detachEvent&&e.detachEvent("on"+t,i),_e},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);i.indexOf(t)===-1&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return _e},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);r!==-1&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return _e},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return br(t["border-left-width"])+br(t["border-right-width"])+br(t["padding-left"])+br(t["padding-right"])+br(t.width)},getHeight:function(e){var t=getComputedStyle(e);return br(t["border-top-width"])+br(t["border-bottom-width"])+br(t["padding-top"])+br(t["padding-bottom"])+br(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)do i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;while(t);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},z_=function(n){Fo(e,n);function e(t,i){pr(this,e);var r=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox");function o(){s.setValue(!s.__prev)}return _e.bind(r.__checkbox,"change",o,!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return mr(e,[{key:"setValue",value:function(i){var r=Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(ko),WA=function(n){Fo(e,n);function e(t,i,r){pr(this,e);var s=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),o=r,a=s;if(s.__select=document.createElement("select"),Ae.isArray(o)){var c={};Ae.each(o,function(l){c[l]=l}),o=c}return Ae.each(o,function(l,u){var h=document.createElement("option");h.innerHTML=u,h.setAttribute("value",l),a.__select.appendChild(h)}),s.updateDisplay(),_e.bind(s.__select,"change",function(){var l=this.options[this.selectedIndex].value;a.setValue(l)}),s.domElement.appendChild(s.__select),s}return mr(e,[{key:"setValue",value:function(i){var r=Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return _e.isActive(this.__select)?this:(this.__select.value=this.getValue(),Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(ko),$A=function(n){Fo(e,n);function e(t,i){pr(this,e);var r=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),s=r;function o(){s.setValue(s.__input.value)}function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),_e.bind(r.__input,"keyup",o),_e.bind(r.__input,"change",o),_e.bind(r.__input,"blur",a),_e.bind(r.__input,"keydown",function(c){c.keyCode===13&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return mr(e,[{key:"updateDisplay",value:function(){return _e.isActive(this.__input)||(this.__input.value=this.getValue()),Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(ko);function aM(n){var e=n.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var U_=function(n){Fo(e,n);function e(t,i,r){pr(this,e);var s=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),o=r||{};return s.__min=o.min,s.__max=o.max,s.__step=o.step,Ae.isUndefined(s.__step)?s.initialValue===0?s.__impliedStep=1:s.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__impliedStep=s.__step,s.__precision=aM(s.__impliedStep),s}return mr(e,[{key:"setValue",value:function(i){var r=i;return this.__min!==void 0&&r<this.__min?r=this.__min:this.__max!==void 0&&r>this.__max&&(r=this.__max),this.__step!==void 0&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(i){return this.__min=i,this}},{key:"max",value:function(i){return this.__max=i,this}},{key:"step",value:function(i){return this.__step=i,this.__impliedStep=i,this.__precision=aM(i),this}}]),e}(ko);function Xbe(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}var Oh=function(n){Fo(e,n);function e(t,i,r){pr(this,e);var s=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,r));s.__truncationSuspended=!1;var o=s,a=void 0;function c(){var p=parseFloat(o.__input.value);Ae.isNaN(p)||o.setValue(p)}function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(){l()}function h(p){var v=a-p.clientY;o.setValue(o.getValue()+v*o.__impliedStep),a=p.clientY}function f(){_e.unbind(window,"mousemove",h),_e.unbind(window,"mouseup",f),l()}function d(p){_e.bind(window,"mousemove",h),_e.bind(window,"mouseup",f),a=p.clientY}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),_e.bind(s.__input,"change",c),_e.bind(s.__input,"blur",u),_e.bind(s.__input,"mousedown",d),_e.bind(s.__input,"keydown",function(p){p.keyCode===13&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return mr(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Xbe(this.getValue(),this.__precision),Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(U_);function cM(n,e,t,i,r){return i+(r-i)*((n-e)/(t-e))}var Ap=function(n){Fo(e,n);function e(t,i,r,s,o){pr(this,e);var a=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,{min:r,max:s,step:o})),c=a;a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),_e.bind(a.__background,"mousedown",l),_e.bind(a.__background,"touchstart",f),_e.addClass(a.__background,"slider"),_e.addClass(a.__foreground,"slider-fg");function l(v){document.activeElement.blur(),_e.bind(window,"mousemove",u),_e.bind(window,"mouseup",h),u(v)}function u(v){v.preventDefault();var y=c.__background.getBoundingClientRect();return c.setValue(cM(v.clientX,y.left,y.right,c.__min,c.__max)),!1}function h(){_e.unbind(window,"mousemove",u),_e.unbind(window,"mouseup",h),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}function f(v){v.touches.length===1&&(_e.bind(window,"touchmove",d),_e.bind(window,"touchend",p),d(v))}function d(v){var y=v.touches[0].clientX,g=c.__background.getBoundingClientRect();c.setValue(cM(y,g.left,g.right,c.__min,c.__max))}function p(){_e.unbind(window,"touchmove",d),_e.unbind(window,"touchend",p),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}return a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return mr(e,[{key:"updateDisplay",value:function(){var i=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=i*100+"%",Lo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(U_),H_=function(n){Fo(e,n);function e(t,i,r){pr(this,e);var s=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i)),o=s;return s.__button=document.createElement("div"),s.__button.innerHTML=r===void 0?"Fire":r,_e.bind(s.__button,"click",function(a){return a.preventDefault(),o.fire(),!1}),_e.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return mr(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(ko),Cp=function(n){Fo(e,n);function e(t,i){pr(this,e);var r=Oo(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));r.__color=new fn(r.getValue()),r.__temp=new fn(0);var s=r;r.domElement=document.createElement("div"),_e.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",_e.bind(r.__input,"keydown",function(v){v.keyCode===13&&h.call(this)}),_e.bind(r.__input,"blur",h),_e.bind(r.__selector,"mousedown",function(){_e.addClass(this,"drag").bind(window,"mouseup",function(){_e.removeClass(s.__selector,"drag")})}),_e.bind(r.__selector,"touchstart",function(){_e.addClass(this,"drag").bind(window,"touchend",function(){_e.removeClass(s.__selector,"drag")})});var o=document.createElement("div");Ae.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Ae.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Ae.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Ae.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Ae.extend(o.style,{width:"100%",height:"100%",background:"none"}),lM(o,"top","rgba(0,0,0,0)","#000"),Ae.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Zbe(r.__hue_field),Ae.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),_e.bind(r.__saturation_field,"mousedown",a),_e.bind(r.__saturation_field,"touchstart",a),_e.bind(r.__field_knob,"mousedown",a),_e.bind(r.__field_knob,"touchstart",a),_e.bind(r.__hue_field,"mousedown",c),_e.bind(r.__hue_field,"touchstart",c);function a(v){d(v),_e.bind(window,"mousemove",d),_e.bind(window,"touchmove",d),_e.bind(window,"mouseup",l),_e.bind(window,"touchend",l)}function c(v){p(v),_e.bind(window,"mousemove",p),_e.bind(window,"touchmove",p),_e.bind(window,"mouseup",u),_e.bind(window,"touchend",u)}function l(){_e.unbind(window,"mousemove",d),_e.unbind(window,"touchmove",d),_e.unbind(window,"mouseup",l),_e.unbind(window,"touchend",l),f()}function u(){_e.unbind(window,"mousemove",p),_e.unbind(window,"touchmove",p),_e.unbind(window,"mouseup",u),_e.unbind(window,"touchend",u),f()}function h(){var v=Tp(this.value);v!==!1?(s.__color.__state=v,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function f(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}r.__saturation_field.appendChild(o),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay();function d(v){v.type.indexOf("touch")===-1&&v.preventDefault();var y=s.__saturation_field.getBoundingClientRect(),g=v.touches&&v.touches[0]||v,m=g.clientX,w=g.clientY,b=(m-y.left)/(y.right-y.left),E=1-(w-y.top)/(y.bottom-y.top);return E>1?E=1:E<0&&(E=0),b>1?b=1:b<0&&(b=0),s.__color.v=E,s.__color.s=b,s.setValue(s.__color.toOriginal()),!1}function p(v){v.type.indexOf("touch")===-1&&v.preventDefault();var y=s.__hue_field.getBoundingClientRect(),g=v.touches&&v.touches[0]||v,m=g.clientY,w=1-(m-y.top)/(y.bottom-y.top);return w>1?w=1:w<0&&(w=0),s.__color.h=w*360,s.setValue(s.__color.toOriginal()),!1}return r}return mr(e,[{key:"updateDisplay",value:function(){var i=Tp(this.getValue());if(i!==!1){var r=!1;Ae.each(fn.COMPONENTS,function(a){if(!Ae.isUndefined(i[a])&&!Ae.isUndefined(this.__color.__state[a])&&i[a]!==this.__color.__state[a])return r=!0,{}},this),r&&Ae.extend(this.__color.__state,i)}Ae.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,o=255-s;Ae.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,lM(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Ae.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(ko),Ybe=["-moz-","-o-","-webkit-","-ms-",""];function lM(n,e,t,i){n.style.background="",Ae.each(Ybe,function(r){n.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+i+" 100%); "})}function Zbe(n){n.style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Jbe={load:function(e,t){var i=t||document,r=i.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,i.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){var i=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var s=i.getElementsByTagName("head")[0];try{s.appendChild(r)}catch{}}},Kbe=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Qbe=function(e,t){var i=e[t];return Ae.isArray(arguments[2])||Ae.isObject(arguments[2])?new WA(e,t,arguments[2]):Ae.isNumber(i)?Ae.isNumber(arguments[2])&&Ae.isNumber(arguments[3])?Ae.isNumber(arguments[4])?new Ap(e,t,arguments[2],arguments[3],arguments[4]):new Ap(e,t,arguments[2],arguments[3]):Ae.isNumber(arguments[4])?new Oh(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Oh(e,t,{min:arguments[2],max:arguments[3]}):Ae.isString(i)?new $A(e,t):Ae.isFunction(i)?new H_(e,t,""):Ae.isBoolean(i)?new z_(e,t):null};function ewe(n){setTimeout(n,1e3/60)}var twe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||ewe,nwe=function(){function n(){pr(this,n),this.backgroundElement=document.createElement("div"),Ae.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),_e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Ae.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;_e.bind(this.backgroundElement,"click",function(){e.hide()})}return mr(n,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Ae.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,i=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",_e.unbind(t.domElement,"webkitTransitionEnd",r),_e.unbind(t.domElement,"transitionend",r),_e.unbind(t.domElement,"oTransitionEnd",r)};_e.bind(this.domElement,"webkitTransitionEnd",i),_e.bind(this.domElement,"transitionend",i),_e.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-_e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-_e.getHeight(this.domElement)/2+"px"}}]),n}(),iwe=Vbe(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Jbe.inject(iwe);var uM="dg",hM=72,fM=20,kh="Default",Su=function(){try{return!!window.localStorage}catch{return!1}}(),Xu=void 0,dM=!0,wc=void 0,zg=!1,qA=[],Rt=function n(e){var t=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),_e.addClass(this.domElement,uM),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=Ae.defaults(i,{closeOnTop:!1,autoPlace:!0,width:n.DEFAULT_WIDTH}),i=Ae.defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),Ae.isUndefined(i.load)?i.load={preset:kh}:i.preset&&(i.load.preset=i.preset),Ae.isUndefined(i.parent)&&i.hideable&&qA.push(this),i.resizable=Ae.isUndefined(i.parent)&&i.resizable,i.autoPlace&&Ae.isUndefined(i.scrollable)&&(i.scrollable=!0);var r=Su&&localStorage.getItem(Mc(this,"isLocal"))==="true",s=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},closeOnTop:{get:function(){return i.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:i.load.preset},set:function(f){t.parent?t.getRoot().preset=f:i.load.preset=f,awe(this),t.revert()}},width:{get:function(){return i.width},set:function(f){i.width=f,U0(t,f)}},name:{get:function(){return i.name},set:function(f){i.name=f,o&&(o.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(f){i.closed=f,i.closed?_e.addClass(t.__ul,n.CLASS_CLOSED):_e.removeClass(t.__ul,n.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=f?n.TEXT_OPEN:n.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return r},set:function(f){Su&&(r=f,f?_e.bind(window,"unload",s):_e.unbind(window,"unload",s),localStorage.setItem(Mc(t,"isLocal"),f))}}}),Ae.isUndefined(i.parent)){if(this.closed=i.closed||!1,_e.addClass(this.domElement,n.CLASS_MAIN),_e.makeSelectable(this.domElement,!1),Su&&r){t.useLocalStorage=!0;var a=localStorage.getItem(Mc(this,"gui"));a&&(i.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=n.TEXT_CLOSED,_e.addClass(this.__closeButton,n.CLASS_CLOSE_BUTTON),i.closeOnTop?(_e.addClass(this.__closeButton,n.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(_e.addClass(this.__closeButton,n.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),_e.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{i.closed===void 0&&(i.closed=!0);var c=document.createTextNode(i.name);_e.addClass(c,"controller-name"),o=G_(t,c);var l=function(f){return f.preventDefault(),t.closed=!t.closed,!1};_e.addClass(this.__ul,n.CLASS_CLOSED),_e.addClass(o,"title"),_e.bind(o,"click",l),i.closed||(this.closed=!1)}i.autoPlace&&(Ae.isUndefined(i.parent)&&(dM&&(wc=document.createElement("div"),_e.addClass(wc,uM),_e.addClass(wc,n.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(wc),dM=!1),wc.appendChild(this.domElement),_e.addClass(this.domElement,n.CLASS_AUTO_PLACE)),this.parent||U0(t,i.width)),this.__resizeHandler=function(){t.onResizeDebounced()},_e.bind(window,"resize",this.__resizeHandler),_e.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),_e.bind(this.__ul,"transitionend",this.__resizeHandler),_e.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&owe(this),s=function(){Su&&localStorage.getItem(Mc(t,"isLocal"))==="true"&&localStorage.setItem(Mc(t,"gui"),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=s;function u(){var h=t.getRoot();h.width+=1,Ae.defer(function(){h.width-=1})}i.parent||u()};Rt.toggleHide=function(){zg=!zg,Ae.each(qA,function(n){n.domElement.style.display=zg?"none":""})};Rt.CLASS_AUTO_PLACE="a";Rt.CLASS_AUTO_PLACE_CONTAINER="ac";Rt.CLASS_MAIN="main";Rt.CLASS_CONTROLLER_ROW="cr";Rt.CLASS_TOO_TALL="taller-than-window";Rt.CLASS_CLOSED="closed";Rt.CLASS_CLOSE_BUTTON="close-button";Rt.CLASS_CLOSE_TOP="close-top";Rt.CLASS_CLOSE_BOTTOM="close-bottom";Rt.CLASS_DRAG="drag";Rt.DEFAULT_WIDTH=245;Rt.TEXT_CLOSED="Close Controls";Rt.TEXT_OPEN="Open Controls";Rt._keydownHandler=function(n){document.activeElement.type!=="text"&&(n.which===hM||n.keyCode===hM)&&Rt.toggleHide()};_e.bind(window,"keydown",Rt._keydownHandler,!1);Ae.extend(Rt.prototype,{add:function(e,t){return Yu(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Yu(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Ae.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&wc.removeChild(this.domElement);var e=this;Ae.each(this.__folders,function(t){e.removeFolder(t)}),_e.unbind(window,"keydown",Rt._keydownHandler,!1),pM(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new Rt(t);this.__folders[e]=i;var r=G_(this,i.domElement);return _e.addClass(r,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],pM(e);var t=this;Ae.each(e.__folders,function(i){e.removeFolder(i)}),Ae.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=_e.getOffset(e.__ul).top,i=0;Ae.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(i+=_e.getHeight(r))}),window.innerHeight-t-fM<i?(_e.addClass(e.domElement,Rt.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-fM+"px"):(_e.removeClass(e.domElement,Rt.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Ae.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Ae.debounce(function(){this.onResize()},50),remember:function(){if(Ae.isUndefined(Xu)&&(Xu=new nwe,Xu.domElement.innerHTML=Kbe),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Ae.each(Array.prototype.slice.call(arguments),function(t){e.__rememberedObjects.length===0&&swe(e),e.__rememberedObjects.indexOf(t)===-1&&e.__rememberedObjects.push(t)}),this.autoPlace&&U0(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=nd(this)),e.folders={},Ae.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=nd(this),B0(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[kh]=nd(this,!0)),this.load.remembered[e]=nd(this),this.preset=e,z0(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Ae.each(this.__controllers,function(t){this.getRoot().load.remembered?jA(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),Ae.each(this.__folders,function(t){t.revert(t)}),e||B0(this.getRoot(),!1)},listen:function(e){var t=this.__listening.length===0;this.__listening.push(e),t&&XA(this.__listening)},updateDisplay:function(){Ae.each(this.__controllers,function(e){e.updateDisplay()}),Ae.each(this.__folders,function(e){e.updateDisplay()})}});function G_(n,e,t){var i=document.createElement("li");return e&&i.appendChild(e),t?n.__ul.insertBefore(i,t):n.__ul.appendChild(i),n.onResize(),i}function pM(n){_e.unbind(window,"resize",n.__resizeHandler),n.saveToLocalStorageIfPossible&&_e.unbind(window,"unload",n.saveToLocalStorageIfPossible)}function B0(n,e){var t=n.__preset_select[n.__preset_select.selectedIndex];e?t.innerHTML=t.value+"*":t.innerHTML=t.value}function rwe(n,e,t){if(t.__li=e,t.__gui=n,Ae.extend(t,{options:function(o){if(arguments.length>1){var a=t.__li.nextElementSibling;return t.remove(),Yu(n,t.object,t.property,{before:a,factoryArgs:[Ae.toArray(arguments)]})}if(Ae.isArray(o)||Ae.isObject(o)){var c=t.__li.nextElementSibling;return t.remove(),Yu(n,t.object,t.property,{before:c,factoryArgs:[o]})}},name:function(o){return t.__li.firstElementChild.firstElementChild.innerHTML=o,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof Ap){var i=new Oh(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});Ae.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var o=t[s],a=i[s];t[s]=i[s]=function(){var c=Array.prototype.slice.call(arguments);return a.apply(i,c),o.apply(t,c)}}),_e.addClass(e,"has-slider"),t.domElement.insertBefore(i.domElement,t.domElement.firstElementChild)}else if(t instanceof Oh){var r=function(o){if(Ae.isNumber(t.__min)&&Ae.isNumber(t.__max)){var a=t.__li.firstElementChild.firstElementChild.innerHTML,c=t.__gui.__listening.indexOf(t)>-1;t.remove();var l=Yu(n,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return l.name(a),c&&l.listen(),l}return o};t.min=Ae.compose(r,t.min),t.max=Ae.compose(r,t.max)}else t instanceof z_?(_e.bind(e,"click",function(){_e.fakeEvent(t.__checkbox,"click")}),_e.bind(t.__checkbox,"click",function(s){s.stopPropagation()})):t instanceof H_?(_e.bind(e,"click",function(){_e.fakeEvent(t.__button,"click")}),_e.bind(e,"mouseover",function(){_e.addClass(t.__button,"hover")}),_e.bind(e,"mouseout",function(){_e.removeClass(t.__button,"hover")})):t instanceof Cp&&(_e.addClass(e,"color"),t.updateDisplay=Ae.compose(function(s){return e.style.borderLeftColor=t.__color.toString(),s},t.updateDisplay),t.updateDisplay());t.setValue=Ae.compose(function(s){return n.getRoot().__preset_select&&t.isModified()&&B0(n.getRoot(),!0),s},t.setValue)}function jA(n,e){var t=n.getRoot(),i=t.__rememberedObjects.indexOf(e.object);if(i!==-1){var r=t.__rememberedObjectIndecesToControllers[i];if(r===void 0&&(r={},t.__rememberedObjectIndecesToControllers[i]=r),r[e.property]=e,t.load&&t.load.remembered){var s=t.load.remembered,o=void 0;if(s[n.preset])o=s[n.preset];else if(s[kh])o=s[kh];else return;if(o[i]&&o[i][e.property]!==void 0){var a=o[i][e.property];e.initialValue=a,e.setValue(a)}}}}function Yu(n,e,t,i){if(e[t]===void 0)throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(i.color)r=new Cp(e,t);else{var s=[e,t].concat(i.factoryArgs);r=Qbe.apply(n,s)}i.before instanceof ko&&(i.before=i.before.__li),jA(n,r),_e.addClass(r.domElement,"c");var o=document.createElement("span");_e.addClass(o,"property-name"),o.innerHTML=r.property;var a=document.createElement("div");a.appendChild(o),a.appendChild(r.domElement);var c=G_(n,a,i.before);return _e.addClass(c,Rt.CLASS_CONTROLLER_ROW),r instanceof Cp?_e.addClass(c,"color"):_e.addClass(c,$be(r.getValue())),rwe(n,c,r),n.__controllers.push(r),r}function Mc(n,e){return document.location.href+"."+e}function z0(n,e,t){var i=document.createElement("option");i.innerHTML=e,i.value=e,n.__preset_select.appendChild(i),t&&(n.__preset_select.selectedIndex=n.__preset_select.length-1)}function mM(n,e){e.style.display=n.useLocalStorage?"block":"none"}function swe(n){var e=n.__save_row=document.createElement("li");_e.addClass(n.domElement,"has-save"),n.__ul.insertBefore(e,n.__ul.firstChild),_e.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",_e.addClass(t,"button gears");var i=document.createElement("span");i.innerHTML="Save",_e.addClass(i,"button"),_e.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",_e.addClass(r,"button"),_e.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",_e.addClass(s,"button"),_e.addClass(s,"revert");var o=n.__preset_select=document.createElement("select");if(n.load&&n.load.remembered?Ae.each(n.load.remembered,function(h,f){z0(n,f,f===n.preset)}):z0(n,kh,!1),_e.bind(o,"change",function(){for(var h=0;h<n.__preset_select.length;h++)n.__preset_select[h].innerHTML=n.__preset_select[h].value;n.preset=this.value}),e.appendChild(o),e.appendChild(t),e.appendChild(i),e.appendChild(r),e.appendChild(s),Su){var a=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage"),l=document.getElementById("dg-save-locally");l.style.display="block",localStorage.getItem(Mc(n,"isLocal"))==="true"&&c.setAttribute("checked","checked"),mM(n,a),_e.bind(c,"change",function(){n.useLocalStorage=!n.useLocalStorage,mM(n,a)})}var u=document.getElementById("dg-new-constructor");_e.bind(u,"keydown",function(h){h.metaKey&&(h.which===67||h.keyCode===67)&&Xu.hide()}),_e.bind(t,"click",function(){u.innerHTML=JSON.stringify(n.getSaveObject(),void 0,2),Xu.show(),u.focus(),u.select()}),_e.bind(i,"click",function(){n.save()}),_e.bind(r,"click",function(){var h=prompt("Enter a new preset name.");h&&n.saveAs(h)}),_e.bind(s,"click",function(){n.revert()})}function owe(n){var e=void 0;n.__resize_handle=document.createElement("div"),Ae.extend(n.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function t(s){return s.preventDefault(),n.width+=e-s.clientX,n.onResize(),e=s.clientX,!1}function i(){_e.removeClass(n.__closeButton,Rt.CLASS_DRAG),_e.unbind(window,"mousemove",t),_e.unbind(window,"mouseup",i)}function r(s){return s.preventDefault(),e=s.clientX,_e.addClass(n.__closeButton,Rt.CLASS_DRAG),_e.bind(window,"mousemove",t),_e.bind(window,"mouseup",i),!1}_e.bind(n.__resize_handle,"mousedown",r),_e.bind(n.__closeButton,"mousedown",r),n.domElement.insertBefore(n.__resize_handle,n.domElement.firstElementChild)}function U0(n,e){n.domElement.style.width=e+"px",n.__save_row&&n.autoPlace&&(n.__save_row.style.width=e+"px"),n.__closeButton&&(n.__closeButton.style.width=e+"px")}function nd(n,e){var t={};return Ae.each(n.__rememberedObjects,function(i,r){var s={},o=n.__rememberedObjectIndecesToControllers[r];Ae.each(o,function(a,c){s[c]=e?a.initialValue:a.getValue()}),t[r]=s}),t}function awe(n){for(var e=0;e<n.__preset_select.length;e++)n.__preset_select[e].value===n.preset&&(n.__preset_select.selectedIndex=e)}function XA(n){n.length!==0&&twe.call(window,function(){XA(n)}),Ae.each(n,function(e){e.updateDisplay()})}var cwe={Color:fn,math:Fh,interpret:Tp},lwe={Controller:ko,BooleanController:z_,OptionController:WA,StringController:$A,NumberController:U_,NumberControllerBox:Oh,NumberControllerSlider:Ap,FunctionController:H_,ColorController:Cp},uwe={dom:_e},hwe={GUI:Rt},fwe=Rt,dwe={color:cwe,controllers:lwe,dom:uwe,gui:hwe,GUI:fwe};const pwe={id:"webgl"},mwe={__name:"Externalmodel",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,.1,1e3);s.position.set(0,6,10),r.add(s);const o=new k_;let a,c=new cm,l=[];o.load("/models/tyranno/scene.gltf",function(w){console.log(11111,w),a=new Rh(w.scene),w.scene.traverse(function(E){E.isMesh&&(E.castShadow=!0,E.material.emissive=E.material.color,E.material.emissiveMap=E.material.map)}),r.add(w.scene);for(var b=0;b<w.animations.length;b++)l[b]=a.clipAction(w.animations[b]);h()});const u={time:0,timeScale:1,stopAllAction:function(){a.stopAllAction()},animation:"None"},h=()=>{var w=new dwe.GUI,b=w.addFolder("AnimationMixer");b.add(u,"time").listen(),b.add(u,"timeScale",0,5).onChange(function(E){a.timeScale=E}),b.add(u,"stopAllAction").listen(),w.add(u,"animation",["Attack","Attack2","HeadButt","TailWhip","Fall","Idle","Idle2","Roar","Run","Walk","None"]).onChange(function(E){for(var S=0;S<l.length;S++)E==l[S].getClip().name?l[S].play():l[S].stop()})},f=new Pa(10,10),d=new un({color:16777204,side:Rn}),p=new qe(f,d);p.rotation.x=-Math.PI/2,p.receiveShadow=!0,r.add(p);const v=new Co(16777215);v.position.set(0,10,10),v.castShadow=!0,v.shadowMapHeight=2048,v.shadowMapWidth=2048,r.add(v);const y=new jt({canvas:i,antialias:!0,precision:"highp",alpha:!0});y.setSize(e,t),y.shadowMap.enabled=!0,y.shadowMap.type=Jh,y.setPixelRatio(window.devicePixelRatio),y.setSize(window.innerWidth,window.innerHeight),y.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.outputEncoding=Ir;const g=new rn(s,y.domElement),m=()=>{if(g.update(),a){const w=c.getDelta();a.update(w)}y.render(r,s),requestAnimationFrame(m)};m()}),(e,t)=>(tt(),_t("canvas",pwe))}},gwe={id:"webgl"},vwe={__name:"TreeModel",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,.1,3e3);s.position.set(0,500,500),r.add(s);const o=new k_;let a,c=new cm;o.load("/models/ancient/scene.gltf",function(y){a=new Rh(y.scene),y.scene.traverse(function(g){g instanceof qe&&(g.castShadow=!0,g.material.emissive=g.material.color,g.material.emissiveMap=g.material.map)}),r.add(y.scene)});const l=new Pa(500,1e3),u=new un({color:16777204,side:Rn}),h=new qe(l,u);h.rotation.x=-Math.PI/2,h.position.z=-300,h.receiveShadow=!0,r.add(h);const f=new Co(16777215);f.position.set(0,200,150),f.castShadow=!0,r.add(f);const d=new jt({canvas:i,antialias:!0,alpha:!0});d.setSize(e,t),d.shadowMap.enabled=!0,d.shadowMap.type=Jh,d.outputEncoding=Ir;const p=new rn(s,d.domElement),v=()=>{if(p.update(),a){const y=c.getDelta();a.update(y)}d.render(r,s),requestAnimationFrame(v)};v()}),(e,t)=>(tt(),_t("canvas",gwe))}},ywe={id:"webgl"},_we={__name:"Shadow",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new cn,s=new lt(45,e/t,1,1e3);s.position.set(50,50,50),r.add(s);const o=new g_(10,10,10),a=[new ct({color:65520}),new ct({color:65280}),new ct({color:16773120}),new ct({color:16711680}),new ct({color:240}),new ct({color:15728895})],c=new qe(o,a);c.position.y=6,c.castShadow=!0,r.add(c);const l=new Pa(200,200),u=new un({color:16777204}),h=new qe(l,u);h.rotation.x=-Math.PI/2,h.receiveShadow=!0,r.add(h);const f=new Co(16777215);f.position.set(50,50,50),f.castShadow=!0,f.shadowMapHeight=2048,f.shadowMapWidth=2048,r.add(f);const d=new jt({antialias:!0,alpha:!0});d.setSize(e,t),d.shadowMap.enabled=!0,d.shadowMap.type=Jh,i.appendChild(d.domElement);const p=new rn(s,d.domElement);p.autoRotateSpeed=.5;const v=()=>{d.render(r,s),requestAnimationFrame(v)};v(),window.addEventListener("resize",()=>{s.aspect=e/t,s.updateProjectionMatrix(),d.setSize(e,t),d.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(e,t)=>(tt(),_t("div",ywe))}},xwe={id:"webgl"},bwe={__name:"MoveBall",setup(n){const e=$n({x:0,z:0,key:null});return Bt(()=>{const t=window.innerWidth,i=window.innerHeight,r=document.querySelector("#webgl"),s=new cn,o=new lt(45,t/i,1,1e3);o.position.set(0,100,100),s.add(o);const a=new b_(200,20,16777215,16777215);a.material.opacity=.5,a.material.transparent=!0,a.position.y=.005,s.add(a);const c=new Pa(200,200),l=new un({color:16777215,transparent:!0,opacity:.2}),u=new qe(c,l);u.rotation.x=-Math.PI/2,u.receiveShadow=!0,s.add(u);const h=new lr(5,256,256),f=new At().load("/models/dq.jpg"),d=new Ai({map:f}),p=new qe(h,d);p.position.y=5,p.castShadow=!0,s.add(p);const v=new Co(16777215);v.position.set(0,100,0),v.castShadow=!0,v.shadowMapHeight=2048,v.shadowMapWidth=2048,s.add(v);const y=new jt({antialias:!0,alpha:!0});y.setSize(t,i),y.shadowMap.enabled=!0,y.shadowMap.type=Jh,r.appendChild(y.domElement);const g=new rn(o,y.domElement);g.autoRotateSpeed=.5;const m=()=>{p.position.set(e.x,5,e.z),p.rotation.set(Math.PI/10*e.z,0,-(Math.PI/10)*e.x),Cr.update(),y.render(s,o),requestAnimationFrame(m)};m(),window.addEventListener("resize",()=>{o.aspect=t/i,o.updateProjectionMatrix(),y.setSize(t,i),y.setPixelRatio(Math.min(window.devicePixelRatio,2))}),window.addEventListener("keypress",function(w){switch(w.key){case"w":e.z-=1,e.key="z";break;case"s":e.z+=1,e.key="z";break;case"a":e.x-=1,e.key="x";break;case"d":e.x+=1,e.key="x";break}})}),(t,i)=>(tt(),_t("div",xwe))}};function rr(n){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(n)}function wwe(n,e){if(rr(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(rr(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YA(n){var e=wwe(n,"string");return rr(e)==="symbol"?e:String(e)}function Tt(n,e,t){return e=YA(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gM(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function nt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(t),!0).forEach(function(i){Tt(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gM(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ta(){return Ta=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ta.apply(this,arguments)}var Mwe=Array.isArray,Swe=function(e){return typeof e=="string"},Ewe=function(e){return e!==null&&rr(e)==="object"};function Eu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return typeof n=="function"?n(e):n??t}function Il(){for(var n=[],e=0;e<arguments.length;e++){var t=e<0||arguments.length<=e?void 0:arguments[e];if(t){if(Swe(t))n.push(t);else if(Mwe(t))for(var i=0;i<t.length;i++){var r=Il(t[i]);r&&n.push(r)}else if(Ewe(t))for(var s in t)t[s]&&n.push(s)}}return n.join(" ")}function Twe(n){if(Array.isArray(n))return n}function Awe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i,r,s,o,a=[],c=!0,l=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(i=s.call(t)).done)&&(a.push(i.value),a.length!==e);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw r}}return a}}function H0(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function ZA(n,e){if(n){if(typeof n=="string")return H0(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H0(n,e)}}function Cwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vM(n,e){return Twe(n)||Awe(n,e)||ZA(n,e)||Cwe()}function Lwe(n){if(Array.isArray(n))return H0(n)}function Rwe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Pwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lp(n){return Lwe(n)||Rwe(n)||ZA(n)||Pwe()}var Iwe=function(e){return e!=null&&e!==""};const Dwe=Iwe;var Fwe=function(e,t){var i=nt({},e);return Object.keys(t).forEach(function(r){var s=i[r];if(s)s.type||s.default?s.default=t[r]:s.def?s.def(t[r]):i[r]={type:s,default:t[r]};else throw new Error("not have ".concat(r," prop"))}),i};const Owe=Fwe;var JA=function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=Array.isArray(e)?e:[e],r=[];return i.forEach(function(s){Array.isArray(s)?r.push.apply(r,Lp(n(s,t))):s&&s.type===on?r.push.apply(r,Lp(n(s.children,t))):s&&ap(s)?t&&!KA(s)?r.push(s):t||r.push(s):Dwe(s)&&r.push(s)}),r},yM=function(e){for(var t,i=(e==null||(t=e.vnode)===null||t===void 0?void 0:t.el)||e&&(e.$el||e);i&&!i.tagName;)i=i.nextSibling;return i};function KA(n){return n&&(n.type===Ni||n.type===on&&n.children.length===0||n.type===Sl&&n.children.trim()==="")}function QA(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];return n.forEach(function(t){Array.isArray(t)?e.push.apply(e,Lp(t)):(t==null?void 0:t.type)===on?e.push.apply(e,Lp(QA(t.children))):e.push(t)}),e.filter(function(t){return!KA(t)})}var e2=function(e){return setTimeout(e,16)},t2=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(e2=function(e){return window.requestAnimationFrame(e)},t2=function(e){return window.cancelAnimationFrame(e)});var _M=0,V_=new Map;function n2(n){V_.delete(n)}function G0(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;_M+=1;var t=_M;function i(r){if(r===0)n2(t),n();else{var s=e2(function(){i(r-1)});V_.set(t,s)}}return i(e),t}G0.cancel=function(n){var e=V_.get(n);return n2(e),t2(e)};var W_=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t},$_=function(e){var t=e;return t.install=function(i){i.component(t.displayName||t.name,e)},e};function kwe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function i2(n,e){if(n==null)return{};var t=kwe(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const Nwe={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"};var Bwe={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const zwe=Bwe;var Uwe={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};const r2=Uwe;var Hwe={lang:nt({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},zwe),timePickerLocale:nt({},r2)};const xM=Hwe;var di="${label} is not a valid ${type}",Gwe={locale:"en",Pagination:Nwe,DatePicker:xM,TimePicker:r2,Calendar:xM,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:di,method:di,array:di,object:di,number:di,date:di,boolean:di,integer:di,float:di,regexp:di,email:di,url:di,hex:di},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};const V0=Gwe,s2=hr({compatConfig:{MODE:3},name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup:function(e,t){var i=t.slots,r=Vc("localeData",{}),s=Mt(function(){var a=e.componentName,c=a===void 0?"global":a,l=e.defaultLocale,u=l||V0[c||"global"],h=r.antLocale,f=c&&h?h[c]:{};return nt(nt({},typeof u=="function"?u():u),f||{})}),o=Mt(function(){var a=r.antLocale,c=a&&a.locale;return a&&a.exist&&!c?V0.locale:c});return function(){var a=e.children||i.default,c=r.antLocale;return a==null?void 0:a(s.value,o.value,c)}}});var o2=function(){var e=No("empty",{}),t=e.getPrefixCls,i=t("empty-img-default");return Ce("svg",{class:i,width:"184",height:"152",viewBox:"0 0 184 152"},[Ce("g",{fill:"none","fill-rule":"evenodd"},[Ce("g",{transform:"translate(24 31.67)"},[Ce("ellipse",{class:"".concat(i,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),Ce("path",{class:"".concat(i,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},null),Ce("path",{class:"".concat(i,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"},null),Ce("path",{class:"".concat(i,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},null),Ce("path",{class:"".concat(i,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},null)]),Ce("path",{class:"".concat(i,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},null),Ce("g",{class:"".concat(i,"-g"),transform:"translate(149.65 15.383)"},[Ce("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),Ce("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])};o2.PRESENTED_IMAGE_DEFAULT=!0;const Vwe=o2;var a2=function(){var e=No("empty",{}),t=e.getPrefixCls,i=t("empty-img-simple");return Ce("svg",{class:i,width:"64",height:"41",viewBox:"0 0 64 41"},[Ce("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[Ce("ellipse",{class:"".concat(i,"-ellipse"),fill:"#F5F5F5",cx:"32",cy:"33",rx:"32",ry:"7"},null),Ce("g",{class:"".concat(i,"-g"),"fill-rule":"nonzero",stroke:"#D9D9D9"},[Ce("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),Ce("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#FAFAFA",class:"".concat(i,"-path")},null)])])])};a2.PRESENTED_IMAGE_SIMPLE=!0;const Wwe=a2;function bM(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function c2(n,e,t){return e&&bM(n.prototype,e),t&&bM(n,t),n}function Kd(){return(Kd=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function l2(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function u2(n,e){if(n==null)return{};var t,i,r={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(r[t]=n[t]);return r}function wM(n){return((e=n)!=null&&typeof e=="object"&&Array.isArray(e)===!1)==1&&Object.prototype.toString.call(n)==="[object Object]";var e}var h2=Object.prototype,f2=h2.toString,$we=h2.hasOwnProperty,d2=/^\s*function (\w+)/;function MM(n){var e,t=(e=n==null?void 0:n.type)!==null&&e!==void 0?e:n;if(t){var i=t.toString().match(d2);return i?i[1]:""}return""}var Aa=function(n){var e,t;return wM(n)!==!1&&typeof(e=n.constructor)=="function"&&wM(t=e.prototype)!==!1&&t.hasOwnProperty("isPrototypeOf")!==!1},qwe=function(n){return n},Gn=qwe,Nh=function(n,e){return $we.call(n,e)},jwe=Number.isInteger||function(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n},dl=Array.isArray||function(n){return f2.call(n)==="[object Array]"},pl=function(n){return f2.call(n)==="[object Function]"},Rp=function(n){return Aa(n)&&Nh(n,"_vueTypes_name")},p2=function(n){return Aa(n)&&(Nh(n,"type")||["_vueTypes_name","validator","default","required"].some(function(e){return Nh(n,e)}))};function q_(n,e){return Object.defineProperty(n.bind(e),"__original",{value:n})}function Ia(n,e,t){var i;t===void 0&&(t=!1);var r=!0,s="";i=Aa(n)?n:{type:n};var o=Rp(i)?i._vueTypes_name+" - ":"";if(p2(i)&&i.type!==null){if(i.type===void 0||i.type===!0||!i.required&&e===void 0)return r;dl(i.type)?(r=i.type.some(function(h){return Ia(h,e,!0)===!0}),s=i.type.map(function(h){return MM(h)}).join(" or ")):r=(s=MM(i))==="Array"?dl(e):s==="Object"?Aa(e):s==="String"||s==="Number"||s==="Boolean"||s==="Function"?function(h){if(h==null)return"";var f=h.constructor.toString().match(d2);return f?f[1]:""}(e)===s:e instanceof i.type}if(!r){var a=o+'value "'+e+'" should be of type "'+s+'"';return t===!1?(Gn(a),!1):a}if(Nh(i,"validator")&&pl(i.validator)){var c=Gn,l=[];if(Gn=function(h){l.push(h)},r=i.validator(e),Gn=c,!r){var u=(l.length>1?"* ":"")+l.join(`
* `);return l.length=0,t===!1?(Gn(u),r):u}}return r}function Ri(n,e){var t=Object.defineProperties(e,{_vueTypes_name:{value:n,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(r){return r!==void 0||this.default?pl(r)||Ia(this,r,!0)===!0?(this.default=dl(r)?function(){return[].concat(r)}:Aa(r)?function(){return Object.assign({},r)}:r,this):(Gn(this._vueTypes_name+' - invalid default value: "'+r+'"'),this):this}}}),i=t.validator;return pl(i)&&(t.validator=q_(i,t)),t}function Zr(n,e){var t=Ri(n,e);return Object.defineProperty(t,"validate",{value:function(i){return pl(this.validator)&&Gn(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=q_(i,this),this}})}function SM(n,e,t){var i,r,s=(i=e,r={},Object.getOwnPropertyNames(i).forEach(function(h){r[h]=Object.getOwnPropertyDescriptor(i,h)}),Object.defineProperties({},r));if(s._vueTypes_name=n,!Aa(t))return s;var o,a,c=t.validator,l=u2(t,["validator"]);if(pl(c)){var u=s.validator;u&&(u=(a=(o=u).__original)!==null&&a!==void 0?a:o),s.validator=q_(u?function(h){return u.call(this,h)&&c.call(this,h)}:c,s)}return Object.assign(s,l)}function ym(n){return n.replace(/^(?!\s*$)/gm,"  ")}var Xwe=function(){return Zr("any",{})},Ywe=function(){return Zr("function",{type:Function})},Zwe=function(){return Zr("boolean",{type:Boolean})},Jwe=function(){return Zr("string",{type:String})},Kwe=function(){return Zr("number",{type:Number})},Qwe=function(){return Zr("array",{type:Array})},e1e=function(){return Zr("object",{type:Object})},t1e=function(){return Ri("integer",{type:Number,validator:function(n){return jwe(n)}})},n1e=function(){return Ri("symbol",{validator:function(n){return typeof n=="symbol"}})};function i1e(n,e){if(e===void 0&&(e="custom validation failed"),typeof n!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Ri(n.name||"<<anonymous function>>",{validator:function(t){var i=n(t);return i||Gn(this._vueTypes_name+" - "+e),i}})}function r1e(n){if(!dl(n))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var e='oneOf - value should be one of "'+n.join('", "')+'".',t=n.reduce(function(i,r){if(r!=null){var s=r.constructor;i.indexOf(s)===-1&&i.push(s)}return i},[]);return Ri("oneOf",{type:t.length>0?t:void 0,validator:function(i){var r=n.indexOf(i)!==-1;return r||Gn(e),r}})}function s1e(n){if(!dl(n))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var e=!1,t=[],i=0;i<n.length;i+=1){var r=n[i];if(p2(r)){if(Rp(r)&&r._vueTypes_name==="oneOf"){t=t.concat(r.type);continue}if(pl(r.validator)&&(e=!0),r.type!==!0&&r.type){t=t.concat(r.type);continue}}t.push(r)}return t=t.filter(function(s,o){return t.indexOf(s)===o}),Ri("oneOfType",e?{type:t,validator:function(s){var o=[],a=n.some(function(c){var l=Ia(Rp(c)&&c._vueTypes_name==="oneOf"?c.type||null:c,s,!0);return typeof l=="string"&&o.push(l),l===!0});return a||Gn("oneOfType - provided value does not match any of the "+o.length+` passed-in validators:
`+ym(o.join(`
`))),a}}:{type:t})}function o1e(n){return Ri("arrayOf",{type:Array,validator:function(e){var t,i=e.every(function(r){return(t=Ia(n,r,!0))===!0});return i||Gn(`arrayOf - value validation error:
`+ym(t)),i}})}function a1e(n){return Ri("instanceOf",{type:n})}function c1e(n){return Ri("objectOf",{type:Object,validator:function(e){var t,i=Object.keys(e).every(function(r){return(t=Ia(n,e[r],!0))===!0});return i||Gn(`objectOf - value validation error:
`+ym(t)),i}})}function l1e(n){var e=Object.keys(n),t=e.filter(function(r){var s;return!!(!((s=n[r])===null||s===void 0)&&s.required)}),i=Ri("shape",{type:Object,validator:function(r){var s=this;if(!Aa(r))return!1;var o=Object.keys(r);if(t.length>0&&t.some(function(c){return o.indexOf(c)===-1})){var a=t.filter(function(c){return o.indexOf(c)===-1});return Gn(a.length===1?'shape - required property "'+a[0]+'" is not defined.':'shape - required properties "'+a.join('", "')+'" are not defined.'),!1}return o.every(function(c){if(e.indexOf(c)===-1)return s._vueTypes_isLoose===!0||(Gn('shape - shape definition does not include a "'+c+'" property. Allowed keys: "'+e.join('", "')+'".'),!1);var l=Ia(n[c],r[c],!0);return typeof l=="string"&&Gn('shape - "'+c+`" property validation error:
 `+ym(l)),l===!0})}});return Object.defineProperty(i,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(i,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),i}var Sr=function(){function n(){}return n.extend=function(e){var t=this;if(dl(e))return e.forEach(function(h){return t.extend(h)}),this;var i=e.name,r=e.validate,s=r!==void 0&&r,o=e.getter,a=o!==void 0&&o,c=u2(e,["name","validate","getter"]);if(Nh(this,i))throw new TypeError('[VueTypes error]: Type "'+i+'" already defined');var l,u=c.type;return Rp(u)?(delete c.type,Object.defineProperty(this,i,a?{get:function(){return SM(i,u,c)}}:{value:function(){var h,f=SM(i,u,c);return f.validator&&(f.validator=(h=f.validator).bind.apply(h,[f].concat([].slice.call(arguments)))),f}})):(l=a?{get:function(){var h=Object.assign({},c);return s?Zr(i,h):Ri(i,h)},enumerable:!0}:{value:function(){var h,f,d=Object.assign({},c);return h=s?Zr(i,d):Ri(i,d),d.validator&&(h.validator=(f=d.validator).bind.apply(f,[h].concat([].slice.call(arguments)))),h},enumerable:!0},Object.defineProperty(this,i,l))},c2(n,null,[{key:"any",get:function(){return Xwe()}},{key:"func",get:function(){return Ywe().def(this.defaults.func)}},{key:"bool",get:function(){return Zwe().def(this.defaults.bool)}},{key:"string",get:function(){return Jwe().def(this.defaults.string)}},{key:"number",get:function(){return Kwe().def(this.defaults.number)}},{key:"array",get:function(){return Qwe().def(this.defaults.array)}},{key:"object",get:function(){return e1e().def(this.defaults.object)}},{key:"integer",get:function(){return t1e().def(this.defaults.integer)}},{key:"symbol",get:function(){return n1e()}}]),n}();function m2(n){var e;return n===void 0&&(n={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(e=function(t){function i(){return t.apply(this,arguments)||this}return l2(i,t),c2(i,null,[{key:"sensibleDefaults",get:function(){return Kd({},this.defaults)},set:function(r){this.defaults=r!==!1?Kd({},r!==!0?r:n):{}}}]),i}(Sr)).defaults=Kd({},n),e}Sr.defaults={},Sr.custom=i1e,Sr.oneOf=r1e,Sr.instanceOf=a1e,Sr.oneOfType=s1e,Sr.arrayOf=o1e,Sr.objectOf=c1e,Sr.shape=l1e,Sr.utils={validate:function(n,e){return Ia(e,n,!0)===!0},toType:function(n,e,t){return t===void 0&&(t=!1),t?Zr(n,e):Ri(n,e)}};(function(n){function e(){return n.apply(this,arguments)||this}return l2(e,n),e})(m2());var g2=m2({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});g2.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);const W0=g2;var u1e=["image","description","imageStyle","class"],v2=Ce(Vwe,null,null),y2=Ce(Wwe,null,null),Dl=function(e,t){var i,r=t.slots,s=r===void 0?{}:r,o=t.attrs,a=No("empty",e),c=a.direction,l=a.prefixCls,u=l.value,h=nt(nt({},e),o),f=h.image,d=f===void 0?v2:f,p=h.description,v=p===void 0?((i=s.description)===null||i===void 0?void 0:i.call(s))||void 0:p,y=h.imageStyle,g=h.class,m=g===void 0?"":g,w=i2(h,u1e);return Ce(s2,{componentName:"Empty",children:function(E){var S,P=typeof v<"u"?v:E.description,N=typeof P=="string"?P:"empty",z=null;return typeof d=="string"?z=Ce("img",{alt:N,src:d},null):z=d,Ce("div",nt({class:Il(u,m,(S={},Tt(S,"".concat(u,"-normal"),d===y2),Tt(S,"".concat(u,"-rtl"),c.value==="rtl"),S))},w),[Ce("div",{class:"".concat(u,"-image"),style:y},[z]),P&&Ce("p",{class:"".concat(u,"-description")},[P]),s.default&&Ce("div",{class:"".concat(u,"-footer")},[QA(s.default())])])}},null)};Dl.displayName="AEmpty";Dl.PRESENTED_IMAGE_DEFAULT=v2;Dl.PRESENTED_IMAGE_SIMPLE=y2;Dl.inheritAttrs=!1;Dl.props={prefixCls:String,image:W0.any,description:W0.any,imageStyle:{type:Object,default:void 0}};const iu=$_(Dl);var h1e=function(e){var t=No("empty",e),i=t.prefixCls,r=function(o){switch(o){case"Table":case"List":return Ce(iu,{image:iu.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Ce(iu,{image:iu.PRESENTED_IMAGE_SIMPLE,class:"".concat(i.value,"-small")},null);default:return Ce(iu,null,null)}};return r(e.componentName)};function _2(n){return Ce(h1e,{componentName:n},null)}var EM={};function f1e(n,e){}function d1e(n,e,t){!e&&!EM[t]&&(n(!1,t),EM[t]=!0)}function x2(n,e){d1e(f1e,n,e)}const p1e=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";x2(n,"[antdv: ".concat(e,"] ").concat(t))};var $0="internalMark",Qd=hr({compatConfig:{MODE:3},name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:String},setup:function(e,t){var i=t.slots;p1e(e.ANT_MARK__===$0,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead");var r=$n({antLocale:nt(nt({},e.locale),{},{exist:!0}),ANT_MARK__:$0});return Zh("localeData",r),kr(function(){return e.locale},function(){r.antLocale=nt(nt({},e.locale),{},{exist:!0})},{immediate:!0}),function(){var s;return(s=i.default)===null||s===void 0?void 0:s.call(i)}}});Qd.install=function(n){return n.component(Qd.name,Qd),n};const m1e=$_(Qd);W_("bottomLeft","bottomRight","topLeft","topRight");var g1e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=nt(e?{name:e,appear:!0,appearActiveClass:"".concat(e),appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-appear ").concat(e,"-enter ").concat(e,"-appear-prepare ").concat(e,"-enter-prepare"),enterActiveClass:"".concat(e),enterToClass:"".concat(e,"-enter ").concat(e,"-appear ").concat(e,"-appear-active ").concat(e,"-enter-active"),leaveActiveClass:"".concat(e," ").concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-active")}:{css:!1},t);return i};const v1e=hr({name:"Notice",inheritAttrs:!1,props:["prefixCls","duration","updateMark","noticeKey","closeIcon","closable","props","onClick","onClose","holder","visible"],setup:function(e,t){var i=t.attrs,r=t.slots,s,o=!1,a=Mt(function(){return e.duration===void 0?4.5:e.duration}),c=function(){a.value&&!o&&(s=setTimeout(function(){u()},a.value*1e3))},l=function(){s&&(clearTimeout(s),s=null)},u=function(d){d&&d.stopPropagation(),l();var p=e.onClose,v=e.noticeKey;p&&p(v)},h=function(){l(),c()};return Bt(function(){c()}),By(function(){o=!0,l()}),kr([a,function(){return e.updateMark},function(){return e.visible}],function(f,d){var p=vM(f,3),v=p[0],y=p[1],g=p[2],m=vM(d,3),w=m[0],b=m[1],E=m[2];(v!==w||y!==b||g!==E&&E)&&h()},{flush:"post"}),function(){var f,d,p=e.prefixCls,v=e.closable,y=e.closeIcon,g=y===void 0?(f=r.closeIcon)===null||f===void 0?void 0:f.call(r):y,m=e.onClick,w=e.holder,b=i.class,E=i.style,S="".concat(p,"-notice"),P=Object.keys(i).reduce(function(z,_){return(_.substr(0,5)==="data-"||_.substr(0,5)==="aria-"||_==="role")&&(z[_]=i[_]),z},{}),N=Ce("div",nt({class:Il(S,b,Tt({},"".concat(S,"-closable"),v)),style:E,onMouseenter:l,onMouseleave:c,onClick:m},P),[Ce("div",{class:"".concat(S,"-content")},[(d=r.default)===null||d===void 0?void 0:d.call(r)]),v?Ce("a",{tabindex:0,onClick:u,class:"".concat(S,"-close")},[g||Ce("span",{class:"".concat(S,"-close-x")},null)]):null]);return w?Ce(kL,{to:w},{default:function(){return N}}):N}}});var y1e=["name","getContainer","appContext","prefixCls","rootPrefixCls","transitionName","hasTransitionName"],TM=0,_1e=Date.now();function AM(){var n=TM;return TM+=1,"rcNotification_".concat(_1e,"_").concat(n)}var q0=hr({name:"Notification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon"],setup:function(e,t){var i=t.attrs,r=t.expose,s=t.slots,o=new Map,a=nr([]),c=Mt(function(){var h=e.prefixCls,f=e.animation,d=f===void 0?"fade":f,p=e.transitionName;return!p&&d&&(p="".concat(h,"-").concat(d)),g1e(p)}),l=function(f,d){var p=f.key||AM(),v=nt(nt({},f),{},{key:p}),y=e.maxCount,g=a.value.map(function(w){return w.notice.key}).indexOf(p),m=a.value.concat();g!==-1?m.splice(g,1,{notice:v,holderCallback:d}):(y&&a.value.length>=y&&(v.key=m[0].notice.key,v.updateMark=AM(),v.userPassKey=p,m.shift()),m.push({notice:v,holderCallback:d})),a.value=m},u=function(f){a.value=a.value.filter(function(d){var p=d.notice,v=p.key,y=p.userPassKey,g=y||v;return g!==f})};return r({add:l,remove:u,notices:a}),function(){var h,f,d=e.prefixCls,p=e.closeIcon,v=p===void 0?(h=s.closeIcon)===null||h===void 0?void 0:h.call(s,{prefixCls:d}):p,y=a.value.map(function(m,w){var b=m.notice,E=m.holderCallback,S=w===a.value.length-1?b.updateMark:void 0,P=b.key,N=b.userPassKey,z=b.content,_=nt(nt(nt({prefixCls:d,closeIcon:typeof v=="function"?v({prefixCls:d}):v},b),b.props),{},{key:P,noticeKey:N||P,updateMark:S,onClose:function(T){var A;u(T),(A=b.onClose)===null||A===void 0||A.call(b)},onClick:b.onClick});return E?Ce("div",{key:P,class:"".concat(d,"-hook-holder"),ref:function(T){typeof P>"u"||(T?(o.set(P,T),E(T,_)):o.delete(P))}},null):Ce(v1e,_,{default:function(){return[typeof z=="function"?z({prefixCls:d}):z]}})}),g=(f={},Tt(f,d,1),Tt(f,i.class,!!i.class),f);return Ce("div",{class:g,style:i.style||{top:"65px",left:"50%"}},[Ce(xR,nt({tag:"div"},c.value),{default:function(){return[y]}})])}}});q0.newInstance=function(e,t){var i=e||{},r=i.name,s=r===void 0?"notification":r,o=i.getContainer,a=i.appContext,c=i.prefixCls,l=i.rootPrefixCls,u=i.transitionName,h=i.hasTransitionName,f=i2(i,y1e),d=document.createElement("div");if(o){var p=o();p.appendChild(d)}else document.body.appendChild(d);var v=hr({compatConfig:{MODE:3},name:"NotificationWrapper",setup:function(m,w){var b=w.attrs,E=nr();return Bt(function(){t({notice:function(P){var N;(N=E.value)===null||N===void 0||N.add(P)},removeNotice:function(P){var N;(N=E.value)===null||N===void 0||N.remove(P)},destroy:function(){ab(null,d),d.parentNode&&d.parentNode.removeChild(d)},component:E})}),function(){var S=_i,P=S.getPrefixCls(s,c),N=S.getRootPrefixCls(l,P),z=h?u:"".concat(N,"-").concat(u);return Ce(Zu,nt(nt({},S),{},{notUpdateGlobalConfig:!0,prefixCls:N}),{default:function(){return[Ce(q0,nt(nt({ref:E},b),{},{prefixCls:P,transitionName:z}),null)]}})}}}),y=Ce(v,f);y.appContext=a||y.appContext,ab(y,d)};const b2=q0;var w2=3,M2,Vn,x1e=1,S2="",E2="move-up",T2=!1,A2=function(){return document.body},C2,L2=!1;function b1e(){return x1e++}function w1e(n){n.top!==void 0&&(M2=n.top,Vn=null),n.duration!==void 0&&(w2=n.duration),n.prefixCls!==void 0&&(S2=n.prefixCls),n.getContainer!==void 0&&(A2=n.getContainer,Vn=null),n.transitionName!==void 0&&(E2=n.transitionName,Vn=null,T2=!0),n.maxCount!==void 0&&(C2=n.maxCount,Vn=null),n.rtl!==void 0&&(L2=n.rtl)}function M1e(n,e){if(Vn){e(Vn);return}b2.newInstance({appContext:n.appContext,prefixCls:n.prefixCls||S2,rootPrefixCls:n.rootPrefixCls,transitionName:E2,hasTransitionName:T2,style:{top:M2},getContainer:A2||n.getPopupContainer,maxCount:C2,name:"message"},function(t){if(Vn){e(Vn);return}Vn=t,e(t)})}var S1e={info:iI,success:bP,error:LP,warning:YP,loading:e0};function E1e(n){var e=n.duration!==void 0?n.duration:w2,t=n.key||b1e(),i=new Promise(function(s){var o=function(){return typeof n.onClose=="function"&&n.onClose(),s(!0)};M1e(n,function(a){a.notice({key:t,duration:e,style:n.style||{},class:n.class,content:function(l){var u,h=l.prefixCls,f=S1e[n.type],d=f?Ce(f,null,null):"",p=Il("".concat(h,"-custom-content"),(u={},Tt(u,"".concat(h,"-").concat(n.type),n.type),Tt(u,"".concat(h,"-rtl"),L2===!0),u));return Ce("div",{class:p},[typeof n.icon=="function"?n.icon():n.icon||d,Ce("span",null,[typeof n.content=="function"?n.content():n.content])])},onClose:o,onClick:n.onClick})})}),r=function(){Vn&&Vn.removeNotice(t)};return r.then=function(s,o){return i.then(s,o)},r.promise=i,r}function T1e(n){return Object.prototype.toString.call(n)==="[object Object]"&&!!n.content}var Pp={open:E1e,config:w1e,destroy:function(e){if(Vn)if(e){var t=Vn,i=t.removeNotice;i(e)}else{var r=Vn,s=r.destroy;s(),Vn=null}}};function A1e(n,e){n[e]=function(t,i,r){return T1e(t)?n.open(nt(nt({},t),{},{type:e})):(typeof i=="function"&&(r=i,i=void 0),n.open({content:t,duration:i,type:e,onClose:r}))}}["success","info","warning","error","loading"].forEach(function(n){return A1e(Pp,n)});Pp.warn=Pp.warning;const C1e=Pp;var R2={exports:{}},P2={exports:{}};(function(n){function e(t){"@babel/helpers - typeof";return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(P2);var L1e=P2.exports;(function(n){var e=L1e.default;function t(){n.exports=t=function(){return r},n.exports.__esModule=!0,n.exports.default=n.exports;var i,r={},s=Object.prototype,o=s.hasOwnProperty,a=Object.defineProperty||function(j,G,ee){j[G]=ee.value},c=typeof Symbol=="function"?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function f(j,G,ee){return Object.defineProperty(j,G,{value:ee,enumerable:!0,configurable:!0,writable:!0}),j[G]}try{f({},"")}catch{f=function(ee,se,oe){return ee[se]=oe}}function d(j,G,ee,se){var oe=G&&G.prototype instanceof b?G:b,de=Object.create(oe.prototype),ae=new k(se||[]);return a(de,"_invoke",{value:A(j,ee,ae)}),de}function p(j,G,ee){try{return{type:"normal",arg:j.call(G,ee)}}catch(se){return{type:"throw",arg:se}}}r.wrap=d;var v="suspendedStart",y="suspendedYield",g="executing",m="completed",w={};function b(){}function E(){}function S(){}var P={};f(P,l,function(){return this});var N=Object.getPrototypeOf,z=N&&N(N(W([])));z&&z!==s&&o.call(z,l)&&(P=z);var _=S.prototype=b.prototype=Object.create(P);function x(j){["next","throw","return"].forEach(function(G){f(j,G,function(ee){return this._invoke(G,ee)})})}function T(j,G){function ee(oe,de,ae,O){var B=p(j[oe],j,de);if(B.type!=="throw"){var Z=B.arg,V=Z.value;return V&&e(V)=="object"&&o.call(V,"__await")?G.resolve(V.__await).then(function(J){ee("next",J,ae,O)},function(J){ee("throw",J,ae,O)}):G.resolve(V).then(function(J){Z.value=J,ae(Z)},function(J){return ee("throw",J,ae,O)})}O(B.arg)}var se;a(this,"_invoke",{value:function(de,ae){function O(){return new G(function(B,Z){ee(de,ae,B,Z)})}return se=se?se.then(O,O):O()}})}function A(j,G,ee){var se=v;return function(oe,de){if(se===g)throw new Error("Generator is already running");if(se===m){if(oe==="throw")throw de;return{value:i,done:!0}}for(ee.method=oe,ee.arg=de;;){var ae=ee.delegate;if(ae){var O=M(ae,ee);if(O){if(O===w)continue;return O}}if(ee.method==="next")ee.sent=ee._sent=ee.arg;else if(ee.method==="throw"){if(se===v)throw se=m,ee.arg;ee.dispatchException(ee.arg)}else ee.method==="return"&&ee.abrupt("return",ee.arg);se=g;var B=p(j,G,ee);if(B.type==="normal"){if(se=ee.done?m:y,B.arg===w)continue;return{value:B.arg,done:ee.done}}B.type==="throw"&&(se=m,ee.method="throw",ee.arg=B.arg)}}}function M(j,G){var ee=G.method,se=j.iterator[ee];if(se===i)return G.delegate=null,ee==="throw"&&j.iterator.return&&(G.method="return",G.arg=i,M(j,G),G.method==="throw")||ee!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+ee+"' method")),w;var oe=p(se,j.iterator,G.arg);if(oe.type==="throw")return G.method="throw",G.arg=oe.arg,G.delegate=null,w;var de=oe.arg;return de?de.done?(G[j.resultName]=de.value,G.next=j.nextLoc,G.method!=="return"&&(G.method="next",G.arg=i),G.delegate=null,w):de:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,w)}function L(j){var G={tryLoc:j[0]};1 in j&&(G.catchLoc=j[1]),2 in j&&(G.finallyLoc=j[2],G.afterLoc=j[3]),this.tryEntries.push(G)}function I(j){var G=j.completion||{};G.type="normal",delete G.arg,j.completion=G}function k(j){this.tryEntries=[{tryLoc:"root"}],j.forEach(L,this),this.reset(!0)}function W(j){if(j||j===""){var G=j[l];if(G)return G.call(j);if(typeof j.next=="function")return j;if(!isNaN(j.length)){var ee=-1,se=function oe(){for(;++ee<j.length;)if(o.call(j,ee))return oe.value=j[ee],oe.done=!1,oe;return oe.value=i,oe.done=!0,oe};return se.next=se}}throw new TypeError(e(j)+" is not iterable")}return E.prototype=S,a(_,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:E,configurable:!0}),E.displayName=f(S,h,"GeneratorFunction"),r.isGeneratorFunction=function(j){var G=typeof j=="function"&&j.constructor;return!!G&&(G===E||(G.displayName||G.name)==="GeneratorFunction")},r.mark=function(j){return Object.setPrototypeOf?Object.setPrototypeOf(j,S):(j.__proto__=S,f(j,h,"GeneratorFunction")),j.prototype=Object.create(_),j},r.awrap=function(j){return{__await:j}},x(T.prototype),f(T.prototype,u,function(){return this}),r.AsyncIterator=T,r.async=function(j,G,ee,se,oe){oe===void 0&&(oe=Promise);var de=new T(d(j,G,ee,se),oe);return r.isGeneratorFunction(G)?de:de.next().then(function(ae){return ae.done?ae.value:de.next()})},x(_),f(_,h,"Generator"),f(_,l,function(){return this}),f(_,"toString",function(){return"[object Generator]"}),r.keys=function(j){var G=Object(j),ee=[];for(var se in G)ee.push(se);return ee.reverse(),function oe(){for(;ee.length;){var de=ee.pop();if(de in G)return oe.value=de,oe.done=!1,oe}return oe.done=!0,oe}},r.values=W,k.prototype={constructor:k,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!G)for(var ee in this)ee.charAt(0)==="t"&&o.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=i)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var ee=this;function se(Z,V){return ae.type="throw",ae.arg=G,ee.next=Z,V&&(ee.method="next",ee.arg=i),!!V}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var de=this.tryEntries[oe],ae=de.completion;if(de.tryLoc==="root")return se("end");if(de.tryLoc<=this.prev){var O=o.call(de,"catchLoc"),B=o.call(de,"finallyLoc");if(O&&B){if(this.prev<de.catchLoc)return se(de.catchLoc,!0);if(this.prev<de.finallyLoc)return se(de.finallyLoc)}else if(O){if(this.prev<de.catchLoc)return se(de.catchLoc,!0)}else{if(!B)throw new Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return se(de.finallyLoc)}}}},abrupt:function(G,ee){for(var se=this.tryEntries.length-1;se>=0;--se){var oe=this.tryEntries[se];if(oe.tryLoc<=this.prev&&o.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var de=oe;break}}de&&(G==="break"||G==="continue")&&de.tryLoc<=ee&&ee<=de.finallyLoc&&(de=null);var ae=de?de.completion:{};return ae.type=G,ae.arg=ee,de?(this.method="next",this.next=de.finallyLoc,w):this.complete(ae)},complete:function(G,ee){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&ee&&(this.next=ee),w},finish:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var se=this.tryEntries[ee];if(se.finallyLoc===G)return this.complete(se.completion,se.afterLoc),I(se),w}},catch:function(G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var se=this.tryEntries[ee];if(se.tryLoc===G){var oe=se.completion;if(oe.type==="throw"){var de=oe.arg;I(se)}return de}}throw new Error("illegal catch attempt")},delegateYield:function(G,ee,se){return this.delegate={iterator:W(G),resultName:ee,nextLoc:se},this.method==="next"&&(this.arg=i),w}},r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(R2);var R1e=R2.exports,Ug=R1e();try{regeneratorRuntime=Ug}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ug:Function("r","regeneratorRuntime = r")(Ug)}var oa={},I2=4.5,D2="24px",F2="24px",j0="",O2="topRight",k2=function(){return document.body},N2=null,X0=!1,B2;function P1e(n){var e=n.duration,t=n.placement,i=n.bottom,r=n.top,s=n.getContainer,o=n.closeIcon,a=n.prefixCls;a!==void 0&&(j0=a),e!==void 0&&(I2=e),t!==void 0&&(O2=t),i!==void 0&&(F2=typeof i=="number"?"".concat(i,"px"):i),r!==void 0&&(D2=typeof r=="number"?"".concat(r,"px"):r),s!==void 0&&(k2=s),o!==void 0&&(N2=o),n.rtl!==void 0&&(X0=n.rtl),n.maxCount!==void 0&&(B2=n.maxCount)}function I1e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:D2,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F2,i;switch(n){case"topLeft":i={left:"0px",top:e,bottom:"auto"};break;case"topRight":i={right:"0px",top:e,bottom:"auto"};break;case"bottomLeft":i={left:"0px",top:"auto",bottom:t};break;default:i={right:"0px",top:"auto",bottom:t};break}return i}function D1e(n,e){var t=n.prefixCls,i=n.placement,r=i===void 0?O2:i,s=n.getContainer,o=s===void 0?k2:s,a=n.top,c=n.bottom,l=n.closeIcon,u=l===void 0?N2:l,h=n.appContext,f=X1e(),d=f.getPrefixCls,p=d("notification",t||j0),v="".concat(p,"-").concat(r,"-").concat(X0),y=oa[v];if(y){Promise.resolve(y).then(function(m){e(m)});return}var g=Il("".concat(p,"-").concat(r),Tt({},"".concat(p,"-rtl"),X0===!0));b2.newInstance({name:"notification",prefixCls:t||j0,class:g,style:I1e(r,a,c),appContext:h,getContainer:o,closeIcon:function(w){var b=w.prefixCls,E=Ce("span",{class:"".concat(b,"-close-x")},[Eu(u,{},Ce(NP,{class:"".concat(b,"-close-icon")},null))]);return E},maxCount:B2,hasTransitionName:!0},function(m){oa[v]=m,e(m)})}var F1e={success:EP,info:aI,error:DP,warning:QP};function O1e(n){var e=n.icon,t=n.type,i=n.description,r=n.message,s=n.btn,o=n.duration===void 0?I2:n.duration;D1e(n,function(a){a.notice({content:function(l){var u=l.prefixCls,h="".concat(u,"-notice"),f=null;if(e)f=function(){return Ce("span",{class:"".concat(h,"-icon")},[Eu(e)])};else if(t){var d=F1e[t];f=function(){return Ce(d,{class:"".concat(h,"-icon ").concat(h,"-icon-").concat(t)},null)}}return Ce("div",{class:f?"".concat(h,"-with-icon"):""},[f&&f(),Ce("div",{class:"".concat(h,"-message")},[!i&&f?Ce("span",{class:"".concat(h,"-message-single-line-auto-margin")},null):null,Eu(r)]),Ce("div",{class:"".concat(h,"-description")},[Eu(i)]),s?Ce("span",{class:"".concat(h,"-btn")},[Eu(s)]):null])},duration:o,closable:!0,onClose:n.onClose,onClick:n.onClick,key:n.key,style:n.style||{},class:n.class})})}var Bh={open:O1e,close:function(e){Object.keys(oa).forEach(function(t){return Promise.resolve(oa[t]).then(function(i){i.removeNotice(e)})})},config:P1e,destroy:function(){Object.keys(oa).forEach(function(e){Promise.resolve(oa[e]).then(function(t){t.destroy()}),delete oa[e]})}},k1e=["success","info","warning","error"];k1e.forEach(function(n){Bh[n]=function(e){return Bh.open(nt(nt({},e),{},{type:n}))}});Bh.warn=Bh.warning;const N1e=Bh;function j_(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var B1e="vc-util-key";function z2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):B1e}function X_(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function CM(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!j_())return null;var i=document.createElement("style");if((e=t.csp)!==null&&e!==void 0&&e.nonce){var r;i.nonce=(r=t.csp)===null||r===void 0?void 0:r.nonce}i.innerHTML=n;var s=X_(t),o=s.firstChild;return t.prepend&&s.prepend?s.prepend(i):t.prepend&&o?s.insertBefore(i,o):s.appendChild(i),i}var Y0=new Map;function z1e(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=X_(e);return Array.from(Y0.get(t).children).find(function(i){return i.tagName==="STYLE"&&i.getAttribute(z2(e))===n})}function U1e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=X_(t);if(!Y0.has(i)){var r=CM("",t),s=r.parentNode;Y0.set(i,s),s.removeChild(r)}var o=z1e(e,t);if(o){var a,c;if((a=t.csp)!==null&&a!==void 0&&a.nonce&&o.nonce!==((c=t.csp)===null||c===void 0?void 0:c.nonce)){var l;o.nonce=(l=t.csp)===null||l===void 0?void 0:l.nonce}return o.innerHTML!==n&&(o.innerHTML=n),o}var u=CM(n,t);return u.setAttribute(z2(t),e),u}const U2=function(n,e,t){x2(n,"[ant-design-vue: ".concat(e,"] ").concat(t))};var H1e="-ant-".concat(Date.now(),"-").concat(Math.random());function G1e(n,e){var t={},i=function(u,h){var f=u.clone();return f=(h==null?void 0:h(f))||f,f.toRgbString()},r=function(u,h){var f=new Wm(u),d=fh(f.toRgbString());t["".concat(h,"-color")]=i(f),t["".concat(h,"-color-disabled")]=d[1],t["".concat(h,"-color-hover")]=d[4],t["".concat(h,"-color-active")]=d[6],t["".concat(h,"-color-outline")]=f.clone().setAlpha(.2).toRgbString(),t["".concat(h,"-color-deprecated-bg")]=d[1],t["".concat(h,"-color-deprecated-border")]=d[3]};if(e.primaryColor){r(e.primaryColor,"primary");var s=new Wm(e.primaryColor),o=fh(s.toRgbString());o.forEach(function(l,u){t["primary-".concat(u+1)]=l}),t["primary-color-deprecated-l-35"]=i(s,function(l){return l.lighten(35)}),t["primary-color-deprecated-l-20"]=i(s,function(l){return l.lighten(20)}),t["primary-color-deprecated-t-20"]=i(s,function(l){return l.tint(20)}),t["primary-color-deprecated-t-50"]=i(s,function(l){return l.tint(50)}),t["primary-color-deprecated-f-12"]=i(s,function(l){return l.setAlpha(l.getAlpha()*.12)});var a=new Wm(o[0]);t["primary-color-active-deprecated-f-30"]=i(a,function(l){return l.setAlpha(l.getAlpha()*.3)}),t["primary-color-active-deprecated-d-02"]=i(a,function(l){return l.darken(2)})}e.successColor&&r(e.successColor,"success"),e.warningColor&&r(e.warningColor,"warning"),e.errorColor&&r(e.errorColor,"error"),e.infoColor&&r(e.infoColor,"info");var c=Object.keys(t).map(function(l){return"--".concat(n,"-").concat(l,": ").concat(t[l],";")});j_()?U1e(`
  :root {
    `.concat(c.join(`
`),`
  }
  `),"".concat(H1e,"-dynamic-theme")):U2(!1,"ConfigProvider","SSR do not support dynamic theme with css variables.")}var V1e=Symbol("GlobalFormContextKey"),W1e=function(e){Zh(V1e,e)},$1e=function(){return{getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:{type:Object,default:void 0},input:{type:Object},autoInsertSpaceInButton:{type:Boolean,default:void 0},locale:{type:Object,default:void 0},pageHeader:{type:Object},componentSize:{type:String},direction:{type:String},space:{type:Object},virtual:{type:Boolean,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},form:{type:Object,default:void 0},notUpdateGlobalConfig:Boolean}},q1e="ant";function Xc(){return _i.prefixCls||q1e}var Z0=$n({}),H2=$n({}),_i=$n({});Qp(function(){Ta(_i,Z0,H2),_i.prefixCls=Xc(),_i.getPrefixCls=function(n,e){return e||(n?"".concat(_i.prefixCls,"-").concat(n):_i.prefixCls)},_i.getRootPrefixCls=function(n,e){return n||(_i.prefixCls?_i.prefixCls:e&&e.includes("-")?e.replace(/^(.*)-[^-]*$/,"$1"):Xc())}});var Hg,j1e=function(e){Hg&&Hg(),Hg=Qp(function(){Ta(H2,$n(e)),Ta(_i,$n(e))}),e.theme&&G1e(Xc(),e.theme)},X1e=function(){return{getPrefixCls:function(t,i){return i||(t?"".concat(Xc(),"-").concat(t):Xc())},getRootPrefixCls:function(t,i){return t||(_i.prefixCls?_i.prefixCls:i&&i.includes("-")?i.replace(/^(.*)-[^-]*$/,"$1"):Xc())}}},Zu=hr({compatConfig:{MODE:3},name:"AConfigProvider",inheritAttrs:!1,props:$1e(),setup:function(e,t){var i=t.slots,r=function(h,f){var d=e.prefixCls,p=d===void 0?"ant":d;return f||(h?"".concat(p,"-").concat(h):p)},s=function(h){var f=e.renderEmpty||i.renderEmpty||_2;return f(h)},o=function(h,f){var d=e.prefixCls;if(f)return f;var p=d||r("");return h?"".concat(p,"-").concat(h):p},a=$n(nt(nt({},e),{},{getPrefixCls:o,renderEmpty:s}));Object.keys(e).forEach(function(u){kr(function(){return e[u]},function(){a[u]=e[u]})}),e.notUpdateGlobalConfig||(Ta(Z0,a),kr(a,function(){Ta(Z0,a)}));var c=Mt(function(){var u={};if(e.locale){var h,f;u=((h=e.locale.Form)===null||h===void 0?void 0:h.defaultValidateMessages)||((f=V0.Form)===null||f===void 0?void 0:f.defaultValidateMessages)||{}}return e.form&&e.form.validateMessages&&(u=nt(nt({},u),e.form.validateMessages)),u});W1e({validateMessages:c}),Zh("configProvider",a);var l=function(h){var f;return Ce(m1e,{locale:e.locale||h,ANT_MARK__:$0},{default:function(){return[(f=i.default)===null||f===void 0?void 0:f.call(i)]}})};return Qp(function(){e.direction&&(C1e.config({rtl:e.direction==="rtl"}),N1e.config({rtl:e.direction==="rtl"}))}),function(){return Ce(s2,{children:function(h,f,d){return l(d)}},null)}}}),Y1e=$n({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:_2,direction:"ltr"});Zu.config=j1e;Zu.install=function(n){n.component(Zu.name,Zu)};const No=function(n,e){var t=Vc("configProvider",Y1e),i=Mt(function(){return t.getPrefixCls(n,e.prefixCls)}),r=Mt(function(){var m;return(m=e.direction)!==null&&m!==void 0?m:t.direction}),s=Mt(function(){return t.getPrefixCls()}),o=Mt(function(){return t.autoInsertSpaceInButton}),a=Mt(function(){return t.renderEmpty}),c=Mt(function(){return t.space}),l=Mt(function(){return t.pageHeader}),u=Mt(function(){return t.form}),h=Mt(function(){return e.getTargetContainer||t.getTargetContainer}),f=Mt(function(){return e.getPopupContainer||t.getPopupContainer}),d=Mt(function(){var m;return(m=e.dropdownMatchSelectWidth)!==null&&m!==void 0?m:t.dropdownMatchSelectWidth}),p=Mt(function(){return(e.virtual===void 0?t.virtual!==!1:e.virtual!==!1)&&d.value!==!1}),v=Mt(function(){return e.size||t.componentSize}),y=Mt(function(){var m;return e.autocomplete||((m=t.input)===null||m===void 0?void 0:m.autocomplete)}),g=Mt(function(){return t.csp});return{configProvider:t,prefixCls:i,direction:r,size:v,getTargetContainer:h,getPopupContainer:f,space:c,pageHeader:l,form:u,autoInsertSpaceInButton:o,renderEmpty:a,virtual:p,dropdownMatchSelectWidth:d,rootPrefixCls:s,getPrefixCls:t.getPrefixCls,autocomplete:y,csp:g}};var LM=["xxxl","xxl","xl","lg","md","sm","xs"],id={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},Xo=new Map,Gg=-1,rd={},Z1e={matchHandlers:{},dispatch:function(e){return rd=e,Xo.forEach(function(t){return t(rd)}),Xo.size>=1},subscribe:function(e){return Xo.size||this.register(),Gg+=1,Xo.set(Gg,e),e(rd),Gg},unsubscribe:function(e){Xo.delete(e),Xo.size||this.unregister()},unregister:function(){var e=this;Object.keys(id).forEach(function(t){var i=id[t],r=e.matchHandlers[i];r==null||r.mql.removeListener(r==null?void 0:r.listener)}),Xo.clear()},register:function(){var e=this;Object.keys(id).forEach(function(t){var i=id[t],r=function(a){var c=a.matches;e.dispatch(nt(nt({},rd),{},Tt({},t,c)))},s=window.matchMedia(i);s.addListener(r),e.matchHandlers[i]={mql:s,listener:r},r(s)})}};const RM=Z1e;var Vg={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},Wg={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},Sc=[],Ec=[];function J1e(){var n=document.createElement("div"),e=n.style;"AnimationEvent"in window||(delete Vg.animationstart.animation,delete Wg.animationend.animation),"TransitionEvent"in window||(delete Vg.transitionstart.transition,delete Wg.transitionend.transition);function t(i,r){for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];for(var a in o)if(a in e){r.push(o[a]);break}}}t(Vg,Sc),t(Wg,Ec)}typeof window<"u"&&typeof document<"u"&&J1e();function PM(n,e,t){n.addEventListener(e,t,!1)}function IM(n,e,t){n.removeEventListener(e,t,!1)}var K1e={startEvents:Sc,addStartEventListener:function(e,t){if(Sc.length===0){setTimeout(t,0);return}Sc.forEach(function(i){PM(e,i,t)})},removeStartEventListener:function(e,t){Sc.length!==0&&Sc.forEach(function(i){IM(e,i,t)})},endEvents:Ec,addEndEventListener:function(e,t){if(Ec.length===0){setTimeout(t,0);return}Ec.forEach(function(i){PM(e,i,t)})},removeEndEventListener:function(e,t){Ec.length!==0&&Ec.forEach(function(i){IM(e,i,t)})}};const sd=K1e;var Ws;function DM(n){return!n||n.offsetParent===null}function Q1e(n){var e=(n||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return e&&e[1]&&e[2]&&e[3]?!(e[1]===e[2]&&e[2]===e[3]):!0}const eMe=hr({compatConfig:{MODE:3},name:"Wave",props:{insertExtraNode:Boolean,disabled:Boolean},setup:function(e,t){var i=t.slots,r=t.expose,s=Vy(),o=No("",e),a=o.csp,c=o.prefixCls;r({csp:a});var l=null,u=null,h=null,f=!1,d=null,p=!1,v=function(S){if(!p){var P=yM(s);!S||S.target!==P||f||w(P)}},y=function(S){!S||S.animationName!=="fadeEffect"||w(S.target)},g=function(){var S=e.insertExtraNode;return S?"".concat(c.value,"-click-animating"):"".concat(c.value,"-click-animating-without-extra-node")},m=function(S,P){var N=e.insertExtraNode,z=e.disabled;if(!(z||!S||DM(S)||S.className.indexOf("-leave")>=0)){d=document.createElement("div"),d.className="".concat(c.value,"-click-animating-node");var _=g();if(S.removeAttribute(_),S.setAttribute(_,"true"),Ws=Ws||document.createElement("style"),P&&P!=="#ffffff"&&P!=="rgb(255, 255, 255)"&&Q1e(P)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(P)&&P!=="transparent"){var x;(x=a.value)!==null&&x!==void 0&&x.nonce&&(Ws.nonce=a.value.nonce),d.style.borderColor=P,Ws.innerHTML=`
        [`.concat(c.value,"-click-animating-without-extra-node='true']::after, .").concat(c.value,`-click-animating-node {
          --antd-wave-shadow-color: `).concat(P,`;
        }`),document.body.contains(Ws)||document.body.appendChild(Ws)}N&&S.appendChild(d),sd.addStartEventListener(S,v),sd.addEndEventListener(S,y)}},w=function(S){if(!(!S||S===d||!(S instanceof Element))){var P=e.insertExtraNode,N=g();S.setAttribute(N,"false"),Ws&&(Ws.innerHTML=""),P&&d&&S.contains(d)&&S.removeChild(d),sd.removeStartEventListener(S,v),sd.removeEndEventListener(S,y)}},b=function(S){if(!(!S||!S.getAttribute||S.getAttribute("disabled")||S.className.indexOf("disabled")>=0)){var P=function(z){if(!(z.target.tagName==="INPUT"||DM(z.target))){w(S);var _=getComputedStyle(S).getPropertyValue("border-top-color")||getComputedStyle(S).getPropertyValue("border-color")||getComputedStyle(S).getPropertyValue("background-color");u=setTimeout(function(){return m(S,_)},0),G0.cancel(h),f=!0,h=G0(function(){f=!1},10)}};return S.addEventListener("click",P,!0),{cancel:function(){S.removeEventListener("click",P,!0)}}}};return Bt(function(){Zp(function(){var E=yM(s);E.nodeType===1&&(l=b(E))})}),Yh(function(){l&&l.cancel(),clearTimeout(u),p=!0}),function(){var E;return(E=i.default)===null||E===void 0?void 0:E.call(i)[0]}}});var tMe=function(){return{prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:function(){return!1}},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:W0.any,href:String,target:String,title:String,onClick:{type:Function},onMousedown:{type:Function}}};const nMe=tMe;var FM=function(e){e&&(e.style.width="0px",e.style.opacity="0",e.style.transform="scale(0)")},OM=function(e){Zp(function(){e&&(e.style.width="".concat(e.scrollWidth,"px"),e.style.opacity="1",e.style.transform="scale(1)")})},kM=function(e){e&&e.style&&(e.style.width=null,e.style.opacity=null,e.style.transform=null)};const iMe=hr({compatConfig:{MODE:3},name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup:function(e){return function(){var t=e.existIcon,i=e.prefixCls,r=e.loading;if(t)return Ce("span",{class:"".concat(i,"-loading-icon")},[Ce(e0,null,null)]);var s=!!r;return Ce(qy,{name:"".concat(i,"-loading-icon-motion"),onBeforeEnter:FM,onEnter:OM,onAfterEnter:kM,onBeforeLeave:OM,onLeave:function(a){setTimeout(function(){FM(a)})},onAfterLeave:kM},{default:function(){return[s?Ce("span",{class:"".concat(i,"-loading-icon")},[Ce(e0,null,null)]):null]}})}}});var NM=/^[\u4e00-\u9fa5]{2}$/,BM=NM.test.bind(NM);function od(n){return n==="text"||n==="link"}const Ju=hr({compatConfig:{MODE:3},name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Owe(nMe(),{type:"default"}),slots:["icon"],setup:function(e,t){var i=t.slots,r=t.attrs,s=t.emit,o=t.expose,a=No("btn",e),c=a.prefixCls,l=a.autoInsertSpaceInButton,u=a.direction,h=a.size,f=nr(null),d=nr(void 0),p=!1,v=nr(!1),y=nr(!1),g=Mt(function(){return l.value!==!1}),m=Mt(function(){return rr(e.loading)==="object"&&e.loading.delay?e.loading.delay||!0:!!e.loading});kr(m,function(z){clearTimeout(d.value),typeof m.value=="number"?d.value=setTimeout(function(){v.value=z},m.value):v.value=z},{immediate:!0});var w=Mt(function(){var z,_=e.type,x=e.shape,T=x===void 0?"default":x,A=e.ghost,M=e.block,L=e.danger,I=c.value,k={large:"lg",small:"sm",middle:void 0},W=h.value,j=W&&k[W]||"";return z={},Tt(z,"".concat(I),!0),Tt(z,"".concat(I,"-").concat(_),_),Tt(z,"".concat(I,"-").concat(T),T!=="default"&&T),Tt(z,"".concat(I,"-").concat(j),j),Tt(z,"".concat(I,"-loading"),v.value),Tt(z,"".concat(I,"-background-ghost"),A&&!od(_)),Tt(z,"".concat(I,"-two-chinese-chars"),y.value&&g.value),Tt(z,"".concat(I,"-block"),M),Tt(z,"".concat(I,"-dangerous"),!!L),Tt(z,"".concat(I,"-rtl"),u.value==="rtl"),z}),b=function(){var _=f.value;if(!(!_||l.value===!1)){var x=_.textContent;p&&BM(x)?y.value||(y.value=!0):y.value&&(y.value=!1)}},E=function(_){if(v.value||e.disabled){_.preventDefault();return}s("click",_)},S=function(_,x){var T=x?" ":"";if(_.type===Sl){var A=_.children.trim();return BM(A)&&(A=A.split("").join(T)),Ce("span",null,[A])}return _};Qp(function(){U2(!(e.ghost&&od(e.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),Bt(b),Ny(b),Yh(function(){d.value&&clearTimeout(d.value)});var P=function(){var _;(_=f.value)===null||_===void 0||_.focus()},N=function(){var _;(_=f.value)===null||_===void 0||_.blur()};return o({focus:P,blur:N}),function(){var z,_,x=e.icon,T=x===void 0?(z=i.icon)===null||z===void 0?void 0:z.call(i):x,A=JA((_=i.default)===null||_===void 0?void 0:_.call(i));p=A.length===1&&!T&&!od(e.type);var M=e.type,L=e.htmlType,I=e.disabled,k=e.href,W=e.title,j=e.target,G=e.onMousedown,ee=v.value?"loading":T,se=nt(nt({},r),{},{title:W,disabled:I,class:[w.value,r.class,Tt({},"".concat(c.value,"-icon-only"),A.length===0&&!!ee)],onClick:E,onMousedown:G});I||delete se.disabled;var oe=T&&!v.value?T:Ce(iMe,{existIcon:!!T,prefixCls:c.value,loading:!!v.value},null),de=A.map(function(O){return S(O,p&&g.value)});if(k!==void 0)return Ce("a",nt(nt({},se),{},{href:k,target:j,ref:f}),[oe,de]);var ae=Ce("button",nt(nt({},se),{},{ref:f,type:L}),[oe,de]);return od(M)?ae:Ce(eMe,{ref:"wave",disabled:!!v.value},{default:function(){return[ae]}})}}});function zM(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,YA(i.key),i)}}function rMe(n,e,t){return e&&zM(n.prototype,e),t&&zM(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function sMe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var oMe=rMe(function n(e){sMe(this,n),this.error=new Error("unreachable case: ".concat(JSON.stringify(e)))}),aMe=function(){return{prefixCls:String,size:{type:String}}};const J0=hr({compatConfig:{MODE:3},name:"AButtonGroup",props:aMe(),setup:function(e,t){var i=t.slots,r=No("btn-group",e),s=r.prefixCls,o=r.direction,a=Mt(function(){var c,l=e.size,u="";switch(l){case"large":u="lg";break;case"small":u="sm";break;case"middle":case void 0:break;default:console.warn(new oMe(l).error)}return c={},Tt(c,"".concat(s.value),!0),Tt(c,"".concat(s.value,"-").concat(u),u),Tt(c,"".concat(s.value,"-rtl"),o.value==="rtl"),c});return function(){var c;return Ce("div",{class:a.value},[JA((c=i.default)===null||c===void 0?void 0:c.call(i))])}}});Ju.Group=J0;Ju.install=function(n){return n.component(Ju.name,Ju),n.component(J0.name,J0),n};var cMe=function(){return j_()&&window.document.documentElement},ad,lMe=function(){if(!cMe())return!1;if(ad!==void 0)return ad;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),ad=e.scrollHeight===1,document.body.removeChild(e),ad};const uMe=function(){var n=nr(!1);return Bt(function(){n.value=lMe()}),n};var hMe=Symbol("rowContextKey"),fMe=function(e){Zh(hMe,e)};const dMe=fMe;W_("top","middle","bottom","stretch");W_("start","end","center","space-around","space-between");var pMe=function(){return{align:String,justify:String,prefixCls:String,gutter:{type:[Number,Array,Object],default:0},wrap:{type:Boolean,default:void 0}}},mMe=hr({compatConfig:{MODE:3},name:"ARow",props:pMe(),setup:function(e,t){var i=t.slots,r=No("row",e),s=r.prefixCls,o=r.direction,a,c=nr({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0,xxxl:!0}),l=uMe();Bt(function(){a=RM.subscribe(function(d){var p=e.gutter||0;(!Array.isArray(p)&&rr(p)==="object"||Array.isArray(p)&&(rr(p[0])==="object"||rr(p[1])==="object"))&&(c.value=d)})}),Yh(function(){RM.unsubscribe(a)});var u=Mt(function(){var d=[0,0],p=e.gutter,v=p===void 0?0:p,y=Array.isArray(v)?v:[v,0];return y.forEach(function(g,m){if(rr(g)==="object")for(var w=0;w<LM.length;w++){var b=LM[w];if(c.value[b]&&g[b]!==void 0){d[m]=g[b];break}}else d[m]=g||0}),d});dMe({gutter:u,supportFlexGap:l,wrap:Mt(function(){return e.wrap})});var h=Mt(function(){var d;return Il(s.value,(d={},Tt(d,"".concat(s.value,"-no-wrap"),e.wrap===!1),Tt(d,"".concat(s.value,"-").concat(e.justify),e.justify),Tt(d,"".concat(s.value,"-").concat(e.align),e.align),Tt(d,"".concat(s.value,"-rtl"),o.value==="rtl"),d))}),f=Mt(function(){var d=u.value,p={},v=d[0]>0?"".concat(d[0]/-2,"px"):void 0,y=d[1]>0?"".concat(d[1]/-2,"px"):void 0;return v&&(p.marginLeft=v,p.marginRight=v),l.value?p.rowGap="".concat(d[1],"px"):y&&(p.marginTop=y,p.marginBottom=y),p});return function(){var d;return Ce("div",{class:h.value,style:f.value},[(d=i.default)===null||d===void 0?void 0:d.call(i)])}}});const gMe=mMe,vMe=$_(gMe);var Y_=function(){this._tweens={},this._tweensAddedDuringUpdate={}};Y_.prototype={getAll:function(){return Object.keys(this._tweens).map((function(n){return this._tweens[n]}).bind(this))},removeAll:function(){this._tweens={}},add:function(n){this._tweens[n.getId()]=n,this._tweensAddedDuringUpdate[n.getId()]=n},remove:function(n){delete this._tweens[n.getId()],delete this._tweensAddedDuringUpdate[n.getId()]},update:function(n,e){var t=Object.keys(this._tweens);if(t.length===0)return!1;for(n=n!==void 0?n:mt.now();0<t.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<t.length;i++){var r=this._tweens[t[i]];r&&r.update(n)===!1&&(r._isPlaying=!1,e||delete this._tweens[t[i]])}t=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var mt=new Y_;mt.Group=Y_,mt._nextId=0,mt.nextId=function(){return mt._nextId++},typeof self>"u"&&typeof process<"u"&&process.hrtime?mt.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?mt.now=self.performance.now.bind(self.performance):Date.now!==void 0?mt.now=Date.now:mt.now=function(){return new Date().getTime()},mt.Tween=function(n,e){this._object=n,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=mt.Easing.Linear.None,this._interpolationFunction=mt.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||mt,this._id=mt.nextId()},mt.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(n,e){return this._valuesEnd=Object.create(n),e!==void 0&&(this._duration=e),this},duration:function(n){return this._duration=n,this},start:function(n){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=n!==void 0?typeof n=="string"?mt.now()+parseFloat(n):n:mt.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(this._valuesEnd[e].length===0)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}this._object[e]!==void 0&&(this._valuesStart[e]=this._object[e],!(this._valuesStart[e]instanceof Array)&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,this._onStopCallback!==null&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var n=0,e=this._chainedTweens.length;n<e;n++)this._chainedTweens[n].stop()},group:function(n){return this._group=n,this},delay:function(n){return this._delayTime=n,this},repeat:function(n){return this._repeat=n,this},repeatDelay:function(n){return this._repeatDelayTime=n,this},yoyo:function(n){return this._yoyo=n,this},easing:function(n){return this._easingFunction=n,this},interpolation:function(n){return this._interpolationFunction=n,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(n){return this._onStartCallback=n,this},onUpdate:function(n){return this._onUpdateCallback=n,this},onComplete:function(n){return this._onCompleteCallback=n,this},onStop:function(n){return this._onStopCallback=n,this},update:function(n){var e,t,i;if(n<this._startTime)return!0;for(e in this._onStartCallbackFired===!1&&(this._onStartCallback!==null&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),t=(n-this._startTime)/this._duration,t=this._duration===0||1<t?1:t,i=this._easingFunction(t),this._valuesEnd)if(this._valuesStart[e]!==void 0){var r=this._valuesStart[e]||0,s=this._valuesEnd[e];s instanceof Array?this._object[e]=this._interpolationFunction(s,i):(typeof s=="string"&&(s=s.charAt(0)==="+"||s.charAt(0)==="-"?r+parseFloat(s):parseFloat(s)),typeof s=="number"&&(this._object[e]=r+(s-r)*i))}if(this._onUpdateCallback!==null&&this._onUpdateCallback(this._object),t!==1)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if(typeof this._valuesEnd[e]=="string"&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var o=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=o}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=n+this._repeatDelayTime:this._startTime=n+this._delayTime,!0}this._onCompleteCallback!==null&&this._onCompleteCallback(this._object);for(var a=0,c=this._chainedTweens.length;a<c;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}},mt.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin(5*(n-.1)*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?-.5*Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)+1}},Back:{In:function(n){return n*n*(2.70158*n-1.70158)},Out:function(n){return--n*n*(2.70158*n+1.70158)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?n*n*((1+e)*n-e)*.5:.5*((n-=2)*n*((1+e)*n+e)+2)}},Bounce:{In:function(n){return 1-mt.Easing.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?.5*mt.Easing.Bounce.In(2*n):.5*mt.Easing.Bounce.Out(2*n-1)+.5}}},mt.Interpolation={Linear:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=mt.Interpolation.Utils.Linear;return e<0?s(n[0],n[1],i):1<e?s(n[t],n[t-1],t-i):s(n[r],n[t<r+1?t:r+1],i-r)},Bezier:function(n,e){for(var t=0,i=n.length-1,r=Math.pow,s=mt.Interpolation.Utils.Bernstein,o=0;o<=i;o++)t+=r(1-e,i-o)*r(e,o)*n[o]*s(i,o);return t},CatmullRom:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=mt.Interpolation.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(r=Math.floor(i=t*(1+e))),s(n[(r-1+t)%t],n[r],n[(r+1)%t],n[(r+2)%t],i-r)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-i)-n[0]):1<e?n[t]-(s(n[t],n[t],n[t-1],n[t-1],i-t)-n[t]):s(n[r?r-1:0],n[r],n[t<r+1?t:r+1],n[t<r+2?t:r+2],i-r)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=mt.Interpolation.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var i=e;1<i;i--)t*=i;return n[e]=t}}(),CatmullRom:function(n,e,t,i,r){var s=.5*(t-n),o=.5*(i-e),a=r*r;return(2*e-2*t+s+o)*(r*a)+(-3*e+3*t-2*s-o)*a+s*r+e}}},function(n){typeof define=="function"&&define.amd?define([],function(){return mt}):typeof vy<"u"&&typeof YC=="object"?vy.exports=mt:n!==void 0&&(n.TWEEN=mt)}(globalThis);/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const G2="132",yMe=0,UM=1,_Me=2,V2=1,xMe=2,Tu=3,zh=0,ln=1,ml=2,W2=1,go=0,Ku=1,HM=2,GM=3,VM=4,bMe=5,Tc=100,wMe=101,MMe=102,WM=103,$M=104,SMe=200,EMe=201,TMe=202,AMe=203,$2=204,q2=205,CMe=206,LMe=207,RMe=208,PMe=209,IMe=210,DMe=0,FMe=1,OMe=2,K0=3,kMe=4,NMe=5,BMe=6,zMe=7,_m=0,UMe=1,HMe=2,da=0,GMe=1,VMe=2,WMe=3,$Me=4,qMe=5,j2=300,xm=301,bm=302,Q0=303,ey=304,wm=306,Z_=307,ty=1e3,wi=1001,ny=1002,xn=1003,qM=1004,jM=1005,Oi=1006,jMe=1007,Mm=1008,gl=1009,XMe=1010,YMe=1011,Ip=1012,ZMe=1013,ep=1014,aa=1015,Yc=1016,JMe=1017,KMe=1018,QMe=1019,Qu=1020,eSe=1021,vo=1022,Si=1023,tSe=1024,nSe=1025,iSe=Si,Zc=1026,Uh=1027,rSe=1028,sSe=1029,oSe=1030,aSe=1031,cSe=1032,lSe=1033,XM=33776,YM=33777,ZM=33778,JM=33779,KM=35840,QM=35841,eS=35842,tS=35843,uSe=36196,nS=37492,iS=37496,hSe=37808,fSe=37809,dSe=37810,pSe=37811,mSe=37812,gSe=37813,vSe=37814,ySe=37815,_Se=37816,xSe=37817,bSe=37818,wSe=37819,MSe=37820,SSe=37821,ESe=36492,TSe=37840,ASe=37841,CSe=37842,LSe=37843,RSe=37844,PSe=37845,ISe=37846,DSe=37847,FSe=37848,OSe=37849,kSe=37850,NSe=37851,BSe=37852,zSe=37853,USe=2200,HSe=2201,GSe=2202,Dp=2300,Fp=2301,$g=2302,kc=2400,Nc=2401,Op=2402,J_=2500,X2=2501,VSe=0,li=3e3,Sm=3001,K_=3007,Q_=3002,WSe=3003,Y2=3004,Z2=3005,J2=3006,$Se=3200,qSe=3201,Fl=0,jSe=1,qg=7680,XSe=519,bs=35044,lo=35048,rS="300 es";class Da{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const En=[];for(let n=0;n<256;n++)En[n]=(n<16?"0":"")+n.toString(16);const jg=Math.PI/180,iy=180/Math.PI;function Ur(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(En[n&255]+En[n>>8&255]+En[n>>16&255]+En[n>>24&255]+"-"+En[e&255]+En[e>>8&255]+"-"+En[e>>16&15|64]+En[e>>24&255]+"-"+En[t&63|128]+En[t>>8&255]+"-"+En[t>>16&255]+En[t>>24&255]+En[i&255]+En[i>>8&255]+En[i>>16&255]+En[i>>24&255]).toUpperCase()}function xi(n,e,t){return Math.max(e,Math.min(t,n))}function YSe(n,e){return(n%e+e)%e}function Xg(n,e,t){return(1-t)*n+t*e}function sS(n){return(n&n-1)===0&&n!==0}function ZSe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class Le{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Le.prototype.isVector2=!0;class Cn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],h=i[7],f=i[2],d=i[5],p=i[8],v=r[0],y=r[3],g=r[6],m=r[1],w=r[4],b=r[7],E=r[2],S=r[5],P=r[8];return s[0]=o*v+a*m+c*E,s[3]=o*y+a*w+c*S,s[6]=o*g+a*b+c*P,s[1]=l*v+u*m+h*E,s[4]=l*y+u*w+h*S,s[7]=l*g+u*b+h*P,s[2]=f*v+d*m+p*E,s[5]=f*y+d*w+p*S,s[8]=f*g+d*b+p*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=a*c-u*s,d=l*s-o*c,p=t*h+i*f+r*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return e[0]=h*v,e[1]=(r*l-u*i)*v,e[2]=(a*i-r*o)*v,e[3]=f*v,e[4]=(u*t-r*c)*v,e[5]=(r*s-a*t)*v,e[6]=d*v,e[7]=(i*c-l*t)*v,e[8]=(o*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],c=r[1],l=r[4],u=r[7];return r[0]=t*s+i*c,r[3]=t*o+i*l,r[6]=t*a+i*u,r[1]=-i*s+t*c,r[4]=-i*o+t*l,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Cn.prototype.isMatrix3=!0;let Ka;class Ol{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ka===void 0&&(Ka=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ka.width=e.width,Ka.height=e.height;const i=Ka.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ka}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let JSe=0;class Pn extends Da{constructor(e=Pn.DEFAULT_IMAGE,t=Pn.DEFAULT_MAPPING,i=wi,r=wi,s=Oi,o=Mm,a=Si,c=gl,l=1,u=li){super(),Object.defineProperty(this,"id",{value:JSe++}),this.uuid=Ur(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=Ur()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Yg(r[o].image)):s.push(Yg(r[o]))}else s=Yg(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==j2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ty:e.x=e.x-Math.floor(e.x);break;case wi:e.x=e.x<0?0:1;break;case ny:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ty:e.y=e.y-Math.floor(e.y);break;case wi:e.y=e.y<0?0:1;break;case ny:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Pn.DEFAULT_IMAGE=void 0;Pn.DEFAULT_MAPPING=j2;Pn.prototype.isTexture=!0;function Yg(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ol.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Lt{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],h=c[8],f=c[1],d=c[5],p=c[9],v=c[2],y=c[6],g=c[10];if(Math.abs(u-f)<.01&&Math.abs(h-v)<.01&&Math.abs(p-y)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+v)<.1&&Math.abs(p+y)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(l+1)/2,b=(d+1)/2,E=(g+1)/2,S=(u+f)/4,P=(h+v)/4,N=(p+y)/4;return w>b&&w>E?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=S/i,s=P/i):b>E?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=N/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=P/s,r=N/s),this.set(i,r,s,t),this}let m=Math.sqrt((y-p)*(y-p)+(h-v)*(h-v)+(f-u)*(f-u));return Math.abs(m)<.001&&(m=1),this.x=(y-p)/m,this.y=(h-v)/m,this.z=(f-u)/m,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Lt.prototype.isVector4=!0;class Hr extends Da{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Lt(0,0,e,t),this.scissorTest=!1,this.viewport=new Lt(0,0,e,t),this.texture=new Pn(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Oi,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Hr.prototype.isWebGLRenderTarget=!0;class KSe extends Hr{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}KSe.prototype.isWebGLMultipleRenderTargets=!0;class K2 extends Hr{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}K2.prototype.isWebGLMultisampleRenderTarget=!0;class ai{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],d=s[o+1],p=s[o+2],v=s[o+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=p,e[t+3]=v;return}if(h!==v||c!==f||l!==d||u!==p){let y=1-a;const g=c*f+l*d+u*p+h*v,m=g>=0?1:-1,w=1-g*g;if(w>Number.EPSILON){const E=Math.sqrt(w),S=Math.atan2(E,g*m);y=Math.sin(y*S)/E,a=Math.sin(a*S)/E}const b=a*m;if(c=c*y+f*b,l=l*y+d*b,u=u*y+p*b,h=h*y+v*b,y===1-a){const E=1/Math.sqrt(c*c+l*l+u*u+h*h);c*=E,l*=E,u*=E,h*=E}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],h=s[o],f=s[o+1],d=s[o+2],p=s[o+3];return e[t]=a*p+u*h+c*d-l*f,e[t+1]=c*p+u*f+l*h-a*d,e[t+2]=l*p+u*d+a*f-c*h,e[t+3]=u*p-a*h-c*f-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),h=a(s/2),f=c(i/2),d=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=f*u*h+l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h-f*d*p;break;case"YXZ":this._x=f*u*h+l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h+f*d*p;break;case"ZXY":this._x=f*u*h-l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h-f*d*p;break;case"ZYX":this._x=f*u*h-l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h+f*d*p;break;case"YZX":this._x=f*u*h+l*d*p,this._y=l*d*h+f*u*p,this._z=l*u*p-f*d*h,this._w=l*u*h-f*d*p;break;case"XZY":this._x=f*u*h-l*d*p,this._y=l*d*h-f*u*p,this._z=l*u*p+f*d*h,this._w=l*u*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],h=t[10],f=i+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-c)*d,this._y=(s-l)*d,this._z=(o-r)*d}else if(i>a&&i>h){const d=2*Math.sqrt(1+i-a-h);this._w=(u-c)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+l)/d}else if(a>h){const d=2*Math.sqrt(1+a-i-h);this._w=(s-l)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(c+u)/d}else{const d=2*Math.sqrt(1+h-i-a);this._w=(o-r)/d,this._x=(s+l)/d,this._y=(c+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ai.prototype.isQuaternion=!0;class ce{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(oS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(oS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=c*t+o*r-a*i,u=c*i+a*t-s*r,h=c*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=l*c+f*-s+u*-a-h*-o,this.y=u*c+f*-o+h*-s-l*-a,this.z=h*c+f*-a+l*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Zg.copy(this).projectOnVector(e),this.sub(Zg)}reflect(e){return this.sub(Zg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}ce.prototype.isVector3=!0;const Zg=new ce,oS=new ai;class gr{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.length;c<l;c+=3){const u=e[c],h=e[c+1],f=e[c+2];u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let c=0,l=e.count;c<l;c++){const u=e.getX(c),h=e.getY(c),f=e.getZ(c);u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ru.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Jg.copy(t.boundingBox),Jg.applyMatrix4(e.matrixWorld),this.union(Jg));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ru),ru.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(su),cd.subVectors(this.max,su),Qa.subVectors(e.a,su),ec.subVectors(e.b,su),tc.subVectors(e.c,su),$s.subVectors(ec,Qa),qs.subVectors(tc,ec),Yo.subVectors(Qa,tc);let t=[0,-$s.z,$s.y,0,-qs.z,qs.y,0,-Yo.z,Yo.y,$s.z,0,-$s.x,qs.z,0,-qs.x,Yo.z,0,-Yo.x,-$s.y,$s.x,0,-qs.y,qs.x,0,-Yo.y,Yo.x,0];return!Kg(t,Qa,ec,tc,cd)||(t=[1,0,0,0,1,0,0,0,1],!Kg(t,Qa,ec,tc,cd))?!1:(ld.crossVectors($s,qs),t=[ld.x,ld.y,ld.z],Kg(t,Qa,ec,tc,cd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return ru.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(ru).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(cs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}gr.prototype.isBox3=!0;const cs=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],ru=new ce,Jg=new gr,Qa=new ce,ec=new ce,tc=new ce,$s=new ce,qs=new ce,Yo=new ce,su=new ce,cd=new ce,ld=new ce,Zo=new ce;function Kg(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Zo.fromArray(n,s);const a=r.x*Math.abs(Zo.x)+r.y*Math.abs(Zo.y)+r.z*Math.abs(Zo.z),c=e.dot(Zo),l=t.dot(Zo),u=i.dot(Zo);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}const QSe=new gr,aS=new ce,Qg=new ce,ev=new ce;class kl{constructor(e=new ce,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):QSe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ev.subVectors(e,this.center);const t=ev.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(ev.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return Qg.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(aS.copy(e.center).add(Qg)),this.expandByPoint(aS.copy(e.center).sub(Qg)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ls=new ce,tv=new ce,ud=new ce,js=new ce,nv=new ce,hd=new ce,iv=new ce;class Nl{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ls)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ls.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ls.copy(this.direction).multiplyScalar(t).add(this.origin),ls.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){tv.copy(e).add(t).multiplyScalar(.5),ud.copy(t).sub(e).normalize(),js.copy(this.origin).sub(tv);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ud),a=js.dot(this.direction),c=-js.dot(ud),l=js.lengthSq(),u=Math.abs(1-o*o);let h,f,d,p;if(u>0)if(h=o*c-a,f=o*a-c,p=s*u,h>=0)if(f>=-p)if(f<=p){const v=1/u;h*=v,f*=v,d=h*(h+o*f+2*a)+f*(o*h+f+2*c)+l}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;else f<=-p?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-c),s),d=-h*h+f*(f+2*c)+l):f<=p?(h=0,f=Math.min(Math.max(-s,-c),s),d=f*(f+2*c)+l):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-c),s),d=-h*h+f*(f+2*c)+l);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*c)+l;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(ud).multiplyScalar(f).add(tv),d}intersectSphere(e,t){ls.subVectors(e.center,this.origin);const i=ls.dot(this.direction),r=ls.dot(ls)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,c=i+o;return a<0&&c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c;const l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return l>=0?(i=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(i=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),h>=0?(a=(e.min.z-f.z)*h,c=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,c=(e.min.z-f.z)*h),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ls)!==null}intersectTriangle(e,t,i,r,s){nv.subVectors(t,e),hd.subVectors(i,e),iv.crossVectors(nv,hd);let o=this.direction.dot(iv),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;js.subVectors(this.origin,e);const c=a*this.direction.dot(hd.crossVectors(js,hd));if(c<0)return null;const l=a*this.direction.dot(nv.cross(js));if(l<0||c+l>o)return null;const u=-a*js.dot(iv);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class $e{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,c,l,u,h,f,d,p,v,y){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=h,g[14]=f,g[3]=d,g[7]=p,g[11]=v,g[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new $e().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/nc.setFromMatrixColumn(e,0).length(),s=1/nc.setFromMatrixColumn(e,1).length(),o=1/nc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,d=o*h,p=a*u,v=a*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=d+p*l,t[5]=f-v*l,t[9]=-a*c,t[2]=v-f*l,t[6]=p+d*l,t[10]=o*c}else if(e.order==="YXZ"){const f=c*u,d=c*h,p=l*u,v=l*h;t[0]=f+v*a,t[4]=p*a-d,t[8]=o*l,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=d*a-p,t[6]=v+f*a,t[10]=o*c}else if(e.order==="ZXY"){const f=c*u,d=c*h,p=l*u,v=l*h;t[0]=f-v*a,t[4]=-o*h,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*u,t[9]=v-f*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const f=o*u,d=o*h,p=a*u,v=a*h;t[0]=c*u,t[4]=p*l-d,t[8]=f*l+v,t[1]=c*h,t[5]=v*l+f,t[9]=d*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const f=o*c,d=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=v-f*h,t[8]=p*h+d,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=d*h+p,t[10]=f-v*h}else if(e.order==="XZY"){const f=o*c,d=o*l,p=a*c,v=a*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=f*h+v,t[5]=o*u,t[9]=d*h-p,t[2]=p*h-d,t[6]=a*u,t[10]=v*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(eEe,e,tEe)}lookAt(e,t,i){const r=this.elements;return pi.subVectors(e,t),pi.lengthSq()===0&&(pi.z=1),pi.normalize(),Xs.crossVectors(i,pi),Xs.lengthSq()===0&&(Math.abs(i.z)===1?pi.x+=1e-4:pi.z+=1e-4,pi.normalize(),Xs.crossVectors(i,pi)),Xs.normalize(),fd.crossVectors(pi,Xs),r[0]=Xs.x,r[4]=fd.x,r[8]=pi.x,r[1]=Xs.y,r[5]=fd.y,r[9]=pi.y,r[2]=Xs.z,r[6]=fd.z,r[10]=pi.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],h=i[5],f=i[9],d=i[13],p=i[2],v=i[6],y=i[10],g=i[14],m=i[3],w=i[7],b=i[11],E=i[15],S=r[0],P=r[4],N=r[8],z=r[12],_=r[1],x=r[5],T=r[9],A=r[13],M=r[2],L=r[6],I=r[10],k=r[14],W=r[3],j=r[7],G=r[11],ee=r[15];return s[0]=o*S+a*_+c*M+l*W,s[4]=o*P+a*x+c*L+l*j,s[8]=o*N+a*T+c*I+l*G,s[12]=o*z+a*A+c*k+l*ee,s[1]=u*S+h*_+f*M+d*W,s[5]=u*P+h*x+f*L+d*j,s[9]=u*N+h*T+f*I+d*G,s[13]=u*z+h*A+f*k+d*ee,s[2]=p*S+v*_+y*M+g*W,s[6]=p*P+v*x+y*L+g*j,s[10]=p*N+v*T+y*I+g*G,s[14]=p*z+v*A+y*k+g*ee,s[3]=m*S+w*_+b*M+E*W,s[7]=m*P+w*x+b*L+E*j,s[11]=m*N+w*T+b*I+E*G,s[15]=m*z+w*A+b*k+E*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],h=e[6],f=e[10],d=e[14],p=e[3],v=e[7],y=e[11],g=e[15];return p*(+s*c*h-r*l*h-s*a*f+i*l*f+r*a*d-i*c*d)+v*(+t*c*d-t*l*f+s*o*f-r*o*d+r*l*u-s*c*u)+y*(+t*l*h-t*a*d-s*o*h+i*o*d+s*a*u-i*l*u)+g*(-r*a*u-t*c*h+t*a*f+r*o*h-i*o*f+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],v=e[13],y=e[14],g=e[15],m=h*y*l-v*f*l+v*c*d-a*y*d-h*c*g+a*f*g,w=p*f*l-u*y*l-p*c*d+o*y*d+u*c*g-o*f*g,b=u*v*l-p*h*l+p*a*d-o*v*d-u*a*g+o*h*g,E=p*h*c-u*v*c-p*a*f+o*v*f+u*a*y-o*h*y,S=t*m+i*w+r*b+s*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/S;return e[0]=m*P,e[1]=(v*f*s-h*y*s-v*r*d+i*y*d+h*r*g-i*f*g)*P,e[2]=(a*y*s-v*c*s+v*r*l-i*y*l-a*r*g+i*c*g)*P,e[3]=(h*c*s-a*f*s-h*r*l+i*f*l+a*r*d-i*c*d)*P,e[4]=w*P,e[5]=(u*y*s-p*f*s+p*r*d-t*y*d-u*r*g+t*f*g)*P,e[6]=(p*c*s-o*y*s-p*r*l+t*y*l+o*r*g-t*c*g)*P,e[7]=(o*f*s-u*c*s+u*r*l-t*f*l-o*r*d+t*c*d)*P,e[8]=b*P,e[9]=(p*h*s-u*v*s-p*i*d+t*v*d+u*i*g-t*h*g)*P,e[10]=(o*v*s-p*a*s+p*i*l-t*v*l-o*i*g+t*a*g)*P,e[11]=(u*a*s-o*h*s-u*i*l+t*h*l+o*i*d-t*a*d)*P,e[12]=E*P,e[13]=(u*v*r-p*h*r+p*i*f-t*v*f-u*i*y+t*h*y)*P,e[14]=(p*a*r-o*v*r-p*i*c+t*v*c+o*i*y-t*a*y)*P,e[15]=(o*h*r-u*a*r+u*i*c-t*h*c-o*i*f+t*a*f)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,h=a+a,f=s*l,d=s*u,p=s*h,v=o*u,y=o*h,g=a*h,m=c*l,w=c*u,b=c*h,E=i.x,S=i.y,P=i.z;return r[0]=(1-(v+g))*E,r[1]=(d+b)*E,r[2]=(p-w)*E,r[3]=0,r[4]=(d-b)*S,r[5]=(1-(f+g))*S,r[6]=(y+m)*S,r[7]=0,r[8]=(p+w)*P,r[9]=(y-m)*P,r[10]=(1-(f+v))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=nc.set(r[0],r[1],r[2]).length();const o=nc.set(r[4],r[5],r[6]).length(),a=nc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Yi.copy(this);const l=1/s,u=1/o,h=1/a;return Yi.elements[0]*=l,Yi.elements[1]*=l,Yi.elements[2]*=l,Yi.elements[4]*=u,Yi.elements[5]*=u,Yi.elements[6]*=u,Yi.elements[8]*=h,Yi.elements[9]*=h,Yi.elements[10]*=h,t.setFromRotationMatrix(Yi),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(t-e),l=2*s/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=c,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,c=1/(t-e),l=1/(i-r),u=1/(o-s),h=(t+e)*c,f=(i+r)*l,d=(o+s)*u;return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}$e.prototype.isMatrix4=!0;const nc=new ce,Yi=new $e,eEe=new ce(0,0,0),tEe=new ce(1,1,1),Xs=new ce,fd=new ce,pi=new ce,cS=new $e,lS=new ai;class Bl{constructor(e=0,t=0,i=0,r=Bl.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],c=r[1],l=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(xi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-xi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(xi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-xi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(xi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-xi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return cS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lS.setFromEuler(this),this.setFromQuaternion(lS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ce(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Bl.prototype.isEuler=!0;Bl.DefaultOrder="XYZ";Bl.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class nEe{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let iEe=0;const uS=new ce,ic=new ai,us=new $e,dd=new ce,ou=new ce,rEe=new ce,sEe=new ai,hS=new ce(1,0,0),fS=new ce(0,1,0),dS=new ce(0,0,1),oEe={type:"added"},pS={type:"removed"};class wt extends Da{constructor(){super(),Object.defineProperty(this,"id",{value:iEe++}),this.uuid=Ur(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wt.DefaultUp.clone();const e=new ce,t=new Bl,i=new ai,r=new ce(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new $e},normalMatrix:{value:new Cn}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=wt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new nEe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ic.setFromAxisAngle(e,t),this.quaternion.multiply(ic),this}rotateOnWorldAxis(e,t){return ic.setFromAxisAngle(e,t),this.quaternion.premultiply(ic),this}rotateX(e){return this.rotateOnAxis(hS,e)}rotateY(e){return this.rotateOnAxis(fS,e)}rotateZ(e){return this.rotateOnAxis(dS,e)}translateOnAxis(e,t){return uS.copy(e).applyQuaternion(this.quaternion),this.position.add(uS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hS,e)}translateY(e){return this.translateOnAxis(fS,e)}translateZ(e){return this.translateOnAxis(dS,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(us.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?dd.copy(e):dd.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ou.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?us.lookAt(ou,dd,this.up):us.lookAt(dd,ou,this.up),this.quaternion.setFromRotationMatrix(us),r&&(us.extractRotation(r.matrixWorld),ic.setFromRotationMatrix(us),this.quaternion.premultiply(ic.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(oEe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pS)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(pS)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),us.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),us.multiply(e.parent.matrixWorld)),e.applyMatrix4(us),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ou,e,rEe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ou,sEe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let l=0,u=c.length;l<u;l++){const h=c[l];s(e.shapes,h)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,l=this.material.length;c<l;c++)a.push(s(e.materials,this.material[c]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];r.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),l=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations);a.length>0&&(i.geometries=a),c.length>0&&(i.materials=c),l.length>0&&(i.textures=l),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),d.length>0&&(i.animations=d)}return i.object=r,i;function o(a){const c=[];for(const l in a){const u=a[l];delete u.metadata,c.push(u)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}wt.DefaultUp=new ce(0,1,0);wt.DefaultMatrixAutoUpdate=!0;wt.prototype.isObject3D=!0;const Zi=new ce,hs=new ce,rv=new ce,fs=new ce,rc=new ce,sc=new ce,mS=new ce,sv=new ce,ov=new ce,av=new ce;class hn{constructor(e=new ce,t=new ce,i=new ce){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Zi.subVectors(e,t),r.cross(Zi);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Zi.subVectors(r,t),hs.subVectors(i,t),rv.subVectors(e,t);const o=Zi.dot(Zi),a=Zi.dot(hs),c=Zi.dot(rv),l=hs.dot(hs),u=hs.dot(rv),h=o*l-a*a;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(l*c-a*u)*f,p=(o*u-a*c)*f;return s.set(1-d-p,p,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,fs),fs.x>=0&&fs.y>=0&&fs.x+fs.y<=1}static getUV(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,fs),c.set(0,0),c.addScaledVector(s,fs.x),c.addScaledVector(o,fs.y),c.addScaledVector(a,fs.z),c}static isFrontFacing(e,t,i,r){return Zi.subVectors(i,t),hs.subVectors(e,t),Zi.cross(hs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zi.subVectors(this.c,this.b),hs.subVectors(this.a,this.b),Zi.cross(hs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return hn.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return hn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;rc.subVectors(r,i),sc.subVectors(s,i),sv.subVectors(e,i);const c=rc.dot(sv),l=sc.dot(sv);if(c<=0&&l<=0)return t.copy(i);ov.subVectors(e,r);const u=rc.dot(ov),h=sc.dot(ov);if(u>=0&&h<=u)return t.copy(r);const f=c*h-u*l;if(f<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(rc,o);av.subVectors(e,s);const d=rc.dot(av),p=sc.dot(av);if(p>=0&&d<=p)return t.copy(s);const v=d*l-c*p;if(v<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(sc,a);const y=u*p-d*h;if(y<=0&&h-u>=0&&d-p>=0)return mS.subVectors(s,r),a=(h-u)/(h-u+(d-p)),t.copy(r).addScaledVector(mS,a);const g=1/(y+v+f);return o=v*g,a=f*g,t.copy(i).addScaledVector(rc,o).addScaledVector(sc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let aEe=0;class Un extends Da{constructor(){super(),Object.defineProperty(this,"id",{value:aEe++}),this.uuid=Ur(),this.name="",this.type="Material",this.fog=!0,this.blending=Ku,this.side=zh,this.vertexColors=!1,this.opacity=1,this.format=Si,this.transparent=!1,this.blendSrc=$2,this.blendDst=q2,this.blendEquation=Tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=K0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=XSe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qg,this.stencilZFail=qg,this.stencilZPass=qg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===W2;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(i.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(i.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ku&&(i.blending=this.blending),this.side!==zh&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==Si&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Un.prototype.isMaterial=!0;const Q2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ji={h:0,s:0,l:0},pd={h:0,s:0,l:0};function cv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function lv(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function uv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class Ge{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=YSe(e,1),t=xi(t,0,1),i=xi(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=cv(s,r,e+1/3),this.g=cv(s,r,e),this.b=cv(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,c=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,c,l)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Q2[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=lv(e.r),this.g=lv(e.g),this.b=lv(e.b),this}copyLinearToSRGB(e){return this.r=uv(e.r),this.g=uv(e.g),this.b=uv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),o=Math.min(t,i,r);let a,c;const l=(o+s)/2;if(o===s)a=0,c=0;else{const u=s-o;switch(c=l<=.5?u/(s+o):u/(2-s-o),s){case t:a=(i-r)/u+(i<r?6:0);break;case i:a=(r-t)/u+2;break;case r:a=(t-i)/u+4;break}a/=6}return e.h=a,e.s=c,e.l=l,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(Ji),Ji.h+=e,Ji.s+=t,Ji.l+=i,this.setHSL(Ji.h,Ji.s,Ji.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ji),e.getHSL(pd);const i=Xg(Ji.h,pd.h,t),r=Xg(Ji.s,pd.s,t),s=Xg(Ji.l,pd.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ge.NAMES=Q2;Ge.prototype.isColor=!0;Ge.prototype.r=1;Ge.prototype.g=1;Ge.prototype.b=1;class ex extends Un{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_m,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ex.prototype.isMeshBasicMaterial=!0;const Ot=new ce,md=new Le;class Et{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=bs,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Ge),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Le),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new ce),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Lt),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)md.fromBufferAttribute(this,t),md.applyMatrix3(e),this.setXY(t,md.x,md.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ot.fromBufferAttribute(this,t),Ot.applyMatrix3(e),this.setXYZ(t,Ot.x,Ot.y,Ot.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ot.x=this.getX(t),Ot.y=this.getY(t),Ot.z=this.getZ(t),Ot.applyMatrix4(e),this.setXYZ(t,Ot.x,Ot.y,Ot.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ot.x=this.getX(t),Ot.y=this.getY(t),Ot.z=this.getZ(t),Ot.applyNormalMatrix(e),this.setXYZ(t,Ot.x,Ot.y,Ot.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ot.x=this.getX(t),Ot.y=this.getY(t),Ot.z=this.getZ(t),Ot.transformDirection(e),this.setXYZ(t,Ot.x,Ot.y,Ot.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bs&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Et.prototype.isBufferAttribute=!0;class kp extends Et{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Np extends Et{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class cEe extends Et{constructor(e,t,i){super(new Uint16Array(e),t,i)}}cEe.prototype.isFloat16BufferAttribute=!0;class wn extends Et{constructor(e,t,i){super(new Float32Array(e),t,i)}}function eC(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}let lEe=0;const Ii=new $e,hv=new wt,oc=new ce,mi=new gr,au=new gr,gn=new ce;class Nt extends Da{constructor(){super(),Object.defineProperty(this,"id",{value:lEe++}),this.uuid=Ur(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eC(e)>65535?Np:kp)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Cn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ii.makeRotationFromQuaternion(e),this.applyMatrix4(Ii),this}rotateX(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this}rotateY(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this}rotateZ(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this}translate(e,t,i){return Ii.makeTranslation(e,t,i),this.applyMatrix4(Ii),this}scale(e,t,i){return Ii.makeScale(e,t,i),this.applyMatrix4(Ii),this}lookAt(e){return hv.lookAt(e),hv.updateMatrix(),this.applyMatrix4(hv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oc).negate(),this.translate(oc.x,oc.y,oc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];mi.setFromBufferAttribute(s),this.morphTargetsRelative?(gn.addVectors(this.boundingBox.min,mi.min),this.boundingBox.expandByPoint(gn),gn.addVectors(this.boundingBox.max,mi.max),this.boundingBox.expandByPoint(gn)):(this.boundingBox.expandByPoint(mi.min),this.boundingBox.expandByPoint(mi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new kl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ce,1/0);return}if(e){const i=this.boundingSphere.center;if(mi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];au.setFromBufferAttribute(a),this.morphTargetsRelative?(gn.addVectors(mi.min,au.min),mi.expandByPoint(gn),gn.addVectors(mi.max,au.max),mi.expandByPoint(gn)):(mi.expandByPoint(au.min),mi.expandByPoint(au.max))}mi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)gn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(gn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)gn.fromBufferAttribute(a,l),c&&(oc.fromBufferAttribute(e,l),gn.add(oc)),r=Math.max(r,i.distanceToSquared(gn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Et(new Float32Array(4*a),4));const c=t.tangent.array,l=[],u=[];for(let _=0;_<a;_++)l[_]=new ce,u[_]=new ce;const h=new ce,f=new ce,d=new ce,p=new Le,v=new Le,y=new Le,g=new ce,m=new ce;function w(_,x,T){h.fromArray(r,_*3),f.fromArray(r,x*3),d.fromArray(r,T*3),p.fromArray(o,_*2),v.fromArray(o,x*2),y.fromArray(o,T*2),f.sub(h),d.sub(h),v.sub(p),y.sub(p);const A=1/(v.x*y.y-y.x*v.y);isFinite(A)&&(g.copy(f).multiplyScalar(y.y).addScaledVector(d,-v.y).multiplyScalar(A),m.copy(d).multiplyScalar(v.x).addScaledVector(f,-y.x).multiplyScalar(A),l[_].add(g),l[x].add(g),l[T].add(g),u[_].add(m),u[x].add(m),u[T].add(m))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let _=0,x=b.length;_<x;++_){const T=b[_],A=T.start,M=T.count;for(let L=A,I=A+M;L<I;L+=3)w(i[L+0],i[L+1],i[L+2])}const E=new ce,S=new ce,P=new ce,N=new ce;function z(_){P.fromArray(s,_*3),N.copy(P);const x=l[_];E.copy(x),E.sub(P.multiplyScalar(P.dot(x))).normalize(),S.crossVectors(N,x);const A=S.dot(u[_])<0?-1:1;c[_*4]=E.x,c[_*4+1]=E.y,c[_*4+2]=E.z,c[_*4+3]=A}for(let _=0,x=b.length;_<x;++_){const T=b[_],A=T.start,M=T.count;for(let L=A,I=A+M;L<I;L+=3)z(i[L+0]),z(i[L+1]),z(i[L+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Et(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,d=i.count;f<d;f++)i.setXYZ(f,0,0,0);const r=new ce,s=new ce,o=new ce,a=new ce,c=new ce,l=new ce,u=new ce,h=new ce;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),v=e.getX(f+1),y=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,v),l.fromBufferAttribute(i,y),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(y,l.x,l.y,l.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,a=e.attributes[r],c=a.array,l=a.itemSize*t,u=Math.min(c.length,o.length-l);for(let h=0,f=l;h<u;h++,f++)o[f]=c[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)gn.fromBufferAttribute(e,t),gn.normalize(),e.setXYZ(t,gn.x,gn.y,gn.z)}toNonIndexed(){function e(a,c){const l=a.array,u=a.itemSize,h=a.normalized,f=new l.constructor(c.length*u);let d=0,p=0;for(let v=0,y=c.length;v<y;v++){a.isInterleavedBufferAttribute?d=c[v]*a.data.stride+a.offset:d=c[v]*u;for(let g=0;g<u;g++)f[p++]=l[d++]}return new Et(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nt,i=this.index.array,r=this.attributes;for(const a in r){const c=r[a],l=e(c,i);t.setAttribute(a,l)}const s=this.morphAttributes;for(const a in s){const c=[],l=s[a];for(let u=0,h=l.length;u<h;u++){const f=l[u],d=e(f,i);c.push(d)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const l=i[c];e.data.attributes[c]=l.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let h=0,f=l.length;h<f;h++){const d=l[h];u.push(d.toJSON(e.data))}u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new Nt().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r){const u=r[l];this.setAttribute(l,u.clone(t))}const s=e.morphAttributes;for(const l in s){const u=[],h=s[l];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Nt.prototype.isBufferGeometry=!0;const gS=new $e,ac=new Nl,fv=new kl,Ys=new ce,Zs=new ce,Js=new ce,dv=new ce,pv=new ce,mv=new ce,gd=new ce,vd=new ce,yd=new ce,_d=new Le,xd=new Le,bd=new Le,gv=new ce,wd=new ce;class ii extends wt{constructor(e=new Nt,t=new ex){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),fv.copy(i.boundingSphere),fv.applyMatrix4(s),e.ray.intersectsSphere(fv)===!1)||(gS.copy(s).invert(),ac.copy(e.ray).applyMatrix4(gS),i.boundingBox!==null&&ac.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const a=i.index,c=i.attributes.position,l=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,f=i.attributes.uv2,d=i.groups,p=i.drawRange;if(a!==null)if(Array.isArray(r))for(let v=0,y=d.length;v<y;v++){const g=d[v],m=r[g.materialIndex],w=Math.max(g.start,p.start),b=Math.min(g.start+g.count,p.start+p.count);for(let E=w,S=b;E<S;E+=3){const P=a.getX(E),N=a.getX(E+1),z=a.getX(E+2);o=Md(this,m,e,ac,c,l,u,h,f,P,N,z),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const v=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let g=v,m=y;g<m;g+=3){const w=a.getX(g),b=a.getX(g+1),E=a.getX(g+2);o=Md(this,r,e,ac,c,l,u,h,f,w,b,E),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}else if(c!==void 0)if(Array.isArray(r))for(let v=0,y=d.length;v<y;v++){const g=d[v],m=r[g.materialIndex],w=Math.max(g.start,p.start),b=Math.min(g.start+g.count,p.start+p.count);for(let E=w,S=b;E<S;E+=3){const P=E,N=E+1,z=E+2;o=Md(this,m,e,ac,c,l,u,h,f,P,N,z),o&&(o.faceIndex=Math.floor(E/3),o.face.materialIndex=g.materialIndex,t.push(o))}}else{const v=Math.max(0,p.start),y=Math.min(c.count,p.start+p.count);for(let g=v,m=y;g<m;g+=3){const w=g,b=g+1,E=g+2;o=Md(this,r,e,ac,c,l,u,h,f,w,b,E),o&&(o.faceIndex=Math.floor(g/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}ii.prototype.isMesh=!0;function uEe(n,e,t,i,r,s,o,a){let c;if(e.side===ln?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side!==ml,a),c===null)return null;wd.copy(a),wd.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(wd);return l<t.near||l>t.far?null:{distance:l,point:wd.clone(),object:n}}function Md(n,e,t,i,r,s,o,a,c,l,u,h){Ys.fromBufferAttribute(r,l),Zs.fromBufferAttribute(r,u),Js.fromBufferAttribute(r,h);const f=n.morphTargetInfluences;if(s&&f){gd.set(0,0,0),vd.set(0,0,0),yd.set(0,0,0);for(let p=0,v=s.length;p<v;p++){const y=f[p],g=s[p];y!==0&&(dv.fromBufferAttribute(g,l),pv.fromBufferAttribute(g,u),mv.fromBufferAttribute(g,h),o?(gd.addScaledVector(dv,y),vd.addScaledVector(pv,y),yd.addScaledVector(mv,y)):(gd.addScaledVector(dv.sub(Ys),y),vd.addScaledVector(pv.sub(Zs),y),yd.addScaledVector(mv.sub(Js),y)))}Ys.add(gd),Zs.add(vd),Js.add(yd)}n.isSkinnedMesh&&(n.boneTransform(l,Ys),n.boneTransform(u,Zs),n.boneTransform(h,Js));const d=uEe(n,e,t,i,Ys,Zs,Js,gv);if(d){a&&(_d.fromBufferAttribute(a,l),xd.fromBufferAttribute(a,u),bd.fromBufferAttribute(a,h),d.uv=hn.getUV(gv,Ys,Zs,Js,_d,xd,bd,new Le)),c&&(_d.fromBufferAttribute(c,l),xd.fromBufferAttribute(c,u),bd.fromBufferAttribute(c,h),d.uv2=hn.getUV(gv,Ys,Zs,Js,_d,xd,bd,new Le));const p={a:l,b:u,c:h,normal:new ce,materialIndex:0};hn.getNormal(Ys,Zs,Js,p.normal),d.face=p}return d}class nf extends Nt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],l=[],u=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new wn(l,3)),this.setAttribute("normal",new wn(u,3)),this.setAttribute("uv",new wn(h,2));function p(v,y,g,m,w,b,E,S,P,N,z){const _=b/P,x=E/N,T=b/2,A=E/2,M=S/2,L=P+1,I=N+1;let k=0,W=0;const j=new ce;for(let G=0;G<I;G++){const ee=G*x-A;for(let se=0;se<L;se++){const oe=se*_-T;j[v]=oe*m,j[y]=ee*w,j[g]=M,l.push(j.x,j.y,j.z),j[v]=0,j[y]=0,j[g]=S>0?1:-1,u.push(j.x,j.y,j.z),h.push(se/P),h.push(1-G/N),k+=1}}for(let G=0;G<N;G++)for(let ee=0;ee<P;ee++){const se=f+ee+L*G,oe=f+ee+L*(G+1),de=f+(ee+1)+L*(G+1),ae=f+(ee+1)+L*G;c.push(se,oe,ae),c.push(oe,de,ae),W+=6}a.addGroup(d,W,z),d+=W,f+=k}}static fromJSON(e){return new nf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vl(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Dn(n){const e={};for(let t=0;t<n.length;t++){const i=vl(n[t]);for(const r in i)e[r]=i[r]}return e}const hEe={clone:vl,merge:Dn};var fEe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dEe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ca extends Un{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=fEe,this.fragmentShader=dEe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}Ca.prototype.isShaderMaterial=!0;class tx extends wt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}tx.prototype.isCamera=!0;class ni extends tx{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=iy*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(jg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return iy*2*Math.atan(Math.tan(jg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(jg*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}ni.prototype.isPerspectiveCamera=!0;const cc=90,lc=1;class nx extends wt{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new ni(cc,lc,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ce(1,0,0)),this.add(r);const s=new ni(cc,lc,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ce(-1,0,0)),this.add(s);const o=new ni(cc,lc,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new ce(0,1,0)),this.add(o);const a=new ni(cc,lc,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new ce(0,-1,0)),this.add(a);const c=new ni(cc,lc,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ce(0,0,1)),this.add(c);const l=new ni(cc,lc,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ce(0,0,-1)),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,c,l]=this.children,u=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(h),e.xr.enabled=u}}class Em extends Pn{constructor(e,t,i,r,s,o,a,c,l,u){e=e!==void 0?e:[],t=t!==void 0?t:xm,a=a!==void 0?a:vo,super(e,t,i,r,s,o,a,c,l,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Em.prototype.isCubeTexture=!0;class tC extends Hr{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),t=t||{},this.texture=new Em(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Oi,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Si,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new nf(5,5,5),s=new Ca({name:"CubemapFromEquirect",uniforms:vl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ln,blending:go});s.uniforms.tEquirect.value=t;const o=new ii(r,s),a=t.minFilter;return t.minFilter===Mm&&(t.minFilter=Oi),new nx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}tC.prototype.isWebGLCubeRenderTarget=!0;const vv=new ce,pEe=new ce,mEe=new Cn;class _s{constructor(e=new ce(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=vv.subVectors(i,t).cross(pEe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(vv),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||mEe.getNormalMatrix(e),r=this.coplanarPoint(vv).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}_s.prototype.isPlane=!0;const uc=new kl,Sd=new ce;class Tm{constructor(e=new _s,t=new _s,i=new _s,r=new _s,s=new _s,o=new _s){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],c=i[4],l=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],v=i[11],y=i[12],g=i[13],m=i[14],w=i[15];return t[0].setComponents(a-r,h-c,v-f,w-y).normalize(),t[1].setComponents(a+r,h+c,v+f,w+y).normalize(),t[2].setComponents(a+s,h+l,v+d,w+g).normalize(),t[3].setComponents(a-s,h-l,v-d,w-g).normalize(),t[4].setComponents(a-o,h-u,v-p,w-m).normalize(),t[5].setComponents(a+o,h+u,v+p,w+m).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),uc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(uc)}intersectsSprite(e){return uc.center.set(0,0,0),uc.radius=.7071067811865476,uc.applyMatrix4(e.matrixWorld),this.intersectsSphere(uc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Sd.x=r.normal.x>0?e.max.x:e.min.x,Sd.y=r.normal.y>0?e.max.y:e.min.y,Sd.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Sd)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nC(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function gEe(n,e){const t=e.isWebGL2,i=new WeakMap;function r(l,u){const h=l.array,f=l.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,h,f),l.onUploadCallback();let p=5126;return h instanceof Float32Array?p=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?l.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:h instanceof Int16Array?p=5122:h instanceof Uint32Array?p=5125:h instanceof Int32Array?p=5124:h instanceof Int8Array?p=5120:(h instanceof Uint8Array||h instanceof Uint8ClampedArray)&&(p=5121),{buffer:d,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:l.version}}function s(l,u,h){const f=u.array,d=u.updateRange;n.bindBuffer(h,l),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))}function c(l,u){if(l.isGLBufferAttribute){const f=i.get(l);(!f||f.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const h=i.get(l);h===void 0?i.set(l,r(l,u)):h.version<l.version&&(s(h.buffer,l,u),h.version=l.version)}return{get:o,remove:a,update:c}}class ix extends Nt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,h=e/a,f=t/c,d=[],p=[],v=[],y=[];for(let g=0;g<u;g++){const m=g*f-o;for(let w=0;w<l;w++){const b=w*h-s;p.push(b,-m,0),v.push(0,0,1),y.push(w/a),y.push(1-g/c)}}for(let g=0;g<c;g++)for(let m=0;m<a;m++){const w=m+l*g,b=m+l*(g+1),E=m+1+l*(g+1),S=m+1+l*g;d.push(w,b,S),d.push(b,E,S)}this.setIndex(d),this.setAttribute("position",new wn(p,3)),this.setAttribute("normal",new wn(v,3)),this.setAttribute("uv",new wn(y,2))}static fromJSON(e){return new ix(e.width,e.height,e.widthSegments,e.heightSegments)}}var vEe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,yEe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_Ee=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,xEe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,bEe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,wEe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,MEe="vec3 transformed = vec3( position );",SEe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,EEe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotVH = saturate( dot( geometry.viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float NoH ) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float NoV, float NoL ) {
	return saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );
}
vec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,TEe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,AEe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,CEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LEe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,REe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,PEe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,IEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,DEe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,FEe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,OEe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,kEe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NEe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,BEe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zEe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,UEe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HEe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,GEe="gl_FragColor = linearToOutputTexel( gl_FragColor );",VEe=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,WEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,$Ee=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,qEe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,jEe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XEe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,YEe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ZEe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,JEe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KEe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QEe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,eTe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,tTe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,nTe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,iTe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rTe=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in GeometricContext geometry ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,sTe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oTe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,aTe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,cTe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,lTe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenTint = sheenTint;
#endif`,uTe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenTint;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hTe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fTe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dTe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,pTe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mTe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gTe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,vTe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,yTe=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,_Te=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xTe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bTe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wTe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,MTe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,STe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,ETe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,TTe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,ATe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,CTe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,LTe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RTe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PTe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ITe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,DTe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,FTe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,OTe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,kTe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,NTe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,BTe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zTe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,UTe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HTe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GTe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,VTe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,WTe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$Te=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qTe=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,jTe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,XTe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,YTe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ZTe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,JTe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KTe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QTe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,eAe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tAe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,nAe=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = transmission.a;
#endif`,iAe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,rAe=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,sAe=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,oAe=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,aAe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,cAe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,lAe=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,uAe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,hAe=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fAe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dAe=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mAe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gAe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vAe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yAe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_Ae=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,xAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bAe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wAe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MAe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SAe=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EAe=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TAe=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AAe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CAe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,LAe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,RAe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PAe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IAe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DAe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenTint;
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FAe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OAe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kAe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NAe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BAe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zAe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,UAe=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HAe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,GAe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const ht={alphamap_fragment:vEe,alphamap_pars_fragment:yEe,alphatest_fragment:_Ee,alphatest_pars_fragment:xEe,aomap_fragment:bEe,aomap_pars_fragment:wEe,begin_vertex:MEe,beginnormal_vertex:SEe,bsdfs:EEe,bumpmap_pars_fragment:TEe,clipping_planes_fragment:AEe,clipping_planes_pars_fragment:CEe,clipping_planes_pars_vertex:LEe,clipping_planes_vertex:REe,color_fragment:PEe,color_pars_fragment:IEe,color_pars_vertex:DEe,color_vertex:FEe,common:OEe,cube_uv_reflection_fragment:kEe,defaultnormal_vertex:NEe,displacementmap_pars_vertex:BEe,displacementmap_vertex:zEe,emissivemap_fragment:UEe,emissivemap_pars_fragment:HEe,encodings_fragment:GEe,encodings_pars_fragment:VEe,envmap_fragment:WEe,envmap_common_pars_fragment:$Ee,envmap_pars_fragment:qEe,envmap_pars_vertex:jEe,envmap_physical_pars_fragment:rTe,envmap_vertex:XEe,fog_vertex:YEe,fog_pars_vertex:ZEe,fog_fragment:JEe,fog_pars_fragment:KEe,gradientmap_pars_fragment:QEe,lightmap_fragment:eTe,lightmap_pars_fragment:tTe,lights_lambert_vertex:nTe,lights_pars_begin:iTe,lights_toon_fragment:sTe,lights_toon_pars_fragment:oTe,lights_phong_fragment:aTe,lights_phong_pars_fragment:cTe,lights_physical_fragment:lTe,lights_physical_pars_fragment:uTe,lights_fragment_begin:hTe,lights_fragment_maps:fTe,lights_fragment_end:dTe,logdepthbuf_fragment:pTe,logdepthbuf_pars_fragment:mTe,logdepthbuf_pars_vertex:gTe,logdepthbuf_vertex:vTe,map_fragment:yTe,map_pars_fragment:_Te,map_particle_fragment:xTe,map_particle_pars_fragment:bTe,metalnessmap_fragment:wTe,metalnessmap_pars_fragment:MTe,morphnormal_vertex:STe,morphtarget_pars_vertex:ETe,morphtarget_vertex:TTe,normal_fragment_begin:ATe,normal_fragment_maps:CTe,normal_pars_fragment:LTe,normal_pars_vertex:RTe,normal_vertex:PTe,normalmap_pars_fragment:ITe,clearcoat_normal_fragment_begin:DTe,clearcoat_normal_fragment_maps:FTe,clearcoat_pars_fragment:OTe,output_fragment:kTe,packing:NTe,premultiplied_alpha_fragment:BTe,project_vertex:zTe,dithering_fragment:UTe,dithering_pars_fragment:HTe,roughnessmap_fragment:GTe,roughnessmap_pars_fragment:VTe,shadowmap_pars_fragment:WTe,shadowmap_pars_vertex:$Te,shadowmap_vertex:qTe,shadowmask_pars_fragment:jTe,skinbase_vertex:XTe,skinning_pars_vertex:YTe,skinning_vertex:ZTe,skinnormal_vertex:JTe,specularmap_fragment:KTe,specularmap_pars_fragment:QTe,tonemapping_fragment:eAe,tonemapping_pars_fragment:tAe,transmission_fragment:nAe,transmission_pars_fragment:iAe,uv_pars_fragment:rAe,uv_pars_vertex:sAe,uv_vertex:oAe,uv2_pars_fragment:aAe,uv2_pars_vertex:cAe,uv2_vertex:lAe,worldpos_vertex:uAe,background_frag:hAe,background_vert:fAe,cube_frag:dAe,cube_vert:pAe,depth_frag:mAe,depth_vert:gAe,distanceRGBA_frag:vAe,distanceRGBA_vert:yAe,equirect_frag:_Ae,equirect_vert:xAe,linedashed_frag:bAe,linedashed_vert:wAe,meshbasic_frag:MAe,meshbasic_vert:SAe,meshlambert_frag:EAe,meshlambert_vert:TAe,meshmatcap_frag:AAe,meshmatcap_vert:CAe,meshnormal_frag:LAe,meshnormal_vert:RAe,meshphong_frag:PAe,meshphong_vert:IAe,meshphysical_frag:DAe,meshphysical_vert:FAe,meshtoon_frag:OAe,meshtoon_vert:kAe,points_frag:NAe,points_vert:BAe,shadow_frag:zAe,shadow_vert:UAe,sprite_frag:HAe,sprite_vert:GAe},De={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Cn},uv2Transform:{value:new Cn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Cn}}},Lr={basic:{uniforms:Dn([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:Dn([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.fog,De.lights,{emissive:{value:new Ge(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:Dn([De.common,De.specularmap,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.fog,De.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:Dn([De.common,De.envmap,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.roughnessmap,De.metalnessmap,De.fog,De.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:Dn([De.common,De.aomap,De.lightmap,De.emissivemap,De.bumpmap,De.normalmap,De.displacementmap,De.gradientmap,De.fog,De.lights,{emissive:{value:new Ge(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:Dn([De.common,De.bumpmap,De.normalmap,De.displacementmap,De.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:Dn([De.points,De.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:Dn([De.common,De.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:Dn([De.common,De.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:Dn([De.common,De.bumpmap,De.normalmap,De.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:Dn([De.sprite,De.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},cube:{uniforms:Dn([De.envmap,{opacity:{value:1}}]),vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:Dn([De.common,De.displacementmap,{referencePosition:{value:new ce},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:Dn([De.lights,De.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};Lr.physical={uniforms:Dn([Lr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Le(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new Ge(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Ge(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Ge(1,1,1)},specularTintMap:{value:null}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};function VAe(n,e,t,i,r){const s=new Ge(0);let o=0,a,c,l=null,u=0,h=null;function f(p,v){let y=!1,g=v.isScene===!0?v.background:null;g&&g.isTexture&&(g=e.get(g));const m=n.xr,w=m.getSession&&m.getSession();w&&w.environmentBlendMode==="additive"&&(g=null),g===null?d(s,o):g&&g.isColor&&(d(g,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),g&&(g.isCubeTexture||g.mapping===wm)?(c===void 0&&(c=new ii(new nf(1,1,1),new Ca({name:"BackgroundCubeMaterial",uniforms:vl(Lr.cube.uniforms),vertexShader:Lr.cube.vertexShader,fragmentShader:Lr.cube.fragmentShader,side:ln,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,E,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=g,c.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,(l!==g||u!==g.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,l=g,u=g.version,h=n.toneMapping),p.unshift(c,c.geometry,c.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new ii(new ix(2,2),new Ca({name:"BackgroundMaterial",uniforms:vl(Lr.background.uniforms),vertexShader:Lr.background.vertexShader,fragmentShader:Lr.background.fragmentShader,side:zh,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(l!==g||u!==g.version||h!==n.toneMapping)&&(a.material.needsUpdate=!0,l=g,u=g.version,h=n.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,v){t.buffers.color.setClear(p.r,p.g,p.b,v,r)}return{getClearColor:function(){return s},setClearColor:function(p,v=1){s.set(p),o=v,d(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(s,o)},render:f}}function WAe(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},c=v(null);let l=c;function u(A,M,L,I,k){let W=!1;if(o){const j=p(I,L,M);l!==j&&(l=j,f(l.object)),W=y(I,k),W&&g(I,k)}else{const j=M.wireframe===!0;(l.geometry!==I.id||l.program!==L.id||l.wireframe!==j)&&(l.geometry=I.id,l.program=L.id,l.wireframe=j,W=!0)}A.isInstancedMesh===!0&&(W=!0),k!==null&&t.update(k,34963),W&&(P(A,M,L,I),k!==null&&n.bindBuffer(34963,t.get(k).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(A){return i.isWebGL2?n.bindVertexArray(A):s.bindVertexArrayOES(A)}function d(A){return i.isWebGL2?n.deleteVertexArray(A):s.deleteVertexArrayOES(A)}function p(A,M,L){const I=L.wireframe===!0;let k=a[A.id];k===void 0&&(k={},a[A.id]=k);let W=k[M.id];W===void 0&&(W={},k[M.id]=W);let j=W[I];return j===void 0&&(j=v(h()),W[I]=j),j}function v(A){const M=[],L=[],I=[];for(let k=0;k<r;k++)M[k]=0,L[k]=0,I[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:M,enabledAttributes:L,attributeDivisors:I,object:A,attributes:{},index:null}}function y(A,M){const L=l.attributes,I=A.attributes;let k=0;for(const W in I){const j=L[W],G=I[W];if(j===void 0||j.attribute!==G||j.data!==G.data)return!0;k++}return l.attributesNum!==k||l.index!==M}function g(A,M){const L={},I=A.attributes;let k=0;for(const W in I){const j=I[W],G={};G.attribute=j,j.data&&(G.data=j.data),L[W]=G,k++}l.attributes=L,l.attributesNum=k,l.index=M}function m(){const A=l.newAttributes;for(let M=0,L=A.length;M<L;M++)A[M]=0}function w(A){b(A,0)}function b(A,M){const L=l.newAttributes,I=l.enabledAttributes,k=l.attributeDivisors;L[A]=1,I[A]===0&&(n.enableVertexAttribArray(A),I[A]=1),k[A]!==M&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](A,M),k[A]=M)}function E(){const A=l.newAttributes,M=l.enabledAttributes;for(let L=0,I=M.length;L<I;L++)M[L]!==A[L]&&(n.disableVertexAttribArray(L),M[L]=0)}function S(A,M,L,I,k,W){i.isWebGL2===!0&&(L===5124||L===5125)?n.vertexAttribIPointer(A,M,L,k,W):n.vertexAttribPointer(A,M,L,I,k,W)}function P(A,M,L,I){if(i.isWebGL2===!1&&(A.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;m();const k=I.attributes,W=L.getAttributes(),j=M.defaultAttributeValues;for(const G in W){const ee=W[G];if(ee.location>=0){let se=k[G];if(se===void 0&&(G==="instanceMatrix"&&A.instanceMatrix&&(se=A.instanceMatrix),G==="instanceColor"&&A.instanceColor&&(se=A.instanceColor)),se!==void 0){const oe=se.normalized,de=se.itemSize,ae=t.get(se);if(ae===void 0)continue;const O=ae.buffer,B=ae.type,Z=ae.bytesPerElement;if(se.isInterleavedBufferAttribute){const V=se.data,J=V.stride,re=se.offset;if(V&&V.isInstancedInterleavedBuffer){for(let D=0;D<ee.locationSize;D++)b(ee.location+D,V.meshPerAttribute);A.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let D=0;D<ee.locationSize;D++)w(ee.location+D);n.bindBuffer(34962,O);for(let D=0;D<ee.locationSize;D++)S(ee.location+D,de/ee.locationSize,B,oe,J*Z,(re+de/ee.locationSize*D)*Z)}else{if(se.isInstancedBufferAttribute){for(let V=0;V<ee.locationSize;V++)b(ee.location+V,se.meshPerAttribute);A.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let V=0;V<ee.locationSize;V++)w(ee.location+V);n.bindBuffer(34962,O);for(let V=0;V<ee.locationSize;V++)S(ee.location+V,de/ee.locationSize,B,oe,de*Z,de/ee.locationSize*V*Z)}}else if(j!==void 0){const oe=j[G];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(ee.location,oe);break;case 3:n.vertexAttrib3fv(ee.location,oe);break;case 4:n.vertexAttrib4fv(ee.location,oe);break;default:n.vertexAttrib1fv(ee.location,oe)}}}}E()}function N(){x();for(const A in a){const M=a[A];for(const L in M){const I=M[L];for(const k in I)d(I[k].object),delete I[k];delete M[L]}delete a[A]}}function z(A){if(a[A.id]===void 0)return;const M=a[A.id];for(const L in M){const I=M[L];for(const k in I)d(I[k].object),delete I[k];delete M[L]}delete a[A.id]}function _(A){for(const M in a){const L=a[M];if(L[A.id]===void 0)continue;const I=L[A.id];for(const k in I)d(I[k].object),delete I[k];delete L[A.id]}}function x(){T(),l!==c&&(l=c,f(l.object))}function T(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:u,reset:x,resetDefaultState:T,dispose:N,releaseStatesOfGeometry:z,releaseStatesOfProgram:_,initAttributes:m,enableAttribute:w,disableUnusedAttributes:E}}function $Ae(n,e,t,i){const r=i.isWebGL2;let s;function o(l){s=l}function a(l,u){n.drawArrays(s,l,u),t.update(u,s,1)}function c(l,u,h){if(h===0)return;let f,d;if(r)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,l,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=c}function qAe(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const l=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),f=n.getParameter(35660),d=n.getParameter(3379),p=n.getParameter(34076),v=n.getParameter(34921),y=n.getParameter(36347),g=n.getParameter(36348),m=n.getParameter(36349),w=f>0,b=o||e.has("OES_texture_float"),E=w&&b,S=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:v,maxVertexUniforms:y,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:w,floatFragmentTextures:b,floatVertexTextures:E,maxSamples:S}}function jAe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new _s,a=new Cn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,d){const p=h.length!==0||f||i!==0||r;return r=f,t=u(h,d,0),i=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,l()},this.setState=function(h,f,d){const p=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,g=n.get(h);if(!r||p===null||p.length===0||s&&!y)s?u(null):l();else{const m=s?0:i,w=m*4;let b=g.clippingState||null;c.value=b,b=u(p,f,w,d);for(let E=0;E!==w;++E)b[E]=t[E];g.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=m}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,d,p){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=c.value,p!==!0||y===null){const g=d+v*4,m=f.matrixWorldInverse;a.getNormalMatrix(m),(y===null||y.length<g)&&(y=new Float32Array(g));for(let w=0,b=d;w!==v;++w,b+=4)o.copy(h[w]).applyMatrix4(m,a),o.normal.toArray(y,b),y[b+3]=o.constant}c.value=y,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function XAe(n){let e=new WeakMap;function t(o,a){return a===Q0?o.mapping=xm:a===ey&&(o.mapping=bm),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Q0||a===ey)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const l=n.getRenderTarget(),u=new tC(c.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),n.setRenderTarget(l),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class rx extends tx{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}rx.prototype.isOrthographicCamera=!0;class Am extends Ca{constructor(e){super(e),this.type="RawShaderMaterial"}}Am.prototype.isRawShaderMaterial=!0;const Jc=4,yo=8,Er=Math.pow(2,yo),iC=[.125,.215,.35,.446,.526,.582],rC=yo-Jc+1+iC.length,hc=20,Or={[li]:0,[Sm]:1,[Q_]:2,[Y2]:3,[Z2]:4,[J2]:5,[K_]:6},yv=new rx,{_lodPlanes:cu,_sizeLods:vS,_sigmas:Ed}=JAe(),yS=new Ge;let _v=null;const Qo=(1+Math.sqrt(5))/2,fc=1/Qo,_S=[new ce(1,1,1),new ce(-1,1,1),new ce(1,1,-1),new ce(-1,1,-1),new ce(0,Qo,fc),new ce(0,Qo,-fc),new ce(fc,0,Qo),new ce(-fc,0,Qo),new ce(Qo,fc,0),new ce(-Qo,fc,0)];class YAe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=KAe(hc),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){_v=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=wS(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=bS(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<cu.length;e++)cu[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_v),e.scissorTest=!1,Td(e,0,0,e.width,e.height)}_fromTexture(e){_v=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:xn,minFilter:xn,generateMipmaps:!1,type:gl,format:iSe,encoding:ZAe(e)?e.encoding:Q_,depthBuffer:!1},i=xS(t);return i.depthBuffer=!e,this._pingPongRenderTarget=xS(t),i}_compileMaterial(e){const t=new ii(cu[0],e);this._renderer.compile(t,yv)}_sceneToCubeUV(e,t,i,r){const a=new ni(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.outputEncoding,d=u.toneMapping;u.getClearColor(yS),u.toneMapping=da,u.outputEncoding=li,u.autoClear=!1;const p=new ex({name:"PMREM.Background",side:ln,depthWrite:!1,depthTest:!1}),v=new ii(new nf,p);let y=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,y=!0):(p.color.copy(yS),y=!0);for(let m=0;m<6;m++){const w=m%3;w==0?(a.up.set(0,c[m],0),a.lookAt(l[m],0,0)):w==1?(a.up.set(0,0,c[m]),a.lookAt(0,l[m],0)):(a.up.set(0,c[m],0),a.lookAt(0,0,l[m])),Td(r,w*Er,m>2?Er:0,Er,Er),u.setRenderTarget(r),y&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.outputEncoding=f,u.autoClear=h,e.background=g}_textureToCubeUV(e,t){const i=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=wS()):this._equirectShader==null&&(this._equirectShader=bS());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,s=new ii(cu[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Or[e.encoding],o.outputEncoding.value=Or[t.texture.encoding],Td(t,0,0,3*Er,2*Er),i.setRenderTarget(t),i.render(s,yv)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<rC;r++){const s=Math.sqrt(Ed[r]*Ed[r]-Ed[r-1]*Ed[r-1]),o=_S[(r-1)%_S.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new ii(cu[r],l),f=l.uniforms,d=vS[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*hc-1),v=s/p,y=isFinite(s)?1+Math.floor(u*v):hc;y>hc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${hc}`);const g=[];let m=0;for(let S=0;S<hc;++S){const P=S/v,N=Math.exp(-P*P/2);g.push(N),S==0?m+=N:S<y&&(m+=2*N)}for(let S=0;S<g.length;S++)g[S]=g[S]/m;f.envMap.value=e.texture,f.samples.value=y,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a),f.dTheta.value=p,f.mipInt.value=yo-i,f.inputEncoding.value=Or[e.texture.encoding],f.outputEncoding.value=Or[e.texture.encoding];const w=vS[r],b=3*Math.max(0,Er-2*w),E=(r===0?0:2*Er)+2*w*(r>yo-Jc?r-yo+Jc:0);Td(t,b,E,3*w,2*w),c.setRenderTarget(t),c.render(h,yv)}}function ZAe(n){return n===void 0||n.type!==gl?!1:n.encoding===li||n.encoding===Sm||n.encoding===K_}function JAe(){const n=[],e=[],t=[];let i=yo;for(let r=0;r<rC;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>yo-Jc?o=iC[r-yo+Jc-1]:r==0&&(o=0),t.push(o);const a=1/(s-1),c=-a/2,l=1+a/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,f=6,d=3,p=2,v=1,y=new Float32Array(d*f*h),g=new Float32Array(p*f*h),m=new Float32Array(v*f*h);for(let b=0;b<h;b++){const E=b%3*2/3-1,S=b>2?0:-1,P=[E,S,0,E+2/3,S,0,E+2/3,S+1,0,E,S,0,E+2/3,S+1,0,E,S+1,0];y.set(P,d*f*b),g.set(u,p*f*b);const N=[b,b,b,b,b,b];m.set(N,v*f*b)}const w=new Nt;w.setAttribute("position",new Et(y,d)),w.setAttribute("uv",new Et(g,p)),w.setAttribute("faceIndex",new Et(m,v)),n.push(w),i>Jc&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function xS(n){const e=new Hr(3*Er,3*Er,n);return e.texture.mapping=wm,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Td(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function KAe(n){const e=new Float32Array(n),t=new ce(0,1,0);return new Am({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Or[li]},outputEncoding:{value:Or[li]}},vertexShader:sx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${ox()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function bS(){const n=new Le(1,1);return new Am({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:Or[li]},outputEncoding:{value:Or[li]}},vertexShader:sx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${ox()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function wS(){return new Am({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Or[li]},outputEncoding:{value:Or[li]}},vertexShader:sx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${ox()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:go,depthTest:!1,depthWrite:!1})}function sx(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ox(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function QAe(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const c=a.mapping,l=c===Q0||c===ey,u=c===xm||c===bm;if(l||u){if(e.has(a))return e.get(a).texture;{const h=a.image;if(l&&h&&h.height>0||u&&h&&r(h)){const f=n.getRenderTarget();t===null&&(t=new YAe(n));const d=l?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),n.setRenderTarget(f),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let c=0;const l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){const c=a.target;c.removeEventListener("dispose",s);const l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function e2e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function t2e(n,e,t,i){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",o),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}function c(h){const f=h.attributes;for(const p in f)e.update(f[p],34962);const d=h.morphAttributes;for(const p in d){const v=d[p];for(let y=0,g=v.length;y<g;y++)e.update(v[y],34962)}}function l(h){const f=[],d=h.index,p=h.attributes.position;let v=0;if(d!==null){const m=d.array;v=d.version;for(let w=0,b=m.length;w<b;w+=3){const E=m[w+0],S=m[w+1],P=m[w+2];f.push(E,S,S,P,P,E)}}else{const m=p.array;v=p.version;for(let w=0,b=m.length/3-1;w<b;w+=3){const E=w+0,S=w+1,P=w+2;f.push(E,S,S,P,P,E)}}const y=new(eC(f)>65535?Np:kp)(f,1);y.version=v;const g=s.get(h);g&&e.remove(g),s.set(h,y)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&l(h)}else l(h);return s.get(h)}return{get:a,update:c,getWireframeAttribute:u}}function n2e(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,c;function l(f){a=f.type,c=f.bytesPerElement}function u(f,d){n.drawElements(s,d,a,f*c),t.update(d,s,1)}function h(f,d,p){if(p===0)return;let v,y;if(r)v=n,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,d,a,f*c,p),t.update(d,s,p)}this.setMode=o,this.setIndex=l,this.render=u,this.renderInstances=h}function i2e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function r2e(n,e){return n[0]-e[0]}function s2e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function o2e(n){const e={},t=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,c){const l=s.morphTargetInfluences,u=l===void 0?0:l.length;let h=e[o.id];if(h===void 0||h.length!==u){h=[];for(let y=0;y<u;y++)h[y]=[y,0];e[o.id]=h}for(let y=0;y<u;y++){const g=h[y];g[0]=y,g[1]=l[y]}h.sort(s2e);for(let y=0;y<8;y++)y<u&&h[y][1]?(i[y][0]=h[y][0],i[y][1]=h[y][1]):(i[y][0]=Number.MAX_SAFE_INTEGER,i[y][1]=0);i.sort(r2e);const f=o.morphAttributes.position,d=o.morphAttributes.normal;let p=0;for(let y=0;y<8;y++){const g=i[y],m=g[0],w=g[1];m!==Number.MAX_SAFE_INTEGER&&w?(f&&o.getAttribute("morphTarget"+y)!==f[m]&&o.setAttribute("morphTarget"+y,f[m]),d&&o.getAttribute("morphNormal"+y)!==d[m]&&o.setAttribute("morphNormal"+y,d[m]),t[y]=w,p+=w):(f&&o.hasAttribute("morphTarget"+y)===!0&&o.deleteAttribute("morphTarget"+y),d&&o.hasAttribute("morphNormal"+y)===!0&&o.deleteAttribute("morphNormal"+y),t[y]=0)}const v=o.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",v),c.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function a2e(n,e,t,i){let r=new WeakMap;function s(c){const l=i.render.frame,u=c.geometry,h=e.get(c,u);return r.get(h)!==l&&(e.update(h),r.set(h,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),h}function o(){r=new WeakMap}function a(c){const l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}class sC extends Pn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=xn,this.minFilter=xn,this.wrapR=wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}sC.prototype.isDataTexture2DArray=!0;class oC extends Pn{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=xn,this.minFilter=xn,this.wrapR=wi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}oC.prototype.isDataTexture3D=!0;const aC=new Pn,c2e=new sC,l2e=new oC,cC=new Em,MS=[],SS=[],ES=new Float32Array(16),TS=new Float32Array(9),AS=new Float32Array(4);function zl(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=MS[r];if(s===void 0&&(s=new Float32Array(r),MS[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Yn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function lC(n,e){let t=SS[e];t===void 0&&(t=new Int32Array(e),SS[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function u2e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function h2e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2fv(this.addr,e),zn(t,e)}}function f2e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yn(t,e))return;n.uniform3fv(this.addr,e),zn(t,e)}}function d2e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4fv(this.addr,e),zn(t,e)}}function p2e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zn(t,e)}else{if(Yn(t,i))return;AS.set(i),n.uniformMatrix2fv(this.addr,!1,AS),zn(t,i)}}function m2e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zn(t,e)}else{if(Yn(t,i))return;TS.set(i),n.uniformMatrix3fv(this.addr,!1,TS),zn(t,i)}}function g2e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zn(t,e)}else{if(Yn(t,i))return;ES.set(i),n.uniformMatrix4fv(this.addr,!1,ES),zn(t,i)}}function v2e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function y2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform2iv(this.addr,e),zn(t,e))}function _2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform3iv(this.addr,e),zn(t,e))}function x2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform4iv(this.addr,e),zn(t,e))}function b2e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function w2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform2uiv(this.addr,e),zn(t,e))}function M2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform3uiv(this.addr,e),zn(t,e))}function S2e(n,e){const t=this.cache;Yn(t,e)||(n.uniform4uiv(this.addr,e),zn(t,e))}function E2e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||aC,r)}function T2e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||l2e,r)}function A2e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||cC,r)}function C2e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||c2e,r)}function L2e(n){switch(n){case 5126:return u2e;case 35664:return h2e;case 35665:return f2e;case 35666:return d2e;case 35674:return p2e;case 35675:return m2e;case 35676:return g2e;case 5124:case 35670:return v2e;case 35667:case 35671:return y2e;case 35668:case 35672:return _2e;case 35669:case 35673:return x2e;case 5125:return b2e;case 36294:return w2e;case 36295:return M2e;case 36296:return S2e;case 35678:case 36198:case 36298:case 36306:case 35682:return E2e;case 35679:case 36299:case 36307:return T2e;case 35680:case 36300:case 36308:case 36293:return A2e;case 36289:case 36303:case 36311:case 36292:return C2e}}function R2e(n,e){n.uniform1fv(this.addr,e)}function P2e(n,e){const t=zl(e,this.size,2);n.uniform2fv(this.addr,t)}function I2e(n,e){const t=zl(e,this.size,3);n.uniform3fv(this.addr,t)}function D2e(n,e){const t=zl(e,this.size,4);n.uniform4fv(this.addr,t)}function F2e(n,e){const t=zl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function O2e(n,e){const t=zl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function k2e(n,e){const t=zl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function N2e(n,e){n.uniform1iv(this.addr,e)}function B2e(n,e){n.uniform2iv(this.addr,e)}function z2e(n,e){n.uniform3iv(this.addr,e)}function U2e(n,e){n.uniform4iv(this.addr,e)}function H2e(n,e){n.uniform1uiv(this.addr,e)}function G2e(n,e){n.uniform2uiv(this.addr,e)}function V2e(n,e){n.uniform3uiv(this.addr,e)}function W2e(n,e){n.uniform4uiv(this.addr,e)}function $2e(n,e,t){const i=e.length,r=lC(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||aC,r[s])}function q2e(n,e,t){const i=e.length,r=lC(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||cC,r[s])}function j2e(n){switch(n){case 5126:return R2e;case 35664:return P2e;case 35665:return I2e;case 35666:return D2e;case 35674:return F2e;case 35675:return O2e;case 35676:return k2e;case 5124:case 35670:return N2e;case 35667:case 35671:return B2e;case 35668:case 35672:return z2e;case 35669:case 35673:return U2e;case 5125:return H2e;case 36294:return G2e;case 36295:return V2e;case 36296:return W2e;case 35678:case 36198:case 36298:case 36306:case 35682:return $2e;case 35680:case 36300:case 36308:case 36293:return q2e}}function X2e(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=L2e(e.type)}function uC(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=j2e(e.type)}uC.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),zn(e,n)};function hC(n){this.id=n,this.seq=[],this.map={}}hC.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const xv=/(\w+)(\])?(\[|\.)?/g;function CS(n,e){n.seq.push(e),n.map[e.id]=e}function Y2e(n,e,t){const i=n.name,r=i.length;for(xv.lastIndex=0;;){const s=xv.exec(i),o=xv.lastIndex;let a=s[1];const c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){CS(t,l===void 0?new X2e(a,n,e):new uC(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new hC(a),CS(t,h)),t=h}}}function _o(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);Y2e(r,s,this)}}_o.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};_o.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};_o.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};_o.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function LS(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Z2e=0;function J2e(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function fC(n){switch(n){case li:return["Linear","( value )"];case Sm:return["sRGB","( value )"];case Q_:return["RGBE","( value )"];case Y2:return["RGBM","( value, 7.0 )"];case Z2:return["RGBM","( value, 16.0 )"];case J2:return["RGBD","( value, 256.0 )"];case K_:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case WSe:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function RS(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&r===""?"":t.toUpperCase()+`

`+r+`

`+J2e(n.getShaderSource(e))}function dc(n,e){const t=fC(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function K2e(n,e){const t=fC(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Q2e(n,e){let t;switch(e){case GMe:t="Linear";break;case VMe:t="Reinhard";break;case WMe:t="OptimizedCineon";break;case $Me:t="ACESFilmic";break;case qMe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function eCe(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Au).join(`
`)}function tCe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function nCe(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Au(n){return n!==""}function PS(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IS(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function ry(n){return n.replace(iCe,rCe)}function rCe(n,e){const t=ht[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ry(t)}const sCe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,oCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DS(n){return n.replace(oCe,dC).replace(sCe,aCe)}function aCe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dC(n,e,t,i)}function dC(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function FS(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cCe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===V2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xMe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Tu&&(e="SHADOWMAP_TYPE_VSM"),e}function lCe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case xm:case bm:e="ENVMAP_TYPE_CUBE";break;case wm:case Z_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uCe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case bm:case Z_:e="ENVMAP_MODE_REFRACTION";break}return e}function hCe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case _m:e="ENVMAP_BLENDING_MULTIPLY";break;case UMe:e="ENVMAP_BLENDING_MIX";break;case HMe:e="ENVMAP_BLENDING_ADD";break}return e}function fCe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=cCe(t),l=lCe(t),u=uCe(t),h=hCe(t),f=n.gammaFactor>0?n.gammaFactor:1,d=t.isWebGL2?"":eCe(t),p=tCe(s),v=r.createProgram();let y,g,m=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[p].filter(Au).join(`
`),y.length>0&&(y+=`
`),g=[d,p].filter(Au).join(`
`),g.length>0&&(g+=`
`)):(y=[FS(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Au).join(`
`),g=[d,FS(t),"#define SHADER_NAME "+t.shaderName,p,"#define GAMMA_FACTOR "+f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheenTint?"#define USE_SHEEN":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==da?"#define TONE_MAPPING":"",t.toneMapping!==da?ht.tonemapping_pars_fragment:"",t.toneMapping!==da?Q2e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===vo?"#define OPAQUE":"",ht.encodings_pars_fragment,t.map?dc("mapTexelToLinear",t.mapEncoding):"",t.matcap?dc("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?dc("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?dc("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularTintMap?dc("specularTintMapTexelToLinear",t.specularTintMapEncoding):"",t.lightMap?dc("lightMapTexelToLinear",t.lightMapEncoding):"",K2e("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Au).join(`
`)),o=ry(o),o=PS(o,t),o=IS(o,t),a=ry(a),a=PS(a,t),a=IS(a,t),o=DS(o),a=DS(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(m=`#version 300 es
`,y=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,g=["#define varying in",t.glslVersion===rS?"":"out highp vec4 pc_fragColor;",t.glslVersion===rS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const w=m+y+o,b=m+g+a,E=LS(r,35633,w),S=LS(r,35632,b);if(r.attachShader(v,E),r.attachShader(v,S),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const z=r.getProgramInfoLog(v).trim(),_=r.getShaderInfoLog(E).trim(),x=r.getShaderInfoLog(S).trim();let T=!0,A=!0;if(r.getProgramParameter(v,35714)===!1){T=!1;const M=RS(r,E,"vertex"),L=RS(r,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+`

Program Info Log: `+z+`
`+M+`
`+L)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(_===""||x==="")&&(A=!1);A&&(this.diagnostics={runnable:T,programLog:z,vertexShader:{log:_,prefix:y},fragmentShader:{log:x,prefix:g}})}r.deleteShader(E),r.deleteShader(S);let P;this.getUniforms=function(){return P===void 0&&(P=new _o(r,v)),P};let N;return this.getAttributes=function(){return N===void 0&&(N=nCe(r,v)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=Z2e++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=S,this}function dCe(n,e,t,i,r,s,o){const a=[],c=r.isWebGL2,l=r.logarithmicDepthBuffer,u=r.floatVertexTextures,h=r.maxVertexUniforms,f=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function y(P){const z=P.skeleton.bones;if(u)return 1024;{const x=Math.floor((h-20)/4),T=Math.min(x,z.length);return T<z.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+z.length+" bones. This GPU supports "+T+"."),0):T}}function g(P){let N;return P&&P.isTexture?N=P.encoding:P&&P.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),N=P.texture.encoding):N=li,N}function m(P,N,z,_,x){const T=_.fog,A=P.isMeshStandardMaterial?_.environment:null,M=(P.isMeshStandardMaterial?t:e).get(P.envMap||A),L=p[P.type],I=x.isSkinnedMesh?y(x):0;P.precision!==null&&(d=r.getMaxPrecision(P.precision),d!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",d,"instead."));let k,W;if(L){const oe=Lr[L];k=oe.vertexShader,W=oe.fragmentShader}else k=P.vertexShader,W=P.fragmentShader;const j=n.getRenderTarget(),G=P.alphaTest>0,ee=P.clearcoat>0;return{isWebGL2:c,shaderID:L,shaderName:P.type,vertexShader:k,fragmentShader:W,defines:P.defines,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:d,instancing:x.isInstancedMesh===!0,instancingColor:x.isInstancedMesh===!0&&x.instanceColor!==null,supportsVertexTextures:f,outputEncoding:j!==null?g(j.texture):n.outputEncoding,map:!!P.map,mapEncoding:g(P.map),matcap:!!P.matcap,matcapEncoding:g(P.matcap),envMap:!!M,envMapMode:M&&M.mapping,envMapEncoding:g(M),envMapCubeUV:!!M&&(M.mapping===wm||M.mapping===Z_),lightMap:!!P.lightMap,lightMapEncoding:g(P.lightMap),aoMap:!!P.aoMap,emissiveMap:!!P.emissiveMap,emissiveMapEncoding:g(P.emissiveMap),bumpMap:!!P.bumpMap,normalMap:!!P.normalMap,objectSpaceNormalMap:P.normalMapType===jSe,tangentSpaceNormalMap:P.normalMapType===Fl,clearcoat:ee,clearcoatMap:ee&&!!P.clearcoatMap,clearcoatRoughnessMap:ee&&!!P.clearcoatRoughnessMap,clearcoatNormalMap:ee&&!!P.clearcoatNormalMap,displacementMap:!!P.displacementMap,roughnessMap:!!P.roughnessMap,metalnessMap:!!P.metalnessMap,specularMap:!!P.specularMap,specularIntensityMap:!!P.specularIntensityMap,specularTintMap:!!P.specularTintMap,specularTintMapEncoding:g(P.specularTintMap),alphaMap:!!P.alphaMap,alphaTest:G,gradientMap:!!P.gradientMap,sheenTint:!!P.sheenTint&&(P.sheenTint.r>0||P.sheenTint.g>0||P.sheenTint.b>0),transmission:P.transmission>0,transmissionMap:!!P.transmissionMap,thicknessMap:!!P.thicknessMap,combine:P.combine,vertexTangents:!!P.normalMap&&!!x.geometry&&!!x.geometry.attributes.tangent,vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!x.geometry&&!!x.geometry.attributes.color&&x.geometry.attributes.color.itemSize===4,vertexUvs:!!P.map||!!P.bumpMap||!!P.normalMap||!!P.specularMap||!!P.alphaMap||!!P.emissiveMap||!!P.roughnessMap||!!P.metalnessMap||!!P.clearcoatMap||!!P.clearcoatRoughnessMap||!!P.clearcoatNormalMap||!!P.displacementMap||!!P.transmissionMap||!!P.thicknessMap||!!P.specularIntensityMap||!!P.specularTintMap,uvsVertexOnly:!(P.map||P.bumpMap||P.normalMap||P.specularMap||P.alphaMap||P.emissiveMap||P.roughnessMap||P.metalnessMap||P.clearcoatNormalMap||P.transmission>0||P.transmissionMap||P.thicknessMap||P.specularIntensityMap||P.specularTintMap)&&!!P.displacementMap,fog:!!T,useFog:P.fog,fogExp2:T&&T.isFogExp2,flatShading:!!P.flatShading,sizeAttenuation:P.sizeAttenuation,logarithmicDepthBuffer:l,skinning:x.isSkinnedMesh===!0&&I>0,maxBones:I,useVertexTexture:u,morphTargets:!!x.geometry&&!!x.geometry.morphAttributes.position,morphNormals:!!x.geometry&&!!x.geometry.morphAttributes.normal,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:P.format,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&z.length>0,shadowMapType:n.shadowMap.type,toneMapping:P.toneMapped?n.toneMapping:da,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===ml,flipSided:P.side===ln,depthPacking:P.depthPacking!==void 0?P.depthPacking:!1,index0AttributeName:P.index0AttributeName,extensionDerivatives:P.extensions&&P.extensions.derivatives,extensionFragDepth:P.extensions&&P.extensions.fragDepth,extensionDrawBuffers:P.extensions&&P.extensions.drawBuffers,extensionShaderTextureLOD:P.extensions&&P.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}}function w(P){const N=[];if(P.shaderID?N.push(P.shaderID):(N.push(P.fragmentShader),N.push(P.vertexShader)),P.defines!==void 0)for(const z in P.defines)N.push(z),N.push(P.defines[z]);if(P.isRawShaderMaterial===!1){for(let z=0;z<v.length;z++)N.push(P[v[z]]);N.push(n.outputEncoding),N.push(n.gammaFactor)}return N.push(P.customProgramCacheKey),N.join()}function b(P){const N=p[P.type];let z;if(N){const _=Lr[N];z=hEe.clone(_.uniforms)}else z=P.uniforms;return z}function E(P,N){let z;for(let _=0,x=a.length;_<x;_++){const T=a[_];if(T.cacheKey===N){z=T,++z.usedTimes;break}}return z===void 0&&(z=new fCe(n,N,P,s),a.push(z)),z}function S(P){if(--P.usedTimes===0){const N=a.indexOf(P);a[N]=a[a.length-1],a.pop(),P.destroy()}}return{getParameters:m,getProgramCacheKey:w,getUniforms:b,acquireProgram:E,releaseProgram:S,programs:a}}function pCe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function mCe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function OS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kS(n){const e=[];let t=0;const i=[],r=[],s=[],o={id:-1};function a(){t=0,i.length=0,r.length=0,s.length=0}function c(d,p,v,y,g,m){let w=e[t];const b=n.get(v);return w===void 0?(w={id:d.id,object:d,geometry:p,material:v,program:b.program||o,groupOrder:y,renderOrder:d.renderOrder,z:g,group:m},e[t]=w):(w.id=d.id,w.object=d,w.geometry=p,w.material=v,w.program=b.program||o,w.groupOrder=y,w.renderOrder=d.renderOrder,w.z=g,w.group=m),t++,w}function l(d,p,v,y,g,m){const w=c(d,p,v,y,g,m);v.transmission>0?r.push(w):v.transparent===!0?s.push(w):i.push(w)}function u(d,p,v,y,g,m){const w=c(d,p,v,y,g,m);v.transmission>0?r.unshift(w):v.transparent===!0?s.unshift(w):i.unshift(w)}function h(d,p){i.length>1&&i.sort(d||mCe),r.length>1&&r.sort(p||OS),s.length>1&&s.sort(p||OS)}function f(){for(let d=t,p=e.length;d<p;d++){const v=e[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.program=null,v.group=null}}return{opaque:i,transmissive:r,transparent:s,init:a,push:l,unshift:u,finish:f,sort:h}}function gCe(n){let e=new WeakMap;function t(r,s){let o;return e.has(r)===!1?(o=new kS(n),e.set(r,[o])):s>=e.get(r).length?(o=new kS(n),e.get(r).push(o)):o=e.get(r)[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}function vCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ce,color:new Ge};break;case"SpotLight":t={position:new ce,direction:new ce,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ce,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ce,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":t={color:new Ge,position:new ce,halfWidth:new ce,halfHeight:new ce};break}return n[e.id]=t,t}}}function yCe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let _Ce=0;function xCe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function bCe(n,e){const t=new vCe,i=yCe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new ce);const s=new ce,o=new $e,a=new $e;function c(u,h){let f=0,d=0,p=0;for(let z=0;z<9;z++)r.probe[z].set(0,0,0);let v=0,y=0,g=0,m=0,w=0,b=0,E=0,S=0;u.sort(xCe);const P=h!==!0?Math.PI:1;for(let z=0,_=u.length;z<_;z++){const x=u[z],T=x.color,A=x.intensity,M=x.distance,L=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)f+=T.r*A*P,d+=T.g*A*P,p+=T.b*A*P;else if(x.isLightProbe)for(let I=0;I<9;I++)r.probe[I].addScaledVector(x.sh.coefficients[I],A);else if(x.isDirectionalLight){const I=t.get(x);if(I.color.copy(x.color).multiplyScalar(x.intensity*P),x.castShadow){const k=x.shadow,W=i.get(x);W.shadowBias=k.bias,W.shadowNormalBias=k.normalBias,W.shadowRadius=k.radius,W.shadowMapSize=k.mapSize,r.directionalShadow[v]=W,r.directionalShadowMap[v]=L,r.directionalShadowMatrix[v]=x.shadow.matrix,b++}r.directional[v]=I,v++}else if(x.isSpotLight){const I=t.get(x);if(I.position.setFromMatrixPosition(x.matrixWorld),I.color.copy(T).multiplyScalar(A*P),I.distance=M,I.coneCos=Math.cos(x.angle),I.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),I.decay=x.decay,x.castShadow){const k=x.shadow,W=i.get(x);W.shadowBias=k.bias,W.shadowNormalBias=k.normalBias,W.shadowRadius=k.radius,W.shadowMapSize=k.mapSize,r.spotShadow[g]=W,r.spotShadowMap[g]=L,r.spotShadowMatrix[g]=x.shadow.matrix,S++}r.spot[g]=I,g++}else if(x.isRectAreaLight){const I=t.get(x);I.color.copy(T).multiplyScalar(A),I.halfWidth.set(x.width*.5,0,0),I.halfHeight.set(0,x.height*.5,0),r.rectArea[m]=I,m++}else if(x.isPointLight){const I=t.get(x);if(I.color.copy(x.color).multiplyScalar(x.intensity*P),I.distance=x.distance,I.decay=x.decay,x.castShadow){const k=x.shadow,W=i.get(x);W.shadowBias=k.bias,W.shadowNormalBias=k.normalBias,W.shadowRadius=k.radius,W.shadowMapSize=k.mapSize,W.shadowCameraNear=k.camera.near,W.shadowCameraFar=k.camera.far,r.pointShadow[y]=W,r.pointShadowMap[y]=L,r.pointShadowMatrix[y]=x.shadow.matrix,E++}r.point[y]=I,y++}else if(x.isHemisphereLight){const I=t.get(x);I.skyColor.copy(x.color).multiplyScalar(A*P),I.groundColor.copy(x.groundColor).multiplyScalar(A*P),r.hemi[w]=I,w++}}m>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=De.LTC_FLOAT_1,r.rectAreaLTC2=De.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=De.LTC_HALF_1,r.rectAreaLTC2=De.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=d,r.ambient[2]=p;const N=r.hash;(N.directionalLength!==v||N.pointLength!==y||N.spotLength!==g||N.rectAreaLength!==m||N.hemiLength!==w||N.numDirectionalShadows!==b||N.numPointShadows!==E||N.numSpotShadows!==S)&&(r.directional.length=v,r.spot.length=g,r.rectArea.length=m,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=E,r.spotShadowMatrix.length=S,N.directionalLength=v,N.pointLength=y,N.spotLength=g,N.rectAreaLength=m,N.hemiLength=w,N.numDirectionalShadows=b,N.numPointShadows=E,N.numSpotShadows=S,r.version=_Ce++)}function l(u,h){let f=0,d=0,p=0,v=0,y=0;const g=h.matrixWorldInverse;for(let m=0,w=u.length;m<w;m++){const b=u[m];if(b.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),f++}else if(b.isSpotLight){const E=r.spot[p];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),E.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(g),p++}else if(b.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),a.identity(),o.copy(b.matrixWorld),o.premultiply(g),a.extractRotation(o),E.halfWidth.set(b.width*.5,0,0),E.halfHeight.set(0,b.height*.5,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),v++}else if(b.isPointLight){const E=r.point[d];E.position.setFromMatrixPosition(b.matrixWorld),E.position.applyMatrix4(g),d++}else if(b.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(b.matrixWorld),E.direction.transformDirection(g),E.direction.normalize(),y++}}}return{setup:c,setupView:l,state:r}}function NS(n,e){const t=new bCe(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function c(h){t.setup(i,h)}function l(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:l,pushLight:o,pushShadow:a}}function wCe(n,e){let t=new WeakMap;function i(s,o=0){let a;return t.has(s)===!1?(a=new NS(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new NS(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:i,dispose:r}}class pC extends Un{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=$Se,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}pC.prototype.isMeshDepthMaterial=!0;class mC extends Un{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new ce,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}mC.prototype.isMeshDistanceMaterial=!0;var MCe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
uniform float samples;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,SCe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function gC(n,e,t){let i=new Tm;const r=new Le,s=new Le,o=new Lt,a=new pC({depthPacking:qSe}),c=new mC,l={},u=t.maxTextureSize,h={0:ln,1:zh,2:ml},f=new Ca({uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4},samples:{value:8}},vertexShader:SCe,fragmentShader:MCe}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new Nt;p.setAttribute("position",new Et(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new ii(p,f),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=V2,this.render=function(b,E,S){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||b.length===0)return;const P=n.getRenderTarget(),N=n.getActiveCubeFace(),z=n.getActiveMipmapLevel(),_=n.state;_.setBlending(go),_.buffers.color.setClear(1,1,1,1),_.buffers.depth.setTest(!0),_.setScissorTest(!1);for(let x=0,T=b.length;x<T;x++){const A=b[x],M=A.shadow;if(M===void 0){console.warn("THREE.WebGLShadowMap:",A,"has no shadow.");continue}if(M.autoUpdate===!1&&M.needsUpdate===!1)continue;r.copy(M.mapSize);const L=M.getFrameExtents();if(r.multiply(L),s.copy(M.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/L.x),r.x=s.x*L.x,M.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/L.y),r.y=s.y*L.y,M.mapSize.y=s.y)),M.map===null&&!M.isPointLightShadow&&this.type===Tu){const k={minFilter:Oi,magFilter:Oi,format:Si};M.map=new Hr(r.x,r.y,k),M.map.texture.name=A.name+".shadowMap",M.mapPass=new Hr(r.x,r.y,k),M.camera.updateProjectionMatrix()}if(M.map===null){const k={minFilter:xn,magFilter:xn,format:Si};M.map=new Hr(r.x,r.y,k),M.map.texture.name=A.name+".shadowMap",M.camera.updateProjectionMatrix()}n.setRenderTarget(M.map),n.clear();const I=M.getViewportCount();for(let k=0;k<I;k++){const W=M.getViewport(k);o.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),_.viewport(o),M.updateMatrices(A,k),i=M.getFrustum(),w(E,S,M.camera,A,this.type)}!M.isPointLightShadow&&this.type===Tu&&g(M,S),M.needsUpdate=!1}y.needsUpdate=!1,n.setRenderTarget(P,N,z)};function g(b,E){const S=e.update(v);f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,f.uniforms.samples.value=b.blurSamples,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(E,null,S,f,v,null),d.uniforms.shadow_pass.value=b.mapPass.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,d.uniforms.samples.value=b.blurSamples,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(E,null,S,d,v,null)}function m(b,E,S,P,N,z,_){let x=null;const T=P.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(T!==void 0?x=T:x=P.isPointLight===!0?c:a,n.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0){const A=x.uuid,M=S.uuid;let L=l[A];L===void 0&&(L={},l[A]=L);let I=L[M];I===void 0&&(I=x.clone(),L[M]=I),x=I}return x.visible=S.visible,x.wireframe=S.wireframe,_===Tu?x.side=S.shadowSide!==null?S.shadowSide:S.side:x.side=S.shadowSide!==null?S.shadowSide:h[S.side],x.alphaMap=S.alphaMap,x.alphaTest=S.alphaTest,x.clipShadows=S.clipShadows,x.clippingPlanes=S.clippingPlanes,x.clipIntersection=S.clipIntersection,x.displacementMap=S.displacementMap,x.displacementScale=S.displacementScale,x.displacementBias=S.displacementBias,x.wireframeLinewidth=S.wireframeLinewidth,x.linewidth=S.linewidth,P.isPointLight===!0&&x.isMeshDistanceMaterial===!0&&(x.referencePosition.setFromMatrixPosition(P.matrixWorld),x.nearDistance=N,x.farDistance=z),x}function w(b,E,S,P,N){if(b.visible===!1)return;if(b.layers.test(E.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&N===Tu)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,b.matrixWorld);const x=e.update(b),T=b.material;if(Array.isArray(T)){const A=x.groups;for(let M=0,L=A.length;M<L;M++){const I=A[M],k=T[I.materialIndex];if(k&&k.visible){const W=m(b,x,k,P,S.near,S.far,N);n.renderBufferDirect(S,null,x,W,b,I)}}}else if(T.visible){const A=m(b,x,T,P,S.near,S.far,N);n.renderBufferDirect(S,null,x,A,b,null)}}const _=b.children;for(let x=0,T=_.length;x<T;x++)w(_[x],E,S,P,N)}}function ECe(n,e,t){const i=t.isWebGL2;function r(){let ne=!1;const ve=new Lt;let ue=null;const xe=new Lt(0,0,0,0);return{setMask:function(Ee){ue!==Ee&&!ne&&(n.colorMask(Ee,Ee,Ee,Ee),ue=Ee)},setLocked:function(Ee){ne=Ee},setClear:function(Ee,Be,ft,dt,rt){rt===!0&&(Ee*=dt,Be*=dt,ft*=dt),ve.set(Ee,Be,ft,dt),xe.equals(ve)===!1&&(n.clearColor(Ee,Be,ft,dt),xe.copy(ve))},reset:function(){ne=!1,ue=null,xe.set(-1,0,0,0)}}}function s(){let ne=!1,ve=null,ue=null,xe=null;return{setTest:function(Ee){Ee?de(2929):ae(2929)},setMask:function(Ee){ve!==Ee&&!ne&&(n.depthMask(Ee),ve=Ee)},setFunc:function(Ee){if(ue!==Ee){if(Ee)switch(Ee){case DMe:n.depthFunc(512);break;case FMe:n.depthFunc(519);break;case OMe:n.depthFunc(513);break;case K0:n.depthFunc(515);break;case kMe:n.depthFunc(514);break;case NMe:n.depthFunc(518);break;case BMe:n.depthFunc(516);break;case zMe:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ue=Ee}},setLocked:function(Ee){ne=Ee},setClear:function(Ee){xe!==Ee&&(n.clearDepth(Ee),xe=Ee)},reset:function(){ne=!1,ve=null,ue=null,xe=null}}}function o(){let ne=!1,ve=null,ue=null,xe=null,Ee=null,Be=null,ft=null,dt=null,rt=null;return{setTest:function(st){ne||(st?de(2960):ae(2960))},setMask:function(st){ve!==st&&!ne&&(n.stencilMask(st),ve=st)},setFunc:function(st,dn,ui){(ue!==st||xe!==dn||Ee!==ui)&&(n.stencilFunc(st,dn,ui),ue=st,xe=dn,Ee=ui)},setOp:function(st,dn,ui){(Be!==st||ft!==dn||dt!==ui)&&(n.stencilOp(st,dn,ui),Be=st,ft=dn,dt=ui)},setLocked:function(st){ne=st},setClear:function(st){rt!==st&&(n.clearStencil(st),rt=st)},reset:function(){ne=!1,ve=null,ue=null,xe=null,Ee=null,Be=null,ft=null,dt=null,rt=null}}}const a=new r,c=new s,l=new o;let u={},h=null,f={},d=null,p=!1,v=null,y=null,g=null,m=null,w=null,b=null,E=null,S=!1,P=null,N=null,z=null,_=null,x=null;const T=n.getParameter(35661);let A=!1,M=0;const L=n.getParameter(7938);L.indexOf("WebGL")!==-1?(M=parseFloat(/^WebGL (\d)/.exec(L)[1]),A=M>=1):L.indexOf("OpenGL ES")!==-1&&(M=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),A=M>=2);let I=null,k={};const W=n.getParameter(3088),j=n.getParameter(2978),G=new Lt().fromArray(W),ee=new Lt().fromArray(j);function se(ne,ve,ue){const xe=new Uint8Array(4),Ee=n.createTexture();n.bindTexture(ne,Ee),n.texParameteri(ne,10241,9728),n.texParameteri(ne,10240,9728);for(let Be=0;Be<ue;Be++)n.texImage2D(ve+Be,0,6408,1,1,0,6408,5121,xe);return Ee}const oe={};oe[3553]=se(3553,3553,1),oe[34067]=se(34067,34069,6),a.setClear(0,0,0,1),c.setClear(1),l.setClear(0),de(2929),c.setFunc(K0),F(!1),U(UM),de(2884),re(go);function de(ne){u[ne]!==!0&&(n.enable(ne),u[ne]=!0)}function ae(ne){u[ne]!==!1&&(n.disable(ne),u[ne]=!1)}function O(ne){ne!==h&&(n.bindFramebuffer(36160,ne),h=ne)}function B(ne,ve){return ve===null&&h!==null&&(ve=h),f[ne]!==ve?(n.bindFramebuffer(ne,ve),f[ne]=ve,i&&(ne===36009&&(f[36160]=ve),ne===36160&&(f[36009]=ve)),!0):!1}function Z(ne){return d!==ne?(n.useProgram(ne),d=ne,!0):!1}const V={[Tc]:32774,[wMe]:32778,[MMe]:32779};if(i)V[WM]=32775,V[$M]=32776;else{const ne=e.get("EXT_blend_minmax");ne!==null&&(V[WM]=ne.MIN_EXT,V[$M]=ne.MAX_EXT)}const J={[SMe]:0,[EMe]:1,[TMe]:768,[$2]:770,[IMe]:776,[RMe]:774,[CMe]:772,[AMe]:769,[q2]:771,[PMe]:775,[LMe]:773};function re(ne,ve,ue,xe,Ee,Be,ft,dt){if(ne===go){p===!0&&(ae(3042),p=!1);return}if(p===!1&&(de(3042),p=!0),ne!==bMe){if(ne!==v||dt!==S){if((y!==Tc||w!==Tc)&&(n.blendEquation(32774),y=Tc,w=Tc),dt)switch(ne){case Ku:n.blendFuncSeparate(1,771,1,771);break;case HM:n.blendFunc(1,1);break;case GM:n.blendFuncSeparate(0,0,769,771);break;case VM:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case Ku:n.blendFuncSeparate(770,771,1,771);break;case HM:n.blendFunc(770,1);break;case GM:n.blendFunc(0,769);break;case VM:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}g=null,m=null,b=null,E=null,v=ne,S=dt}return}Ee=Ee||ve,Be=Be||ue,ft=ft||xe,(ve!==y||Ee!==w)&&(n.blendEquationSeparate(V[ve],V[Ee]),y=ve,w=Ee),(ue!==g||xe!==m||Be!==b||ft!==E)&&(n.blendFuncSeparate(J[ue],J[xe],J[Be],J[ft]),g=ue,m=xe,b=Be,E=ft),v=ne,S=null}function D(ne,ve){ne.side===ml?ae(2884):de(2884);let ue=ne.side===ln;ve&&(ue=!ue),F(ue),ne.blending===Ku&&ne.transparent===!1?re(go):re(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.premultipliedAlpha),c.setFunc(ne.depthFunc),c.setTest(ne.depthTest),c.setMask(ne.depthWrite),a.setMask(ne.colorWrite);const xe=ne.stencilWrite;l.setTest(xe),xe&&(l.setMask(ne.stencilWriteMask),l.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),l.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),$(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?de(32926):ae(32926)}function F(ne){P!==ne&&(ne?n.frontFace(2304):n.frontFace(2305),P=ne)}function U(ne){ne!==yMe?(de(2884),ne!==N&&(ne===UM?n.cullFace(1029):ne===_Me?n.cullFace(1028):n.cullFace(1032))):ae(2884),N=ne}function K(ne){ne!==z&&(A&&n.lineWidth(ne),z=ne)}function $(ne,ve,ue){ne?(de(32823),(_!==ve||x!==ue)&&(n.polygonOffset(ve,ue),_=ve,x=ue)):ae(32823)}function R(ne){ne?de(3089):ae(3089)}function C(ne){ne===void 0&&(ne=33984+T-1),I!==ne&&(n.activeTexture(ne),I=ne)}function q(ne,ve){I===null&&C();let ue=k[I];ue===void 0&&(ue={type:void 0,texture:void 0},k[I]=ue),(ue.type!==ne||ue.texture!==ve)&&(n.bindTexture(ne,ve||oe[ne]),ue.type=ne,ue.texture=ve)}function X(){const ne=k[I];ne!==void 0&&ne.type!==void 0&&(n.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function H(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function le(){try{n.texImage2D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function he(){try{n.texImage3D.apply(n,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function fe(ne){G.equals(ne)===!1&&(n.scissor(ne.x,ne.y,ne.z,ne.w),G.copy(ne))}function pe(ne){ee.equals(ne)===!1&&(n.viewport(ne.x,ne.y,ne.z,ne.w),ee.copy(ne))}function Y(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},I=null,k={},h=null,f={},d=null,p=!1,v=null,y=null,g=null,m=null,w=null,b=null,E=null,S=!1,P=null,N=null,z=null,_=null,x=null,G.set(0,0,n.canvas.width,n.canvas.height),ee.set(0,0,n.canvas.width,n.canvas.height),a.reset(),c.reset(),l.reset()}return{buffers:{color:a,depth:c,stencil:l},enable:de,disable:ae,bindFramebuffer:B,bindXRFramebuffer:O,useProgram:Z,setBlending:re,setMaterial:D,setFlipSided:F,setCullFace:U,setLineWidth:K,setPolygonOffset:$,setScissorTest:R,activeTexture:C,bindTexture:q,unbindTexture:X,compressedTexImage2D:H,texImage2D:le,texImage3D:he,scissor:fe,viewport:pe,reset:Y}}function TCe(n,e,t,i,r,s,o){const a=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=new WeakMap;let d,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(R,C){return p?new OffscreenCanvas(R,C):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(R,C,q,X){let H=1;if((R.width>X||R.height>X)&&(H=X/Math.max(R.width,R.height)),H<1||C===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const le=C?ZSe:Math.floor,he=le(H*R.width),fe=le(H*R.height);d===void 0&&(d=v(he,fe));const pe=q?v(he,fe):d;return pe.width=he,pe.height=fe,pe.getContext("2d").drawImage(R,0,0,he,fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+he+"x"+fe+")."),pe}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function g(R){return sS(R.width)&&sS(R.height)}function m(R){return a?!1:R.wrapS!==wi||R.wrapT!==wi||R.minFilter!==xn&&R.minFilter!==Oi}function w(R,C){return R.generateMipmaps&&C&&R.minFilter!==xn&&R.minFilter!==Oi}function b(R,C,q,X,H=1){n.generateMipmap(R);const le=i.get(C);le.__maxMipLevel=Math.log2(Math.max(q,X,H))}function E(R,C,q){if(a===!1)return C;if(R!==null){if(n[R]!==void 0)return n[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let X=C;return C===6403&&(q===5126&&(X=33326),q===5131&&(X=33325),q===5121&&(X=33321)),C===6407&&(q===5126&&(X=34837),q===5131&&(X=34843),q===5121&&(X=32849)),C===6408&&(q===5126&&(X=34836),q===5131&&(X=34842),q===5121&&(X=32856)),(X===33325||X===33326||X===34842||X===34836)&&e.get("EXT_color_buffer_float"),X}function S(R){return R===xn||R===qM||R===jM?9728:9729}function P(R){const C=R.target;C.removeEventListener("dispose",P),z(C),C.isVideoTexture&&f.delete(C),o.memory.textures--}function N(R){const C=R.target;C.removeEventListener("dispose",N),_(C)}function z(R){const C=i.get(R);C.__webglInit!==void 0&&(n.deleteTexture(C.__webglTexture),i.remove(R))}function _(R){const C=R.texture,q=i.get(R),X=i.get(C);if(R){if(X.__webglTexture!==void 0&&(n.deleteTexture(X.__webglTexture),o.memory.textures--),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let H=0;H<6;H++)n.deleteFramebuffer(q.__webglFramebuffer[H]),q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[H]);else n.deleteFramebuffer(q.__webglFramebuffer),q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer&&n.deleteRenderbuffer(q.__webglColorRenderbuffer),q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer);if(R.isWebGLMultipleRenderTargets)for(let H=0,le=C.length;H<le;H++){const he=i.get(C[H]);he.__webglTexture&&(n.deleteTexture(he.__webglTexture),o.memory.textures--),i.remove(C[H])}i.remove(C),i.remove(R)}}let x=0;function T(){x=0}function A(){const R=x;return R>=c&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+c),x+=1,R}function M(R,C){const q=i.get(R);if(R.isVideoTexture&&D(R),R.version>0&&q.__version!==R.version){const X=R.image;if(X===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(X.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(q,R,C);return}}t.activeTexture(33984+C),t.bindTexture(3553,q.__webglTexture)}function L(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){se(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(35866,q.__webglTexture)}function I(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){se(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(32879,q.__webglTexture)}function k(R,C){const q=i.get(R);if(R.version>0&&q.__version!==R.version){oe(q,R,C);return}t.activeTexture(33984+C),t.bindTexture(34067,q.__webglTexture)}const W={[ty]:10497,[wi]:33071,[ny]:33648},j={[xn]:9728,[qM]:9984,[jM]:9986,[Oi]:9729,[jMe]:9985,[Mm]:9987};function G(R,C,q){if(q?(n.texParameteri(R,10242,W[C.wrapS]),n.texParameteri(R,10243,W[C.wrapT]),(R===32879||R===35866)&&n.texParameteri(R,32882,W[C.wrapR]),n.texParameteri(R,10240,j[C.magFilter]),n.texParameteri(R,10241,j[C.minFilter])):(n.texParameteri(R,10242,33071),n.texParameteri(R,10243,33071),(R===32879||R===35866)&&n.texParameteri(R,32882,33071),(C.wrapS!==wi||C.wrapT!==wi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(R,10240,S(C.magFilter)),n.texParameteri(R,10241,S(C.minFilter)),C.minFilter!==xn&&C.minFilter!==Oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const X=e.get("EXT_texture_filter_anisotropic");if(C.type===aa&&e.has("OES_texture_float_linear")===!1||a===!1&&C.type===Yc&&e.has("OES_texture_half_float_linear")===!1)return;(C.anisotropy>1||i.get(C).__currentAnisotropy)&&(n.texParameterf(R,X.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy)}}function ee(R,C){R.__webglInit===void 0&&(R.__webglInit=!0,C.addEventListener("dispose",P),R.__webglTexture=n.createTexture(),o.memory.textures++)}function se(R,C,q){let X=3553;C.isDataTexture2DArray&&(X=35866),C.isDataTexture3D&&(X=32879),ee(R,C),t.activeTexture(33984+q),t.bindTexture(X,R.__webglTexture),n.pixelStorei(37440,C.flipY),n.pixelStorei(37441,C.premultiplyAlpha),n.pixelStorei(3317,C.unpackAlignment),n.pixelStorei(37443,0);const H=m(C)&&g(C.image)===!1,le=y(C.image,H,!1,u),he=g(le)||a,fe=s.convert(C.format);let pe=s.convert(C.type),Y=E(C.internalFormat,fe,pe);G(X,C,he);let ne;const ve=C.mipmaps;if(C.isDepthTexture)Y=6402,a?C.type===aa?Y=36012:C.type===ep?Y=33190:C.type===Qu?Y=35056:Y=33189:C.type===aa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),C.format===Zc&&Y===6402&&C.type!==Ip&&C.type!==ep&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),C.type=Ip,pe=s.convert(C.type)),C.format===Uh&&Y===6402&&(Y=34041,C.type!==Qu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),C.type=Qu,pe=s.convert(C.type))),t.texImage2D(3553,0,Y,le.width,le.height,0,fe,pe,null);else if(C.isDataTexture)if(ve.length>0&&he){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],t.texImage2D(3553,ue,Y,ne.width,ne.height,0,fe,pe,ne.data);C.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,Y,le.width,le.height,0,fe,pe,le.data),R.__maxMipLevel=0;else if(C.isCompressedTexture){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],C.format!==Si&&C.format!==vo?fe!==null?t.compressedTexImage2D(3553,ue,Y,ne.width,ne.height,0,ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ue,Y,ne.width,ne.height,0,fe,pe,ne.data);R.__maxMipLevel=ve.length-1}else if(C.isDataTexture2DArray)t.texImage3D(35866,0,Y,le.width,le.height,le.depth,0,fe,pe,le.data),R.__maxMipLevel=0;else if(C.isDataTexture3D)t.texImage3D(32879,0,Y,le.width,le.height,le.depth,0,fe,pe,le.data),R.__maxMipLevel=0;else if(ve.length>0&&he){for(let ue=0,xe=ve.length;ue<xe;ue++)ne=ve[ue],t.texImage2D(3553,ue,Y,fe,pe,ne);C.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,Y,fe,pe,le),R.__maxMipLevel=0;w(C,he)&&b(X,C,le.width,le.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function oe(R,C,q){if(C.image.length!==6)return;ee(R,C),t.activeTexture(33984+q),t.bindTexture(34067,R.__webglTexture),n.pixelStorei(37440,C.flipY),n.pixelStorei(37441,C.premultiplyAlpha),n.pixelStorei(3317,C.unpackAlignment),n.pixelStorei(37443,0);const X=C&&(C.isCompressedTexture||C.image[0].isCompressedTexture),H=C.image[0]&&C.image[0].isDataTexture,le=[];for(let ue=0;ue<6;ue++)!X&&!H?le[ue]=y(C.image[ue],!1,!0,l):le[ue]=H?C.image[ue].image:C.image[ue];const he=le[0],fe=g(he)||a,pe=s.convert(C.format),Y=s.convert(C.type),ne=E(C.internalFormat,pe,Y);G(34067,C,fe);let ve;if(X){for(let ue=0;ue<6;ue++){ve=le[ue].mipmaps;for(let xe=0;xe<ve.length;xe++){const Ee=ve[xe];C.format!==Si&&C.format!==vo?pe!==null?t.compressedTexImage2D(34069+ue,xe,ne,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ue,xe,ne,Ee.width,Ee.height,0,pe,Y,Ee.data)}}R.__maxMipLevel=ve.length-1}else{ve=C.mipmaps;for(let ue=0;ue<6;ue++)if(H){t.texImage2D(34069+ue,0,ne,le[ue].width,le[ue].height,0,pe,Y,le[ue].data);for(let xe=0;xe<ve.length;xe++){const Be=ve[xe].image[ue].image;t.texImage2D(34069+ue,xe+1,ne,Be.width,Be.height,0,pe,Y,Be.data)}}else{t.texImage2D(34069+ue,0,ne,pe,Y,le[ue]);for(let xe=0;xe<ve.length;xe++){const Ee=ve[xe];t.texImage2D(34069+ue,xe+1,ne,pe,Y,Ee.image[ue])}}R.__maxMipLevel=ve.length}w(C,fe)&&b(34067,C,he.width,he.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function de(R,C,q,X,H){const le=s.convert(q.format),he=s.convert(q.type),fe=E(q.internalFormat,le,he);H===32879||H===35866?t.texImage3D(H,0,fe,C.width,C.height,C.depth,0,le,he,null):t.texImage2D(H,0,fe,C.width,C.height,0,le,he,null),t.bindFramebuffer(36160,R),n.framebufferTexture2D(36160,X,H,i.get(q).__webglTexture,0),t.bindFramebuffer(36160,null)}function ae(R,C,q){if(n.bindRenderbuffer(36161,R),C.depthBuffer&&!C.stencilBuffer){let X=33189;if(q){const H=C.depthTexture;H&&H.isDepthTexture&&(H.type===aa?X=36012:H.type===ep&&(X=33190));const le=re(C);n.renderbufferStorageMultisample(36161,le,X,C.width,C.height)}else n.renderbufferStorage(36161,X,C.width,C.height);n.framebufferRenderbuffer(36160,36096,36161,R)}else if(C.depthBuffer&&C.stencilBuffer){if(q){const X=re(C);n.renderbufferStorageMultisample(36161,X,35056,C.width,C.height)}else n.renderbufferStorage(36161,34041,C.width,C.height);n.framebufferRenderbuffer(36160,33306,36161,R)}else{const X=C.isWebGLMultipleRenderTargets===!0?C.texture[0]:C.texture,H=s.convert(X.format),le=s.convert(X.type),he=E(X.internalFormat,H,le);if(q){const fe=re(C);n.renderbufferStorageMultisample(36161,fe,he,C.width,C.height)}else n.renderbufferStorage(36161,he,C.width,C.height)}n.bindRenderbuffer(36161,null)}function O(R,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,R),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),M(C.depthTexture,0);const X=i.get(C.depthTexture).__webglTexture;if(C.depthTexture.format===Zc)n.framebufferTexture2D(36160,36096,3553,X,0);else if(C.depthTexture.format===Uh)n.framebufferTexture2D(36160,33306,3553,X,0);else throw new Error("Unknown depthTexture format")}function B(R){const C=i.get(R),q=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(q)throw new Error("target.depthTexture not supported in Cube render targets");O(C.__webglFramebuffer,R)}else if(q){C.__webglDepthbuffer=[];for(let X=0;X<6;X++)t.bindFramebuffer(36160,C.__webglFramebuffer[X]),C.__webglDepthbuffer[X]=n.createRenderbuffer(),ae(C.__webglDepthbuffer[X],R,!1)}else t.bindFramebuffer(36160,C.__webglFramebuffer),C.__webglDepthbuffer=n.createRenderbuffer(),ae(C.__webglDepthbuffer,R,!1);t.bindFramebuffer(36160,null)}function Z(R){const C=R.texture,q=i.get(R),X=i.get(C);R.addEventListener("dispose",N),R.isWebGLMultipleRenderTargets!==!0&&(X.__webglTexture=n.createTexture(),X.__version=C.version,o.memory.textures++);const H=R.isWebGLCubeRenderTarget===!0,le=R.isWebGLMultipleRenderTargets===!0,he=R.isWebGLMultisampleRenderTarget===!0,fe=C.isDataTexture3D||C.isDataTexture2DArray,pe=g(R)||a;if(a&&C.format===vo&&(C.type===aa||C.type===Yc)&&(C.format=Si,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),H){q.__webglFramebuffer=[];for(let Y=0;Y<6;Y++)q.__webglFramebuffer[Y]=n.createFramebuffer()}else if(q.__webglFramebuffer=n.createFramebuffer(),le)if(r.drawBuffers){const Y=R.texture;for(let ne=0,ve=Y.length;ne<ve;ne++){const ue=i.get(Y[ne]);ue.__webglTexture===void 0&&(ue.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(he)if(a){q.__webglMultisampledFramebuffer=n.createFramebuffer(),q.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,q.__webglColorRenderbuffer);const Y=s.convert(C.format),ne=s.convert(C.type),ve=E(C.internalFormat,Y,ne),ue=re(R);n.renderbufferStorageMultisample(36161,ue,ve,R.width,R.height),t.bindFramebuffer(36160,q.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,q.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),R.depthBuffer&&(q.__webglDepthRenderbuffer=n.createRenderbuffer(),ae(q.__webglDepthRenderbuffer,R,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(H){t.bindTexture(34067,X.__webglTexture),G(34067,C,pe);for(let Y=0;Y<6;Y++)de(q.__webglFramebuffer[Y],R,C,36064,34069+Y);w(C,pe)&&b(34067,C,R.width,R.height),t.unbindTexture()}else if(le){const Y=R.texture;for(let ne=0,ve=Y.length;ne<ve;ne++){const ue=Y[ne],xe=i.get(ue);t.bindTexture(3553,xe.__webglTexture),G(3553,ue,pe),de(q.__webglFramebuffer,R,ue,36064+ne,3553),w(ue,pe)&&b(3553,ue,R.width,R.height)}t.unbindTexture()}else{let Y=3553;fe&&(a?Y=C.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(Y,X.__webglTexture),G(Y,C,pe),de(q.__webglFramebuffer,R,C,36064,Y),w(C,pe)&&b(Y,C,R.width,R.height,R.depth),t.unbindTexture()}R.depthBuffer&&B(R)}function V(R){const C=g(R)||a,q=R.isWebGLMultipleRenderTargets===!0?R.texture:[R.texture];for(let X=0,H=q.length;X<H;X++){const le=q[X];if(w(le,C)){const he=R.isWebGLCubeRenderTarget?34067:3553,fe=i.get(le).__webglTexture;t.bindTexture(he,fe),b(he,le,R.width,R.height),t.unbindTexture()}}}function J(R){if(R.isWebGLMultisampleRenderTarget)if(a){const C=R.width,q=R.height;let X=16384;R.depthBuffer&&(X|=256),R.stencilBuffer&&(X|=1024);const H=i.get(R);t.bindFramebuffer(36008,H.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,H.__webglFramebuffer),n.blitFramebuffer(0,0,C,q,0,0,C,q,X,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,H.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function re(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(h,R.samples):0}function D(R){const C=o.render.frame;f.get(R)!==C&&(f.set(R,C),R.update())}let F=!1,U=!1;function K(R,C){R&&R.isWebGLRenderTarget&&(F===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),F=!0),R=R.texture),M(R,C)}function $(R,C){R&&R.isWebGLCubeRenderTarget&&(U===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),R=R.texture),k(R,C)}this.allocateTextureUnit=A,this.resetTextureUnits=T,this.setTexture2D=M,this.setTexture2DArray=L,this.setTexture3D=I,this.setTextureCube=k,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=V,this.updateMultisampleRenderTarget=J,this.safeSetTexture2D=K,this.safeSetTextureCube=$}function ACe(n,e,t){const i=t.isWebGL2;function r(s){let o;if(s===gl)return 5121;if(s===JMe)return 32819;if(s===KMe)return 32820;if(s===QMe)return 33635;if(s===XMe)return 5120;if(s===YMe)return 5122;if(s===Ip)return 5123;if(s===ZMe)return 5124;if(s===ep)return 5125;if(s===aa)return 5126;if(s===Yc)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===eSe)return 6406;if(s===vo)return 6407;if(s===Si)return 6408;if(s===tSe)return 6409;if(s===nSe)return 6410;if(s===Zc)return 6402;if(s===Uh)return 34041;if(s===rSe)return 6403;if(s===sSe)return 36244;if(s===oSe)return 33319;if(s===aSe)return 33320;if(s===cSe)return 36248;if(s===lSe)return 36249;if(s===XM||s===YM||s===ZM||s===JM)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===XM)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===YM)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ZM)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===JM)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===KM||s===QM||s===eS||s===tS)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===KM)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===QM)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===eS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===tS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===uSe)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===nS||s===iS)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===nS)return o.COMPRESSED_RGB8_ETC2;if(s===iS)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===hSe||s===fSe||s===dSe||s===pSe||s===mSe||s===gSe||s===vSe||s===ySe||s===_Se||s===xSe||s===bSe||s===wSe||s===MSe||s===SSe||s===TSe||s===ASe||s===CSe||s===LSe||s===RSe||s===PSe||s===ISe||s===DSe||s===FSe||s===OSe||s===kSe||s===NSe||s===BSe||s===zSe)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===ESe)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Qu)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class vC extends ni{constructor(e=[]){super(),this.cameras=e}}vC.prototype.isArrayCamera=!0;class Cu extends wt{constructor(){super(),this.type="Group"}}Cu.prototype.isGroup=!0;const CCe={type:"move"};class bv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ce,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ce),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ce,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ce),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(CCe))),l&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,i);if(l.joints[v.jointName]===void 0){const m=new Cu;m.matrixAutoUpdate=!1,m.visible=!1,l.joints[v.jointName]=m,l.add(m)}const g=l.joints[v.jointName];y!==null&&(g.matrix.fromArray(y.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=y.radius),g.visible=y!==null}const u=l.joints["index-finger-tip"],h=l.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,p=.005;l.inputState.pinching&&f>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}}class LCe extends Da{constructor(e,t){super();const i=this,r=e.state;let s=null,o=1,a=null,c="local-floor",l=null,u=null,h=null,f=null,d=null,p=!1,v=null,y=null,g=null,m=null,w=null,b=null;const E=[],S=new Map,P=new ni;P.layers.enable(1),P.viewport=new Lt;const N=new ni;N.layers.enable(2),N.viewport=new Lt;const z=[P,N],_=new vC;_.layers.enable(1),_.layers.enable(2);let x=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let de=E[oe];return de===void 0&&(de=new bv,E[oe]=de),de.getTargetRaySpace()},this.getControllerGrip=function(oe){let de=E[oe];return de===void 0&&(de=new bv,E[oe]=de),de.getGripSpace()},this.getHand=function(oe){let de=E[oe];return de===void 0&&(de=new bv,E[oe]=de),de.getHandSpace()};function A(oe){const de=S.get(oe.inputSource);de&&de.dispatchEvent({type:oe.type,data:oe.inputSource})}function M(){S.forEach(function(oe,de){oe.disconnect(de)}),S.clear(),x=null,T=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),h&&t.deleteFramebuffer(h),v&&t.deleteFramebuffer(v),y&&t.deleteRenderbuffer(y),g&&t.deleteRenderbuffer(g),h=null,v=null,y=null,g=null,d=null,f=null,u=null,s=null,se.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){o=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){c=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(oe){if(s=oe,s!==null){s.addEventListener("select",A),s.addEventListener("selectstart",A),s.addEventListener("selectend",A),s.addEventListener("squeeze",A),s.addEventListener("squeezestart",A),s.addEventListener("squeezeend",A),s.addEventListener("end",M),s.addEventListener("inputsourceschange",L);const de=t.getContextAttributes();if(de.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const ae={antialias:de.antialias,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,t,ae),s.updateRenderState({baseLayer:d})}else if(t instanceof WebGLRenderingContext){const ae={antialias:!0,alpha:de.alpha,depth:de.depth,stencil:de.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,t,ae),s.updateRenderState({layers:[d]})}else{p=de.antialias;let ae=null;de.depth&&(b=256,de.stencil&&(b|=1024),w=de.stencil?33306:36096,ae=de.stencil?35056:33190);const O={colorFormat:de.alpha?32856:32849,depthFormat:ae,scaleFactor:o};u=new XRWebGLBinding(s,t),f=u.createProjectionLayer(O),h=t.createFramebuffer(),s.updateRenderState({layers:[f]}),p&&(v=t.createFramebuffer(),y=t.createRenderbuffer(),t.bindRenderbuffer(36161,y),t.renderbufferStorageMultisample(36161,4,32856,f.textureWidth,f.textureHeight),r.bindFramebuffer(36160,v),t.framebufferRenderbuffer(36160,36064,36161,y),t.bindRenderbuffer(36161,null),ae!==null&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,ae,f.textureWidth,f.textureHeight),t.framebufferRenderbuffer(36160,w,36161,g),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(c),se.setContext(s),se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function L(oe){const de=s.inputSources;for(let ae=0;ae<E.length;ae++)S.set(de[ae],E[ae]);for(let ae=0;ae<oe.removed.length;ae++){const O=oe.removed[ae],B=S.get(O);B&&(B.dispatchEvent({type:"disconnected",data:O}),S.delete(O))}for(let ae=0;ae<oe.added.length;ae++){const O=oe.added[ae],B=S.get(O);B&&B.dispatchEvent({type:"connected",data:O})}}const I=new ce,k=new ce;function W(oe,de,ae){I.setFromMatrixPosition(de.matrixWorld),k.setFromMatrixPosition(ae.matrixWorld);const O=I.distanceTo(k),B=de.projectionMatrix.elements,Z=ae.projectionMatrix.elements,V=B[14]/(B[10]-1),J=B[14]/(B[10]+1),re=(B[9]+1)/B[5],D=(B[9]-1)/B[5],F=(B[8]-1)/B[0],U=(Z[8]+1)/Z[0],K=V*F,$=V*U,R=O/(-F+U),C=R*-F;de.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(C),oe.translateZ(R),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const q=V+R,X=J+R,H=K-C,le=$+(O-C),he=re*J/X*q,fe=D*J/X*q;oe.projectionMatrix.makePerspective(H,le,he,fe,q,X)}function j(oe,de){de===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(de.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(s===null)return;_.near=N.near=P.near=oe.near,_.far=N.far=P.far=oe.far,(x!==_.near||T!==_.far)&&(s.updateRenderState({depthNear:_.near,depthFar:_.far}),x=_.near,T=_.far);const de=oe.parent,ae=_.cameras;j(_,de);for(let B=0;B<ae.length;B++)j(ae[B],de);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),oe.position.copy(_.position),oe.quaternion.copy(_.quaternion),oe.scale.copy(_.scale),oe.matrix.copy(_.matrix),oe.matrixWorld.copy(_.matrixWorld);const O=oe.children;for(let B=0,Z=O.length;B<Z;B++)O[B].updateMatrixWorld(!0);ae.length===2?W(_,P,N):_.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(oe){f!==null&&(f.fixedFoveation=oe),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=oe)};let G=null;function ee(oe,de){if(l=de.getViewerPose(a),m=de,l!==null){const O=l.views;d!==null&&r.bindXRFramebuffer(d.framebuffer);let B=!1;O.length!==_.cameras.length&&(_.cameras.length=0,B=!0);for(let Z=0;Z<O.length;Z++){const V=O[Z];let J=null;if(d!==null)J=d.getViewport(V);else{const D=u.getViewSubImage(f,V);r.bindXRFramebuffer(h),D.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,w,3553,D.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,D.colorTexture,0),J=D.viewport}const re=z[Z];re.matrix.fromArray(V.transform.matrix),re.projectionMatrix.fromArray(V.projectionMatrix),re.viewport.set(J.x,J.y,J.width,J.height),Z===0&&_.matrix.copy(re.matrix),B===!0&&_.cameras.push(re)}p&&(r.bindXRFramebuffer(v),b!==null&&t.clear(b))}const ae=s.inputSources;for(let O=0;O<E.length;O++){const B=E[O],Z=ae[O];B.update(Z,de,a)}if(G&&G(oe,de),p){const O=f.textureWidth,B=f.textureHeight;r.bindFramebuffer(36008,v),r.bindFramebuffer(36009,h),t.invalidateFramebuffer(36008,[w]),t.invalidateFramebuffer(36009,[w]),t.blitFramebuffer(0,0,O,B,0,0,O,B,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,v)}m=null}const se=new nC;se.setAnimationLoop(ee),this.setAnimationLoop=function(oe){G=oe},this.dispose=function(){}}}function RCe(n){function e(g,m){g.fogColor.value.copy(m.color),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function t(g,m,w,b,E){m.isMeshBasicMaterial?i(g,m):m.isMeshLambertMaterial?(i(g,m),c(g,m)):m.isMeshToonMaterial?(i(g,m),u(g,m)):m.isMeshPhongMaterial?(i(g,m),l(g,m)):m.isMeshStandardMaterial?(i(g,m),m.isMeshPhysicalMaterial?f(g,m,E):h(g,m)):m.isMeshMatcapMaterial?(i(g,m),d(g,m)):m.isMeshDepthMaterial?(i(g,m),p(g,m)):m.isMeshDistanceMaterial?(i(g,m),v(g,m)):m.isMeshNormalMaterial?(i(g,m),y(g,m)):m.isLineBasicMaterial?(r(g,m),m.isLineDashedMaterial&&s(g,m)):m.isPointsMaterial?o(g,m,w,b):m.isSpriteMaterial?a(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.specularMap&&(g.specularMap.value=m.specularMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const w=n.get(m).envMap;if(w){g.envMap.value=w,g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio;const S=n.get(w).__maxMipLevel;S!==void 0&&(g.maxMipLevel.value=S)}m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity);let b;m.map?b=m.map:m.specularMap?b=m.specularMap:m.displacementMap?b=m.displacementMap:m.normalMap?b=m.normalMap:m.bumpMap?b=m.bumpMap:m.roughnessMap?b=m.roughnessMap:m.metalnessMap?b=m.metalnessMap:m.alphaMap?b=m.alphaMap:m.emissiveMap?b=m.emissiveMap:m.clearcoatMap?b=m.clearcoatMap:m.clearcoatNormalMap?b=m.clearcoatNormalMap:m.clearcoatRoughnessMap?b=m.clearcoatRoughnessMap:m.specularIntensityMap?b=m.specularIntensityMap:m.specularTintMap?b=m.specularTintMap:m.transmissionMap?b=m.transmissionMap:m.thicknessMap&&(b=m.thicknessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),g.uvTransform.value.copy(b.matrix));let E;m.aoMap?E=m.aoMap:m.lightMap&&(E=m.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),g.uv2Transform.value.copy(E.matrix))}function r(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function o(g,m,w,b){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*w,g.scale.value=b*.5,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let E;m.map?E=m.map:m.alphaMap&&(E=m.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),g.uvTransform.value.copy(E.matrix))}function a(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let w;m.map?w=m.map:m.alphaMap&&(w=m.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),g.uvTransform.value.copy(w.matrix))}function c(g,m){m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap)}function l(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===ln&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===ln&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===ln&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===ln&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function h(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===ln&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===ln&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),n.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m,w){h(g,m),g.ior.value=m.ior,m.sheenTint&&g.sheenTint.value.copy(m.sheenTint),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===ln&&g.clearcoatNormalScale.value.negate())),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=w.texture,g.transmissionSamplerSize.value.set(w.width,w.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap),g.attenuationDistance.value=m.attenuationDistance,g.attenuationTint.value.copy(m.attenuationTint)),g.specularIntensity.value=m.specularIntensity,g.specularTint.value.copy(m.specularTint),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap),m.specularTintMap&&(g.specularTintMap.value=m.specularTintMap)}function d(g,m){m.matcap&&(g.matcap.value=m.matcap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===ln&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===ln&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function p(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}function v(g,m){m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}function y(g,m){m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,m.side===ln&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),m.side===ln&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function PCe(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function Pt(n={}){const e=n.canvas!==void 0?n.canvas:PCe(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,c=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h=null,f=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=li,this.physicallyCorrectLights=!1,this.toneMapping=da,this.toneMappingExposure=1;const v=this;let y=!1,g=0,m=0,w=null,b=-1,E=null;const S=new Lt,P=new Lt;let N=null,z=e.width,_=e.height,x=1,T=null,A=null;const M=new Lt(0,0,z,_),L=new Lt(0,0,z,_);let I=!1;const k=[],W=new Tm;let j=!1,G=!1,ee=null;const se=new $e,oe=new ce,de={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ae(){return w===null?x:1}let O=t;function B(Q,me){for(let ge=0;ge<Q.length;ge++){const ye=Q[ge],we=e.getContext(ye,me);if(we!==null)return we}return null}try{const Q={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",dt,!1),O===null){const me=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&me.shift(),O=B(me,Q),O===null)throw B(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}O.getShaderPrecisionFormat===void 0&&(O.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Q){throw console.error("THREE.WebGLRenderer: "+Q.message),Q}let Z,V,J,re,D,F,U,K,$,R,C,q,X,H,le,he,fe,pe,Y,ne,ve,ue,xe;function Ee(){Z=new e2e(O),V=new qAe(O,Z,n),Z.init(V),ue=new ACe(O,Z,V),J=new ECe(O,Z,V),k[0]=1029,re=new i2e,D=new pCe,F=new TCe(O,Z,J,D,V,ue,re),U=new XAe(v),K=new QAe(v),$=new gEe(O,V),xe=new WAe(O,Z,$,V),R=new t2e(O,$,re,xe),C=new a2e(O,R,$,re),Y=new o2e(O),he=new jAe(D),q=new dCe(v,U,K,Z,V,xe,he),X=new RCe(D),H=new gCe(D),le=new wCe(Z,V),pe=new VAe(v,U,J,C,a),fe=new gC(v,C,V),ne=new $Ae(O,Z,re,V),ve=new n2e(O,Z,re,V),re.programs=q.programs,v.capabilities=V,v.extensions=Z,v.properties=D,v.renderLists=H,v.shadowMap=fe,v.state=J,v.info=re}Ee();const Be=new LCe(v,O);this.xr=Be,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){const Q=Z.get("WEBGL_lose_context");Q&&Q.loseContext()},this.forceContextRestore=function(){const Q=Z.get("WEBGL_lose_context");Q&&Q.restoreContext()},this.getPixelRatio=function(){return x},this.setPixelRatio=function(Q){Q!==void 0&&(x=Q,this.setSize(z,_,!1))},this.getSize=function(Q){return Q.set(z,_)},this.setSize=function(Q,me,ge){if(Be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=Q,_=me,e.width=Math.floor(Q*x),e.height=Math.floor(me*x),ge!==!1&&(e.style.width=Q+"px",e.style.height=me+"px"),this.setViewport(0,0,Q,me)},this.getDrawingBufferSize=function(Q){return Q.set(z*x,_*x).floor()},this.setDrawingBufferSize=function(Q,me,ge){z=Q,_=me,x=ge,e.width=Math.floor(Q*ge),e.height=Math.floor(me*ge),this.setViewport(0,0,Q,me)},this.getCurrentViewport=function(Q){return Q.copy(S)},this.getViewport=function(Q){return Q.copy(M)},this.setViewport=function(Q,me,ge,ye){Q.isVector4?M.set(Q.x,Q.y,Q.z,Q.w):M.set(Q,me,ge,ye),J.viewport(S.copy(M).multiplyScalar(x).floor())},this.getScissor=function(Q){return Q.copy(L)},this.setScissor=function(Q,me,ge,ye){Q.isVector4?L.set(Q.x,Q.y,Q.z,Q.w):L.set(Q,me,ge,ye),J.scissor(P.copy(L).multiplyScalar(x).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(Q){J.setScissorTest(I=Q)},this.setOpaqueSort=function(Q){T=Q},this.setTransparentSort=function(Q){A=Q},this.getClearColor=function(Q){return Q.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(Q,me,ge){let ye=0;(Q===void 0||Q)&&(ye|=16384),(me===void 0||me)&&(ye|=256),(ge===void 0||ge)&&(ye|=1024),O.clear(ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",dt,!1),H.dispose(),le.dispose(),D.dispose(),U.dispose(),K.dispose(),C.dispose(),xe.dispose(),Be.dispose(),Be.removeEventListener("sessionstart",Vi),Be.removeEventListener("sessionend",Rs),ee&&(ee.dispose(),ee=null),It.stop()};function ft(Q){Q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const Q=re.autoReset,me=fe.enabled,ge=fe.autoUpdate,ye=fe.needsUpdate,we=fe.type;Ee(),re.autoReset=Q,fe.enabled=me,fe.autoUpdate=ge,fe.needsUpdate=ye,fe.type=we}function rt(Q){const me=Q.target;me.removeEventListener("dispose",rt),st(me)}function st(Q){dn(Q),D.remove(Q)}function dn(Q){const me=D.get(Q).programs;me!==void 0&&me.forEach(function(ge){q.releaseProgram(ge)})}function ui(Q,me){Q.render(function(ge){v.renderBufferImmediate(ge,me)})}this.renderBufferImmediate=function(Q,me){xe.initAttributes();const ge=D.get(Q);Q.hasPositions&&!ge.position&&(ge.position=O.createBuffer()),Q.hasNormals&&!ge.normal&&(ge.normal=O.createBuffer()),Q.hasUvs&&!ge.uv&&(ge.uv=O.createBuffer()),Q.hasColors&&!ge.color&&(ge.color=O.createBuffer());const ye=me.getAttributes();Q.hasPositions&&(O.bindBuffer(34962,ge.position),O.bufferData(34962,Q.positionArray,35048),xe.enableAttribute(ye.position.location),O.vertexAttribPointer(ye.position.location,3,5126,!1,0,0)),Q.hasNormals&&(O.bindBuffer(34962,ge.normal),O.bufferData(34962,Q.normalArray,35048),xe.enableAttribute(ye.normal.location),O.vertexAttribPointer(ye.normal.location,3,5126,!1,0,0)),Q.hasUvs&&(O.bindBuffer(34962,ge.uv),O.bufferData(34962,Q.uvArray,35048),xe.enableAttribute(ye.uv.location),O.vertexAttribPointer(ye.uv.location,2,5126,!1,0,0)),Q.hasColors&&(O.bindBuffer(34962,ge.color),O.bufferData(34962,Q.colorArray,35048),xe.enableAttribute(ye.color.location),O.vertexAttribPointer(ye.color.location,3,5126,!1,0,0)),xe.disableUnusedAttributes(),O.drawArrays(4,0,Q.count),Q.count=0},this.renderBufferDirect=function(Q,me,ge,ye,we,ke){me===null&&(me=de);const ze=we.isMesh&&we.matrixWorld.determinant()<0,Re=Pe(Q,me,ye,we);J.setMaterial(ye,ze);let Qe=ge.index;const Ye=ge.attributes.position;if(Qe===null){if(Ye===void 0||Ye.count===0)return}else if(Qe.count===0)return;let ot=1;ye.wireframe===!0&&(Qe=R.getWireframeAttribute(ge),ot=2),(ge.morphAttributes.position!==void 0||ge.morphAttributes.normal!==void 0)&&Y.update(we,ge,ye,Re),xe.setup(we,ye,Re,ge,Qe);let Je,Ve=ne;Qe!==null&&(Je=$.get(Qe),Ve=ve,Ve.setIndex(Je));const Qn=Qe!==null?Qe.count:Ye.count,Dt=ge.drawRange.start*ot,Is=ge.drawRange.count*ot,Wi=ke!==null?ke.start*ot:0,zo=ke!==null?ke.count*ot:1/0,Ds=Math.max(Dt,Wi),pn=Math.min(Qn,Dt+Is,Wi+zo)-1,vr=Math.max(0,pn-Ds+1);if(vr!==0){if(we.isMesh)ye.wireframe===!0?(J.setLineWidth(ye.wireframeLinewidth*ae()),Ve.setMode(1)):Ve.setMode(4);else if(we.isLine){let Mn=ye.linewidth;Mn===void 0&&(Mn=1),J.setLineWidth(Mn*ae()),we.isLineSegments?Ve.setMode(1):we.isLineLoop?Ve.setMode(2):Ve.setMode(3)}else we.isPoints?Ve.setMode(0):we.isSprite&&Ve.setMode(4);if(we.isInstancedMesh)Ve.renderInstances(Ds,vr,we.count);else if(ge.isInstancedBufferGeometry){const Mn=Math.min(ge.instanceCount,ge._maxInstanceCount);Ve.renderInstances(Ds,vr,Mn)}else Ve.render(Ds,vr)}},this.compile=function(Q,me){f=le.get(Q),f.init(),p.push(f),Q.traverseVisible(function(ge){ge.isLight&&ge.layers.test(me.layers)&&(f.pushLight(ge),ge.castShadow&&f.pushShadow(ge))}),f.setupLights(v.physicallyCorrectLights),Q.traverse(function(ge){const ye=ge.material;if(ye)if(Array.isArray(ye))for(let we=0;we<ye.length;we++){const ke=ye[we];be(ke,Q,ge)}else be(ye,Q,ge)}),p.pop(),f=null};let Jn=null;function Kn(Q){Jn&&Jn(Q)}function Vi(){It.stop()}function Rs(){It.start()}const It=new nC;It.setAnimationLoop(Kn),typeof window<"u"&&It.setContext(window),this.setAnimationLoop=function(Q){Jn=Q,Be.setAnimationLoop(Q),Q===null?It.stop():It.start()},Be.addEventListener("sessionstart",Vi),Be.addEventListener("sessionend",Rs),this.render=function(Q,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;Q.autoUpdate===!0&&Q.updateMatrixWorld(),me.parent===null&&me.updateMatrixWorld(),Be.enabled===!0&&Be.isPresenting===!0&&(Be.cameraAutoUpdate===!0&&Be.updateCamera(me),me=Be.getCamera()),Q.isScene===!0&&Q.onBeforeRender(v,Q,me,w),f=le.get(Q,p.length),f.init(),p.push(f),se.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),W.setFromProjectionMatrix(se),G=this.localClippingEnabled,j=he.init(this.clippingPlanes,G,me),h=H.get(Q,d.length),h.init(),d.push(h),ts(Q,me,0,v.sortObjects),h.finish(),v.sortObjects===!0&&h.sort(T,A),j===!0&&he.beginShadows();const ge=f.state.shadowsArray;if(fe.render(ge,Q,me),j===!0&&he.endShadows(),this.info.autoReset===!0&&this.info.reset(),pe.render(h,Q),f.setupLights(v.physicallyCorrectLights),me.isArrayCamera){const ye=me.cameras;for(let we=0,ke=ye.length;we<ke;we++){const ze=ye[we];Ps(h,Q,ze,ze.viewport)}}else Ps(h,Q,me);w!==null&&(F.updateMultisampleRenderTarget(w),F.updateRenderTargetMipmap(w)),Q.isScene===!0&&Q.onAfterRender(v,Q,me),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),xe.resetDefaultState(),b=-1,E=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,d.pop(),d.length>0?h=d[d.length-1]:h=null};function ts(Q,me,ge,ye){if(Q.visible===!1)return;if(Q.layers.test(me.layers)){if(Q.isGroup)ge=Q.renderOrder;else if(Q.isLOD)Q.autoUpdate===!0&&Q.update(me);else if(Q.isLight)f.pushLight(Q),Q.castShadow&&f.pushShadow(Q);else if(Q.isSprite){if(!Q.frustumCulled||W.intersectsSprite(Q)){ye&&oe.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const ze=C.update(Q),Re=Q.material;Re.visible&&h.push(Q,ze,Re,ge,oe.z,null)}}else if(Q.isImmediateRenderObject)ye&&oe.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se),h.push(Q,null,Q.material,ge,oe.z,null);else if((Q.isMesh||Q.isLine||Q.isPoints)&&(Q.isSkinnedMesh&&Q.skeleton.frame!==re.render.frame&&(Q.skeleton.update(),Q.skeleton.frame=re.render.frame),!Q.frustumCulled||W.intersectsObject(Q))){ye&&oe.setFromMatrixPosition(Q.matrixWorld).applyMatrix4(se);const ze=C.update(Q),Re=Q.material;if(Array.isArray(Re)){const Qe=ze.groups;for(let Ye=0,ot=Qe.length;Ye<ot;Ye++){const Je=Qe[Ye],Ve=Re[Je.materialIndex];Ve&&Ve.visible&&h.push(Q,ze,Ve,ge,oe.z,Je)}}else Re.visible&&h.push(Q,ze,Re,ge,oe.z,null)}}const ke=Q.children;for(let ze=0,Re=ke.length;ze<Re;ze++)ts(ke[ze],me,ge,ye)}function Ps(Q,me,ge,ye){const we=Q.opaque,ke=Q.transmissive,ze=Q.transparent;f.setupLightsView(ge),ke.length>0&&Vl(we,me,ge),ye&&J.viewport(S.copy(ye)),we.length>0&&ie(we,me,ge),ke.length>0&&ie(ke,me,ge),ze.length>0&&ie(ze,me,ge)}function Vl(Q,me,ge){if(ee===null){const ze=o===!0&&V.isWebGL2===!0?K2:Hr;ee=new ze(1024,1024,{generateMipmaps:!0,type:ue.convert(Yc)!==null?Yc:gl,minFilter:Mm,magFilter:xn,wrapS:wi,wrapT:wi})}const ye=v.getRenderTarget();v.setRenderTarget(ee),v.clear();const we=v.toneMapping;v.toneMapping=da,ie(Q,me,ge),v.toneMapping=we,F.updateMultisampleRenderTarget(ee),F.updateRenderTargetMipmap(ee),v.setRenderTarget(ye)}function ie(Q,me,ge){const ye=me.isScene===!0?me.overrideMaterial:null;for(let we=0,ke=Q.length;we<ke;we++){const ze=Q[we],Re=ze.object,Qe=ze.geometry,Ye=ye===null?ze.material:ye,ot=ze.group;Re.layers.test(ge.layers)&&Me(Re,me,ge,Qe,Ye,ot)}}function Me(Q,me,ge,ye,we,ke){if(Q.onBeforeRender(v,me,ge,ye,we,ke),Q.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,Q.matrixWorld),Q.normalMatrix.getNormalMatrix(Q.modelViewMatrix),Q.isImmediateRenderObject){const ze=Pe(ge,me,we,Q);J.setMaterial(we),xe.reset(),ui(Q,ze)}else we.transparent===!0&&we.side===ml?(we.side=ln,we.needsUpdate=!0,v.renderBufferDirect(ge,me,ye,we,Q,ke),we.side=zh,we.needsUpdate=!0,v.renderBufferDirect(ge,me,ye,we,Q,ke),we.side=ml):v.renderBufferDirect(ge,me,ye,we,Q,ke);Q.onAfterRender(v,me,ge,ye,we,ke)}function be(Q,me,ge){me.isScene!==!0&&(me=de);const ye=D.get(Q),we=f.state.lights,ke=f.state.shadowsArray,ze=we.state.version,Re=q.getParameters(Q,we.state,ke,me,ge),Qe=q.getProgramCacheKey(Re);let Ye=ye.programs;ye.environment=Q.isMeshStandardMaterial?me.environment:null,ye.fog=me.fog,ye.envMap=(Q.isMeshStandardMaterial?K:U).get(Q.envMap||ye.environment),Ye===void 0&&(Q.addEventListener("dispose",rt),Ye=new Map,ye.programs=Ye);let ot=Ye.get(Qe);if(ot!==void 0){if(ye.currentProgram===ot&&ye.lightsStateVersion===ze)return Se(Q,Re),ot}else Re.uniforms=q.getUniforms(Q),Q.onBuild(Re,v),Q.onBeforeCompile(Re,v),ot=q.acquireProgram(Re,Qe),Ye.set(Qe,ot),ye.uniforms=Re.uniforms;const Je=ye.uniforms;(!Q.isShaderMaterial&&!Q.isRawShaderMaterial||Q.clipping===!0)&&(Je.clippingPlanes=he.uniform),Se(Q,Re),ye.needsLights=et(Q),ye.lightsStateVersion=ze,ye.needsLights&&(Je.ambientLightColor.value=we.state.ambient,Je.lightProbe.value=we.state.probe,Je.directionalLights.value=we.state.directional,Je.directionalLightShadows.value=we.state.directionalShadow,Je.spotLights.value=we.state.spot,Je.spotLightShadows.value=we.state.spotShadow,Je.rectAreaLights.value=we.state.rectArea,Je.ltc_1.value=we.state.rectAreaLTC1,Je.ltc_2.value=we.state.rectAreaLTC2,Je.pointLights.value=we.state.point,Je.pointLightShadows.value=we.state.pointShadow,Je.hemisphereLights.value=we.state.hemi,Je.directionalShadowMap.value=we.state.directionalShadowMap,Je.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Je.spotShadowMap.value=we.state.spotShadowMap,Je.spotShadowMatrix.value=we.state.spotShadowMatrix,Je.pointShadowMap.value=we.state.pointShadowMap,Je.pointShadowMatrix.value=we.state.pointShadowMatrix);const Ve=ot.getUniforms(),Qn=_o.seqWithValue(Ve.seq,Je);return ye.currentProgram=ot,ye.uniformsList=Qn,ot}function Se(Q,me){const ge=D.get(Q);ge.outputEncoding=me.outputEncoding,ge.instancing=me.instancing,ge.skinning=me.skinning,ge.morphTargets=me.morphTargets,ge.morphNormals=me.morphNormals,ge.numClippingPlanes=me.numClippingPlanes,ge.numIntersection=me.numClipIntersection,ge.vertexAlphas=me.vertexAlphas,ge.vertexTangents=me.vertexTangents}function Pe(Q,me,ge,ye){me.isScene!==!0&&(me=de),F.resetTextureUnits();const we=me.fog,ke=ge.isMeshStandardMaterial?me.environment:null,ze=w===null?v.outputEncoding:w.texture.encoding,Re=(ge.isMeshStandardMaterial?K:U).get(ge.envMap||ke),Qe=ge.vertexColors===!0&&!!ye.geometry&&!!ye.geometry.attributes.color&&ye.geometry.attributes.color.itemSize===4,Ye=!!ye.geometry&&!!ye.geometry.attributes.tangent,ot=!!ye.geometry&&!!ye.geometry.morphAttributes.position,Je=!!ye.geometry&&!!ye.geometry.morphAttributes.normal,Ve=D.get(ge),Qn=f.state.lights;if(j===!0&&(G===!0||Q!==E)){const Mn=Q===E&&ge.id===b;he.setState(ge,Q,Mn)}let Dt=!1;ge.version===Ve.__version?(Ve.needsLights&&Ve.lightsStateVersion!==Qn.state.version||Ve.outputEncoding!==ze||ye.isInstancedMesh&&Ve.instancing===!1||!ye.isInstancedMesh&&Ve.instancing===!0||ye.isSkinnedMesh&&Ve.skinning===!1||!ye.isSkinnedMesh&&Ve.skinning===!0||Ve.envMap!==Re||ge.fog&&Ve.fog!==we||Ve.numClippingPlanes!==void 0&&(Ve.numClippingPlanes!==he.numPlanes||Ve.numIntersection!==he.numIntersection)||Ve.vertexAlphas!==Qe||Ve.vertexTangents!==Ye||Ve.morphTargets!==ot||Ve.morphNormals!==Je)&&(Dt=!0):(Dt=!0,Ve.__version=ge.version);let Is=Ve.currentProgram;Dt===!0&&(Is=be(ge,me,ye));let Wi=!1,zo=!1,Ds=!1;const pn=Is.getUniforms(),vr=Ve.uniforms;if(J.useProgram(Is.program)&&(Wi=!0,zo=!0,Ds=!0),ge.id!==b&&(b=ge.id,zo=!0),Wi||E!==Q){if(pn.setValue(O,"projectionMatrix",Q.projectionMatrix),V.logarithmicDepthBuffer&&pn.setValue(O,"logDepthBufFC",2/(Math.log(Q.far+1)/Math.LN2)),E!==Q&&(E=Q,zo=!0,Ds=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const Mn=pn.map.cameraPosition;Mn!==void 0&&Mn.setValue(O,oe.setFromMatrixPosition(Q.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&pn.setValue(O,"isOrthographic",Q.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||ye.isSkinnedMesh)&&pn.setValue(O,"viewMatrix",Q.matrixWorldInverse)}if(ye.isSkinnedMesh){pn.setOptional(O,ye,"bindMatrix"),pn.setOptional(O,ye,"bindMatrixInverse");const Mn=ye.skeleton;Mn&&(V.floatVertexTextures?(Mn.boneTexture===null&&Mn.computeBoneTexture(),pn.setValue(O,"boneTexture",Mn.boneTexture,F),pn.setValue(O,"boneTextureSize",Mn.boneTextureSize)):pn.setOptional(O,Mn,"boneMatrices"))}return(zo||Ve.receiveShadow!==ye.receiveShadow)&&(Ve.receiveShadow=ye.receiveShadow,pn.setValue(O,"receiveShadow",ye.receiveShadow)),zo&&(pn.setValue(O,"toneMappingExposure",v.toneMappingExposure),Ve.needsLights&&at(vr,Ds),we&&ge.fog&&X.refreshFogUniforms(vr,we),X.refreshMaterialUniforms(vr,ge,x,_,ee),_o.upload(O,Ve.uniformsList,vr,F)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(_o.upload(O,Ve.uniformsList,vr,F),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&pn.setValue(O,"center",ye.center),pn.setValue(O,"modelViewMatrix",ye.modelViewMatrix),pn.setValue(O,"normalMatrix",ye.normalMatrix),pn.setValue(O,"modelMatrix",ye.matrixWorld),Is}function at(Q,me){Q.ambientLightColor.needsUpdate=me,Q.lightProbe.needsUpdate=me,Q.directionalLights.needsUpdate=me,Q.directionalLightShadows.needsUpdate=me,Q.pointLights.needsUpdate=me,Q.pointLightShadows.needsUpdate=me,Q.spotLights.needsUpdate=me,Q.spotLightShadows.needsUpdate=me,Q.rectAreaLights.needsUpdate=me,Q.hemisphereLights.needsUpdate=me}function et(Q){return Q.isMeshLambertMaterial||Q.isMeshToonMaterial||Q.isMeshPhongMaterial||Q.isMeshStandardMaterial||Q.isShadowMaterial||Q.isShaderMaterial&&Q.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return w},this.setRenderTarget=function(Q,me=0,ge=0){w=Q,g=me,m=ge,Q&&D.get(Q).__webglFramebuffer===void 0&&F.setupRenderTarget(Q);let ye=null,we=!1,ke=!1;if(Q){const Re=Q.texture;(Re.isDataTexture3D||Re.isDataTexture2DArray)&&(ke=!0);const Qe=D.get(Q).__webglFramebuffer;Q.isWebGLCubeRenderTarget?(ye=Qe[me],we=!0):Q.isWebGLMultisampleRenderTarget?ye=D.get(Q).__webglMultisampledFramebuffer:ye=Qe,S.copy(Q.viewport),P.copy(Q.scissor),N=Q.scissorTest}else S.copy(M).multiplyScalar(x).floor(),P.copy(L).multiplyScalar(x).floor(),N=I;if(J.bindFramebuffer(36160,ye)&&V.drawBuffers){let Re=!1;if(Q)if(Q.isWebGLMultipleRenderTargets){const Qe=Q.texture;if(k.length!==Qe.length||k[0]!==36064){for(let Ye=0,ot=Qe.length;Ye<ot;Ye++)k[Ye]=36064+Ye;k.length=Qe.length,Re=!0}}else(k.length!==1||k[0]!==36064)&&(k[0]=36064,k.length=1,Re=!0);else(k.length!==1||k[0]!==1029)&&(k[0]=1029,k.length=1,Re=!0);Re&&(V.isWebGL2?O.drawBuffers(k):Z.get("WEBGL_draw_buffers").drawBuffersWEBGL(k))}if(J.viewport(S),J.scissor(P),J.setScissorTest(N),we){const Re=D.get(Q.texture);O.framebufferTexture2D(36160,36064,34069+me,Re.__webglTexture,ge)}else if(ke){const Re=D.get(Q.texture),Qe=me||0;O.framebufferTextureLayer(36160,36064,Re.__webglTexture,ge||0,Qe)}b=-1},this.readRenderTargetPixels=function(Q,me,ge,ye,we,ke,ze){if(!(Q&&Q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Re=D.get(Q).__webglFramebuffer;if(Q.isWebGLCubeRenderTarget&&ze!==void 0&&(Re=Re[ze]),Re){J.bindFramebuffer(36160,Re);try{const Qe=Q.texture,Ye=Qe.format,ot=Qe.type;if(Ye!==Si&&ue.convert(Ye)!==O.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Je=ot===Yc&&(Z.has("EXT_color_buffer_half_float")||V.isWebGL2&&Z.has("EXT_color_buffer_float"));if(ot!==gl&&ue.convert(ot)!==O.getParameter(35738)&&!(ot===aa&&(V.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float")))&&!Je){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}O.checkFramebufferStatus(36160)===36053?me>=0&&me<=Q.width-ye&&ge>=0&&ge<=Q.height-we&&O.readPixels(me,ge,ye,we,ue.convert(Ye),ue.convert(ot),ke):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Qe=w!==null?D.get(w).__webglFramebuffer:null;J.bindFramebuffer(36160,Qe)}}},this.copyFramebufferToTexture=function(Q,me,ge=0){const ye=Math.pow(2,-ge),we=Math.floor(me.image.width*ye),ke=Math.floor(me.image.height*ye);let ze=ue.convert(me.format);V.isWebGL2&&(ze===6407&&(ze=32849),ze===6408&&(ze=32856)),F.setTexture2D(me,0),O.copyTexImage2D(3553,ge,ze,Q.x,Q.y,we,ke,0),J.unbindTexture()},this.copyTextureToTexture=function(Q,me,ge,ye=0){const we=me.image.width,ke=me.image.height,ze=ue.convert(ge.format),Re=ue.convert(ge.type);F.setTexture2D(ge,0),O.pixelStorei(37440,ge.flipY),O.pixelStorei(37441,ge.premultiplyAlpha),O.pixelStorei(3317,ge.unpackAlignment),me.isDataTexture?O.texSubImage2D(3553,ye,Q.x,Q.y,we,ke,ze,Re,me.image.data):me.isCompressedTexture?O.compressedTexSubImage2D(3553,ye,Q.x,Q.y,me.mipmaps[0].width,me.mipmaps[0].height,ze,me.mipmaps[0].data):O.texSubImage2D(3553,ye,Q.x,Q.y,ze,Re,me.image),ye===0&&ge.generateMipmaps&&O.generateMipmap(3553),J.unbindTexture()},this.copyTextureToTexture3D=function(Q,me,ge,ye,we=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ke=Q.max.x-Q.min.x+1,ze=Q.max.y-Q.min.y+1,Re=Q.max.z-Q.min.z+1,Qe=ue.convert(ye.format),Ye=ue.convert(ye.type);let ot;if(ye.isDataTexture3D)F.setTexture3D(ye,0),ot=32879;else if(ye.isDataTexture2DArray)F.setTexture2DArray(ye,0),ot=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(37440,ye.flipY),O.pixelStorei(37441,ye.premultiplyAlpha),O.pixelStorei(3317,ye.unpackAlignment);const Je=O.getParameter(3314),Ve=O.getParameter(32878),Qn=O.getParameter(3316),Dt=O.getParameter(3315),Is=O.getParameter(32877),Wi=ge.isCompressedTexture?ge.mipmaps[0]:ge.image;O.pixelStorei(3314,Wi.width),O.pixelStorei(32878,Wi.height),O.pixelStorei(3316,Q.min.x),O.pixelStorei(3315,Q.min.y),O.pixelStorei(32877,Q.min.z),ge.isDataTexture||ge.isDataTexture3D?O.texSubImage3D(ot,we,me.x,me.y,me.z,ke,ze,Re,Qe,Ye,Wi.data):ge.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),O.compressedTexSubImage3D(ot,we,me.x,me.y,me.z,ke,ze,Re,Qe,Wi.data)):O.texSubImage3D(ot,we,me.x,me.y,me.z,ke,ze,Re,Qe,Ye,Wi),O.pixelStorei(3314,Je),O.pixelStorei(32878,Ve),O.pixelStorei(3316,Qn),O.pixelStorei(3315,Dt),O.pixelStorei(32877,Is),we===0&&ye.generateMipmaps&&O.generateMipmap(ot),J.unbindTexture()},this.initTexture=function(Q){F.setTexture2D(Q,0),J.unbindTexture()},this.resetState=function(){g=0,m=0,w=null,J.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class ICe extends Pt{}ICe.prototype.isWebGL1Renderer=!0;class yC extends wt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}yC.prototype.isScene=!0;class rf{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ur()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ur()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}rf.prototype.isInterleavedBuffer=!0;const Jt=new ce;class Hh{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jt.x=this.getX(t),Jt.y=this.getY(t),Jt.z=this.getZ(t),Jt.applyMatrix4(e),this.setXYZ(t,Jt.x,Jt.y,Jt.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jt.x=this.getX(t),Jt.y=this.getY(t),Jt.z=this.getZ(t),Jt.applyNormalMatrix(e),this.setXYZ(t,Jt.x,Jt.y,Jt.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jt.x=this.getX(t),Jt.y=this.getY(t),Jt.z=this.getZ(t),Jt.transformDirection(e),this.setXYZ(t,Jt.x,Jt.y,Jt.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Et(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Hh.prototype.isInterleavedBufferAttribute=!0;class _C extends Un{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}_C.prototype.isSpriteMaterial=!0;let pc;const lu=new ce,mc=new ce,gc=new ce,vc=new Le,uu=new Le,xC=new $e,Ad=new ce,hu=new ce,Cd=new ce,BS=new Le,wv=new Le,zS=new Le;class DCe extends wt{constructor(e){if(super(),this.type="Sprite",pc===void 0){pc=new Nt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new rf(t,5);pc.setIndex([0,1,2,0,2,3]),pc.setAttribute("position",new Hh(i,3,0,!1)),pc.setAttribute("uv",new Hh(i,2,3,!1))}this.geometry=pc,this.material=e!==void 0?e:new _C,this.center=new Le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mc.setFromMatrixScale(this.matrixWorld),xC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&mc.multiplyScalar(-gc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Ld(Ad.set(-.5,-.5,0),gc,o,mc,r,s),Ld(hu.set(.5,-.5,0),gc,o,mc,r,s),Ld(Cd.set(.5,.5,0),gc,o,mc,r,s),BS.set(0,0),wv.set(1,0),zS.set(1,1);let a=e.ray.intersectTriangle(Ad,hu,Cd,!1,lu);if(a===null&&(Ld(hu.set(-.5,.5,0),gc,o,mc,r,s),wv.set(0,1),a=e.ray.intersectTriangle(Ad,Cd,hu,!1,lu),a===null))return;const c=e.ray.origin.distanceTo(lu);c<e.near||c>e.far||t.push({distance:c,point:lu.clone(),uv:hn.getUV(lu,Ad,hu,Cd,BS,wv,zS,new Le),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}DCe.prototype.isSprite=!0;function Ld(n,e,t,i,r,s){vc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(uu.x=s*vc.x-r*vc.y,uu.y=r*vc.x+s*vc.y):uu.copy(vc),n.copy(e),n.x+=uu.x,n.y+=uu.y,n.applyMatrix4(xC)}const US=new ce,HS=new Lt,GS=new Lt,FCe=new ce,VS=new $e;class bC extends ii{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $e,this.bindMatrixInverse=new $e}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Lt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;HS.fromBufferAttribute(r.attributes.skinIndex,e),GS.fromBufferAttribute(r.attributes.skinWeight,e),US.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=GS.getComponent(s);if(o!==0){const a=HS.getComponent(s);VS.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(FCe.copy(US).applyMatrix4(VS),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}bC.prototype.isSkinnedMesh=!0;class OCe extends wt{constructor(){super(),this.type="Bone"}}OCe.prototype.isBone=!0;class kCe extends Pn{constructor(e=null,t=1,i=1,r,s,o,a,c,l=xn,u=xn,h,f){super(null,o,a,c,l,u,r,s,h,f),this.image={data:e,width:t,height:i},this.magFilter=l,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}kCe.prototype.isDataTexture=!0;class sy extends Et{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}sy.prototype.isInstancedBufferAttribute=!0;const WS=new $e,$S=new $e,Rd=[],fu=new ii;class NCe extends ii{constructor(e,t,i){super(e,t),this.instanceMatrix=new sy(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(fu.geometry=this.geometry,fu.material=this.material,fu.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,WS),$S.multiplyMatrices(i,WS),fu.matrixWorld=$S,fu.raycast(e,Rd);for(let o=0,a=Rd.length;o<a;o++){const c=Rd[o];c.instanceId=s,c.object=this,t.push(c)}Rd.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new sy(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}NCe.prototype.isInstancedMesh=!0;class sf extends Un{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ge(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}sf.prototype.isLineBasicMaterial=!0;const qS=new ce,jS=new ce,XS=new $e,Mv=new Nl,Pd=new kl;class ax extends wt{constructor(e=new Nt,t=new sf){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)qS.fromBufferAttribute(t,r-1),jS.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=qS.distanceTo(jS);e.setAttribute("lineDistance",new wn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pd.copy(i.boundingSphere),Pd.applyMatrix4(r),Pd.radius+=s,e.ray.intersectsSphere(Pd)===!1)return;XS.copy(r).invert(),Mv.copy(e.ray).applyMatrix4(XS);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=new ce,u=new ce,h=new ce,f=new ce,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const p=i.index,y=i.attributes.position;if(p!==null){const g=Math.max(0,o.start),m=Math.min(p.count,o.start+o.count);for(let w=g,b=m-1;w<b;w+=d){const E=p.getX(w),S=p.getX(w+1);if(l.fromBufferAttribute(y,E),u.fromBufferAttribute(y,S),Mv.distanceSqToSegment(l,u,f,h)>c)continue;f.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(f);N<e.near||N>e.far||t.push({distance:N,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),m=Math.min(y.count,o.start+o.count);for(let w=g,b=m-1;w<b;w+=d){if(l.fromBufferAttribute(y,w),u.fromBufferAttribute(y,w+1),Mv.distanceSqToSegment(l,u,f,h)>c)continue;f.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(f);S<e.near||S>e.far||t.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ax.prototype.isLine=!0;const YS=new ce,ZS=new ce;class cx extends ax{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)YS.fromBufferAttribute(t,r),ZS.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+YS.distanceTo(ZS);e.setAttribute("lineDistance",new wn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}cx.prototype.isLineSegments=!0;class BCe extends ax{constructor(e,t){super(e,t),this.type="LineLoop"}}BCe.prototype.isLineLoop=!0;class wC extends Un{constructor(e){super(),this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}wC.prototype.isPointsMaterial=!0;const JS=new $e,oy=new Nl,Id=new kl,Dd=new ce;class zCe extends wt{constructor(e=new Nt,t=new wC){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Id.copy(i.boundingSphere),Id.applyMatrix4(r),Id.radius+=s,e.ray.intersectsSphere(Id)===!1)return;JS.copy(r).invert(),oy.copy(e.ray).applyMatrix4(JS);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a;if(i.isBufferGeometry){const l=i.index,h=i.attributes.position;if(l!==null){const f=Math.max(0,o.start),d=Math.min(l.count,o.start+o.count);for(let p=f,v=d;p<v;p++){const y=l.getX(p);Dd.fromBufferAttribute(h,y),KS(Dd,y,c,r,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let p=f,v=d;p<v;p++)Dd.fromBufferAttribute(h,p),KS(Dd,p,c,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}zCe.prototype.isPoints=!0;function KS(n,e,t,i,r,s,o){const a=oy.distanceSqToPoint(n);if(a<t){const c=new ce;oy.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class UCe extends Pn{constructor(e,t,i,r,s,o,a,c,l){super(e,t,i,r,s,o,a,c,l),this.format=a!==void 0?a:vo,this.minFilter=o!==void 0?o:Oi,this.magFilter=s!==void 0?s:Oi,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}UCe.prototype.isVideoTexture=!0;class HCe extends Pn{constructor(e,t,i,r,s,o,a,c,l,u,h,f){super(null,o,a,c,l,u,r,s,h,f),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}HCe.prototype.isCompressedTexture=!0;class GCe extends Pn{constructor(e,t,i,r,s,o,a,c,l){super(e,t,i,r,s,o,a,c,l),this.needsUpdate=!0}}GCe.prototype.isCanvasTexture=!0;class VCe extends Pn{constructor(e,t,i,r,s,o,a,c,l,u){if(u=u!==void 0?u:Zc,u!==Zc&&u!==Uh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Zc&&(i=Ip),i===void 0&&u===Uh&&(i=Qu),super(null,r,s,o,a,c,u,i,l),this.image={width:e,height:t},this.magFilter=a!==void 0?a:xn,this.minFilter=c!==void 0?c:xn,this.flipY=!1,this.generateMipmaps=!1}}VCe.prototype.isDepthTexture=!0;class Hi{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,c=s-1,l;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),l=i[r]-o,l<0)a=r+1;else if(l>0)c=r-1;else{c=r;break}if(r=c,i[r]===o)return r/(s-1);const u=i[r],f=i[r+1]-u,d=(o-u)/f;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),c=t||(o.isVector2?new Le:new ce);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ce,r=[],s=[],o=[],a=new ce,c=new $e;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new ce),r[d].normalize()}s[0]=new ce,o[0]=new ce;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),f<=l&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(xi(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(c.makeRotationAxis(a,p))}o[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(xi(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(c.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Cm extends Hi{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const i=t||new Le,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=c-this.aX,d=l-this.aY;c=f*u-d*h+this.aX,l=f*h+d*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Cm.prototype.isEllipseCurve=!0;class MC extends Cm{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}MC.prototype.isArcCurve=!0;function lx(){let n=0,e=0,t=0,i=0;function r(s,o,a,c){n=s,e=a,t=-3*s+3*o-2*a-c,i=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,l){r(o,a,l*(a-s),l*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,l,u,h){let f=(o-s)/l-(a-s)/(l+u)+(a-o)/u,d=(a-o)/u-(c-o)/(u+h)+(c-a)/h;f*=u,d*=u,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Fd=new ce,Sv=new lx,Ev=new lx,Tv=new lx;class SC extends Hi{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ce){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let l,u;this.closed||a>0?l=r[(a-1)%s]:(Fd.subVectors(r[0],r[1]).add(r[0]),l=Fd);const h=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Fd.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Fd),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(l.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(f),d),y=Math.pow(f.distanceToSquared(u),d);v<1e-4&&(v=1),p<1e-4&&(p=v),y<1e-4&&(y=v),Sv.initNonuniformCatmullRom(l.x,h.x,f.x,u.x,p,v,y),Ev.initNonuniformCatmullRom(l.y,h.y,f.y,u.y,p,v,y),Tv.initNonuniformCatmullRom(l.z,h.z,f.z,u.z,p,v,y)}else this.curveType==="catmullrom"&&(Sv.initCatmullRom(l.x,h.x,f.x,u.x,this.tension),Ev.initCatmullRom(l.y,h.y,f.y,u.y,this.tension),Tv.initCatmullRom(l.z,h.z,f.z,u.z,this.tension));return i.set(Sv.calc(c),Ev.calc(c),Tv.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ce().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}SC.prototype.isCatmullRomCurve3=!0;function QS(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,c=n*a;return(2*t-2*i+s+o)*c+(-3*t+3*i-2*s-o)*a+s*n+t}function WCe(n,e){const t=1-n;return t*t*e}function $Ce(n,e){return 2*(1-n)*n*e}function qCe(n,e){return n*n*e}function eh(n,e,t,i){return WCe(n,e)+$Ce(n,t)+qCe(n,i)}function jCe(n,e){const t=1-n;return t*t*t*e}function XCe(n,e){const t=1-n;return 3*t*t*n*e}function YCe(n,e){return 3*(1-n)*n*n*e}function ZCe(n,e){return n*n*n*e}function th(n,e,t,i,r){return jCe(n,e)+XCe(n,t)+YCe(n,i)+ZCe(n,r)}class ux extends Hi{constructor(e=new Le,t=new Le,i=new Le,r=new Le){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(th(e,r.x,s.x,o.x,a.x),th(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ux.prototype.isCubicBezierCurve=!0;class EC extends Hi{constructor(e=new ce,t=new ce,i=new ce,r=new ce){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ce){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(th(e,r.x,s.x,o.x,a.x),th(e,r.y,s.y,o.y,a.y),th(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}EC.prototype.isCubicBezierCurve3=!0;class Lm extends Hi{constructor(e=new Le,t=new Le){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Le;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Lm.prototype.isLineCurve=!0;class JCe extends Hi{constructor(e=new ce,t=new ce){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new ce){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hx extends Hi{constructor(e=new Le,t=new Le,i=new Le){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(eh(e,r.x,s.x,o.x),eh(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}hx.prototype.isQuadraticBezierCurve=!0;class fx extends Hi{constructor(e=new ce,t=new ce,i=new ce){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ce){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(eh(e,r.x,s.x,o.x),eh(e,r.y,s.y,o.y),eh(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}fx.prototype.isQuadraticBezierCurve3=!0;class dx extends Hi{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Le){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,c=r[o===0?o:o-1],l=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(QS(a,c.x,l.x,u.x,h.x),QS(a,c.y,l.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Le().fromArray(r))}return this}}dx.prototype.isSplineCurve=!0;var TC=Object.freeze({__proto__:null,ArcCurve:MC,CatmullRomCurve3:SC,CubicBezierCurve:ux,CubicBezierCurve3:EC,EllipseCurve:Cm,LineCurve:Lm,LineCurve3:JCe,QuadraticBezierCurve:hx,QuadraticBezierCurve3:fx,SplineCurve:dx});const KCe={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=AC(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,h,f,d;if(i&&(s=i3e(n,e,s,t)),n.length>80*t){a=l=n[0],c=u=n[1];for(let p=t;p<r;p+=t)h=n[p],f=n[p+1],h<a&&(a=h),f<c&&(c=f),h>l&&(l=h),f>u&&(u=f);d=Math.max(l-a,u-c),d=d!==0?1/d:0}return Gh(s,o,t,a,c,d),o}};function AC(n,e,t,i,r){let s,o;if(r===p3e(n,e,t,i)>0)for(s=e;s<t;s+=i)o=eE(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=eE(s,n[s],n[s+1],o);return o&&Rm(o,o.next)&&(Wh(o),o=o.next),o}function Ro(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Rm(t,t.next)||qt(t.prev,t,t.next)===0)){if(Wh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Gh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&c3e(n,i,r,s);let a=n,c,l;for(;n.prev!==n.next;){if(c=n.prev,l=n.next,s?e3e(n,i,r,s):QCe(n)){e.push(c.i/t),e.push(n.i/t),e.push(l.i/t),Wh(n),n=l.next,a=l.next;continue}if(n=l,n===a){o?o===1?(n=t3e(Ro(n),e,t),Gh(n,e,t,i,r,s,2)):o===2&&n3e(n,e,t,i,r,s):Gh(Ro(n),e,t,i,r,s,1);break}}}function QCe(n){const e=n.prev,t=n,i=n.next;if(qt(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Bc(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&qt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function e3e(n,e,t,i){const r=n.prev,s=n,o=n.next;if(qt(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,c=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=ay(a,c,e,t,i),f=ay(l,u,e,t,i);let d=n.prevZ,p=n.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==n.prev&&d!==n.next&&Bc(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&qt(d.prev,d,d.next)>=0||(d=d.prevZ,p!==n.prev&&p!==n.next&&Bc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&qt(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==n.prev&&d!==n.next&&Bc(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&qt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&Bc(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&qt(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function t3e(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Rm(r,s)&&CC(r,i,i.next,s)&&Vh(r,s)&&Vh(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Wh(i),Wh(i.next),i=n=s),i=i.next}while(i!==n);return Ro(i)}function n3e(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&h3e(o,a)){let c=LC(o,a);o=Ro(o,o.next),c=Ro(c,c.next),Gh(o,e,t,i,r,s),Gh(c,e,t,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function i3e(n,e,t,i){const r=[];let s,o,a,c,l;for(s=0,o=e.length;s<o;s++)a=e[s]*i,c=s<o-1?e[s+1]*i:n.length,l=AC(n,a,c,i,!1),l===l.next&&(l.steiner=!0),r.push(u3e(l));for(r.sort(r3e),s=0;s<r.length;s++)s3e(r[s],t),t=Ro(t,t.next);return t}function r3e(n,e){return n.x-e.x}function s3e(n,e){if(e=o3e(n,e),e){const t=LC(e,n);Ro(e,e.next),Ro(t,t.next)}}function o3e(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,c=o.x,l=o.y;let u=1/0,h;t=o;do i>=t.x&&t.x>=c&&i!==t.x&&Bc(r<l?i:s,r,c,l,r<l?s:i,r,t.x,t.y)&&(h=Math.abs(r-t.y)/(i-t.x),Vh(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&a3e(o,t)))&&(o=t,u=h)),t=t.next;while(t!==a);return o}function a3e(n,e){return qt(n.prev,n,e.prev)<0&&qt(e.next,n,n.next)<0}function c3e(n,e,t,i){let r=n;do r.z===null&&(r.z=ay(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,l3e(r)}function l3e(n){let e,t,i,r,s,o,a,c,l=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<l&&(a++,i=i.nextZ,!!i);e++);for(c=l;a>0||c>0&&i;)a!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(o>1);return n}function ay(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function u3e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Bc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function h3e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!f3e(n,e)&&(Vh(n,e)&&Vh(e,n)&&d3e(n,e)&&(qt(n.prev,n,e.prev)||qt(n,e.prev,e))||Rm(n,e)&&qt(n.prev,n,n.next)>0&&qt(e.prev,e,e.next)>0)}function qt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Rm(n,e){return n.x===e.x&&n.y===e.y}function CC(n,e,t,i){const r=kd(qt(n,e,t)),s=kd(qt(n,e,i)),o=kd(qt(t,i,n)),a=kd(qt(t,i,e));return!!(r!==s&&o!==a||r===0&&Od(n,t,e)||s===0&&Od(n,i,e)||o===0&&Od(t,n,i)||a===0&&Od(t,e,i))}function Od(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function kd(n){return n>0?1:n<0?-1:0}function f3e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&CC(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Vh(n,e){return qt(n.prev,n,n.next)<0?qt(n,e,n.next)>=0&&qt(n,n.prev,e)>=0:qt(n,e,n.prev)<0||qt(n,n.next,e)<0}function d3e(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function LC(n,e){const t=new cy(n.i,n.x,n.y),i=new cy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function eE(n,e,t,i){const r=new cy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function cy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function p3e(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class xo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return xo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];tE(e),nE(i,e);let o=e.length;t.forEach(tE);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,nE(i,t[c]);const a=KCe.triangulate(i,r);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function tE(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function nE(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ul extends Nt{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];o(l)}this.setAttribute("position",new wn(r,3)),this.setAttribute("uv",new wn(s,2)),this.computeVertexNormals();function o(a){const c=[],l=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:100,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:6,p=t.bevelSize!==void 0?t.bevelSize:d-2,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,m=t.UVGenerator!==void 0?t.UVGenerator:m3e;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let w,b=!1,E,S,P,N;g&&(w=g.getSpacedPoints(u),b=!0,f=!1,E=g.computeFrenetFrames(u,!1),S=new ce,P=new ce,N=new ce),f||(y=0,d=0,p=0,v=0);const z=a.extractPoints(l);let _=z.shape;const x=z.holes;if(!xo.isClockWise(_)){_=_.reverse();for(let D=0,F=x.length;D<F;D++){const U=x[D];xo.isClockWise(U)&&(x[D]=U.reverse())}}const A=xo.triangulateShape(_,x),M=_;for(let D=0,F=x.length;D<F;D++){const U=x[D];_=_.concat(U)}function L(D,F,U){return F||console.error("THREE.ExtrudeGeometry: vec does not exist"),F.clone().multiplyScalar(U).add(D)}const I=_.length,k=A.length;function W(D,F,U){let K,$,R;const C=D.x-F.x,q=D.y-F.y,X=U.x-D.x,H=U.y-D.y,le=C*C+q*q,he=C*H-q*X;if(Math.abs(he)>Number.EPSILON){const fe=Math.sqrt(le),pe=Math.sqrt(X*X+H*H),Y=F.x-q/fe,ne=F.y+C/fe,ve=U.x-H/pe,ue=U.y+X/pe,xe=((ve-Y)*H-(ue-ne)*X)/(C*H-q*X);K=Y+C*xe-D.x,$=ne+q*xe-D.y;const Ee=K*K+$*$;if(Ee<=2)return new Le(K,$);R=Math.sqrt(Ee/2)}else{let fe=!1;C>Number.EPSILON?X>Number.EPSILON&&(fe=!0):C<-Number.EPSILON?X<-Number.EPSILON&&(fe=!0):Math.sign(q)===Math.sign(H)&&(fe=!0),fe?(K=-q,$=C,R=Math.sqrt(le)):(K=C,$=q,R=Math.sqrt(le/2))}return new Le(K/R,$/R)}const j=[];for(let D=0,F=M.length,U=F-1,K=D+1;D<F;D++,U++,K++)U===F&&(U=0),K===F&&(K=0),j[D]=W(M[D],M[U],M[K]);const G=[];let ee,se=j.concat();for(let D=0,F=x.length;D<F;D++){const U=x[D];ee=[];for(let K=0,$=U.length,R=$-1,C=K+1;K<$;K++,R++,C++)R===$&&(R=0),C===$&&(C=0),ee[K]=W(U[K],U[R],U[C]);G.push(ee),se=se.concat(ee)}for(let D=0;D<y;D++){const F=D/y,U=d*Math.cos(F*Math.PI/2),K=p*Math.sin(F*Math.PI/2)+v;for(let $=0,R=M.length;$<R;$++){const C=L(M[$],j[$],K);B(C.x,C.y,-U)}for(let $=0,R=x.length;$<R;$++){const C=x[$];ee=G[$];for(let q=0,X=C.length;q<X;q++){const H=L(C[q],ee[q],K);B(H.x,H.y,-U)}}}const oe=p+v;for(let D=0;D<I;D++){const F=f?L(_[D],se[D],oe):_[D];b?(P.copy(E.normals[0]).multiplyScalar(F.x),S.copy(E.binormals[0]).multiplyScalar(F.y),N.copy(w[0]).add(P).add(S),B(N.x,N.y,N.z)):B(F.x,F.y,0)}for(let D=1;D<=u;D++)for(let F=0;F<I;F++){const U=f?L(_[F],se[F],oe):_[F];b?(P.copy(E.normals[D]).multiplyScalar(U.x),S.copy(E.binormals[D]).multiplyScalar(U.y),N.copy(w[D]).add(P).add(S),B(N.x,N.y,N.z)):B(U.x,U.y,h/u*D)}for(let D=y-1;D>=0;D--){const F=D/y,U=d*Math.cos(F*Math.PI/2),K=p*Math.sin(F*Math.PI/2)+v;for(let $=0,R=M.length;$<R;$++){const C=L(M[$],j[$],K);B(C.x,C.y,h+U)}for(let $=0,R=x.length;$<R;$++){const C=x[$];ee=G[$];for(let q=0,X=C.length;q<X;q++){const H=L(C[q],ee[q],K);b?B(H.x,H.y+w[u-1].y,w[u-1].x+U):B(H.x,H.y,h+U)}}}de(),ae();function de(){const D=r.length/3;if(f){let F=0,U=I*F;for(let K=0;K<k;K++){const $=A[K];Z($[2]+U,$[1]+U,$[0]+U)}F=u+y*2,U=I*F;for(let K=0;K<k;K++){const $=A[K];Z($[0]+U,$[1]+U,$[2]+U)}}else{for(let F=0;F<k;F++){const U=A[F];Z(U[2],U[1],U[0])}for(let F=0;F<k;F++){const U=A[F];Z(U[0]+I*u,U[1]+I*u,U[2]+I*u)}}i.addGroup(D,r.length/3-D,0)}function ae(){const D=r.length/3;let F=0;O(M,F),F+=M.length;for(let U=0,K=x.length;U<K;U++){const $=x[U];O($,F),F+=$.length}i.addGroup(D,r.length/3-D,1)}function O(D,F){let U=D.length;for(;--U>=0;){const K=U;let $=U-1;$<0&&($=D.length-1);for(let R=0,C=u+y*2;R<C;R++){const q=I*R,X=I*(R+1),H=F+K+q,le=F+$+q,he=F+$+X,fe=F+K+X;V(H,le,he,fe)}}}function B(D,F,U){c.push(D),c.push(F),c.push(U)}function Z(D,F,U){J(D),J(F),J(U);const K=r.length/3,$=m.generateTopUV(i,r,K-3,K-2,K-1);re($[0]),re($[1]),re($[2])}function V(D,F,U,K){J(D),J(F),J(K),J(F),J(U),J(K);const $=r.length/3,R=m.generateSideWallUV(i,r,$-6,$-3,$-2,$-1);re(R[0]),re(R[1]),re(R[3]),re(R[1]),re(R[2]),re(R[3])}function J(D){r.push(c[D*3+0]),r.push(c[D*3+1]),r.push(c[D*3+2])}function re(D){s.push(D.x),s.push(D.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return g3e(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new TC[r.type]().fromJSON(r)),new Ul(i,e.options)}}const m3e={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],c=e[i*3+1],l=e[r*3],u=e[r*3+1];return[new Le(s,o),new Le(a,c),new Le(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],l=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],d=e[r*3+1],p=e[r*3+2],v=e[s*3],y=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-l)?[new Le(o,1-c),new Le(l,1-h),new Le(f,1-p),new Le(v,1-g)]:[new Le(a,1-c),new Le(u,1-h),new Le(d,1-p),new Le(y,1-g)]}};function g3e(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class px extends Nt{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(a,c,u),a+=c,c=0;this.setIndex(i),this.setAttribute("position",new wn(r,3)),this.setAttribute("normal",new wn(s,3)),this.setAttribute("uv",new wn(o,2));function l(u){const h=r.length/3,f=u.extractPoints(t);let d=f.shape;const p=f.holes;xo.isClockWise(d)===!1&&(d=d.reverse());for(let y=0,g=p.length;y<g;y++){const m=p[y];xo.isClockWise(m)===!0&&(p[y]=m.reverse())}const v=xo.triangulateShape(d,p);for(let y=0,g=p.length;y<g;y++){const m=p[y];d=d.concat(m)}for(let y=0,g=d.length;y<g;y++){const m=d[y];r.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(let y=0,g=v.length;y<g;y++){const m=v[y],w=m[0]+h,b=m[1]+h,E=m[2]+h;i.push(w,b,E),c+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return v3e(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new px(i,e.curveSegments)}}function v3e(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class y3e extends Un{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ge(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}y3e.prototype.isShadowMaterial=!0;class RC extends Un{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}RC.prototype.isMeshStandardMaterial=!0;class _3e extends RC{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenTint=new Ge(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Ge(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(e)}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheenTint.copy(e.sheenTint),this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}_3e.prototype.isMeshPhysicalMaterial=!0;class x3e extends Un{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_m,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}x3e.prototype.isMeshPhongMaterial=!0;class b3e extends Un{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ge(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}b3e.prototype.isMeshToonMaterial=!0;class w3e extends Un{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}w3e.prototype.isMeshNormalMaterial=!0;class M3e extends Un{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_m,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}M3e.prototype.isMeshLambertMaterial=!0;class S3e extends Un{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ge(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fl,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}S3e.prototype.isMeshMatcapMaterial=!0;class E3e extends sf{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}E3e.prototype.isLineDashedMaterial=!0;const Gt={arraySlice:function(n,e,t){return Gt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const l=s.tracks[c],u=l.getValueSize(),h=[],f=[];for(let d=0;d<l.times.length;++d){const p=l.times[d]*r;if(!(p<t||p>=i)){h.push(l.times[d]);for(let v=0;v<u;++v)f.push(l.values[d*u+v])}}h.length!==0&&(l.times=Gt.convertArray(h,l.times.constructor),l.values=Gt.convertArray(f,l.values.constructor),o.push(l))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const l=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===c});if(l===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const p=a.times.length-1;let v;if(s<=a.times[0]){const g=u,m=h-u;v=Gt.arraySlice(a.values,g,m)}else if(s>=a.times[p]){const g=p*h+u,m=g+h-u;v=Gt.arraySlice(a.values,g,m)}else{const g=a.createInterpolant(),m=u,w=h-u;g.evaluate(s),v=Gt.arraySlice(g.resultBuffer,m,w)}c==="quaternion"&&new ai().fromArray(v).normalize().conjugate().toArray(v);const y=l.times.length;for(let g=0;g<y;++g){const m=g*d+f;if(c==="quaternion")ai.multiplyQuaternionsFlat(l.values,m,v,0,l.values,m);else{const w=d-f*2;for(let b=0;b<w;++b)l.values[m+b]-=v[b]}}}return n.blendMode=X2,n}};class Po{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Po.prototype.beforeStart_=Po.prototype.copySampleValue_;Po.prototype.afterEnd_=Po.prototype.copySampleValue_;class T3e extends Po{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:kc,endingEnd:kc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Nc:s=e,a=2*t-i;break;case Op:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Nc:o=e,c=2*i-t;break;case Op:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}const l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(i-t)/(r-t),v=p*p,y=v*p,g=-f*y+2*f*v-f*p,m=(1+f)*y+(-1.5-2*f)*v+(-.5+f)*p+1,w=(-1-d)*y+(1.5+d)*v+.5*p,b=d*y-d*v;for(let E=0;E!==a;++E)s[E]=g*o[u+E]+m*o[l+E]+w*o[c+E]+b*o[h+E];return s}}class PC extends Po{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),h=1-u;for(let f=0;f!==a;++f)s[f]=o[l+f]*h+o[c+f]*u;return s}}class A3e extends Po{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class es{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gt.convertArray(t,this.TimeBufferType),this.values=Gt.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Gt.convertArray(e.times,Array),values:Gt.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new A3e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new PC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new T3e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Dp:t=this.InterpolantFactoryMethodDiscrete;break;case Fp:t=this.InterpolantFactoryMethodLinear;break;case $g:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dp;case this.InterpolantFactoryMethodLinear:return Fp;case this.InterpolantFactoryMethodSmooth:return $g}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Gt.arraySlice(i,s,o),this.values=Gt.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&Gt.isTypedArray(r))for(let a=0,c=r.length;a!==c;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){const e=Gt.arraySlice(this.times),t=Gt.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===$g,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{const h=a*i,f=h-i,d=h+i;for(let p=0;p!==i;++p){const v=t[h+p];if(v!==t[f+p]||v!==t[d+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const h=a*i,f=o*i;for(let d=0;d!==i;++d)t[f+d]=t[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=Gt.arraySlice(e,0,o),this.values=Gt.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=Gt.arraySlice(this.times,0),t=Gt.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}es.prototype.TimeBufferType=Float32Array;es.prototype.ValueBufferType=Float32Array;es.prototype.DefaultInterpolation=Fp;class Hl extends es{}Hl.prototype.ValueTypeName="bool";Hl.prototype.ValueBufferType=Array;Hl.prototype.DefaultInterpolation=Dp;Hl.prototype.InterpolantFactoryMethodLinear=void 0;Hl.prototype.InterpolantFactoryMethodSmooth=void 0;class IC extends es{}IC.prototype.ValueTypeName="color";class Bp extends es{}Bp.prototype.ValueTypeName="number";class C3e extends Po{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t);let l=e*a;for(let u=l+a;l!==u;l+=4)ai.slerpFlat(s,0,o,l-a,o,l,c);return s}}class of extends es{InterpolantFactoryMethodLinear(e){return new C3e(this.times,this.values,this.getValueSize(),e)}}of.prototype.ValueTypeName="quaternion";of.prototype.DefaultInterpolation=Fp;of.prototype.InterpolantFactoryMethodSmooth=void 0;class Gl extends es{}Gl.prototype.ValueTypeName="string";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=Dp;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class zp extends es{}zp.prototype.ValueTypeName="vector";class iE{constructor(e,t=-1,i,r=J_){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ur(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(R3e(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(es.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);const u=Gt.getKeyframeOrder(c);c=Gt.sortedArray(c,1,u),l=Gt.sortedArray(l,1,u),!r&&c[0]===0&&(c.push(s),l.push(l[0])),o.push(new Bp(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const l=e[a],u=l.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(l)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,f,d,p,v){if(d.length!==0){const y=[],g=[];Gt.flattenJSON(d,y,g,p),y.length!==0&&v.push(new h(f,y,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const f=l[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)d[f[p].morphTargets[v]]=-1;for(const v in d){const y=[],g=[];for(let m=0;m!==f[p].morphTargets.length;++m){const w=f[p];y.push(w.time),g.push(w.morphTarget===v?1:0)}r.push(new Bp(".morphTargetInfluence["+v+"]",y,g))}c=d.length*(o||1)}else{const d=".bones["+t[h].name+"]";i(zp,d+".position",f,"pos",r),i(of,d+".quaternion",f,"rot",r),i(zp,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,c,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function L3e(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bp;case"vector":case"vector2":case"vector3":case"vector4":return zp;case"color":return IC;case"quaternion":return of;case"bool":case"boolean":return Hl;case"string":return Gl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function R3e(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=L3e(n.type);if(n.times===void 0){const t=[],i=[];Gt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const yl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class P3e{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,c;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,h){return l.push(u,h),this},this.removeHandler=function(u){const h=l.indexOf(u);return h!==-1&&l.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=l.length;h<f;h+=2){const d=l[h],p=l[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const I3e=new P3e;class Bo{constructor(e){this.manager=e!==void 0?e:I3e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ki={};class D3e extends Bo{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;if(Ki[e]!==void 0){Ki[e].push({onLoad:t,onProgress:i,onError:r});return}const a=/^data:(.*?)(;base64)?,(.*)$/,c=e.match(a);let l;if(c){const u=c[1],h=!!c[2];let f=c[3];f=decodeURIComponent(f),h&&(f=atob(f));try{let d;const p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":const v=new Uint8Array(f.length);for(let g=0;g<f.length;g++)v[g]=f.charCodeAt(g);p==="blob"?d=new Blob([v.buffer],{type:u}):d=v.buffer;break;case"document":d=new DOMParser().parseFromString(f,u);break;case"json":d=JSON.parse(f);break;default:d=f;break}setTimeout(function(){t&&t(d),s.manager.itemEnd(e)},0)}catch(d){setTimeout(function(){r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)},0)}}else{Ki[e]=[],Ki[e].push({onLoad:t,onProgress:i,onError:r}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(u){const h=this.response,f=Ki[e];if(delete Ki[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),yl.add(e,h);for(let d=0,p=f.length;d<p;d++){const v=f[d];v.onLoad&&v.onLoad(h)}s.manager.itemEnd(e)}else{for(let d=0,p=f.length;d<p;d++){const v=f[d];v.onError&&v.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(u){const h=Ki[e];for(let f=0,d=h.length;f<d;f++){const p=h[f];p.onProgress&&p.onProgress(u)}},!1),l.addEventListener("error",function(u){const h=Ki[e];delete Ki[e];for(let f=0,d=h.length;f<d;f++){const p=h[f];p.onError&&p.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),l.addEventListener("abort",function(u){const h=Ki[e];delete Ki[e];for(let f=0,d=h.length;f<d;f++){const p=h[f];p.onError&&p.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)l.setRequestHeader(u,this.requestHeader[u]);l.send(null)}return s.manager.itemStart(e),l}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class DC extends Bo{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1),yl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(u){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class F3e extends Bo{constructor(e){super(e)}load(e,t,i,r){const s=new Em,o=new DC(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(l){o.load(e[l],function(u){s.images[l]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let l=0;l<e.length;++l)c(l);return s}}class O3e extends Bo{constructor(e){super(e)}load(e,t,i,r){const s=new Pn,o=new DC(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a;const c=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;s.format=c?vo:Si,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class k3e extends Hi{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lm(t,e))}getPoint(e){const t=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=t){const s=i[r]-t,o=this.curves[r],a=o.getLength(),c=a===0?0:1-s/a;return o.getPointAt(c)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new TC[r.type]().fromJSON(r))}return this}}class ly extends k3e{constructor(e){super(),this.type="Path",this.currentPoint=new Le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Lm(this.currentPoint.clone(),new Le(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new hx(this.currentPoint.clone(),new Le(e,t),new Le(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new ux(this.currentPoint.clone(),new Le(e,t),new Le(i,r),new Le(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new dx(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,c){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,s,o,a,c),this}absellipse(e,t,i,r,s,o,a,c){const l=new Cm(e,t,i,r,s,o,a,c);if(this.curves.length>0){const h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class mx extends ly{constructor(e){super(e),this.uuid=Ur(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ly().fromJSON(r))}return this}}class Jr extends wt{constructor(e,t=1){super(),this.type="Light",this.color=new Ge(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Jr.prototype.isLight=!0;class N3e extends Jr{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.groundColor=new Ge(t)}copy(e){return Jr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}N3e.prototype.isHemisphereLight=!0;const rE=new $e,sE=new ce,oE=new ce;class gx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tm,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new Lt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;sE.setFromMatrixPosition(e.matrixWorld),t.position.copy(sE),oE.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oE),t.updateMatrixWorld(),rE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FC extends gx{constructor(){super(new ni(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=iy*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}FC.prototype.isSpotLightShadow=!0;class B3e extends Jr{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.target=new wt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new FC}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}B3e.prototype.isSpotLight=!0;const aE=new $e,du=new ce,Av=new ce;class OC extends gx{constructor(){super(new ni(90,1,.5,500)),this._frameExtents=new Le(4,2),this._viewportCount=6,this._viewports=[new Lt(2,1,1,1),new Lt(0,1,1,1),new Lt(3,1,1,1),new Lt(1,1,1,1),new Lt(3,0,1,1),new Lt(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),du.setFromMatrixPosition(e.matrixWorld),i.position.copy(du),Av.copy(i.position),Av.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Av),i.updateMatrixWorld(),r.makeTranslation(-du.x,-du.y,-du.z),aE.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aE)}}OC.prototype.isPointLightShadow=!0;class z3e extends Jr{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new OC}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}z3e.prototype.isPointLight=!0;class kC extends gx{constructor(){super(new rx(-5,5,5,-5,.5,500))}}kC.prototype.isDirectionalLightShadow=!0;class U3e extends Jr{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.target=new wt,this.shadow=new kC}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}U3e.prototype.isDirectionalLight=!0;class H3e extends Jr{constructor(e,t){super(e,t),this.type="AmbientLight"}}H3e.prototype.isAmbientLight=!0;class G3e extends Jr{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}G3e.prototype.isRectAreaLight=!0;class NC{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}NC.prototype.isSphericalHarmonics3=!0;class vx extends Jr{constructor(e=new NC,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}vx.prototype.isLightProbe=!0;class V3e{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}}class W3e extends Nt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}W3e.prototype.isInstancedBufferGeometry=!0;class $3e extends Bo{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=yl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){yl.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}$3e.prototype.isImageBitmapLoader=!0;let Nd;const q3e={getContext:function(){return Nd===void 0&&(Nd=new(window.AudioContext||window.webkitAudioContext)),Nd},setContext:function(n){Nd=n}};class j3e extends Bo{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new D3e(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const c=a.slice(0);q3e.getContext().decodeAudioData(c,function(u){t(u)})}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}}class X3e extends vx{constructor(e,t,i=1){super(void 0,i);const r=new Ge().set(e),s=new Ge().set(t),o=new ce(r.r,r.g,r.b),a=new ce(s.r,s.g,s.b),c=Math.sqrt(Math.PI),l=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}}X3e.prototype.isHemisphereLightProbe=!0;class Y3e extends vx{constructor(e,t=1){super(void 0,t);const i=new Ge().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Y3e.prototype.isAmbientLightProbe=!0;class Z3e extends wt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class J3e{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,l=t+t;c!==l;++c)if(i[c]!==i[c+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){ai.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;ai.multiplyQuaternionsFlat(e,o,e,t,e,i),ai.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const yx="\\[\\]\\.:\\/",K3e=new RegExp("["+yx+"]","g"),_x="[^"+yx+"]",Q3e="[^"+yx.replace("\\.","")+"]",eLe=/((?:WC+[\/:])*)/.source.replace("WC",_x),tLe=/(WCOD+)?/.source.replace("WCOD",Q3e),nLe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_x),iLe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_x),rLe=new RegExp("^"+eLe+tLe+nLe+iLe+"$"),sLe=["material","materials","bones"];class oLe{constructor(e,t,i){const r=i||St.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class St{constructor(e,t,i){this.path=t,this.parsedPath=i||St.parseTrackName(t),this.node=St.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new St.Composite(e,t,i):new St(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(K3e,"")}static parseTrackName(e){const t=rLe.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);sLe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=i(a.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=St.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[r];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}St.Composite=oLe;St.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};St.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};St.prototype.GetterByBindingType=[St.prototype._getValue_direct,St.prototype._getValue_array,St.prototype._getValue_arrayElement,St.prototype._getValue_toArray];St.prototype.SetterByBindingTypeAndVersioning=[[St.prototype._setValue_direct,St.prototype._setValue_direct_setNeedsUpdate,St.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[St.prototype._setValue_array,St.prototype._setValue_array_setNeedsUpdate,St.prototype._setValue_array_setMatrixWorldNeedsUpdate],[St.prototype._setValue_arrayElement,St.prototype._setValue_arrayElement_setNeedsUpdate,St.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[St.prototype._setValue_fromArray,St.prototype._setValue_fromArray_setNeedsUpdate,St.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class aLe{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:kc,endingEnd:kc};for(let l=0;l!==o;++l){const u=s[l].createInterpolant(null);a[l]=u,u.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HSe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,l=a.sampleValues;return c[0]=s,c[1]=s+i,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;if(c<0||i===0)return;this._startTime=null,t=i*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case X2:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulateAdditive(a);break;case J_:default:for(let u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===GSe;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===USe){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Nc,r.endingEnd=Nc):(e?r.endingStart=this.zeroSlopeAtStart?Nc:kc:r.endingStart=Op,t?r.endingEnd=this.zeroSlopeAtEnd?Nc:kc:r.endingEnd=Op)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=i,this}}class cLe extends Da{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,c=i.uuid,l=this._bindingsByRootAndName;let u=l[c];u===void 0&&(u={},l[c]=u);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let p=u[d];if(p!==void 0)o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,c,d));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;p=new J3e(St.create(i,d,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,c,d),o[h]=p}a[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,l=c[c.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,c[u]=l,c.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],c=t[t.length-1],l=e._cacheIndex;c._cacheIndex=l,t[l]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new PC(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?iE.findByName(r,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let l=null;if(i===void 0&&(o!==null?i=o.blendMode:i=J_),c!==void 0){const h=c.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;l=c.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new aLe(this,o,t,i);return this._bindAction(u,l),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?iE.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let l=0;l!==c;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const l=o[a];this._deactivateAction(l);const u=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}cLe.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class lLe extends rf{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}lLe.prototype.isInstancedInterleavedBuffer=!0;class uLe extends wt{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}uLe.prototype.isImmediateRenderObject=!0;const Ks=new ce,Bd=new $e,Cv=new $e;class hLe extends cx{constructor(e){const t=BC(e),i=new Nt,r=[],s=[],o=new Ge(0,0,1),a=new Ge(0,1,0);for(let l=0;l<t.length;l++){const u=t[l];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new wn(r,3)),i.setAttribute("color",new wn(s,3));const c=new sf({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Cv.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Bd.multiplyMatrices(Cv,a.matrixWorld),Ks.setFromMatrixPosition(Bd),r.setXYZ(o,Ks.x,Ks.y,Ks.z),Bd.multiplyMatrices(Cv,a.parent.matrixWorld),Ks.setFromMatrixPosition(Bd),r.setXYZ(o+1,Ks.x,Ks.y,Ks.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function BC(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,BC(n.children[t]));return e}class fLe extends cx{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ge(i),r=new Ge(r);const s=t/2,o=e/t,a=e/2,c=[],l=[];for(let f=0,d=0,p=-a;f<=t;f++,p+=o){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);const v=f===s?i:r;v.toArray(l,d),d+=3,v.toArray(l,d),d+=3,v.toArray(l,d),d+=3,v.toArray(l,d),d+=3}const u=new Nt;u.setAttribute("position",new wn(c,3)),u.setAttribute("color",new wn(l,3));const h=new sf({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}}const dLe=new Float32Array(1);new Int32Array(dLe.buffer);Hi.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Hi.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};ly.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};fLe.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};hLe.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Bo.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),V3e.extractUrlBase(n)};Bo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};gr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};gr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};gr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};gr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};gr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};kl.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Tm.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Cn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Cn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Cn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Cn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Cn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Cn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};$e.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};$e.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};$e.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new ce().setFromMatrixColumn(this,3)};$e.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};$e.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};$e.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};$e.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};$e.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};$e.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};$e.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};$e.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};$e.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};$e.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};$e.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};$e.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};$e.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};$e.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};$e.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};$e.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};_s.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};ai.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};ai.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Nl.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Nl.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Nl.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};hn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};hn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};hn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};hn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};hn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};hn.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hn.getBarycoord(n,e,t,i,r)};hn.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hn.getNormal(n,e,t,i)};mx.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};mx.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ul(this,n)};mx.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new px(this,n)};Le.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Le.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Le.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};ce.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};ce.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};ce.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};ce.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};ce.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};ce.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};ce.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ce.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ce.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Lt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Lt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};wt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};wt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};wt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};wt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};wt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(wt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});ii.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(ii.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),VSe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});bC.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};ni.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Jr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Et.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===lo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(lo)}}});Et.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?lo:bs),this};Et.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Et.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Nt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};Nt.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Et(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};Nt.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};Nt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Nt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Nt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};Nt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Nt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});rf.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?lo:bs),this};rf.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ul.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Ul.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Ul.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};yC.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Un.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ge}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===W2}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Ca.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Pt.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};Pt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Pt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Pt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Pt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Pt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Pt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Pt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Pt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Pt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Pt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Pt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Pt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Pt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Pt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Pt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Pt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Pt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Pt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Pt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Pt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Pt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Pt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Pt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Pt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Pt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Sm:li}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(gC.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Hr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});Z3e.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new j3e().load(n,function(i){e.setBuffer(i)}),this};nx.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};nx.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Ol.crossOrigin=void 0;Ol.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new O3e;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Ol.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new F3e;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Ol.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Ol.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:G2}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=G2);class zC{constructor(){this.pos=new ce,this.dir=new ce,this.right=new ce,this.up=new ce,this.dist=0,this.widthScale=1,this.sharp=!1}lerpPathPoints(e,t,i){this.pos.lerpVectors(e.pos,t.pos,i),this.dir.lerpVectors(e.dir,t.dir,i),this.up.lerpVectors(e.up,t.up,i),this.right.lerpVectors(e.right,t.right,i),this.dist=(t.dist-e.dist)*i+e.dist,this.widthScale=(t.widthScale-e.widthScale)*i+e.widthScale}copy(e){this.pos.copy(e.pos),this.dir.copy(e.dir),this.up.copy(e.up),this.right.copy(e.right),this.dist=e.dist,this.widthScale=e.widthScale}}const uy=new ce,UC=new ce,pLe=new ce,cE=new $e,mLe=new fx;function gLe(n,e,t,i,r,s){const o=uy.subVectors(e,n),a=UC.subVectors(t,e),c=o.length(),l=a.length();o.normalize(),a.normalize();const u=Math.min((r?c/2:c)*.999999,i);s.v0.copy(e).sub(o.multiplyScalar(u)),s.v1.copy(e);const h=Math.min(l/2*.999999,i);return s.v2.copy(e).add(a.multiplyScalar(h)),s}class vLe{constructor(){this.array=[],this.count=0}set(e,t=.1,i=10,r=null,s=!1){if(e=e.slice(0),e.length<2){console.warn("PathPointList: points length less than 2."),this.count=0;return}s&&!e[0].equals(e[e.length-1])&&e.push(new ce().copy(e[0]));for(let o=0,a=e.length;o<a;o++)if(o===0)this._start(e[o],e[o+1],r);else if(o===a-1)if(s){this._corner(e[o],e[1],t,i,r);const c=this.array[0].dist;this.array[0].copy(this.array[this.count-1]),this.array[0].dist=c}else this._end(e[o]);else this._corner(e[o],e[o+1],t,i,r)}distance(){return this.count>0?this.array[this.count-1].dist:0}_getByIndex(e){return this.array[e]||(this.array[e]=new zC),this.array[e]}_start(e,t,i){this.count=0;const r=this._getByIndex(this.count);if(r.pos.copy(e),r.dir.subVectors(t,e),i)r.up.copy(i);else{let s=Number.MAX_VALUE;const o=Math.abs(r.dir.x),a=Math.abs(r.dir.y),c=Math.abs(r.dir.z);o<s&&(s=o,r.up.set(1,0,0)),a<s&&(s=a,r.up.set(0,1,0)),c<s&&r.up.set(0,0,1)}r.right.crossVectors(r.dir,r.up).normalize(),r.up.crossVectors(r.right,r.dir).normalize(),r.dist=0,r.widthScale=1,r.sharp=!1,r.dir.normalize(),this.count++}_end(e){const t=this.array[this.count-1],i=this._getByIndex(this.count);i.pos.copy(e),i.dir.subVectors(e,t.pos);const r=i.dir.length();i.dir.normalize(),i.up.copy(t.up);const s=uy.crossVectors(t.dir,i.dir);if(s.length()>Number.EPSILON){s.normalize();const o=Math.acos(Math.min(Math.max(t.dir.dot(i.dir),-1),1));i.up.applyMatrix4(cE.makeRotationAxis(s,o))}i.right.crossVectors(i.dir,i.up).normalize(),i.dist=t.dist+r,i.widthScale=1,i.sharp=!1,this.count++}_corner(e,t,i,r,s){if(i>0&&r>0){const o=this.array[this.count-1],c=gLe(o.pos,e,t,i,this.count-1===0,mLe).getPoints(r);for(let l=0;l<r;l++)this._sharpCorner(c[l],c[l+1],s,l===0?1:0);c[r].equals(t)||this._sharpCorner(c[r],t,s,2)}else this._sharpCorner(e,t,s,0,!0)}_sharpCorner(e,t,i,r=0,s=!1){const o=this.array[this.count-1],a=this._getByIndex(this.count),c=uy.subVectors(e,o.pos),l=UC.subVectors(t,e),u=c.length();if(c.normalize(),l.normalize(),a.pos.copy(e),r===1?a.dir.copy(c):r===2?a.dir.copy(l):(a.dir.addVectors(c,l),a.dir.normalize()),i)a.dir.dot(i)===1?a.right.crossVectors(l,i).normalize():a.right.crossVectors(a.dir,i).normalize(),a.up.crossVectors(a.right,a.dir).normalize();else{a.up.copy(o.up);const f=pLe.crossVectors(o.dir,a.dir);if(f.length()>Number.EPSILON){f.normalize();const d=Math.acos(Math.min(Math.max(o.dir.dot(a.dir),-1),1));a.up.applyMatrix4(cE.makeRotationAxis(f,d))}a.right.crossVectors(a.dir,a.up).normalize()}a.dist=o.dist+u;const h=c.dot(l);a.widthScale=Math.min(1/Math.sqrt((1+h)/2),1.415)||1,a.sharp=Math.abs(h-1)>.05&&s,this.count++}}class yLe extends Nt{constructor(e=3e3,t=!1){super(),isNaN(e)?this._initByData(e.pathPointList,e.options,e.usage,t):this._initByMaxVertex(e,t)}_initByMaxVertex(e,t){this.setAttribute("position",new Et(new Float32Array(e*3),3).setUsage(lo)),this.setAttribute("normal",new Et(new Float32Array(e*3),3).setUsage(lo)),this.setAttribute("uv",new Et(new Float32Array(e*2),2).setUsage(lo)),t&&this.setAttribute("uv2",new Et(new Float32Array(e*2),2).setUsage(lo)),this.drawRange.start=0,this.drawRange.count=0,this.setIndex(e>65536?new Np(e*3,1):new kp(e*3,1))}_initByData(e,t={},i,r){const s=lE(e,t,r);s&&s.count!==0?(this.setAttribute("position",new Et(new Float32Array(s.position),3).setUsage(i||bs)),this.setAttribute("normal",new Et(new Float32Array(s.normal),3).setUsage(i||bs)),this.setAttribute("uv",new Et(new Float32Array(s.uv),2).setUsage(i||bs)),r&&this.setAttribute("uv2",new Et(new Float32Array(s.uv2),2).setUsage(i||bs)),this.setIndex(s.position.length/3>65536?new Np(s.indices,1):new kp(s.indices,1))):this._initByMaxVertex(2,r)}update(e,t={}){const i=!!this.getAttribute("uv2"),r=lE(e,t,i);r?(this._updateAttributes(r.position,r.normal,r.uv,i?r.uv2:null,r.indices),this.drawRange.count=r.count):this.drawRange.count=0}_resizeAttribute(e,t){let i=this.getAttribute(e);for(;i.array.length<t;){const r=i.array.length,s=new Et(new Float32Array(r*2),i.itemSize,i.normalized);s.name=i.name,s.usage=i.usage,this.setAttribute(e,s),i=s}}_resizeIndex(e){let t=this.getIndex();for(;t.array.length<e;){const i=t.array.length,r=new Et(i*2>65535?new Uint32Array(i*2):new Uint16Array(i*2),1);r.name=t.name,r.usage=t.usage,this.setIndex(r),t=r}}_updateAttributes(e,t,i,r,s){this._resizeAttribute("position",e.length);const o=this.getAttribute("position");o.array.set(e,0),o.updateRange.count=e.length,o.needsUpdate=!0,this._resizeAttribute("normal",t.length);const a=this.getAttribute("normal");a.array.set(t,0),a.updateRange.count=t.length,a.needsUpdate=!0,this._resizeAttribute("uv",i.length);const c=this.getAttribute("uv");if(c.array.set(i,0),c.updateRange.count=i.length,c.needsUpdate=!0,r){this._resizeAttribute("uv2",r.length);const u=this.getAttribute("uv2");u.array.set(r,0),u.updateRange.count=r.length,u.needsUpdate=!0}this._resizeIndex(s.length);const l=this.getIndex();l.set(s,0),l.updateRange.count=s.length,l.needsUpdate=!0}}function lE(n,e,t=!1){const i=e.width||.1,r=e.progress!==void 0?e.progress:1,s=e.arrow!==void 0?e.arrow:!0,o=e.side!==void 0?e.side:"both",a=i/2,c=o!=="both"?i/2:i,l=n.distance(),u=r*l;if(l==0)return null;const h=a/c,f=a/l;let d=0;const p=[],v=[],y=[],g=[],m=[];let w=0;const b=new ce,E=new ce,S=new ce,P=new ce,N=new ce,z=new ce;function _(M){const L=p.length===0,I=M.sharp&&!L,k=M.dist/c,W=M.dist/l,j=M.dir,G=M.up,ee=M.right;if(o!=="left"?b.copy(ee).multiplyScalar(a*M.widthScale):b.set(0,0,0),o!=="right"?E.copy(ee).multiplyScalar(-a*M.widthScale):E.set(0,0,0),b.add(M.pos),E.add(M.pos),I){S.fromArray(p,p.length-6).sub(E),P.fromArray(p,p.length-3).sub(b);const se=S.length(),oe=P.length(),de=se-oe;let ae,O;de>0?(ae=S,O=E):(ae=P,O=b),N.copy(ae).setLength(Math.abs(de)).add(O);let B=z.copy(O).sub(N).normalize().dot(j),Z=z.copy(O).sub(N).length(),V=B*Z*2;z.copy(j).setLength(V).add(N),de>0?(p.push(N.x,N.y,N.z,b.x,b.y,b.z,E.x,E.y,E.z,b.x,b.y,b.z,z.x,z.y,z.z,b.x,b.y,b.z),w+=6,m.push(w-6,w-8,w-7,w-6,w-7,w-5,w-4,w-6,w-5,w-2,w-4,w-1),d+=12):(p.push(E.x,E.y,E.z,N.x,N.y,N.z,E.x,E.y,E.z,b.x,b.y,b.z,E.x,E.y,E.z,z.x,z.y,z.z),w+=6,m.push(w-6,w-8,w-7,w-6,w-7,w-5,w-6,w-5,w-3,w-2,w-3,w-1),d+=12),v.push(G.x,G.y,G.z,G.x,G.y,G.z,G.x,G.y,G.z,G.x,G.y,G.z,G.x,G.y,G.z,G.x,G.y,G.z),y.push(k-h,0,k-h,1,k,0,k,1,k+h,0,k+h,1),t&&g.push(W-f,0,W-f,1,W,0,W,1,W+f,0,W+f,1)}else p.push(E.x,E.y,E.z,b.x,b.y,b.z),v.push(G.x,G.y,G.z,G.x,G.y,G.z),y.push(k,0,k,1),t&&g.push(W,0,W,1),w+=2,L||(m.push(w-2,w-4,w-3,w-2,w-3,w-1),d+=6)}const x=new ce;function T(M){const L=M.dir,I=M.up,k=M.right,W=M.dist/c,j=M.dist/l;o!=="left"?b.copy(k).multiplyScalar(a*2):b.set(0,0,0),o!=="right"?E.copy(k).multiplyScalar(-a*2):E.set(0,0,0),x.copy(L).setLength(a*3),b.add(M.pos),E.add(M.pos),x.add(M.pos),p.push(E.x,E.y,E.z,b.x,b.y,b.z,x.x,x.y,x.z),v.push(I.x,I.y,I.z,I.x,I.y,I.z,I.x,I.y,I.z),y.push(W,o!=="both"?o!=="right"?-2:0:-.5,W,o!=="both"?o!=="left"?2:0:1.5,W+1.5,o!=="both"?0:.5),t&&g.push(j,o!=="both"?o!=="right"?-2:0:-.5,j,o!=="both"?o!=="left"?2:0:1.5,j+1.5*i/l,o!=="both"?0:.5),w+=3,m.push(w-1,w-3,w-2),d+=3}let A;if(u>0)for(let M=0;M<n.count;M++){const L=n.array[M];if(L.dist>u){const I=n.array[M-1];A=new zC;const k=(u-I.dist)/(L.dist-I.dist);A.lerpPathPoints(I,L,k),_(A);break}else _(L)}else A=n.array[0];return s&&(A=A||n.array[n.count-1],T(A)),{position:p,normal:v,uv:y,uv2:g,indices:m,count:d}}let Jo,ds,wr,zd,ei;const _Le=new cm;let vn,Lv,pu,mu,Qs,ps,gu=[],Mr,vu=[],Ud=0,Hd=null;const xLe={data(){return{renderFunc:{},isWalking:!1,isWalkingPaused:!1,isShowingWalkingPath:!1}},mounted(){this.$nextTick(()=>{this.init()})},methods:{startWalking(){this.initPathPoints(),this.renderPath(),this.loadModel(()=>{vn.visible=!1,Mr.visible=!1,this.showWalkingPath(()=>{vn.position.copy(vu[0]),Mr.position.copy(vu[0]),vn.visible=!0,Mr.visible=!0,pu.geometry.update(Hd,{width:.6,arrow:!1}),this.updateCameraBehindNPC(!0,()=>{this.fadeAction(ps,Qs),this.isWalking=!0,this.isWalkingPaused=!1})})})},showWalkingPath(n){this.isShowingWalkingPath=!0;const e=new te(-200,50,-350),t=new te(400,50,-350),i=new te(200,50,-350),r=new te(400,50,350),s=new te(200,1e3,350),o=wr.position.clone();this.flyTo(e,3e3,()=>{this.flyTo(t,3e3,()=>{this.flyTo(i,3e3,()=>{this.flyTo(r,3e3,()=>{this.flyTo(s,3e3,()=>{this.flyTo(o,3e3,()=>{this.isShowingWalkingPath=!1,n&&n()})})})})})})},flyTo(n,e,t,i){e==null&&(e=500);const r=wr.position.clone();mu=new mt.Tween(r).to(n,e).easing(mt.Easing.Quadratic.Out),mu.onUpdate(s=>{wr.position.set(s.x,s.y,s.z),i&&i(s)}),mu.onComplete(()=>{t&&t()}),mu.start()},pauseWalking(){if(this.isWalkingPaused)return!1;this.isWalking&&(this.fadeAction(Qs,ps),this.isWalkingPaused=!0)},continueWalking(){if(!this.isWalkingPaused)return!1;this.isWalking&&this.updateCameraBehindNPC(!0,()=>{this.isWalkingPaused=!1,this.fadeAction(ps,Qs)})},exitWalking(){this.disposeWalking()},initPathPoints(){gu=[121.78093686863522,0,-4.603376409073572,121.81339509799925,0,-1.0333897782644268,88.18838269349277,0,-1.0333897782644268,88.18838269349277,0,63.55900780432629,87.16531645200739,0,68.04794277498671,83.06620769318347,0,70.98695971872945,-1.130897005741467,0,70.34667258938468,-5.231039038271652,0,68.42613876317515,-7.758389327064392,0,64.62409029746112,-7.758389327064392,0,46.44123345882236,-114.62656106119152,0,46.44123345882236,-119.82497669490243,0,44.45968445743292,-121.94606515130032,0,39.4725534305143,-121.94606515130032,0,-42.76532835182727,-120.11831411582477,0,-48.53850237391983,-116.83579669695663,0,-49.908124030849784,78.54313968215955,0,-49.908124030849784,85.10694214192533,0,-50.16532666595109,89.88557886450108,0,-55.064547179368375,89.88557886450108,0,-93.93831946321087,91.96632492268847,0,-98.37744840781204,95.1920071430169,0,-100.1746448114269,152.736779207395,0,-100.1746448114269,157.30932898344975,0,-96.64823157224308,160.4735065923067,0,-99.846029526487,302.4743190232127,0,-99.846029526487,307.28097694970387,0,-98.29435216740127,309.4249527931002,0,-93.79194193938966,317.1439029555364,0,-10.678271186410282,322.7256435681537,0,64.82345541146658,321.948957384584,0,69.41475711676998,269.58743740380316,0,71.05051147709406,163.1264743368946,0,71.05051147709406,159.53952961773413,0,68.13337162416227,159.53952961773413,0,-4.677615417615058,124.42066238999215,0,-4.677615417615058],vu=[];for(let n=0;n<gu.length;n+=3)vu.push(new te(gu[n],gu[n+1],gu[n+2]));Ud=0,Lv=new Xn(vu,!1,"catmullrom",0)},registerRenderFunc(n,e){this.renderFunc[n]=e},logoutRenderFunc(n){this.renderFunc[n]&&delete this.renderFunc[n]},fadeAction(n,e){n&&n.fadeOut&&n.fadeOut(.3),e.reset(),e.setEffectiveWeight(1),e.play(),e.fadeIn(.3)},init(){const n=document.querySelector("#d");this.parent=document.querySelector("#canvas-box");const e=n.clientWidth-31,t=n.clientHeight-63;Jo=new cn;const i=new Ch(16777215,4473924);i.position.set(0,10,0),Jo.add(i);const r=new b_(2e3,50,16777215,16777215);r.material.opacity=.2,r.material.transparent=!0,Jo.add(r),wr=new lt(45,e/t,1,2e3),wr.position.set(0,20,-300),ds=new jt({antialias:!0,logarithmicDepthBuffer:!0}),ds.setSize(e,t),ds.shadowMap.enabled=!0,ds.setClearColor(0),n.appendChild(ds.domElement),zd=new rn(wr,ds.domElement),window.addEventListener("resize",()=>{wr.aspect=(this.parent.clientWidth-31)/(this.parent.clientHeight-63),wr.updateProjectionMatrix(),ds.setSize(this.parent.clientWidth-31,this.parent.clientHeight-63)}),this.render()},render(){const n=this;function e(){try{requestAnimationFrame(e),ds.render(Jo,wr),zd.update(),mt&&mu&&mt.update();const t=_Le.getDelta(),i=Object.keys(n.renderFunc);i&&i.length>0&&i.forEach(r=>{try{n.renderFunc[r](t)}catch(s){console.error("render func error, func name: ",r,", error message:",s.message)}})}catch(t){console.error("render animate error,  error message: ",t.message)}}e()},loadModel(n){new k_().load("/models/tyranno/scene.gltf",async t=>{vn=t.scene,vn.name="npc",ei=new Rh(vn),ps=ei.clipAction(t.animations[1]),ps.play(),Qs=ei.clipAction(t.animations[8]),Jo.add(vn);const i=await new At().loadAsync("/models/noon.jpg"),r=new Pa(2,2),s=new si({map:i,transparent:!0,blending:pa,depthWrite:!1});Mr=new qe(r,s),Mr.rotateX(-.5*Math.PI),Jo.add(Mr),this.registerRenderFunc("walk",o=>{ei.update(o),Mr.rotation.z+=.01,this.isWalking&&!this.isWalkingPaused&&(this.updateNPCPosition(),this.updateCameraBehindNPC(),Mr.position.copy(vn.position))}),n&&n()})},updateNPCPosition(){const e=Lv.getSpacedPoints(3e4);Ud+=1;const t=Ud%3e4,i=(Ud+50)%3e4,r=e[t],s=e[i];vn.position.copy(r),vn.lookAt(s.x,s.y,s.z)},updateCameraBehindNPC(n,e){const i=new te(0,1,-5).applyMatrix4(vn.matrixWorld);if(n)this.flyTo(i,1e3,e,()=>{const r=vn.position.clone();zd.target=new te(r.x,1,r.z)});else{wr.position.set(i.x,i.y,i.z);const r=vn.position.clone();zd.target=new te(r.x,1,r.z),e&&e()}},async renderPath(){const n=await new At().loadAsync("/models/run.jpg");n.wrapS=Nr,n.anisotropy=ds.capabilities.getMaxAnisotropy();const e=new si({map:n,transparent:!0,depthWrite:!1,blending:pa}),t=new te(0,1,0);Hd=new vLe,Hd.set(Lv.getPoints(1e3),.5,2,t,!1);const i=new yLe;i.update(Hd,{width:15,arrow:!1}),pu=new qe(i,e),Jo.add(pu),this.registerRenderFunc("walk-way",()=>{n.offset.x-=.02})},disposeWalking(){this.logoutRenderFunc("walk"),this.logoutRenderFunc("walk-way"),this.isWalking=!1,this.isWalkingPaused=!1,this.isShowingWalkingPath=!1,ps&&ei&&ei.uncacheClip(ps),ps&&ei&&ei.uncacheAction(ps,vn),Qs&&ei&&ei.uncacheClip(Qs),Qs&&ei&&ei.uncacheAction(Qs,vn),ei&&ei.uncacheRoot(vn),pu&&pu.removeFromParent(),vn&&vn.removeFromParent(),Mr&&Mr.removeFromParent()}},unmounted(){this.disposeWalking()}},bLe={id:"canvas-box",class:"canvas-box"};function wLe(n,e,t,i,r,s){const o=Ju,a=vMe;return tt(),_t("div",bLe,[Ce(a,{style:{"margin-bottom":"15px"}},{default:yc(()=>[Ce(o,{type:"success",disabled:r.isShowingWalkingPath||r.isWalking,onClick:s.startWalking},{default:yc(()=>[xu("开始")]),_:1},8,["disabled","onClick"]),Ce(o,{type:"info",disabled:r.isShowingWalkingPath||r.isWalkingPaused||!r.isWalking,onClick:s.pauseWalking},{default:yc(()=>[xu(" 暂停 ")]),_:1},8,["disabled","onClick"]),Ce(o,{type:"warning",disabled:r.isShowingWalkingPath||!r.isWalkingPaused,onClick:s.continueWalking},{default:yc(()=>[xu("继续 ")]),_:1},8,["disabled","onClick"]),Ce(o,{type:"danger",disabled:r.isShowingWalkingPath||!r.isWalking,onClick:s.exitWalking},{default:yc(()=>[xu("退出")]),_:1},8,["disabled","onClick"])]),_:1})])}const MLe=Io(xLe,[["render",wLe]]);class SLe{constructor({texture:e}=opt){this.flyId=0,this.flyArr=[],this.baicSpeed=1,this.texture=0,e&&!e.isTexture?this.texture=new At().load(e):this.texture=e,this.flyShader={vertexshader:` 
                uniform float size; 
                uniform float time; 
                uniform float u_len; 
                attribute float u_index;
                varying float u_opacitys;
                void main() { 
                    if( u_index < time + u_len && u_index > time){
                        float u_scale = 1.0 - (time + u_len - u_index) /u_len;
                        u_opacitys = u_scale;
                        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                        gl_Position = projectionMatrix * mvPosition;
                        gl_PointSize = size * u_scale * 300.0 / (-mvPosition.z);
                    } 
                }
                `,fragmentshader:` 
                uniform sampler2D u_map;
                uniform float u_opacity;
                uniform vec3 color;
                uniform float isTexture;
                varying float u_opacitys;
                void main() {
                    vec4 u_color = vec4(color,u_opacity * u_opacitys);
                    if( isTexture != 0.0 ){
                        gl_FragColor = u_color * texture2D(u_map, vec2(gl_PointCoord.x, 1.0 - gl_PointCoord.y));
                    }else{
                        gl_FragColor = u_color;
                    }
                }`}}addFly({color:e="rgba(255,255,255,1)",curve:t=[],width:i=1,length:r=10,speed:s=1,repeat:o=1,texture:a=null,callback:c}=opt){let l=this.getColorArr(e),u=new Ke,h=new qn({uniforms:{color:{value:l[0],type:"v3"},size:{value:i,type:"f"},u_map:{value:a||this.texture,type:"t2"},u_len:{value:r,type:"f"},u_opacity:{value:l[1],type:"f"},time:{value:-r,type:"f"},isTexture:{value:1,type:"f"}},transparent:!1,depthTest:!0,vertexShader:this.flyShader.vertexshader,fragmentShader:this.flyShader.fragmentshader});const[f,d]=[[],[]];t.forEach(function(v,y){f.push(v.x,v.y,v.z),d.push(y)}),u.setAttribute("position",new We(f,3)),u.setAttribute("u_index",new We(d,1));let p=new _a(u,h);return p.name="fly",p._flyId=this.flyId,p._speed=s,p._repeat=o,p._been=0,p._total=t.length,p._callback=c,this.flyId++,this.flyArr.push(p),p}tranformPath(e,t=1){const i=[];for(let r=1;r<e.length;r++){let s=e[r-1],o=e[r],a=new te(s.x,s.y,s.z),c=new te(o.x,o.y,o.z),l=a.distanceTo(c)*t,u=parseInt(l);for(let h=0;h<=u;h++)i.push(a.clone().lerp(c,h/u))}return i}remove(e){e.material.dispose(),e.geometry.dispose(),this.flyArr=this.flyArr.filter(t=>t._flyId!=e._flyId),e.parent.remove(e),e=null}animation(e=.015){e>.2||this.flyArr.forEach(t=>{if(t.parent)if(t._been>t._repeat)t.visible=!1,typeof t._callback=="function"&&t._callback(t),this.remove(t);else{let i=t.material.uniforms;i.time.value<t._total?i.time.value+=e*(this.baicSpeed/e)*t._speed:(t._been+=1,i.time.value=-i.u_len.value)}})}color(e){return new Fe(e)}getColorArr(e){if(Array.isArray(e))return e;var t=[];if(e=e+"",e=e.toLowerCase().replace(/\s/g,""),/^((?:rgba)?)\(\s*([^\)]*)/.test(e)){var i=e.replace(/rgba\(|\)/gi,"").split(","),r=[s(Math.round(i[0]*1||0).toString(16)),s(Math.round(i[1]*1||0).toString(16)),s(Math.round(i[2]*1||0).toString(16))];t[0]=this.color("#"+r.join("")),t[1]=Math.max(0,Math.min(1,i[3]*1||0))}else e==="transparent"?(t[0]=this.color(),t[1]=0):(t[0]=this.color(e),t[1]=1);function s(o){return o.length==1?"0"+o:""+o}return t}}const ELe={id:"webgl"},TLe={__name:"FlyLine",setup(n){const e={北京:{name:"北京",longitude:116.3,latitude:39.9},上海:{name:"上海",longitude:121,latitude:31},西安:{name:"西安",longitude:108,latitude:34},成都:{name:"成都",longitude:103,latitude:31},乌鲁木齐:{name:"乌鲁木齐",longitude:87,latitude:43},拉萨:{name:"拉萨",longitude:91.06,latitude:29.36},广州:{name:"广州",longitude:113,latitude:23.06},哈尔滨:{name:"哈尔滨",longitude:127,latitude:45.5},沈阳:{name:"沈阳",longitude:123.43,latitude:41.8},武汉:{name:"武汉",longitude:114,latitude:30},海口:{name:"海口",longitude:110,latitude:20.03},纽约:{name:"纽约",longitude:-74.5,latitude:40.5},伦敦:{name:"伦敦",longitude:.1,latitude:51.3},巴黎:{name:"巴黎",longitude:2.2,latitude:48.5},开普敦:{name:"开普敦",longitude:18.25,latitude:-33.5},悉尼:{name:"悉尼",longitude:151.1,latitude:-33.51},东京:{name:"东京",longitude:139.69,latitude:35.69},里约热内卢:{name:"里约热内卢",longitude:-43.11,latitude:-22.54}},t=[{from:"北京",to:["上海","西安","成都","乌鲁木齐","拉萨","广州","哈尔滨","沈阳","武汉","海口","纽约","伦敦","巴黎","开普敦","悉尼","东京","里约热内卢"],color:"rgba(255, 147, 0, 1)"},{from:"上海",to:["北京","上海","西安","成都","乌鲁木齐","拉萨","广州","哈尔滨","沈阳","武汉","海口","纽约","伦敦","巴黎","开普敦","悉尼","东京","里约热内卢"],color:"rgba(255, 216, 0, 1)"},{from:"西安",to:["北京","上海","成都","广州","乌鲁木齐","海口"],color:"rgba(255, 147, 0, 1)"},{from:"成都",to:["北京","上海","广州","武汉","海口","纽约","悉尼"],color:"rgba(255, 147, 0, 1)"},{from:"乌鲁木齐",to:["北京","上海","西安"],color:"rgba(255, 147, 0, 1)"},{from:"广州",to:["北京","上海","成都","拉萨","武汉","海口","纽约","伦敦","巴黎","悉尼","东京","里约热内卢"],color:"rgba(255, 147, 0, 1)"},{from:"哈尔滨",to:["北京","沈阳"],color:"rgba(255, 147, 0, 1)"},{from:"沈阳",to:["北京","哈尔滨"],color:"rgba(255, 147, 0, 1)"},{from:"海口",to:["北京","上海","成都","广州"],color:"rgba(255, 147, 0, 1)"},{from:"纽约",to:["北京","上海","成都","广州"],color:"rgba(255, 147, 0, 1)"},{from:"伦敦",to:["北京","上海","广州"],color:"rgba(255, 147, 0, 1)"},{from:"巴黎",to:["北京","上海","广州"],color:"rgba(255, 147, 0, 1)"},{from:"开普敦",to:["北京","上海"],color:"rgba(255, 147, 0, 1)"},{from:"悉尼",to:["北京","上海","成都","广州"],color:"rgba(255, 147, 0, 1)"},{from:"东京",to:["北京","上海","广州"],color:"rgba(255, 147, 0, 1)"},{from:"里约热内卢",to:["北京","上海","广州"],color:"rgba(255, 147, 0, 1)"}];Bt(()=>{const u=window.innerWidth,h=window.innerHeight,f=document.querySelector("#webgl"),d=new cn,p=new lt(45,u/h,.1,1e4);p.position.set(0,0,50),d.add(p);const v=new lr(16,256,256),y=new Ai({map:new At().load("/models/earth2.png")}),g=new qe(v,y);d.add(g);const m=new tn;let{waveMeshArr:w,pointMeshArr:b}=r();for(let W=0;W<w.length;W++)m.add(w[W]),m.add(b[W]);d.add(m);let E=o(d,t,e);const S=new lr(16.1,256,256),P=new Ai({map:new At().load("/models/earth_cloud.png"),transparent:!0,opacity:1,blending:pa}),N=new qe(S,P);d.add(N);const z=new Vr({map:new At().load("/models/earth_glow.png"),transparent:!0}),_=new _h(z);_.scale.set(51,51,1),d.add(_);const x=new Ts(8435199,1);x.position.set(-250,250,100),p.add(x);const T=new Xr(8443135,1);T.position.set(-250,250,100),p.add(T);const A=new Ch(16777215,4023193,1);A.position.set(-250,250,100),p.add(A);const M=new wa(11263,.8);d.add(M);const L=new jt({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});L.setSize(u,h),L.setPixelRatio(window.devicePixelRatio),f.appendChild(L.domElement);const I=new rn(p,L.domElement);I.autoRotateSpeed=.5;const k=()=>{w&&s(w),E.animation(),L.render(d,p),requestAnimationFrame(k)};k(),window.addEventListener("resize",()=>{p.aspect=u/h,p.updateProjectionMatrix(),L.setSize(u,h),L.setPixelRatio(Math.min(window.devicePixelRatio,2))})});const i=(u,h,f)=>{const d=-(h*Math.PI)/180,p=f*Math.PI/180,v=u*Math.cos(p)*Math.cos(d),y=u*Math.sin(p),g=u*Math.cos(p)*Math.sin(d);return{x:v,y,z:g}},r=()=>{let u=[],h=[];for(const v in e){const y=e[v],g=i(16.1,y.longitude,y.latitude),m=new om(1,1),w=new ct({color:65280,map:new At().load("/models/wave.png"),transparent:!0,opacity:1,side:Rn,depthWrite:!1}),b=new qe(m,w),E=16.1*.12;b.size=E,b.scale.set(E,E,E),b._s=Math.random()*1+1,b.position.set(g.x,g.y,g.z);const S=new ct({color:16761600,map:new At().load("/models/point.png"),transparent:!0,depthWrite:!1}),P=new qe(m,S),N=16.1*.05;P.scale.set(N,N,N),P.position.set(g.x,g.y,g.z);var d=new te(g.x,g.y,g.z).normalize(),p=new te(0,0,1);b.quaternion.setFromUnitVectors(p,d),P.quaternion.setFromUnitVectors(p,d),u.push(b),h.push(P)}return{waveMeshArr:u,pointMeshArr:h}},s=u=>{u.forEach(function(h){h._s+=.007,h.scale.set(h.size*h._s,h.size*h._s,h.size*h._s),h._s<=1.5?h.material.opacity=(h._s-1)*2:h._s>1.5&&h._s<=2?h.material.opacity=1-(h._s-1.5)*2:h._s=1})},o=(u,h,f)=>{let d=null;d==null&&(d=new SLe({texture:"/models/point.png"}));for(var p=0;p<h.length;p++)for(var v=h[p],y=0;y<v.to.length;y++)a(u,d,f[v.from],f[v.to[y]],v.color);return d},a=(u,h,f,d,p)=>{setTimeout(function(){c(u,h,f,d,p)},Math.ceil(Math.random()*15e3))},c=(u,h,f,d,p)=>{var v=1,y=new Array,g=i(16,f.longitude,f.latitude),m=i(16,d.longitude,d.latitude);y.push(new te(g.x,g.y,g.z));for(var w=Math.sqrt((g.x-m.x)*(g.x-m.x)+(g.y-m.y)*(g.y-m.y)+(g.z-m.z)*(g.z-m.z))/16,b=3+Math.ceil(w*3),E=0;E<b;E++){var S=v+(b-Math.abs((b-1)/2-E))*.01,P=l({x:g.x*(b-E)/b+m.x*(E+1)/b,y:g.y*(b-E)/b+m.y*(E+1)/b,z:g.z*(b-E)/b+m.z*(E+1)/b},16,S);y.push(new te(P.x,P.y,P.z))}y.push(new te(m.x,m.y,m.z));var N=new Xn(y,!1),z=Math.ceil(500*b),_=N.getPoints(z),x=h.addFly({curve:_,color:p,width:.3,length:Math.ceil(_.length*3/5),speed:b+10,repeat:1/0});u.add(x)},l=(u,h,f)=>{var d=Math.sqrt(u.x*u.x+u.y*u.y+u.z*u.z);return{x:u.x*f*h/d,y:u.y*f*h/d,z:u.z*f*h/d}};return(u,h)=>(tt(),_t("div",ELe))}},$h=(n,e,t)=>{const i=-(e*Math.PI)/180,r=t*Math.PI/180,s=n*Math.cos(r)*Math.cos(i),o=n*Math.sin(r),a=n*Math.cos(r)*Math.sin(i);return{x:s,y:o,z:a}},ALe=(n,e,t)=>{const i=n.angleTo(e)*1.8/Math.PI/.1,r=i*.4,s=i*i*12,o=new te(0,0,0),a=new Ra(o,CLe(n.clone(),e.clone())),c=a.at(s/a.at(1).distanceTo(o)),l=uE(n.clone(),c,r),u=uE(e.clone(),c,r),h=new ur(n,l,u,e),f=new An;f.vertices=h.getPoints(50);const d=new Zt({color:t,side:Rn});return{line:new Ti(f,d),curve:h}},CLe=(n,e)=>n.add(e).divideScalar(2),uE=(n,e,t)=>{let i=n.distanceTo(e);return n.lerp(e,t/i)},LLe=(n,e)=>{let t=[],i=[],r=[];for(const a in e){const c=e[a],l=$h(n,c.longitude,c.latitude),u=new om(1,1),h=new ct({color:16777215,map:new At().load("/models/wave.png"),transparent:!0,opacity:1,side:Rn,depthWrite:!1}),f=new qe(u,h),d=(n-3)*.12;f.size=d,f.scale.set(d,d,d),f._s=Math.random()*1+2,f.position.set(l.x,l.y,l.z);const p=new ct({color:16777215}),v=new M4(1,32),y=new qe(v,p),g=(n-4)*.05;y.scale.set(g,g,g),y.position.set(l.x,l.y,l.z);const m=new iA(.001,.08,1.5),w=new ct({color:"#fff"}),b=new qe(m,w);b.position.set(l.x,l.y,l.z);var s=new te(l.x,l.y,l.z).normalize(),o=new te(0,0,1);f.quaternion.setFromUnitVectors(o,s),y.quaternion.setFromUnitVectors(o,s),b.quaternion.setFromUnitVectors(new te(0,1,0),s),r.push(b),t.push(f),i.push(y)}return{waveMeshArr:t,pointMeshArr:i,meshArr:r}},RLe=n=>{n.forEach(function(e){e._s+=.007,e.scale.set(e.size*e._s,e.size*e._s,e.size*e._s),e._s<=1.5?e.material.opacity=(e._s-1)*2:e._s>1.5&&e._s<=2?e.material.opacity=1-(e._s-1.5)*2:e._s=1})},PLe=(n,e)=>{const t=new tn;return e.features.forEach(i=>{i.geometry.coordinates.forEach(r=>{r.forEach(s=>{const o=new Zt({color:65535}),a=[],c=new Ke;for(let h=0;h<s.length;h++){var l=$h(n,s[h][0],s[h][1]);a.push(l.x,l.y,l.z)}c.setAttribute("position",new We(a,3));const u=new Ti(c,o);t.add(u)})})}),t},ILe={id:"webgl"},DLe={__name:"FlyLine2",setup(n){Bt(()=>{const t=window.innerWidth,i=window.innerHeight,r=document.querySelector("#webgl"),s=new cn,o=new lt(45,t/i,1,1e3);o.position.set(0,0,65),s.add(o);const a=new lr(16,256,256),c=new Ai({color:4095}),l=new qe(a,c);s.add(l);const u=new jn;u.setResponseType("json");const h=new tn;u.load("/models/world.json",g=>{g.features.forEach(m=>{m.geometry.coordinates.forEach(w=>{var E;const b=[];(E=w[0])==null||E.forEach(S=>{const P=$h(16,S[0],S[1]);P.x&&b.push(P.x,P.y,P.z)}),h.add(e(b))})})}),s.add(h);const f=new Ts(4095,1);f.position.set(0,200,400),s.add(f);const d=new Xr(4095,1);d.position.set(0,200,400),s.add(d);const p=new jt({antialias:!0,precision:"highp",alpha:!0});p.setSize(t,i),p.setPixelRatio(window.devicePixelRatio),r.appendChild(p.domElement);const v=new rn(o,p.domElement);v.autoRotateSpeed=.5;const y=()=>{p.render(s,o),requestAnimationFrame(y)};y(),window.addEventListener("resize",()=>{o.aspect=t/i,o.updateProjectionMatrix(),p.setSize(t,i),p.setPixelRatio(Math.min(window.devicePixelRatio,2))})});const e=t=>{const i=new Ke,r=new Float32Array(t),s=new Xe(r,3);i.attributes.position=s;const o=new Zt({color:65535});return new dp(i,o)};return(t,i)=>(tt(),_t("div",ILe))}},FLe={id:"webgl"},OLe={__name:"Curve",setup(n){const e={北京:{name:"北京",longitude:116.3,latitude:39.9},上海:{name:"上海",longitude:121,latitude:31},西安:{name:"西安",longitude:108,latitude:34},成都:{name:"成都",longitude:103,latitude:31},乌鲁木齐:{name:"乌鲁木齐",longitude:87,latitude:43},拉萨:{name:"拉萨",longitude:91.06,latitude:29.36},广州:{name:"广州",longitude:113,latitude:23.06},哈尔滨:{name:"哈尔滨",longitude:127,latitude:45.5},沈阳:{name:"沈阳",longitude:123.43,latitude:41.8},武汉:{name:"武汉",longitude:114,latitude:30},海口:{name:"海口",longitude:110,latitude:20.03},纽约:{name:"纽约",longitude:-74.5,latitude:40.5},伦敦:{name:"伦敦",longitude:.1,latitude:51.3},巴黎:{name:"巴黎",longitude:2.2,latitude:48.5},开普敦:{name:"开普敦",longitude:18.25,latitude:-33.5},悉尼:{name:"悉尼",longitude:151.1,latitude:-33.51},东京:{name:"东京",longitude:139.69,latitude:35.69},里约热内卢:{name:"里约热内卢",longitude:-43.11,latitude:-22.54}},t=[{from:"北京",to:["伦敦","巴黎","开普敦","悉尼","东京","里约热内卢","成都","拉萨","广州","哈尔滨","武汉","海口","纽约"],color:16711680},{from:"纽约",to:["伦敦","巴黎","开普敦","悉尼","东京","里约热内卢"],color:65280}];Bt(()=>{const c=window.innerWidth,l=window.innerHeight,u=document.querySelector("#webgl"),h=new cn,f=new lt(45,c/l,1,1e3);f.position.set(0,0,65),h.add(f);const d=new lr(16,256,256),p=new Ai({map:new At().load("/models/earth.png")}),v=new qe(d,p);h.add(v);const y=new tn,g=[];for(const z in e){const _=i(16.1,e[z].longitude,e[z].latitude),x=new Pa(1,1),T=new ct({color:16761600,map:new At().load("/models/point.png"),transparent:!0,side:Rn}),A=new qe(x,T);A.position.set(_.x,_.y,_.z);const M=new ct({color:16761600,map:new At().load("/models/wave.png"),transparent:!0,opacity:1,side:Rn,depthWrite:!1}),L=new qe(x,M),I=1.3;L.size=I,L.scale.set(I,I,I),L._s=Math.random()*1+1,L.position.set(_.x,_.y,_.z);var m=new te(_.x,_.y,_.z).normalize(),w=new te(0,0,1);L.quaternion.setFromUnitVectors(w,m),A.quaternion.setFromUnitVectors(w,m),g.push(L),y.add(L),y.add(A)}h.add(y),t.forEach(z=>{z.to.forEach(_=>{var x=i(16.1,e[z.from].longitude,e[z.from].latitude),T=i(16.1,e[_].longitude,e[_].latitude);const A=s(new te(x.x,x.y,x.z),new te(T.x,T.y,T.z));h.add(A)})});const b=new Ts(8435199,1);b.position.set(0,200,400),f.add(b);const E=new Xr(8443135,1);E.position.set(0,200,400),f.add(E);const S=new jt({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0});S.setSize(c,l),S.setPixelRatio(window.devicePixelRatio),u.appendChild(S.domElement);const P=new rn(f,S.domElement);P.autoRotateSpeed=.5;const N=()=>{g&&r(g),S.render(h,f),requestAnimationFrame(N)};N(),window.addEventListener("resize",()=>{f.aspect=c/l,f.updateProjectionMatrix(),S.setSize(c,l),S.setPixelRatio(Math.min(window.devicePixelRatio,2))})});const i=(c,l,u)=>{const h=-(l*Math.PI)/180,f=u*Math.PI/180,d=c*Math.cos(f)*Math.cos(h),p=c*Math.sin(f),v=c*Math.cos(f)*Math.sin(h);return{x:d,y:p,z:v}},r=c=>{c.forEach(function(l){l._s+=.007,l.scale.set(l.size*l._s,l.size*l._s,l.size*l._s),l._s<=1.5?l.material.opacity=(l._s-.5)*2:l._s>1.5&&l._s<=2?l.material.opacity=1-(l._s-1)*2:l._s=1})},s=(c,l)=>{var u=c.angleTo(l)*1.8/Math.PI/.1,h=u*.4,f=u*u*12,d=new te(0,0,0),p=new Ra(d,o(c.clone(),l.clone())),v=p.at(f/p.at(1).distanceTo(d)),y=a(c.clone(),v,h),g=a(l.clone(),v,h),m=new ur(c,y,g,l);const w=new Ke,b=m.getPoints(200);w.setFromPoints(b);const E=new Zt({color:65520});return new Ti(w,E)};function o(c,l){return c.add(l).divideScalar(2)}function a(c,l,u){const h=c.distanceTo(l);return c.lerp(l,u/h)}return(c,l)=>(tt(),_t("div",FLe))}},kLe={id:"webgl"},NLe={__name:"ArcCurve",setup(n){var e=16;const t=$n([]),i={北京:{name:"北京",longitude:116.3,latitude:39.9},上海:{name:"上海",longitude:121,latitude:31},西安:{name:"西安",longitude:108,latitude:34},成都:{name:"成都",longitude:103,latitude:31},乌鲁木齐:{name:"乌鲁木齐",longitude:87,latitude:43},拉萨:{name:"拉萨",longitude:91.06,latitude:29.36},广州:{name:"广州",longitude:113,latitude:23.06},哈尔滨:{name:"哈尔滨",longitude:127,latitude:45.5},沈阳:{name:"沈阳",longitude:123.43,latitude:41.8},武汉:{name:"武汉",longitude:114,latitude:30},海口:{name:"海口",longitude:110,latitude:20.03},纽约:{name:"纽约",longitude:-74.5,latitude:40.5},伦敦:{name:"伦敦",longitude:.1,latitude:51.3},巴黎:{name:"巴黎",longitude:2.2,latitude:48.5},开普敦:{name:"开普敦",longitude:18.25,latitude:-33.5},悉尼:{name:"悉尼",longitude:151.1,latitude:-33.51},东京:{name:"东京",longitude:139.69,latitude:35.69},里约热内卢:{name:"里约热内卢",longitude:-43.11,latitude:-22.54}},r=[{from:"北京",to:["上海","西安","成都","乌鲁木齐","拉萨","广州","哈尔滨","沈阳","武汉","海口"],color:65280},{from:"悉尼",to:["北京","纽约","开普敦","里约热内卢"],color:15732480},{from:"纽约",to:["伦敦","巴黎","悉尼","东京"],color:16715760}];Bt(()=>{const p=window.innerWidth,v=window.innerHeight,y=document.querySelector("#webgl"),g=new cn,m=new lt(45,p/v,1,1e3);m.position.set(0,0,-60),g.add(m);const w=new lr(16,256,256),b=new Ai({map:new At().load("/models/earth2.png")}),E=new qe(w,b);g.add(E);const S=new tn,P=[];for(const W in i){const j=h(16.1,i[W].longitude,i[W].latitude),G=new Pa(1,1),ee=new ct({color:16777215,map:new At().load("/models/point.png"),transparent:!0,side:Rn}),se=new qe(G,ee);se.position.set(j.x,j.y,j.z);const oe=new ct({color:16777215,map:new At().load("/models/wave.png"),transparent:!0,opacity:1,side:Rn,depthWrite:!1}),de=new qe(G,oe),ae=1.3;de.size=ae,de.scale.set(ae,ae,ae),de._s=Math.random()*1+1,de.position.set(j.x,j.y,j.z);var N=new te(j.x,j.y,j.z).normalize(),z=new te(0,0,1);de.quaternion.setFromUnitVectors(z,N),se.quaternion.setFromUnitVectors(z,N),P.push(de),S.add(de),S.add(se)}g.add(S);var _=new tn;r.forEach(W=>{W.to.forEach(j=>{const G=l(i[W.from].longitude,i[W.from].latitude,i[j].longitude,i[j].latitude,W.color);_.add(G)})}),g.add(_);const x=new Ts(16777215,1);x.position.set(-150,150,150),m.add(x);const T=new Xr(16777215,1);T.position.set(-150,150,150),m.add(T);const A=new Ch(16777215,4023193,1);A.position.set(-150,150,150),g.add(A);const M=new wa(16777215,.8);g.add(M);const L=new jt({antialias:!0,precision:"highp",alpha:!0});L.setSize(p,v),L.setPixelRatio(window.devicePixelRatio),y.appendChild(L.domElement);const I=new rn(m,L.domElement);I.autoRotateSpeed=.5;const k=()=>{P&&f(P),t.forEach(W=>{W.rotation.z+=.005,W.rotation.z>=W.flyEndAngle&&(W.rotation.z=W.startAngle)}),L.render(g,m),requestAnimationFrame(k)};k(),window.addEventListener("resize",()=>{m.aspect=p/v,m.updateProjectionMatrix(),L.setSize(p,v),L.setPixelRatio(Math.min(window.devicePixelRatio,2))})});const s=(p,v,y)=>{var g=new te().addVectors(p,v).multiplyScalar(.5),m=g.clone().normalize(),w=o(p,v,new te(0,0,0)),b=m.multiplyScalar(e+w*e*.2),E=a(p,v,b),S=Math.abs(E.y-b.y),P=o(p,new te(0,-1,0),E),N=-Math.PI/2+P,z=Math.PI-N,_=c(E.x,E.y,S,N,z,y);_.center=E,_.topCoord=b;var x=(z-N)/7,T=d(S,N,N+x);return T.position.y=E.y,_.add(T),T.flyEndAngle=z-N-x,T.startAngle=N,T.AngleZ=_.flyEndAngle*Math.random(),_.flyLine=T,t.push(T),_},o=(p,v,y)=>{var g=p.clone().sub(y).normalize(),m=v.clone().sub(y).normalize(),w=g.clone().dot(m),b=Math.acos(w);return b},a=(p,v,y)=>{var g=p.lengthSq(),m=v.lengthSq(),w=y.lengthSq(),b=p.x,E=p.y,S=v.x,P=v.y,N=y.x,z=y.y,_=b*P+S*z+N*E-b*z-S*E-N*P,x=(m*z+g*P+w*E-m*E-w*P-g*z)/_/2,T=(w*S+m*b+g*N-g*S-m*N-w*b)/_/2,A=new te(x,T,0);return A},c=(p,v,y,g,m,w)=>{var b=new Ke,E=new Ao(p,v,y,g,m,!1),S=E.getSpacedPoints(50);b.setFromPoints(S);var P=new Zt({color:w}),N=new Ti(b,P);return N},l=(p,v,y,g,m)=>{var w=h(e,p,v),b=new te(w.x,w.y,w.z),E=h(e,y,g),S=new te(E.x,E.y,E.z),P=u(b,S),N=s(P.startPoint,P.endPoint,m);return N.quaternion.multiply(P.quaternion),N},u=(p,v)=>{var y=new te(0,0,0),g=p.clone().sub(y),m=v.clone().sub(y),w=g.clone().cross(m).normalize(),b=new te(0,0,1),E=new en().setFromUnitVectors(w,b),S=p.clone().applyQuaternion(E),P=v.clone().applyQuaternion(E),N=S.clone().add(P).multiplyScalar(.5),z=N.clone().sub(y).normalize(),_=new te(0,1,0),x=new en().setFromUnitVectors(z,_),T=S.clone().applyQuaternion(x),A=P.clone().applyQuaternion(x),M=E.clone().invert().multiply(x.clone().invert());return{quaternion:M,startPoint:T,endPoint:A}},h=(p,v,y)=>{const g=-(v*Math.PI)/180,m=y*Math.PI/180,w=p*Math.cos(m)*Math.cos(g),b=p*Math.sin(m),E=p*Math.cos(m)*Math.sin(g);return{x:w,y:b,z:E}},f=p=>{p.forEach(function(v){v._s+=.007,v.scale.set(v.size*v._s,v.size*v._s,v.size*v._s),v._s<=1.5?v.material.opacity=(v._s-.5)*2:v._s>1.5&&v._s<=2?v.material.opacity=1-(v._s-1)*2:v._s=1})},d=(p,v,y)=>{console.log(111,v,y);var g=new Ke,m=new Ao(0,0,p,v,y,!1),w=m.getSpacedPoints(100);g.setFromPoints(w);for(var b=[],E=0;E<w.length;E++)b.push(E/w.length);var S=new Xe(new Float32Array(b),1);g.attributes.percent=S;for(var P=[],E=0;E<w.length;E++){var N=new Fe(16777215),z=new Fe(16776960),_=N.lerp(z,E/w.length);P.push(_.r,_.g,_.b)}g.attributes.color=new Xe(new Float32Array(P),3);var x=new cr({size:.2,vertexColors:CB});x.onBeforeCompile=function(A){A.vertexShader=A.vertexShader.replace("void main() {",["attribute float percent;","void main() {"].join(`
`)),A.vertexShader=A.vertexShader.replace("gl_PointSize = size;",["gl_PointSize = percent * size;"].join(`
`))};var T=new _a(g,x);return T};return(p,v)=>(tt(),_t("div",kLe))}};class BLe{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[i++]=a),e=o}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t=this._n,i,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(i=o,r=e[--t],o=i+r,s=r-(o-i),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function*zLe(n){for(const e of n)yield*e}function HC(n){return Array.from(zLe(n))}var kt=1e-6,ULe=1e-12,pt=Math.PI,ri=pt/2,hE=pt/4,Gi=pt*2,yi=180/pt,sn=pt/180,Xt=Math.abs,GC=Math.atan,qh=Math.atan2,Kt=Math.cos,HLe=Math.exp,GLe=Math.log,Qt=Math.sin,VLe=Math.sign||function(n){return n>0?1:n<0?-1:0},Pm=Math.sqrt,WLe=Math.tan;function $Le(n){return n>1?0:n<-1?pt:Math.acos(n)}function jh(n){return n>1?ri:n<-1?-ri:Math.asin(n)}function Lu(){}function Up(n,e){n&&dE.hasOwnProperty(n.type)&&dE[n.type](n,e)}var fE={Feature:function(n,e){Up(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,r=t.length;++i<r;)Up(t[i].geometry,e)}},dE={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){hy(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)hy(t[i],e,0)},Polygon:function(n,e){pE(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,r=t.length;++i<r;)pE(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,r=t.length;++i<r;)Up(t[i],e)}};function hy(n,e,t){var i=-1,r=n.length-t,s;for(e.lineStart();++i<r;)s=n[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function pE(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)hy(n[t],e,1);e.polygonEnd()}function qLe(n,e){n&&fE.hasOwnProperty(n.type)?fE[n.type](n,e):Up(n,e)}function fy(n){return[qh(n[1],n[0]),jh(n[2])]}function _l(n){var e=n[0],t=n[1],i=Kt(t);return[i*Kt(e),i*Qt(e),Qt(t)]}function Gd(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Hp(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function Rv(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function Vd(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function dy(n){var e=Pm(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}function py(n,e){function t(i,r){return i=n(i,r),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,r){return i=e.invert(i,r),i&&n.invert(i[0],i[1])}),t}function my(n,e){return Xt(n)>pt&&(n-=Math.round(n/Gi)*Gi),[n,e]}my.invert=my;function VC(n,e,t){return(n%=Gi)?e||t?py(gE(n),vE(e,t)):gE(n):e||t?vE(e,t):my}function mE(n){return function(e,t){return e+=n,Xt(e)>pt&&(e-=Math.round(e/Gi)*Gi),[e,t]}}function gE(n){var e=mE(n);return e.invert=mE(-n),e}function vE(n,e){var t=Kt(n),i=Qt(n),r=Kt(e),s=Qt(e);function o(a,c){var l=Kt(c),u=Kt(a)*l,h=Qt(a)*l,f=Qt(c),d=f*t+u*i;return[qh(h*r-d*s,u*t-f*i),jh(d*r+h*s)]}return o.invert=function(a,c){var l=Kt(c),u=Kt(a)*l,h=Qt(a)*l,f=Qt(c),d=f*r-h*s;return[qh(h*r+f*s,u*t+d*i),jh(d*t-u*i)]},o}function jLe(n){n=VC(n[0]*sn,n[1]*sn,n.length>2?n[2]*sn:0);function e(t){return t=n(t[0]*sn,t[1]*sn),t[0]*=yi,t[1]*=yi,t}return e.invert=function(t){return t=n.invert(t[0]*sn,t[1]*sn),t[0]*=yi,t[1]*=yi,t},e}function XLe(n,e,t,i,r,s){if(t){var o=Kt(e),a=Qt(e),c=i*t;r==null?(r=e+i*Gi,s=e-c/2):(r=yE(o,r),s=yE(o,s),(i>0?r<s:r>s)&&(r+=i*Gi));for(var l,u=r;i>0?u>s:u<s;u-=c)l=fy([o,-a*Kt(u),-a*Qt(u)]),n.point(l[0],l[1])}}function yE(n,e){e=_l(e),e[0]-=n,dy(e);var t=$Le(-e[1]);return((-e[2]<0?-t:t)+Gi-kt)%Gi}function WC(){var n=[],e;return{point:function(t,i,r){e.push([t,i,r])},lineStart:function(){n.push(e=[])},lineEnd:Lu,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function tp(n,e){return Xt(n[0]-e[0])<kt&&Xt(n[1]-e[1])<kt}function Wd(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function $C(n,e,t,i,r){var s=[],o=[],a,c;if(n.forEach(function(p){if(!((v=p.length-1)<=0)){var v,y=p[0],g=p[v],m;if(tp(y,g)){if(!y[2]&&!g[2]){for(r.lineStart(),a=0;a<v;++a)r.point((y=p[a])[0],y[1]);r.lineEnd();return}g[0]+=2*kt}s.push(m=new Wd(y,p,null,!0)),o.push(m.o=new Wd(y,null,m,!1)),s.push(m=new Wd(g,p,null,!1)),o.push(m.o=new Wd(g,null,m,!0))}}),!!s.length){for(o.sort(e),_E(s),_E(o),a=0,c=o.length;a<c;++a)o[a].e=t=!t;for(var l=s[0],u,h;;){for(var f=l,d=!0;f.v;)if((f=f.n)===l)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,c=u.length;a<c;++a)r.point((h=u[a])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(u=f.p.z,a=u.length-1;a>=0;--a)r.point((h=u[a])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,u=f.z,d=!d}while(!f.v);r.lineEnd()}}}function _E(n){if(e=n.length){for(var e,t=0,i=n[0],r;++t<e;)i.n=r=n[t],r.p=i,i=r;i.n=r=n[0],r.p=i}}function Pv(n){return Xt(n[0])<=pt?n[0]:VLe(n[0])*((Xt(n[0])+pt)%Gi-pt)}function YLe(n,e){var t=Pv(e),i=e[1],r=Qt(i),s=[Qt(t),-Kt(t),0],o=0,a=0,c=new BLe;r===1?i=ri+kt:r===-1&&(i=-ri-kt);for(var l=0,u=n.length;l<u;++l)if(f=(h=n[l]).length)for(var h,f,d=h[f-1],p=Pv(d),v=d[1]/2+hE,y=Qt(v),g=Kt(v),m=0;m<f;++m,p=b,y=S,g=P,d=w){var w=h[m],b=Pv(w),E=w[1]/2+hE,S=Qt(E),P=Kt(E),N=b-p,z=N>=0?1:-1,_=z*N,x=_>pt,T=y*S;if(c.add(qh(T*z*Qt(_),g*P+T*Kt(_))),o+=x?N+z*Gi:N,x^p>=t^b>=t){var A=Hp(_l(d),_l(w));dy(A);var M=Hp(s,A);dy(M);var L=(x^N>=0?-1:1)*jh(M[2]);(i>L||i===L&&(A[0]||A[1]))&&(a+=x^N>=0?1:-1)}}return(o<-kt||o<kt&&c<-ULe)^a&1}function qC(n,e,t,i){return function(r){var s=e(r),o=WC(),a=e(o),c=!1,l,u,h,f={point:d,lineStart:v,lineEnd:y,polygonStart:function(){f.point=g,f.lineStart=m,f.lineEnd=w,u=[],l=[]},polygonEnd:function(){f.point=d,f.lineStart=v,f.lineEnd=y,u=HC(u);var b=YLe(l,i);u.length?(c||(r.polygonStart(),c=!0),$C(u,JLe,b,t,r)):b&&(c||(r.polygonStart(),c=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),u=l=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(b,E){n(b,E)&&r.point(b,E)}function p(b,E){s.point(b,E)}function v(){f.point=p,s.lineStart()}function y(){f.point=d,s.lineEnd()}function g(b,E){h.push([b,E]),a.point(b,E)}function m(){a.lineStart(),h=[]}function w(){g(h[0][0],h[0][1]),a.lineEnd();var b=a.clean(),E=o.result(),S,P=E.length,N,z,_;if(h.pop(),l.push(h),h=null,!!P){if(b&1){if(z=E[0],(N=z.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),S=0;S<N;++S)r.point((_=z[S])[0],_[1]);r.lineEnd()}return}P>1&&b&2&&E.push(E.pop().concat(E.shift())),u.push(E.filter(ZLe))}}return f}}function ZLe(n){return n.length>1}function JLe(n,e){return((n=n.x)[0]<0?n[1]-ri-kt:ri-n[1])-((e=e.x)[0]<0?e[1]-ri-kt:ri-e[1])}const xE=qC(function(){return!0},KLe,eRe,[-pt,-ri]);function KLe(n){var e=NaN,t=NaN,i=NaN,r;return{lineStart:function(){n.lineStart(),r=1},point:function(s,o){var a=s>0?pt:-pt,c=Xt(s-e);Xt(c-pt)<kt?(n.point(e,t=(t+o)/2>0?ri:-ri),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(s,t),r=0):i!==a&&c>=pt&&(Xt(e-i)<kt&&(e-=i*kt),Xt(s-a)<kt&&(s-=a*kt),t=QLe(e,t,s,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(a,t),r=0),n.point(e=s,t=o),i=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function QLe(n,e,t,i){var r,s,o=Qt(n-t);return Xt(o)>kt?GC((Qt(e)*(s=Kt(i))*Qt(t)-Qt(i)*(r=Kt(e))*Qt(n))/(r*s*o)):(e+i)/2}function eRe(n,e,t,i){var r;if(n==null)r=t*ri,i.point(-pt,r),i.point(0,r),i.point(pt,r),i.point(pt,0),i.point(pt,-r),i.point(0,-r),i.point(-pt,-r),i.point(-pt,0),i.point(-pt,r);else if(Xt(n[0]-e[0])>kt){var s=n[0]<e[0]?pt:-pt;r=t*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function tRe(n){var e=Kt(n),t=6*sn,i=e>0,r=Xt(e)>kt;function s(u,h,f,d){XLe(d,n,t,f,u,h)}function o(u,h){return Kt(u)*Kt(h)>e}function a(u){var h,f,d,p,v;return{lineStart:function(){p=d=!1,v=1},point:function(y,g){var m=[y,g],w,b=o(y,g),E=i?b?0:l(y,g):b?l(y+(y<0?pt:-pt),g):0;if(!h&&(p=d=b)&&u.lineStart(),b!==d&&(w=c(h,m),(!w||tp(h,w)||tp(m,w))&&(m[2]=1)),b!==d)v=0,b?(u.lineStart(),w=c(m,h),u.point(w[0],w[1])):(w=c(h,m),u.point(w[0],w[1],2),u.lineEnd()),h=w;else if(r&&h&&i^b){var S;!(E&f)&&(S=c(m,h,!0))&&(v=0,i?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}b&&(!h||!tp(h,m))&&u.point(m[0],m[1]),h=m,d=b,f=E},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return v|(p&&d)<<1}}}function c(u,h,f){var d=_l(u),p=_l(h),v=[1,0,0],y=Hp(d,p),g=Gd(y,y),m=y[0],w=g-m*m;if(!w)return!f&&u;var b=e*g/w,E=-e*m/w,S=Hp(v,y),P=Vd(v,b),N=Vd(y,E);Rv(P,N);var z=S,_=Gd(P,z),x=Gd(z,z),T=_*_-x*(Gd(P,P)-1);if(!(T<0)){var A=Pm(T),M=Vd(z,(-_-A)/x);if(Rv(M,P),M=fy(M),!f)return M;var L=u[0],I=h[0],k=u[1],W=h[1],j;I<L&&(j=L,L=I,I=j);var G=I-L,ee=Xt(G-pt)<kt,se=ee||G<kt;if(!ee&&W<k&&(j=k,k=W,W=j),se?ee?k+W>0^M[1]<(Xt(M[0]-L)<kt?k:W):k<=M[1]&&M[1]<=W:G>pt^(L<=M[0]&&M[0]<=I)){var oe=Vd(z,(-_+A)/x);return Rv(oe,P),[M,fy(oe)]}}}function l(u,h){var f=i?n:pt-n,d=0;return u<-f?d|=1:u>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return qC(o,a,s,i?[0,-n]:[-pt,n-pt])}function nRe(n,e,t,i,r,s){var o=n[0],a=n[1],c=e[0],l=e[1],u=0,h=1,f=c-o,d=l-a,p;if(p=t-o,!(!f&&p>0)){if(p/=f,f<0){if(p<u)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>u&&(u=p)}if(p=r-o,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>u&&(u=p)}else if(f>0){if(p<u)return;p<h&&(h=p)}if(p=i-a,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(n[0]=o+u*f,n[1]=a+u*d),h<1&&(e[0]=o+h*f,e[1]=a+h*d),!0}}}}}var Ru=1e9,$d=-Ru;function iRe(n,e,t,i){function r(l,u){return n<=l&&l<=t&&e<=u&&u<=i}function s(l,u,h,f){var d=0,p=0;if(l==null||(d=o(l,h))!==(p=o(u,h))||c(l,u)<0^h>0)do f.point(d===0||d===3?n:t,d>1?i:e);while((d=(d+h+4)%4)!==p);else f.point(u[0],u[1])}function o(l,u){return Xt(l[0]-n)<kt?u>0?0:3:Xt(l[0]-t)<kt?u>0?2:1:Xt(l[1]-e)<kt?u>0?1:0:u>0?3:2}function a(l,u){return c(l.x,u.x)}function c(l,u){var h=o(l,1),f=o(u,1);return h!==f?h-f:h===0?u[1]-l[1]:h===1?l[0]-u[0]:h===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,h=WC(),f,d,p,v,y,g,m,w,b,E,S,P={point:N,lineStart:T,lineEnd:A,polygonStart:_,polygonEnd:x};function N(L,I){r(L,I)&&u.point(L,I)}function z(){for(var L=0,I=0,k=d.length;I<k;++I)for(var W=d[I],j=1,G=W.length,ee=W[0],se,oe,de=ee[0],ae=ee[1];j<G;++j)se=de,oe=ae,ee=W[j],de=ee[0],ae=ee[1],oe<=i?ae>i&&(de-se)*(i-oe)>(ae-oe)*(n-se)&&++L:ae<=i&&(de-se)*(i-oe)<(ae-oe)*(n-se)&&--L;return L}function _(){u=h,f=[],d=[],S=!0}function x(){var L=z(),I=S&&L,k=(f=HC(f)).length;(I||k)&&(l.polygonStart(),I&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),k&&$C(f,a,L,s,l),l.polygonEnd()),u=l,f=d=p=null}function T(){P.point=M,d&&d.push(p=[]),E=!0,b=!1,m=w=NaN}function A(){f&&(M(v,y),g&&b&&h.rejoin(),f.push(h.result())),P.point=N,b&&u.lineEnd()}function M(L,I){var k=r(L,I);if(d&&p.push([L,I]),E)v=L,y=I,g=k,E=!1,k&&(u.lineStart(),u.point(L,I));else if(k&&b)u.point(L,I);else{var W=[m=Math.max($d,Math.min(Ru,m)),w=Math.max($d,Math.min(Ru,w))],j=[L=Math.max($d,Math.min(Ru,L)),I=Math.max($d,Math.min(Ru,I))];nRe(W,j,n,e,t,i)?(b||(u.lineStart(),u.point(W[0],W[1])),u.point(j[0],j[1]),k||u.lineEnd(),S=!1):k&&(u.lineStart(),u.point(L,I),S=!1)}m=L,w=I,b=k}return P}}const bE=n=>n;var xl=1/0,Gp=xl,Xh=-xl,Vp=Xh,rRe={point:sRe,lineStart:Lu,lineEnd:Lu,polygonStart:Lu,polygonEnd:Lu,result:function(){var n=[[xl,Gp],[Xh,Vp]];return Xh=Vp=-(Gp=xl=1/0),n}};function sRe(n,e){n<xl&&(xl=n),n>Xh&&(Xh=n),e<Gp&&(Gp=e),e>Vp&&(Vp=e)}const wE=rRe;function xx(n){return function(e){var t=new gy;for(var i in n)t[i]=n[i];return t.stream=e,t}}function gy(){}gy.prototype={constructor:gy,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bx(n,e,t){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),i!=null&&n.clipExtent(null),qLe(t,n.stream(wE)),e(wE.result()),i!=null&&n.clipExtent(i),n}function jC(n,e,t){return bx(n,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,c=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([a,c])},t)}function oRe(n,e,t){return jC(n,[[0,0],e],t)}function aRe(n,e,t){return bx(n,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];n.scale(150*s).translate([o,a])},t)}function cRe(n,e,t){return bx(n,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([o,a])},t)}var ME=16,lRe=Kt(30*sn);function SE(n,e){return+e?hRe(n,e):uRe(n)}function uRe(n){return xx({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function hRe(n,e){function t(i,r,s,o,a,c,l,u,h,f,d,p,v,y){var g=l-i,m=u-r,w=g*g+m*m;if(w>4*e&&v--){var b=o+f,E=a+d,S=c+p,P=Pm(b*b+E*E+S*S),N=jh(S/=P),z=Xt(Xt(S)-1)<kt||Xt(s-h)<kt?(s+h)/2:qh(E,b),_=n(z,N),x=_[0],T=_[1],A=x-i,M=T-r,L=m*A-g*M;(L*L/w>e||Xt((g*A+m*M)/w-.5)>.3||o*f+a*d+c*p<lRe)&&(t(i,r,s,o,a,c,x,T,z,b/=P,E/=P,S,v,y),y.point(x,T),t(x,T,z,b,E,S,l,u,h,f,d,p,v,y))}}return function(i){var r,s,o,a,c,l,u,h,f,d,p,v,y={point:g,lineStart:m,lineEnd:b,polygonStart:function(){i.polygonStart(),y.lineStart=E},polygonEnd:function(){i.polygonEnd(),y.lineStart=m}};function g(N,z){N=n(N,z),i.point(N[0],N[1])}function m(){h=NaN,y.point=w,i.lineStart()}function w(N,z){var _=_l([N,z]),x=n(N,z);t(h,f,u,d,p,v,h=x[0],f=x[1],u=N,d=_[0],p=_[1],v=_[2],ME,i),i.point(h,f)}function b(){y.point=g,i.lineEnd()}function E(){m(),y.point=S,y.lineEnd=P}function S(N,z){w(r=N,z),s=h,o=f,a=d,c=p,l=v,y.point=w}function P(){t(h,f,u,d,p,v,s,o,r,a,c,l,ME,i),y.lineEnd=b,b()}return y}}var fRe=xx({point:function(n,e){this.stream.point(n*sn,e*sn)}});function dRe(n){return xx({point:function(e,t){var i=n(e,t);return this.stream.point(i[0],i[1])}})}function pRe(n,e,t,i,r){function s(o,a){return o*=i,a*=r,[e+n*o,t-n*a]}return s.invert=function(o,a){return[(o-e)/n*i,(t-a)/n*r]},s}function EE(n,e,t,i,r,s){if(!s)return pRe(n,e,t,i,r);var o=Kt(s),a=Qt(s),c=o*n,l=a*n,u=o/n,h=a/n,f=(a*t-o*e)/n,d=(a*e+o*t)/n;function p(v,y){return v*=i,y*=r,[c*v-l*y+e,t-l*v-c*y]}return p.invert=function(v,y){return[i*(u*v-h*y+f),r*(d-h*v-u*y)]},p}function mRe(n){return gRe(function(){return n})()}function gRe(n){var e,t=150,i=480,r=250,s=0,o=0,a=0,c=0,l=0,u,h=0,f=1,d=1,p=null,v=xE,y=null,g,m,w,b=bE,E=.5,S,P,N,z,_;function x(L){return N(L[0]*sn,L[1]*sn)}function T(L){return L=N.invert(L[0],L[1]),L&&[L[0]*yi,L[1]*yi]}x.stream=function(L){return z&&_===L?z:z=fRe(dRe(u)(v(S(b(_=L)))))},x.preclip=function(L){return arguments.length?(v=L,p=void 0,M()):v},x.postclip=function(L){return arguments.length?(b=L,y=g=m=w=null,M()):b},x.clipAngle=function(L){return arguments.length?(v=+L?tRe(p=L*sn):(p=null,xE),M()):p*yi},x.clipExtent=function(L){return arguments.length?(b=L==null?(y=g=m=w=null,bE):iRe(y=+L[0][0],g=+L[0][1],m=+L[1][0],w=+L[1][1]),M()):y==null?null:[[y,g],[m,w]]},x.scale=function(L){return arguments.length?(t=+L,A()):t},x.translate=function(L){return arguments.length?(i=+L[0],r=+L[1],A()):[i,r]},x.center=function(L){return arguments.length?(s=L[0]%360*sn,o=L[1]%360*sn,A()):[s*yi,o*yi]},x.rotate=function(L){return arguments.length?(a=L[0]%360*sn,c=L[1]%360*sn,l=L.length>2?L[2]%360*sn:0,A()):[a*yi,c*yi,l*yi]},x.angle=function(L){return arguments.length?(h=L%360*sn,A()):h*yi},x.reflectX=function(L){return arguments.length?(f=L?-1:1,A()):f<0},x.reflectY=function(L){return arguments.length?(d=L?-1:1,A()):d<0},x.precision=function(L){return arguments.length?(S=SE(P,E=L*L),M()):Pm(E)},x.fitExtent=function(L,I){return jC(x,L,I)},x.fitSize=function(L,I){return oRe(x,L,I)},x.fitWidth=function(L,I){return aRe(x,L,I)},x.fitHeight=function(L,I){return cRe(x,L,I)};function A(){var L=EE(t,0,0,f,d,h).apply(null,e(s,o)),I=EE(t,i-L[0],r-L[1],f,d,h);return u=VC(a,c,l),P=py(e,I),N=py(u,P),S=SE(P,E),M()}function M(){return z=_=null,x}return function(){return e=n.apply(this,arguments),x.invert=e.invert&&T,A()}}function wx(n,e){return[n,GLe(WLe((ri+e)/2))]}wx.invert=function(n,e){return[n,2*GC(HLe(e))-ri]};function vRe(){return yRe(wx).scale(961/Gi)}function yRe(n){var e=mRe(n),t=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,c,l;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(t(h),u()):t()},e.clipExtent=function(h){return arguments.length?(h==null?o=a=c=l=null:(o=+h[0][0],a=+h[0][1],c=+h[1][0],l=+h[1][1]),u()):o==null?null:[[o,a],[c,l]]};function u(){var h=pt*i(),f=e(jLe(e.rotate()).invert([0,0]));return s(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:n===wx?[[Math.max(f[0]-h,o),a],[Math.min(f[0]+h,c),l]]:[[o,Math.max(f[1]-h,a)],[c,Math.min(f[1]+h,l)]])}return u()}function Pu(n,e,t){this.k=n,this.x=e,this.y=t}Pu.prototype={constructor:Pu,scale:function(n){return n===1?this:new Pu(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new Pu(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Pu.prototype;var nh=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var h=0;h<e.children.length;h++)e.children[h].style.display=h===u?"block":"none";n=u}var r=(performance||Date).now(),s=r,o=0,a=t(new nh.Panel("FPS","#0ff","#002")),c=t(new nh.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new nh.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(c.update(u-r,200),u>=s+1e3&&(a.update(o*1e3/(u-s),100),s=u,o=0,l)){var h=performance.memory;l.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};nh.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,h=3*o,f=15*o,d=74*o,p=30*o,v=document.createElement("canvas");v.width=a,v.height=c,v.style.cssText="width:80px;height:48px";var y=v.getContext("2d");return y.font="bold "+9*o+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=t,y.fillRect(0,0,a,c),y.fillStyle=e,y.fillText(n,l,u),y.fillRect(h,f,d,p),y.fillStyle=t,y.globalAlpha=.9,y.fillRect(h,f,d,p),{dom:v,update:function(g,m){i=Math.min(i,g),r=Math.max(r,g),y.fillStyle=t,y.globalAlpha=1,y.fillRect(0,0,a,f),y.fillStyle=e,y.fillText(s(g)+" "+n+" ("+s(i)+"-"+s(r)+")",l,u),y.drawImage(v,h+o,f,d-o,p,h,f,d-o,p),y.fillRect(h+d-o,f,o,p),y.fillStyle=t,y.globalAlpha=.9,y.fillRect(h+d-o,f,o,s((1-g/m)*p))}}};const _Re={id:"webgl"},xRe={__name:"ChinaMap",setup(n){return Bt(()=>{const e=window.innerWidth,t=window.innerHeight,i=document.querySelector("#webgl"),r=new nh;i.appendChild(r.dom);const s=new cn,o=new lt(90,e/t,.1,1e5);o.position.set(0,0,1e3),o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),s.add(o);const a=new TB(5);s.add(a);const c=new Ne,l=new Ts(16777215,.5);s.add(l);const u=new wa(16777215,.5);s.add(u);const h=new jt({alpha:!0});h.setSize(e,t),window.addEventListener("resize",()=>{o.aspect=e/t,o.updateProjectionMatrix(),h.setSize(e,t),h.setPixelRatio(window.devicePixelRatio)}),i.appendChild(h.domElement);const f=h.domElement,d=new rn(o,h.domElement);d.enableDamping=!0;const p=new cm;function v(N){d.update(),r.update(),p.getDelta(),requestAnimationFrame(v),h.render(s,o)}v(),new jn().load("https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json",N=>{const z=JSON.parse(N);m(z)});const g=vRe().center([116,39]).translate([0,0,0]);function m(N){N.features.forEach(_=>{const x=new Ne;x.properties=_.properties.name;const T=_.geometry.coordinates,A="#99ff99";_.geometry.type==="MultiPolygon"&&T.forEach(M=>{M.forEach(L=>{const I=b(L,A,g);I.properties=_.properties.name,x.add(I);const k=w(L,A,g);x.add(k)})}),_.geometry.type==="Polygon"&&T.forEach(M=>{const L=b(M,A,g),I=w(M,A,g);L.properties=_.properties.name,x.add(I),x.add(L)}),c.add(x)}),s.add(c)}function w(N,z,_){const x=new Ke,T=new Array;N.forEach(L=>{const[I,k]=_(L);T.push(new te(I,-k,9))}),x.setFromPoints(T);const A=new Fe(Math.random()*.5+.5,Math.random()*.5+.5,Math.random()*.5+.5),M=new Zt({color:A});return new Ti(x,M)}function b(N,z,_){const x=new fa;N.forEach((L,I)=>{const[k,W]=_(L);I===0&&x.moveTo(k,-W),x.lineTo(k,-W)});const T=new cA(x,{depth:2,bevelEnabled:!0}),A=(.5+Math.random()*.5)*16777215,M=new ct({color:A,transparent:!0,opacity:.5});return new qe(T,M)}window.addEventListener("click",E);function E(N){let z=S(N);const _=new x_;_.setFromCamera(z,o),_.intersectObjects([c],!0)[0].object.material.color.set("red")}function S(N){let z={x:0,y:0};const _=P(N);return z.x=_.x/f.width*2-1,z.y=_.y/f.height*-2+1,z}function P(N){const z=f.getBoundingClientRect();return{x:(N.clientX-z.left)*f.width/z.width,y:(N.clientY-z.top)*f.height/z.height}}}),(e,t)=>(tt(),_t("div",_Re))}},bRe={id:"webgl"},wRe={__name:"BesselCurve",setup(n){let e=5;const t={北京:{name:"北京",longitude:116.3,latitude:39.9},上海:{name:"上海",longitude:121,latitude:31},西安:{name:"西安",longitude:108,latitude:34},成都:{name:"成都",longitude:103,latitude:31},乌鲁木齐:{name:"乌鲁木齐",longitude:87,latitude:43},拉萨:{name:"拉萨",longitude:91.06,latitude:29.36},广州:{name:"广州",longitude:113,latitude:23.06},哈尔滨:{name:"哈尔滨",longitude:127,latitude:45.5},沈阳:{name:"沈阳",longitude:123.43,latitude:41.8},武汉:{name:"武汉",longitude:114,latitude:30},海口:{name:"海口",longitude:110,latitude:20.03},纽约:{name:"纽约",longitude:-74.5,latitude:40.5},伦敦:{name:"伦敦",longitude:.1,latitude:51.3},巴黎:{name:"巴黎",longitude:2.2,latitude:48.5},开普敦:{name:"开普敦",longitude:18.25,latitude:-33.5},悉尼:{name:"悉尼",longitude:151.1,latitude:-33.51},东京:{name:"东京",longitude:139.69,latitude:35.69},里约热内卢:{name:"里约热内卢",longitude:-43.11,latitude:-22.54}},i=[{from:"北京",to:["上海","西安","成都","乌鲁木齐","拉萨","广州","哈尔滨","沈阳","武汉","海口"],color:15732480},{from:"悉尼",to:["北京","纽约","开普敦","里约热内卢"],color:908765},{from:"纽约",to:["伦敦","巴黎","悉尼","东京"],color:16715760}];return Bt(()=>{const r=window.innerWidth,s=window.innerHeight,o=document.querySelector("#webgl"),a=new cn,c=new lt(45,r/s,1,1e4);c.position.set(-4,10,-13),c.lookAt(0,3,0),a.add(c);const l=new lr(e,100,100),u=new un({map:new At().load("/models/earth2.jpg"),transparent:!0}),h=new qe(l,u);a.add(h);const f=new Vr({map:new At().load("/models/earth_glow.png")}),d=new _h(f);d.scale.set(15.5,15.5,1),a.add(d);const p=new tn;let{waveMeshArr:v,pointMeshArr:y,meshArr:g}=LLe(5,t);for(let x=0;x<v.length;x++)p.add(v[x]),p.add(y[x]),p.add(g[x]);a.add(p),new jn().load("/models/chinaJson.json",function(x){let T=JSON.parse(x);const A=PLe(e,T);a.add(A)});const w=new tn,b=[];i.forEach(x=>{x.to.forEach(T=>{const A=$h(e,t[x.from].longitude,t[x.from].latitude),M=$h(e,t[T].longitude,t[T].latitude),{line:L,curve:I}=ALe(new te(A.x,A.y,A.z),new te(M.x,M.y,M.z),x.color);w.add(L),b.push(I.getPoints(100))})}),a.add(w);const E=new tn;for(let x=0;x<b.length;x++){let T=new lr(.05,1,.03),A=new si({color:65280,transparent:!0,side:Rn,depthWrite:!1}),M=new qe(T,A);E.add(M)}a.add(E);const S=new wa(13421772,1.1);a.add(S);const P=new jt({antialias:!0,logarithmicDepthBuffer:!0});P.setSize(r,s),P.setPixelRatio(window.devicePixelRatio),o.appendChild(P.domElement);const N=new rn(c,P.domElement);N.autoRotateSpeed=.5;let z=0;const _=()=>{v&&RLe(v),E.children.forEach((x,T)=>{const A=b[T][z];x.position.set(A.x,A.y,A.z)}),z+=1,z>100&&(z=0),P.render(a,c),requestAnimationFrame(_)};_(),window.addEventListener("resize",()=>{c.aspect=r/s,c.updateProjectionMatrix(),P.setSize(r,s),P.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(r,s)=>(tt(),_t("div",bRe))}},MRe={class:"3d",id:"d"},SRe={__name:"index",props:{message:String},setup(n){const e=n,t={Easy3D:ube,VR:fbe,VR2:Abe,Points:Fbe,Tag:Bbe,SolarSystem:Ube,Space:Gbe,ExternalModel:mwe,TreeModel:vwe,Shadow:_we,MoveBall:bwe,Roam:MLe,FlyLine:TLe,FlyLine2:DLe,Curve:OLe,ArcCurve:NLe,ChinaMap:xRe,BesselCurve:wRe},i=H3();return kr(()=>e.message,r=>{i.value=t[r]},{immediate:!0}),(r,s)=>(tt(),_t("div",MRe,[(tt(),vs(zv(i.value)))]))}},ERe=Io(SRe,[["__scopeId","data-v-fe63d720"]]),XC=n=>(Dy("data-v-7405c654"),n=n(),Fy(),n),TRe=XC(()=>Tn("div",{id:"layout"},null,-1)),ARe={class:"nav"},CRe=XC(()=>Tn("div",null,"白云的笔",-1)),LRe={key:0,class:"menu"},RRe=["onClick"],PRe={class:"title-1"},IRe={class:"name"},DRe={key:2,class:"title-2"},FRe=["onClick"],ORe={key:1,class:"text"},kRe={key:2,class:"content"},NRe={__name:"index",setup(n){const e=$n({openNav:!0,key:"D",message:"FlyLine2",data:LB}),t={Vue:DB,React:NB,Three:cbe,D:ERe},i=()=>{e.openNav=!e.openNav},r=o=>{e.data.forEach(a=>{a.key===o.key?a.open=!a.open:a.open=!1}),e.key=o.key,o.child&&(e.message=o.child[0].key)},s=(o,a)=>{console.log(o,a),e.key=o,e.message=a};return Bt(()=>{const o=window.innerWidth,a=window.innerHeight,c=document.querySelector("#layout"),l=new cn,u=new lt(45,o/a,300,5e3);u.position.set(0,0,1200),l.add(u);const h=new Ke,f=[];for(let g=0;g<5e3;g++){const m=Ue.randFloatSpread(2e3),w=Ue.randFloatSpread(2e3),b=Ue.randFloatSpread(2e3);f.push(m,w,b)}h.setAttribute("position",new We(f,3));const d=new cr({color:65535,size:3,sizeAttenuation:!0,depthWrite:!1,blending:pa}),p=new _a(h,d);l.add(p);const v=new jt({antialias:!0});v.setSize(o,a),c.appendChild(v.domElement);const y=()=>{v.render(l,u),p.rotation.y+=1e-4,requestAnimationFrame(y)};y(),window.addEventListener("resize",()=>{u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight),v.setPixelRatio(Math.min(window.devicePixelRatio,2))})}),(o,a)=>(tt(),_t(on,null,[TRe,Tn("div",ARe,[CRe,Tn("div",{onClick:i},[e.openNav?(tt(),vs(ea(yI),{key:0})):(tt(),vs(ea(pI),{key:1}))])]),e.openNav?(tt(),_t("div",LRe,[(tt(!0),_t(on,null,Uv(e.data,c=>(tt(),_t("div",{class:rh("btn "+(e.key===c.key?"active":"")),key:c.key,onClick:sb(l=>r(c),["stop"])},[Tn("div",PRe,[Ce(ea(HP)),Tn("span",IRe,Dv(c.title),1),c.open?(tt(),vs(ea($P),{key:0})):(tt(),vs(ea(wI),{key:1})),c.open?(tt(),_t("div",DRe,[(tt(!0),_t(on,null,Uv(c.child,l=>(tt(),_t("div",{class:rh("btn2 "+(e.message===l.key?"active2":"")),key:l.key,onClick:sb(u=>s(c.key,l.key),["stop"])},[Tn("span",null,Dv(l.title),1)],10,FRe))),128))])):pf("",!0)])],10,RRe))),128))])):pf("",!0),e.key!=="D"?(tt(),_t("div",ORe,[(tt(),vs(zv(t[e.key]),{message:e.message},null,8,["message"]))])):pf("",!0),e.key==="D"?(tt(),_t("div",kRe,[(tt(),vs(zv(t[e.key]),{message:e.message},null,8,["message"]))])):pf("",!0)],64))}},BRe=Io(NRe,[["__scopeId","data-v-7405c654"]]),zRe={__name:"App",setup(n){return(e,t)=>(tt(),vs(BRe))}},URe=CR(zRe);URe.mount("#app")});export default HRe();
